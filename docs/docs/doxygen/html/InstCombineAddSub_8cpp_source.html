<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: lib/Transforms/InstCombine/InstCombineAddSub.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LLVM
   &#160;<span id="projectnumber">17.0.0git</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_a72932e0778af28115095468f6286ff8.html">Transforms</a></li><li class="navelem"><a class="el" href="dir_99567d9c0c7f3685f25b19ecc341a865.html">InstCombine</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">InstCombineAddSub.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="InstCombineAddSub_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===- InstCombineAddSub.cpp ------------------------------------*- C++ -*-===//</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// See https://llvm.org/LICENSE.txt for license information.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// This file implements the visit functions for add, fadd, sub, and fsub.</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160; </div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InstCombineInternal_8h.html">InstCombineInternal.h</a>&quot;</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="APFloat_8h.html">llvm/ADT/APFloat.h</a>&quot;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="APInt_8h.html">llvm/ADT/APInt.h</a>&quot;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="STLExtras_8h.html">llvm/ADT/STLExtras.h</a>&quot;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallVector_8h.html">llvm/ADT/SmallVector.h</a>&quot;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InstructionSimplify_8h.html">llvm/Analysis/InstructionSimplify.h</a>&quot;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ValueTracking_8h.html">llvm/Analysis/ValueTracking.h</a>&quot;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Constant_8h.html">llvm/IR/Constant.h</a>&quot;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Constants_8h.html">llvm/IR/Constants.h</a>&quot;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InstrTypes_8h.html">llvm/IR/InstrTypes.h</a>&quot;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IR_2Instruction_8h.html">llvm/IR/Instruction.h</a>&quot;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Instructions_8h.html">llvm/IR/Instructions.h</a>&quot;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Operator_8h.html">llvm/IR/Operator.h</a>&quot;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="PatternMatch_8h.html">llvm/IR/PatternMatch.h</a>&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Type_8h.html">llvm/IR/Type.h</a>&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Value_8h.html">llvm/IR/Value.h</a>&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AlignOf_8h.html">llvm/Support/AlignOf.h</a>&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Casting_8h.html">llvm/Support/Casting.h</a>&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="KnownBits_8h.html">llvm/Support/KnownBits.h</a>&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InstCombiner_8h.html">llvm/Transforms/InstCombine/InstCombiner.h</a>&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &lt;cassert&gt;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &lt;utility&gt;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160; </div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="keyword">using namespace </span>PatternMatch;</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160; </div>
<div class="line"><a name="l00039"></a><span class="lineno"><a class="line" href="InstCombineAddSub_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">   39</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;instcombine&quot;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160; </div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="keyword">namespace </span>{</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment">  /// Class representing coefficient of floating-point addend.</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="comment">  /// This class needs to be highly efficient, which is especially true for</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment">  /// the constructor. As of I write this comment, the cost of the default</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="comment">  /// constructor is merely 4-byte-store-zero (Assuming compiler is able to</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment">  /// perform write-merging).</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment">  ///</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment"></span>  <span class="keyword">class </span>FAddendCoef {</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;  <span class="keyword">public</span>:</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <span class="comment">// The constructor has to initialize a APFloat, which is unnecessary for</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    <span class="comment">// most addends which have coefficient either 1 or -1. So, the constructor</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <span class="comment">// is expensive. In order to avoid the cost of the constructor, we should</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <span class="comment">// reuse some instances whenever possible. The pre-created instances</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <span class="comment">// FAddCombine::Add[0-5] embodies this idea.</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    FAddendCoef() = <span class="keywordflow">default</span>;</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    ~FAddendCoef();</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160; </div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <span class="comment">// If possible, don&#39;t define operator+/operator- etc because these</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <span class="comment">// operators inevitably call FAddendCoef&#39;s constructor which is not cheap.</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <span class="keywordtype">void</span> operator=(<span class="keyword">const</span> FAddendCoef &amp;A);</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="namespacellvm.html#a0068da90e0fe51c9645b75e2a2235dc1">operator+=</a>(<span class="keyword">const</span> FAddendCoef &amp;A);</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <span class="keywordtype">void</span> operator*=(<span class="keyword">const</span> FAddendCoef &amp;<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>);</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160; </div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="lib_2Target_2X86_2README_8txt.html#a9a315d042512705500b545a6c6acb2bd">set</a>(<span class="keywordtype">short</span> <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!insaneIntVal(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) &amp;&amp; <span class="stringliteral">&quot;Insane coefficient&quot;</span>);</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;      IsFp = <span class="keyword">false</span>; <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a3a7597ca475c0fcf10856ef36351d1ac">IntVal</a> = <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    }</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160; </div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="lib_2Target_2X86_2README_8txt.html#a9a315d042512705500b545a6c6acb2bd">set</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1APFloat.html">APFloat</a>&amp; <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160; </div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <span class="keywordtype">void</span> negate();</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160; </div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="Lint_8cpp.html#a45005634b54e2126cb3e6ec0dbc9ade4">isZero</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a1a1e51a5952c3afa00875df90e7ae6f8">isInt</a>() ? !<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a3a7597ca475c0fcf10856ef36351d1ac">IntVal</a> : getFpVal().isZero(); }</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *getValue(<a class="code" href="classllvm_1_1Type.html">Type</a> *) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160; </div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <span class="keywordtype">bool</span> isOne()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a1a1e51a5952c3afa00875df90e7ae6f8">isInt</a>() &amp;&amp; <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a3a7597ca475c0fcf10856ef36351d1ac">IntVal</a> == 1; }</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="keywordtype">bool</span> isTwo()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a1a1e51a5952c3afa00875df90e7ae6f8">isInt</a>() &amp;&amp; <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a3a7597ca475c0fcf10856ef36351d1ac">IntVal</a> == 2; }</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <span class="keywordtype">bool</span> isMinusOne()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a1a1e51a5952c3afa00875df90e7ae6f8">isInt</a>() &amp;&amp; <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a3a7597ca475c0fcf10856ef36351d1ac">IntVal</a> == -1; }</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <span class="keywordtype">bool</span> isMinusTwo()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a1a1e51a5952c3afa00875df90e7ae6f8">isInt</a>() &amp;&amp; <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a3a7597ca475c0fcf10856ef36351d1ac">IntVal</a> == -2; }</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160; </div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  <span class="keyword">private</span>:</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <span class="keywordtype">bool</span> insaneIntVal(<span class="keywordtype">int</span> V) { <span class="keywordflow">return</span> V &gt; 4 || V &lt; -4; }</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160; </div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <a class="code" href="classllvm_1_1APFloat.html">APFloat</a> *getFpValPtr() { <span class="keywordflow">return</span> <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="classllvm_1_1APFloat.html">APFloat</a> *<span class="keyword">&gt;</span>(&amp;FpValBuf); }</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160; </div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1APFloat.html">APFloat</a> *getFpValPtr()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span><a class="code" href="classllvm_1_1APFloat.html">APFloat</a> *<span class="keyword">&gt;</span>(&amp;FpValBuf);</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    }</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160; </div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1APFloat.html">APFloat</a> &amp;getFpVal()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(IsFp &amp;&amp; BufHasFpVal &amp;&amp; <span class="stringliteral">&quot;Incorret state&quot;</span>);</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;      <span class="keywordflow">return</span> *getFpValPtr();</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    }</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160; </div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <a class="code" href="classllvm_1_1APFloat.html">APFloat</a> &amp;getFpVal() {</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(IsFp &amp;&amp; BufHasFpVal &amp;&amp; <span class="stringliteral">&quot;Incorret state&quot;</span>);</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;      <span class="keywordflow">return</span> *getFpValPtr();</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    }</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160; </div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="namespacellvm.html#a1a1e51a5952c3afa00875df90e7ae6f8">isInt</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> !IsFp; }</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160; </div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="comment">// If the coefficient is represented by an integer, promote it to a</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <span class="comment">// floating point.</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <span class="keywordtype">void</span> convertToFpType(<span class="keyword">const</span> <a class="code" href="structllvm_1_1fltSemantics.html">fltSemantics</a> &amp;Sem);</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160; </div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="comment">// Construct an APFloat from a signed integer.</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="comment">// TODO: We should get rid of this function when APFloat can be constructed</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <span class="comment">//       from an *SIGNED* integer.</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <a class="code" href="classllvm_1_1APFloat.html">APFloat</a> createAPFloatFromInt(<span class="keyword">const</span> <a class="code" href="structllvm_1_1fltSemantics.html">fltSemantics</a> &amp;Sem, <span class="keywordtype">int</span> Val);</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160; </div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <span class="keywordtype">bool</span> IsFp = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160; </div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <span class="comment">// True iff FpValBuf contains an instance of APFloat.</span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <span class="keywordtype">bool</span> BufHasFpVal = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160; </div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="comment">// The integer coefficient of an individual addend is either 1 or -1,</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <span class="comment">// and we try to simplify at most 4 addends from neighboring at most</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <span class="comment">// two instructions. So the range of &lt;IntVal&gt; falls in [-4, 4]. APInt</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <span class="comment">// is overkill of this end.</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <span class="keywordtype">short</span> <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a3a7597ca475c0fcf10856ef36351d1ac">IntVal</a> = 0;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160; </div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <a class="code" href="structllvm_1_1AlignedCharArrayUnion.html">AlignedCharArrayUnion&lt;APFloat&gt;</a> FpValBuf;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  };</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="comment">  /// FAddend is used to represent floating-point addend. An addend is</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="comment">  /// represented as &lt;C, V&gt;, where the V is a symbolic value, and C is a</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="comment">  /// constant coefficient. A constant addend is represented as &lt;C, 0&gt;.</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="comment"></span>  <span class="keyword">class </span>FAddend {</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  <span class="keyword">public</span>:</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    FAddend() = <span class="keywordflow">default</span>;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160; </div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="namespacellvm.html#a0068da90e0fe51c9645b75e2a2235dc1">operator+=</a>(<span class="keyword">const</span> FAddend &amp;<a class="code" href="classT.html">T</a>) {</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((Val == <a class="code" href="classT.html">T</a>.Val) &amp;&amp; <span class="stringliteral">&quot;Symbolic-values disagree&quot;</span>);</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;      Coeff += <a class="code" href="classT.html">T</a>.Coeff;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    }</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160; </div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *getSymVal()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> Val; }</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <span class="keyword">const</span> FAddendCoef &amp;getCoef()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> Coeff; }</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160; </div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="AMDGPUInstructionSelector_8cpp.html#a6dee2d9e1e2a288de903228075ac71de">isConstant</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> Val == <span class="keyword">nullptr</span>; }</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="Lint_8cpp.html#a45005634b54e2126cb3e6ec0dbc9ade4">isZero</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> Coeff.isZero(); }</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160; </div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="lib_2Target_2X86_2README_8txt.html#a9a315d042512705500b545a6c6acb2bd">set</a>(<span class="keywordtype">short</span> Coefficient, <a class="code" href="classllvm_1_1Value.html">Value</a> *V) {</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;      Coeff.set(Coefficient);</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;      Val = V;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    }</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="lib_2Target_2X86_2README_8txt.html#a9a315d042512705500b545a6c6acb2bd">set</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1APFloat.html">APFloat</a> &amp;Coefficient, <a class="code" href="classllvm_1_1Value.html">Value</a> *V) {</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;      Coeff.set(Coefficient);</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;      Val = V;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    }</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="lib_2Target_2X86_2README_8txt.html#a9a315d042512705500b545a6c6acb2bd">set</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1ConstantFP.html">ConstantFP</a> *Coefficient, <a class="code" href="classllvm_1_1Value.html">Value</a> *V) {</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;      Coeff.set(Coefficient-&gt;<a class="code" href="classllvm_1_1ConstantFP.html#a7faf4e0334b77ab527e4b45e3a1f4d65">getValueAPF</a>());</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;      Val = V;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    }</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160; </div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <span class="keywordtype">void</span> negate() { Coeff.negate(); }</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="comment">    /// Drill down the U-D chain one step to find the definition of V, and</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="comment">    /// try to break the definition into one or two addends.</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="comment"></span>    <span class="keyword">static</span> <span class="keywordtype">unsigned</span> drillValueDownOneStep(<a class="code" href="classllvm_1_1Value.html">Value</a>* V, FAddend &amp;A0, FAddend &amp;A1);</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="comment">    /// Similar to FAddend::drillDownOneStep() except that the value being</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="comment">    /// splitted is the addend itself.</span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="comment"></span>    <span class="keywordtype">unsigned</span> drillAddendDownOneStep(FAddend &amp;Addend0, FAddend &amp;Addend1) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160; </div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;  <span class="keyword">private</span>:</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="keywordtype">void</span> Scale(<span class="keyword">const</span> FAddendCoef&amp; ScaleAmt) { Coeff *= ScaleAmt; }</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160; </div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="comment">// This addend has the value of &quot;Coeff * Val&quot;.</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Val = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    FAddendCoef Coeff;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  };</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="comment">  /// FAddCombine is the class for optimizing an unsafe fadd/fsub along</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="comment">  /// with its neighboring at most two instructions.</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="comment">  ///</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="comment"></span>  <span class="keyword">class </span>FAddCombine {</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;  <span class="keyword">public</span>:</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    FAddCombine(<a class="code" href="classllvm_1_1IRBuilder.html">InstCombiner::BuilderTy</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>) : <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>) {}</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160; </div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="HexagonBitSimplify_8cpp.html#aa56209f617200c772b32fea2947178a7">simplify</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eaf552e181879ad14956985859308d77d9">FAdd</a>);</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160; </div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  <span class="keyword">private</span>:</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <span class="keyword">using</span> AddendVect = <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;const FAddend *, 4&gt;</a>;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160; </div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *simplifyFAdd(AddendVect&amp; V, <span class="keywordtype">unsigned</span> InstrQuota);</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="comment">    /// Convert given addend to a Value</span></div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="comment"></span>    <a class="code" href="classllvm_1_1Value.html">Value</a> *createAddendVal(<span class="keyword">const</span> FAddend &amp;A, <span class="keywordtype">bool</span>&amp; NeedNeg);</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="comment">    /// Return the number of instructions needed to emit the N-ary addition.</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="comment"></span>    <span class="keywordtype">unsigned</span> calcInstrNumber(<span class="keyword">const</span> AddendVect&amp; Vect);</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160; </div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *createFSub(<a class="code" href="classllvm_1_1Value.html">Value</a> *Opnd0, <a class="code" href="classllvm_1_1Value.html">Value</a> *Opnd1);</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *createFAdd(<a class="code" href="classllvm_1_1Value.html">Value</a> *Opnd0, <a class="code" href="classllvm_1_1Value.html">Value</a> *Opnd1);</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *createFMul(<a class="code" href="classllvm_1_1Value.html">Value</a> *Opnd0, <a class="code" href="classllvm_1_1Value.html">Value</a> *Opnd1);</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *createFNeg(<a class="code" href="classllvm_1_1Value.html">Value</a> *V);</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *createNaryFAdd(<span class="keyword">const</span> AddendVect&amp; Opnds, <span class="keywordtype">unsigned</span> InstrQuota);</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <span class="keywordtype">void</span> createInstPostProc(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *NewInst, <span class="keywordtype">bool</span> NoNumber = <span class="keyword">false</span>);</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160; </div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;     <span class="comment">// Debugging stuff are clustered here.</span></div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;<span class="preprocessor">    #ifndef NDEBUG</span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;      <span class="keywordtype">unsigned</span> CreateInstrNum;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;      <span class="keywordtype">void</span> initCreateInstNum() { CreateInstrNum = 0; }</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;      <span class="keywordtype">void</span> incCreateInstNum() { CreateInstrNum++; }</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="preprocessor">    #else</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;      <span class="keywordtype">void</span> initCreateInstNum() {}</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;      <span class="keywordtype">void</span> incCreateInstNum() {}</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160; </div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <a class="code" href="classllvm_1_1IRBuilder.html">InstCombiner::BuilderTy</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>;</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Instr = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;  };</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160; </div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;} <span class="comment">// end anonymous namespace</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160; </div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;<span class="comment">// Implementation of</span></div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="comment">//    {FAddendCoef, FAddend, FAddition, FAddCombine}.</span></div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;FAddendCoef::~FAddendCoef() {</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  <span class="keywordflow">if</span> (BufHasFpVal)</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    getFpValPtr()-&gt;~APFloat();</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;}</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160; </div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="keywordtype">void</span> <a class="code" href="lib_2Target_2X86_2README_8txt.html#a9a315d042512705500b545a6c6acb2bd">FAddendCoef::set</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1APFloat.html">APFloat</a>&amp; <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  <a class="code" href="classllvm_1_1APFloat.html">APFloat</a> *<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> = getFpValPtr();</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160; </div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a1a1e51a5952c3afa00875df90e7ae6f8">isInt</a>()) {</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <span class="comment">// As the buffer is meanless byte stream, we cannot call</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <span class="comment">// APFloat::operator=().</span></div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <span class="keyword">new</span>(<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>) <a class="code" href="namespacellvm_1_1lltok.html#af353621f14cb4b4b3af5ffaff84076b1a56697632782c9ab774d6c132a955674a">APFloat</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;  } <span class="keywordflow">else</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    *<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> = <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160; </div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;  IsFp = BufHasFpVal = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;}</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160; </div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;<span class="keywordtype">void</span> FAddendCoef::convertToFpType(<span class="keyword">const</span> <a class="code" href="structllvm_1_1fltSemantics.html">fltSemantics</a> &amp;Sem) {</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm.html#a1a1e51a5952c3afa00875df90e7ae6f8">isInt</a>())</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160; </div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  <a class="code" href="classllvm_1_1APFloat.html">APFloat</a> *<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> = getFpValPtr();</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a3a7597ca475c0fcf10856ef36351d1ac">IntVal</a> &gt; 0)</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <span class="keyword">new</span>(<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>) <a class="code" href="namespacellvm_1_1lltok.html#af353621f14cb4b4b3af5ffaff84076b1a56697632782c9ab774d6c132a955674a">APFloat</a>(Sem, <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a3a7597ca475c0fcf10856ef36351d1ac">IntVal</a>);</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;  <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <span class="keyword">new</span>(<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>) <a class="code" href="namespacellvm_1_1lltok.html#af353621f14cb4b4b3af5ffaff84076b1a56697632782c9ab774d6c132a955674a">APFloat</a>(Sem, 0 - <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a3a7597ca475c0fcf10856ef36351d1ac">IntVal</a>);</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>-&gt;changeSign();</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  }</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  IsFp = BufHasFpVal = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;}</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160; </div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;<a class="code" href="classllvm_1_1APFloat.html">APFloat</a> FAddendCoef::createAPFloatFromInt(<span class="keyword">const</span> <a class="code" href="structllvm_1_1fltSemantics.html">fltSemantics</a> &amp;Sem, <span class="keywordtype">int</span> Val) {</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;  <span class="keywordflow">if</span> (Val &gt;= 0)</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1lltok.html#af353621f14cb4b4b3af5ffaff84076b1a56697632782c9ab774d6c132a955674a">APFloat</a>(Sem, Val);</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160; </div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;  <a class="code" href="classllvm_1_1APFloat.html">APFloat</a> <a class="code" href="classT.html">T</a>(Sem, 0 - Val);</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  <a class="code" href="classT.html">T</a>.changeSign();</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160; </div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classT.html">T</a>;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;}</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160; </div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<span class="keywordtype">void</span> FAddendCoef::operator=(<span class="keyword">const</span> FAddendCoef &amp;That) {</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;  <span class="keywordflow">if</span> (That.isInt())</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <a class="code" href="lib_2Target_2X86_2README_8txt.html#a9a315d042512705500b545a6c6acb2bd">set</a>(That.IntVal);</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <a class="code" href="lib_2Target_2X86_2README_8txt.html#a9a315d042512705500b545a6c6acb2bd">set</a>(That.getFpVal());</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;}</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160; </div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacellvm.html#a0068da90e0fe51c9645b75e2a2235dc1">FAddendCoef::operator+=</a>(<span class="keyword">const</span> FAddendCoef &amp;That) {</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;  <a class="code" href="namespacellvm.html#ab7af0c09900daed62bbdb01dba180f7c">RoundingMode</a> RndMode = <a class="code" href="namespacellvm.html#ab7af0c09900daed62bbdb01dba180f7ca44467144e3b6bdac3e85ef6f90e7d832">RoundingMode::NearestTiesToEven</a>;</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a1a1e51a5952c3afa00875df90e7ae6f8">isInt</a>() == That.isInt()) {</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a1a1e51a5952c3afa00875df90e7ae6f8">isInt</a>())</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;      <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a3a7597ca475c0fcf10856ef36351d1ac">IntVal</a> += That.IntVal;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;      getFpVal().add(That.getFpVal(), RndMode);</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;  }</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160; </div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a1a1e51a5952c3afa00875df90e7ae6f8">isInt</a>()) {</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1APFloat.html">APFloat</a> &amp;<a class="code" href="classT.html">T</a> = That.getFpVal();</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    convertToFpType(<a class="code" href="classT.html">T</a>.getSemantics());</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    getFpVal().add(<a class="code" href="classT.html">T</a>, RndMode);</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;  }</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160; </div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;  <a class="code" href="classllvm_1_1APFloat.html">APFloat</a> &amp;<a class="code" href="classT.html">T</a> = getFpVal();</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;  <a class="code" href="classT.html">T</a>.add(createAPFloatFromInt(<a class="code" href="classT.html">T</a>.getSemantics(), That.IntVal), RndMode);</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;}</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160; </div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;<span class="keywordtype">void</span> FAddendCoef::operator*=(<span class="keyword">const</span> FAddendCoef &amp;That) {</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;  <span class="keywordflow">if</span> (That.isOne())</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160; </div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  <span class="keywordflow">if</span> (That.isMinusOne()) {</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    negate();</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;  }</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160; </div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a1a1e51a5952c3afa00875df90e7ae6f8">isInt</a>() &amp;&amp; That.isInt()) {</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <span class="keywordtype">int</span> Res = <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a3a7597ca475c0fcf10856ef36351d1ac">IntVal</a> * (<a class="code" href="lib_2Target_2README_8txt.html#a3217063f680fa8e35dea3c59b6e52b18">int</a>)That.IntVal;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!insaneIntVal(Res) &amp;&amp; <span class="stringliteral">&quot;Insane int value&quot;</span>);</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a3a7597ca475c0fcf10856ef36351d1ac">IntVal</a> = Res;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;  }</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160; </div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;  <span class="keyword">const</span> <a class="code" href="structllvm_1_1fltSemantics.html">fltSemantics</a> &amp;Semantic =</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <a class="code" href="namespacellvm.html#a1a1e51a5952c3afa00875df90e7ae6f8">isInt</a>() ? That.getFpVal().getSemantics() : getFpVal().getSemantics();</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160; </div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a1a1e51a5952c3afa00875df90e7ae6f8">isInt</a>())</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    convertToFpType(Semantic);</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;  <a class="code" href="classllvm_1_1APFloat.html">APFloat</a> &amp;F0 = getFpVal();</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160; </div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;  <span class="keywordflow">if</span> (That.isInt())</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    F0.<a class="code" href="classllvm_1_1APFloat.html#a82567bb6632fa71c7c727b9464368173">multiply</a>(createAPFloatFromInt(Semantic, That.IntVal),</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;                <a class="code" href="structllvm_1_1APFloatBase.html#a22ed74f1ed33c4d33f524a650ea536a6">APFloat::rmNearestTiesToEven</a>);</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    F0.<a class="code" href="classllvm_1_1APFloat.html#a82567bb6632fa71c7c727b9464368173">multiply</a>(That.getFpVal(), <a class="code" href="structllvm_1_1APFloatBase.html#a22ed74f1ed33c4d33f524a650ea536a6">APFloat::rmNearestTiesToEven</a>);</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;}</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160; </div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;<span class="keywordtype">void</span> FAddendCoef::negate() {</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a1a1e51a5952c3afa00875df90e7ae6f8">isInt</a>())</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a3a7597ca475c0fcf10856ef36351d1ac">IntVal</a> = 0 - <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a3a7597ca475c0fcf10856ef36351d1ac">IntVal</a>;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    getFpVal().changeSign();</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;}</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160; </div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;<a class="code" href="classllvm_1_1Value.html">Value</a> *FAddendCoef::getValue(<a class="code" href="classllvm_1_1Type.html">Type</a> *Ty)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a1a1e51a5952c3afa00875df90e7ae6f8">isInt</a>() ?</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    <a class="code" href="classllvm_1_1ConstantFP.html#a5eb8f7a5d3cfdd127ad9db2e425e14eb">ConstantFP::get</a>(Ty, <span class="keywordtype">float</span>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a3a7597ca475c0fcf10856ef36351d1ac">IntVal</a>)) :</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    <a class="code" href="classllvm_1_1ConstantFP.html">ConstantFP</a>::<a class="code" href="namespacellvm.html#a73257f51950d9ea50955e3fb9c724a25">get</a>(Ty-&gt;getContext(), getFpVal());</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;}</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160; </div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;<span class="comment">// The definition of &lt;Val&gt;     Addends</span></div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;<span class="comment">// =========================================</span></div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;<span class="comment">//  A + B                     &lt;1, A&gt;, &lt;1,B&gt;</span></div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;<span class="comment">//  A - B                     &lt;1, A&gt;, &lt;1,B&gt;</span></div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;<span class="comment">//  0 - B                     &lt;-1, B&gt;</span></div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;<span class="comment">//  C * A,                    &lt;C, A&gt;</span></div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;<span class="comment">//  A + C                     &lt;1, A&gt; &lt;C, NULL&gt;</span></div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;<span class="comment">//  0 +/- 0                   &lt;0, NULL&gt; (corner case)</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;<span class="comment">// Legend: A and B are not constant, C is constant</span></div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;<span class="keywordtype">unsigned</span> FAddend::drillValueDownOneStep</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  (<a class="code" href="classllvm_1_1Value.html">Value</a> *Val, FAddend &amp;Addend0, FAddend &amp;Addend1) {</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;  <span class="keywordflow">if</span> (!Val || !(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = dyn_cast&lt;Instruction&gt;(Val)))</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160; </div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  <span class="keywordtype">unsigned</span> Opcode = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOpcode();</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160; </div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  <span class="keywordflow">if</span> (Opcode == Instruction::FAdd || Opcode == Instruction::FSub) {</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    <a class="code" href="classllvm_1_1ConstantFP.html">ConstantFP</a> *C0, *<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>;</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Opnd0 = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(0);</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Opnd1 = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(1);</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    <span class="keywordflow">if</span> ((C0 = dyn_cast&lt;ConstantFP&gt;(Opnd0)) &amp;&amp; C0-&gt;<a class="code" href="classllvm_1_1ConstantFP.html#ae46c23ed39de6de6cf9ec6e57755e4c5">isZero</a>())</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;      Opnd0 = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160; </div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a> = dyn_cast&lt;ConstantFP&gt;(Opnd1)) &amp;&amp; <a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>-&gt;isZero())</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;      Opnd1 = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160; </div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    <span class="keywordflow">if</span> (Opnd0) {</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;      <span class="keywordflow">if</span> (!C0)</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;        Addend0.set(1, Opnd0);</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;        Addend0.set(C0, <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    }</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160; </div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    <span class="keywordflow">if</span> (Opnd1) {</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;      FAddend &amp;Addend = Opnd0 ? Addend1 : Addend0;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>)</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;        Addend.set(1, Opnd1);</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;        Addend.set(<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>, <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;      <span class="keywordflow">if</span> (Opcode == Instruction::FSub)</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        Addend.negate();</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    }</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160; </div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    <span class="keywordflow">if</span> (Opnd0 || Opnd1)</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;      <span class="keywordflow">return</span> Opnd0 &amp;&amp; Opnd1 ? 2 : 1;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160; </div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    <span class="comment">// Both operands are zero. Weird!</span></div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    Addend0.set(<a class="code" href="namespacellvm_1_1lltok.html#af353621f14cb4b4b3af5ffaff84076b1a56697632782c9ab774d6c132a955674a">APFloat</a>(C0-&gt;<a class="code" href="classllvm_1_1ConstantFP.html#a7faf4e0334b77ab527e4b45e3a1f4d65">getValueAPF</a>().<a class="code" href="classllvm_1_1APFloat.html#a037ff294d9d370e29651cbc99442a575">getSemantics</a>()), <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;  }</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160; </div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOpcode() == Instruction::FMul) {</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *V0 = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(0);</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *V1 = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(1);</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantFP.html">ConstantFP</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = dyn_cast&lt;ConstantFP&gt;(V0)) {</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;      Addend0.set(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, V1);</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;      <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    }</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160; </div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantFP.html">ConstantFP</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = dyn_cast&lt;ConstantFP&gt;(V1)) {</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;      Addend0.set(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, V0);</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;      <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    }</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;  }</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160; </div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;}</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160; </div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;<span class="comment">// Try to break *this* addend into two addends. e.g. Suppose this addend is</span></div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;<span class="comment">// &lt;2.3, V&gt;, and V = X + Y, by calling this function, we obtain two addends,</span></div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;<span class="comment">// i.e. &lt;2.3, X&gt; and &lt;2.3, Y&gt;.</span></div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;<span class="keywordtype">unsigned</span> FAddend::drillAddendDownOneStep</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;  (FAddend &amp;Addend0, FAddend &amp;Addend1)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="AMDGPUInstructionSelector_8cpp.html#a6dee2d9e1e2a288de903228075ac71de">isConstant</a>())</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160; </div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;  <span class="keywordtype">unsigned</span> BreakNum = FAddend::drillValueDownOneStep(Val, Addend0, Addend1);</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;  <span class="keywordflow">if</span> (!BreakNum || Coeff.isOne())</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    <span class="keywordflow">return</span> BreakNum;</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160; </div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;  Addend0.Scale(Coeff);</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160; </div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;  <span class="keywordflow">if</span> (BreakNum == 2)</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    Addend1.Scale(Coeff);</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160; </div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;  <span class="keywordflow">return</span> BreakNum;</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;}</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160; </div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="HexagonBitSimplify_8cpp.html#aa56209f617200c772b32fea2947178a7">FAddCombine::simplify</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;hasAllowReassoc() &amp;&amp; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;hasNoSignedZeros() &amp;&amp;</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;         <span class="stringliteral">&quot;Expected &#39;reassoc&#39;+&#39;nsz&#39; instruction&quot;</span>);</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160; </div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;  <span class="comment">// Currently we are not able to handle vector type.</span></div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getType()-&gt;isVectorTy())</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160; </div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOpcode() == Instruction::FAdd ||</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;          <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOpcode() == Instruction::FSub) &amp;&amp; <span class="stringliteral">&quot;Expect add/sub&quot;</span>);</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160; </div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;  <span class="comment">// Save the instruction before calling other member-functions.</span></div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;  Instr = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160; </div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;  FAddend Opnd0, Opnd1, Opnd0_0, Opnd0_1, Opnd1_0, Opnd1_1;</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160; </div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;  <span class="keywordtype">unsigned</span> OpndNum = FAddend::drillValueDownOneStep(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, Opnd0, Opnd1);</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160; </div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;  <span class="comment">// Step 1: Expand the 1st addend into Opnd0_0 and Opnd0_1.</span></div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;  <span class="keywordtype">unsigned</span> Opnd0_ExpNum = 0;</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;  <span class="keywordtype">unsigned</span> Opnd1_ExpNum = 0;</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160; </div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;  <span class="keywordflow">if</span> (!Opnd0.isConstant())</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    Opnd0_ExpNum = Opnd0.drillAddendDownOneStep(Opnd0_0, Opnd0_1);</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160; </div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;  <span class="comment">// Step 2: Expand the 2nd addend into Opnd1_0 and Opnd1_1.</span></div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;  <span class="keywordflow">if</span> (OpndNum == 2 &amp;&amp; !Opnd1.isConstant())</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    Opnd1_ExpNum = Opnd1.drillAddendDownOneStep(Opnd1_0, Opnd1_1);</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160; </div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;  <span class="comment">// Step 3: Try to optimize Opnd0_0 + Opnd0_1 + Opnd1_0 + Opnd1_1</span></div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;  <span class="keywordflow">if</span> (Opnd0_ExpNum &amp;&amp; Opnd1_ExpNum) {</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    AddendVect AllOpnds;</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    AllOpnds.push_back(&amp;Opnd0_0);</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    AllOpnds.push_back(&amp;Opnd1_0);</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    <span class="keywordflow">if</span> (Opnd0_ExpNum == 2)</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;      AllOpnds.push_back(&amp;Opnd0_1);</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    <span class="keywordflow">if</span> (Opnd1_ExpNum == 2)</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;      AllOpnds.push_back(&amp;Opnd1_1);</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160; </div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    <span class="comment">// Compute instruction quota. We should save at least one instruction.</span></div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    <span class="keywordtype">unsigned</span> InstQuota = 0;</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160; </div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *V0 = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(0);</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *V1 = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(1);</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    InstQuota = ((!isa&lt;Constant&gt;(V0) &amp;&amp; V0-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>()) &amp;&amp;</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;                 (!isa&lt;Constant&gt;(V1) &amp;&amp; V1-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>())) ? 2 : 1;</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160; </div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *R = simplifyFAdd(AllOpnds, InstQuota))</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;      <span class="keywordflow">return</span> R;</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;  }</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160; </div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;  <span class="keywordflow">if</span> (OpndNum != 2) {</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    <span class="comment">// The input instruction is : &quot;I=0.0 +/- V&quot;. If the &quot;V&quot; were able to be</span></div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    <span class="comment">// splitted into two addends, say &quot;V = X - Y&quot;, the instruction would have</span></div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    <span class="comment">// been optimized into &quot;I = Y - X&quot; in the previous steps.</span></div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    <span class="keyword">const</span> FAddendCoef &amp;<a class="code" href="namespacellvm_1_1WinEH.html#a1c8d8103d6b914c2ade85873cb97f6d9a7a86131338bf955e0a56311f264aa6aa">CE</a> = Opnd0.getCoef();</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1WinEH.html#a1c8d8103d6b914c2ade85873cb97f6d9a7a86131338bf955e0a56311f264aa6aa">CE</a>.isOne() ? Opnd0.getSymVal() : <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;  }</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160; </div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;  <span class="comment">// step 4: Try to optimize Opnd0 + Opnd1_0 [+ Opnd1_1]</span></div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;  <span class="keywordflow">if</span> (Opnd1_ExpNum) {</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    AddendVect AllOpnds;</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    AllOpnds.push_back(&amp;Opnd0);</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    AllOpnds.push_back(&amp;Opnd1_0);</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    <span class="keywordflow">if</span> (Opnd1_ExpNum == 2)</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;      AllOpnds.push_back(&amp;Opnd1_1);</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160; </div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *R = simplifyFAdd(AllOpnds, 1))</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;      <span class="keywordflow">return</span> R;</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;  }</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160; </div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;  <span class="comment">// step 5: Try to optimize Opnd1 + Opnd0_0 [+ Opnd0_1]</span></div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;  <span class="keywordflow">if</span> (Opnd0_ExpNum) {</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    AddendVect AllOpnds;</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    AllOpnds.push_back(&amp;Opnd1);</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    AllOpnds.push_back(&amp;Opnd0_0);</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    <span class="keywordflow">if</span> (Opnd0_ExpNum == 2)</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;      AllOpnds.push_back(&amp;Opnd0_1);</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160; </div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *R = simplifyFAdd(AllOpnds, 1))</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;      <span class="keywordflow">return</span> R;</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;  }</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160; </div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;}</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160; </div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;<a class="code" href="classllvm_1_1Value.html">Value</a> *FAddCombine::simplifyFAdd(AddendVect&amp; Addends, <span class="keywordtype">unsigned</span> InstrQuota) {</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;  <span class="keywordtype">unsigned</span> AddendNum = Addends.size();</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(AddendNum &lt;= 4 &amp;&amp; <span class="stringliteral">&quot;Too many addends&quot;</span>);</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160; </div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;  <span class="comment">// For saving intermediate results;</span></div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;  <span class="keywordtype">unsigned</span> NextTmpIdx = 0;</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;  FAddend TmpResult[3];</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160; </div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;  <span class="comment">// Simplified addends are placed &lt;SimpVect&gt;.</span></div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;  AddendVect SimpVect;</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160; </div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;  <span class="comment">// The outer loop works on one symbolic-value at a time. Suppose the input</span></div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;  <span class="comment">// addends are : &lt;a1, x&gt;, &lt;b1, y&gt;, &lt;a2, x&gt;, &lt;c1, z&gt;, &lt;b2, y&gt;, ...</span></div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;  <span class="comment">// The symbolic-values will be processed in this order: x, y, z.</span></div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> SymIdx = 0; SymIdx &lt; AddendNum; SymIdx++) {</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160; </div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    <span class="keyword">const</span> FAddend *ThisAddend = Addends[SymIdx];</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    <span class="keywordflow">if</span> (!ThisAddend) {</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;      <span class="comment">// This addend was processed before.</span></div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    }</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160; </div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Val = ThisAddend-&gt;getSymVal();</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160; </div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    <span class="comment">// If the resulting expr has constant-addend, this constant-addend is</span></div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    <span class="comment">// desirable to reside at the top of the resulting expression tree. Placing</span></div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    <span class="comment">// constant close to super-expr(s) will potentially reveal some</span></div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    <span class="comment">// optimization opportunities in super-expr(s). Here we do not implement</span></div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    <span class="comment">// this logic intentionally and rely on SimplifyAssociativeOrCommutative</span></div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    <span class="comment">// call later.</span></div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160; </div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    <span class="keywordtype">unsigned</span> StartIdx = SimpVect.size();</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    SimpVect.push_back(ThisAddend);</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160; </div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    <span class="comment">// The inner loop collects addends sharing same symbolic-value, and these</span></div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    <span class="comment">// addends will be later on folded into a single addend. Following above</span></div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    <span class="comment">// example, if the symbolic value &quot;y&quot; is being processed, the inner loop</span></div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    <span class="comment">// will collect two addends &quot;&lt;b1,y&gt;&quot; and &quot;&lt;b2,Y&gt;&quot;. These two addends will</span></div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    <span class="comment">// be later on folded into &quot;&lt;b1+b2, y&gt;&quot;.</span></div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> SameSymIdx = SymIdx + 1;</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;         SameSymIdx &lt; AddendNum; SameSymIdx++) {</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;      <span class="keyword">const</span> FAddend *<a class="code" href="classT.html">T</a> = Addends[SameSymIdx];</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classT.html">T</a> &amp;&amp; <a class="code" href="classT.html">T</a>-&gt;getSymVal() == Val) {</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;        <span class="comment">// Set null such that next iteration of the outer loop will not process</span></div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;        <span class="comment">// this addend again.</span></div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;        Addends[SameSymIdx] = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;        SimpVect.push_back(<a class="code" href="classT.html">T</a>);</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;      }</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    }</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160; </div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    <span class="comment">// If multiple addends share same symbolic value, fold them together.</span></div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    <span class="keywordflow">if</span> (StartIdx + 1 != SimpVect.size()) {</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;      FAddend &amp;<a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a> = TmpResult[NextTmpIdx ++];</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;      <a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a> = *SimpVect[StartIdx];</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> Idx = StartIdx + 1; Idx &lt; SimpVect.size(); Idx++)</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;        R += *SimpVect[Idx];</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160; </div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;      <span class="comment">// Pop all addends being folded and push the resulting folded addend.</span></div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;      SimpVect.resize(StartIdx);</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>.isZero()) {</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;        SimpVect.push_back(&amp;R);</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;      }</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    }</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;  }</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160; </div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((NextTmpIdx &lt;= <a class="code" href="lib_2Target_2README_8txt.html#a02def7c594e9f19ff247ed0bf33d1c30">std::size</a>(TmpResult) + 1) &amp;&amp; <span class="stringliteral">&quot;out-of-bound access&quot;</span>);</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160; </div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1ms__demangle.html#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>;</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;  <span class="keywordflow">if</span> (!SimpVect.empty())</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    <a class="code" href="namespacellvm_1_1ms__demangle.html#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a> = createNaryFAdd(SimpVect, InstrQuota);</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;  <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    <span class="comment">// The addition is folded to 0.0.</span></div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    <a class="code" href="namespacellvm_1_1ms__demangle.html#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a> = <a class="code" href="classllvm_1_1ConstantFP.html#a5eb8f7a5d3cfdd127ad9db2e425e14eb">ConstantFP::get</a>(Instr-&gt;getType(), 0.0);</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;  }</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160; </div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1ms__demangle.html#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>;</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;}</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160; </div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;<a class="code" href="classllvm_1_1Value.html">Value</a> *FAddCombine::createNaryFAdd</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;  (<span class="keyword">const</span> AddendVect &amp;Opnds, <span class="keywordtype">unsigned</span> InstrQuota) {</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!Opnds.empty() &amp;&amp; <span class="stringliteral">&quot;Expect at least one addend&quot;</span>);</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160; </div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;  <span class="comment">// Step 1: Check if the # of instructions needed exceeds the quota.</span></div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160; </div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;  <span class="keywordtype">unsigned</span> InstrNeeded = calcInstrNumber(Opnds);</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;  <span class="keywordflow">if</span> (InstrNeeded &gt; InstrQuota)</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160; </div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;  initCreateInstNum();</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160; </div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;  <span class="comment">// step 2: Emit the N-ary addition.</span></div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;  <span class="comment">// Note that at most three instructions are involved in Fadd-InstCombine: the</span></div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;  <span class="comment">// addition in question, and at most two neighboring instructions.</span></div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;  <span class="comment">// The resulting optimized addition should have at least one less instruction</span></div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;  <span class="comment">// than the original addition expression tree. This implies that the resulting</span></div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;  <span class="comment">// N-ary addition has at most two instructions, and we don&#39;t need to worry</span></div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;  <span class="comment">// about tree-height when constructing the N-ary addition.</span></div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160; </div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *LastVal = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;  <span class="keywordtype">bool</span> LastValNeedNeg = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160; </div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;  <span class="comment">// Iterate the addends, creating fadd/fsub using adjacent two addends.</span></div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> FAddend *Opnd : Opnds) {</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    <span class="keywordtype">bool</span> NeedNeg;</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *V = createAddendVal(*Opnd, NeedNeg);</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    <span class="keywordflow">if</span> (!LastVal) {</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;      LastVal = V;</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;      LastValNeedNeg = NeedNeg;</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;    }</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160; </div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;    <span class="keywordflow">if</span> (LastValNeedNeg == NeedNeg) {</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;      LastVal = createFAdd(LastVal, V);</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    }</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160; </div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    <span class="keywordflow">if</span> (LastValNeedNeg)</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;      LastVal = createFSub(V, LastVal);</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;      LastVal = createFSub(LastVal, V);</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160; </div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    LastValNeedNeg = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;  }</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160; </div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;  <span class="keywordflow">if</span> (LastValNeedNeg) {</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    LastVal = createFNeg(LastVal);</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;  }</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160; </div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(CreateInstrNum == InstrNeeded &amp;&amp;</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;         <span class="stringliteral">&quot;Inconsistent in instruction numbers&quot;</span>);</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160; </div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;  <span class="keywordflow">return</span> LastVal;</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;}</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160; </div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;<a class="code" href="classllvm_1_1Value.html">Value</a> *FAddCombine::createFSub(<a class="code" href="classllvm_1_1Value.html">Value</a> *Opnd0, <a class="code" href="classllvm_1_1Value.html">Value</a> *Opnd1) {</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateFSub(Opnd0, Opnd1);</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = dyn_cast&lt;Instruction&gt;(V))</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    createInstPostProc(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;  <span class="keywordflow">return</span> V;</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;}</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160; </div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;<a class="code" href="classllvm_1_1Value.html">Value</a> *FAddCombine::createFNeg(<a class="code" href="classllvm_1_1Value.html">Value</a> *V) {</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *NewV = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateFNeg(V);</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = dyn_cast&lt;Instruction&gt;(NewV))</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;    createInstPostProc(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <span class="keyword">true</span>); <span class="comment">// fneg&#39;s don&#39;t receive instruction numbers.</span></div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;  <span class="keywordflow">return</span> NewV;</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;}</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160; </div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;<a class="code" href="classllvm_1_1Value.html">Value</a> *FAddCombine::createFAdd(<a class="code" href="classllvm_1_1Value.html">Value</a> *Opnd0, <a class="code" href="classllvm_1_1Value.html">Value</a> *Opnd1) {</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateFAdd(Opnd0, Opnd1);</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = dyn_cast&lt;Instruction&gt;(V))</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    createInstPostProc(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;  <span class="keywordflow">return</span> V;</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;}</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160; </div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;<a class="code" href="classllvm_1_1Value.html">Value</a> *FAddCombine::createFMul(<a class="code" href="classllvm_1_1Value.html">Value</a> *Opnd0, <a class="code" href="classllvm_1_1Value.html">Value</a> *Opnd1) {</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateFMul(Opnd0, Opnd1);</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = dyn_cast&lt;Instruction&gt;(V))</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;    createInstPostProc(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;  <span class="keywordflow">return</span> V;</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;}</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160; </div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;<span class="keywordtype">void</span> FAddCombine::createInstPostProc(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *NewInstr, <span class="keywordtype">bool</span> NoNumber) {</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;  NewInstr-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae8f5bf5cc06f696b52c709677df00fbf">setDebugLoc</a>(Instr-&gt;getDebugLoc());</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160; </div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;  <span class="comment">// Keep track of the number of instruction created.</span></div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;  <span class="keywordflow">if</span> (!NoNumber)</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;    incCreateInstNum();</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160; </div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;  <span class="comment">// Propagate fast-math flags</span></div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;  NewInstr-&gt;<a class="code" href="classllvm_1_1Instruction.html#a5ca8aa62fa8b3fe5bc0e8fbe5d8b8b7a">setFastMathFlags</a>(Instr-&gt;getFastMathFlags());</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;}</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160; </div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;<span class="comment">// Return the number of instruction needed to emit the N-ary addition.</span></div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;<span class="comment">// NOTE: Keep this function in sync with createAddendVal().</span></div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;<span class="keywordtype">unsigned</span> FAddCombine::calcInstrNumber(<span class="keyword">const</span> AddendVect &amp;Opnds) {</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;  <span class="keywordtype">unsigned</span> OpndNum = Opnds.size();</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;  <span class="keywordtype">unsigned</span> InstrNeeded = OpndNum - 1;</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160; </div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;  <span class="comment">// Adjust the number of instructions needed to emit the N-ary add.</span></div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> FAddend *Opnd : Opnds) {</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    <span class="keywordflow">if</span> (Opnd-&gt;isConstant())</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160; </div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    <span class="comment">// The constant check above is really for a few special constant</span></div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;    <span class="comment">// coefficients.</span></div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    <span class="keywordflow">if</span> (isa&lt;UndefValue&gt;(Opnd-&gt;getSymVal()))</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160; </div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;    <span class="keyword">const</span> FAddendCoef &amp;<a class="code" href="namespacellvm_1_1WinEH.html#a1c8d8103d6b914c2ade85873cb97f6d9a7a86131338bf955e0a56311f264aa6aa">CE</a> = Opnd-&gt;getCoef();</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;    <span class="comment">// Let the addend be &quot;c * x&quot;. If &quot;c == +/-1&quot;, the value of the addend</span></div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;    <span class="comment">// is immediately available; otherwise, it needs exactly one instruction</span></div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    <span class="comment">// to evaluate the value.</span></div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1WinEH.html#a1c8d8103d6b914c2ade85873cb97f6d9a7a86131338bf955e0a56311f264aa6aa">CE</a>.isMinusOne() &amp;&amp; !<a class="code" href="namespacellvm_1_1WinEH.html#a1c8d8103d6b914c2ade85873cb97f6d9a7a86131338bf955e0a56311f264aa6aa">CE</a>.isOne())</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;      InstrNeeded++;</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;  }</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;  <span class="keywordflow">return</span> InstrNeeded;</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;}</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160; </div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;<span class="comment">// Input Addend        Value           NeedNeg(output)</span></div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;<span class="comment">// ================================================================</span></div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;<span class="comment">// Constant C          C               false</span></div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;<span class="comment">// &lt;+/-1, V&gt;           V               coefficient is -1</span></div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;<span class="comment">// &lt;2/-2, V&gt;          &quot;fadd V, V&quot;      coefficient is -2</span></div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;<span class="comment">// &lt;C, V&gt;             &quot;fmul V, C&quot;      false</span></div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;<span class="comment">// NOTE: Keep this function in sync with FAddCombine::calcInstrNumber.</span></div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;<a class="code" href="classllvm_1_1Value.html">Value</a> *FAddCombine::createAddendVal(<span class="keyword">const</span> FAddend &amp;Opnd, <span class="keywordtype">bool</span> &amp;NeedNeg) {</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;  <span class="keyword">const</span> FAddendCoef &amp;Coeff = Opnd.getCoef();</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160; </div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;  <span class="keywordflow">if</span> (Opnd.isConstant()) {</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    NeedNeg = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    <span class="keywordflow">return</span> Coeff.getValue(Instr-&gt;getType());</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;  }</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160; </div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *OpndVal = Opnd.getSymVal();</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160; </div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;  <span class="keywordflow">if</span> (Coeff.isMinusOne() || Coeff.isOne()) {</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;    NeedNeg = Coeff.isMinusOne();</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    <span class="keywordflow">return</span> OpndVal;</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;  }</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160; </div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;  <span class="keywordflow">if</span> (Coeff.isTwo() || Coeff.isMinusTwo()) {</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;    NeedNeg = Coeff.isMinusTwo();</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    <span class="keywordflow">return</span> createFAdd(OpndVal, OpndVal);</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;  }</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160; </div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;  NeedNeg = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;  <span class="keywordflow">return</span> createFMul(OpndVal, Coeff.getValue(Instr-&gt;getType()));</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;}</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160; </div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;<span class="comment">// Checks if any operand is negative and we can convert add to sub.</span></div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;<span class="comment">// This function checks for following negative patterns</span></div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;<span class="comment">//   ADD(XOR(OR(Z, NOT(C)), C)), 1) == NEG(AND(Z, C))</span></div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;<span class="comment">//   ADD(XOR(AND(Z, C), C), 1) == NEG(OR(Z, ~C))</span></div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;<span class="comment">//   XOR(AND(Z, C), (C + 1)) == NEG(OR(Z, ~C)) if C is even</span></div>
<div class="line"><a name="l00752"></a><span class="lineno"><a class="line" href="InstCombineAddSub_8cpp.html#a3aecc3c6f9a437c18254f7198edcee13">  752</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="InstCombineAddSub_8cpp.html#a3aecc3c6f9a437c18254f7198edcee13">checkForNegativeOperand</a>(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;                                      <a class="code" href="classllvm_1_1IRBuilder.html">InstCombiner::BuilderTy</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>) {</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0), *<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(1);</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160; </div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;  <span class="comment">// This function creates 2 instructions to replace ADD, we need at least one</span></div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;  <span class="comment">// of LHS or RHS to have one use to ensure benefit in transform.</span></div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() &amp;&amp; !<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>())</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160; </div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> = <span class="keyword">nullptr</span>, *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a> = <span class="keyword">nullptr</span>, *<a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a> = <span class="keyword">nullptr</span>, *C2 = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160; </div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;  <span class="comment">// if ONE is on other side, swap</span></div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a944c25ac9b73b02a17a20a08a25b9b21">m_Add</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aebdb2700a77d10ae6f0ce115e23d9f77">m_One</a>())))</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;    <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160; </div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a944c25ac9b73b02a17a20a08a25b9b21">m_Add</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aebdb2700a77d10ae6f0ce115e23d9f77">m_One</a>()))) {</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;    <span class="comment">// if XOR on other side, swap</span></div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a82e2ea7f0ab67e33e22b3a2a188feaba">m_Xor</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>))))</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;      <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160; </div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a82e2ea7f0ab67e33e22b3a2a188feaba">m_Xor</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>)))) {</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;      <span class="comment">// X = XOR(Y, C1), Y = OR(Z, C2), C2 = NOT(C1) ==&gt; X == NOT(AND(Z, C1))</span></div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;      <span class="comment">// ADD(ADD(X, 1), RHS) == ADD(X, ADD(RHS, 1)) == SUB(RHS, AND(Z, C1))</span></div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a42569041ddafba7d40243e126af07f42">m_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(C2))) &amp;&amp; (*C2 == ~(*<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>))) {</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *NewAnd = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(<a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a>, *<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>);</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSub(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, NewAnd, <span class="stringliteral">&quot;sub&quot;</span>);</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(C2))) &amp;&amp; (*<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a> == *C2)) {</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;        <span class="comment">// X = XOR(Y, C1), Y = AND(Z, C2), C2 == C1 ==&gt; X == NOT(OR(Z, ~C1))</span></div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;        <span class="comment">// ADD(ADD(X, 1), RHS) == ADD(X, ADD(RHS, 1)) == SUB(RHS, OR(Z, ~C1))</span></div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *NewOr = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateOr(<a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a>, ~(*<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>));</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSub(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, NewOr, <span class="stringliteral">&quot;sub&quot;</span>);</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;      }</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;    }</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;  }</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160; </div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;  <span class="comment">// Restore LHS and RHS</span></div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;  <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0);</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;  <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(1);</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160; </div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;  <span class="comment">// if XOR is on other side, swap</span></div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a82e2ea7f0ab67e33e22b3a2a188feaba">m_Xor</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>))))</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;    <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160; </div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;  <span class="comment">// C2 is ODD</span></div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;  <span class="comment">// LHS = XOR(Y, C1), Y = AND(Z, C2), C1 == (C2 + 1) =&gt; LHS == NEG(OR(Z, ~C2))</span></div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;  <span class="comment">// ADD(LHS, RHS) == SUB(RHS, OR(Z, ~C2))</span></div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a82e2ea7f0ab67e33e22b3a2a188feaba">m_Xor</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>))))</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>-&gt;countTrailingZeros() == 0)</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(C2))) &amp;&amp; *<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a> == (*C2 + 1)) {</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *NewOr = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateOr(<a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a>, ~(*C2));</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSub(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, NewOr, <span class="stringliteral">&quot;sub&quot;</span>);</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;      }</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;}</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;<span class="comment">/// Wrapping flags may allow combining constants separated by an extend.</span></div>
<div class="line"><a name="l00809"></a><span class="lineno"><a class="line" href="InstCombineAddSub_8cpp.html#a4dc5d808051c69f75bd70c56f13100ae">  809</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="InstCombineAddSub_8cpp.html#a4dc5d808051c69f75bd70c56f13100ae">foldNoWrapAdd</a>(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;Add,</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;                                  <a class="code" href="classllvm_1_1IRBuilder.html">InstCombiner::BuilderTy</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>) {</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Op0 = Add.getOperand(0), *Op1 = Add.getOperand(1);</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty = Add.getType();</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Op1C;</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aadd209ba7e1bfa8113a609e09a7fe62f">m_Constant</a>(Op1C)))</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160; </div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;  <span class="comment">// Try this match first because it results in an add in the narrow type.</span></div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;  <span class="comment">// (zext (X +nuw C2)) + C1 --&gt; zext (X + (C2 + trunc(C1)))</span></div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>;</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>, *C2;</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>)) &amp;&amp;</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2cbdca7c8267aac6914d674f8e81841b">m_ZExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a1b0e3cdd7316497baa075ef6fc21d2d4">m_NUWAdd</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(C2))))) &amp;&amp;</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;      <a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>-&gt;isNegative() &amp;&amp; <a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>-&gt;sge(-C2-&gt;<a class="code" href="classllvm_1_1APInt.html#aca8fce65eb69a82aa10a635e2e79877a">sext</a>(<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>-&gt;getBitWidth()))) {</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *NewC =</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;        <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType(), *C2 + <a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>-&gt;trunc(C2-&gt;<a class="code" href="classllvm_1_1APInt.html#a512fe2c15ea651294688eeec1341644c">getBitWidth</a>()));</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ZExtInst.html">ZExtInst</a>(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNUWAdd(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, NewC), Ty);</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;  }</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160; </div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;  <span class="comment">// More general combining of constants in the wide type.</span></div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;  <span class="comment">// (sext (X +nsw NarrowC)) + C --&gt; (sext X) + (sext(NarrowC) + C)</span></div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *NarrowC;</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aaab494a433fbb23bc68393ee8bcfc5ac">m_SExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a321b8e5bfbda0da1e621822399fe3960">m_NSWAdd</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aadd209ba7e1bfa8113a609e09a7fe62f">m_Constant</a>(NarrowC)))))) {</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *WideC = <a class="code" href="classllvm_1_1ConstantExpr.html#aa342c9b3d47cd9bde63b80c83ead429b">ConstantExpr::getSExt</a>(NarrowC, Ty);</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *NewC = <a class="code" href="classllvm_1_1ConstantExpr.html#ae6f1c15034bc5515033874630a8ecce6">ConstantExpr::getAdd</a>(WideC, Op1C);</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *WideX = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSExt(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, Ty);</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="Reassociate_8cpp.html#a680ae08c1b9b93cebdd6cbb726fe8f3d">BinaryOperator::CreateAdd</a>(WideX, NewC);</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;  }</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;  <span class="comment">// (zext (X +nuw NarrowC)) + C --&gt; (zext X) + (zext(NarrowC) + C)</span></div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2cbdca7c8267aac6914d674f8e81841b">m_ZExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a1b0e3cdd7316497baa075ef6fc21d2d4">m_NUWAdd</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aadd209ba7e1bfa8113a609e09a7fe62f">m_Constant</a>(NarrowC)))))) {</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *WideC = <a class="code" href="classllvm_1_1ConstantExpr.html#a58d6359cee16e5da66861058836dcca9">ConstantExpr::getZExt</a>(NarrowC, Ty);</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *NewC = <a class="code" href="classllvm_1_1ConstantExpr.html#ae6f1c15034bc5515033874630a8ecce6">ConstantExpr::getAdd</a>(WideC, Op1C);</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *WideX = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateZExt(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, Ty);</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="Reassociate_8cpp.html#a680ae08c1b9b93cebdd6cbb726fe8f3d">BinaryOperator::CreateAdd</a>(WideX, NewC);</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;  }</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160; </div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;}</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160; </div>
<div class="line"><a name="l00849"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#ac38a3c2794db0ecc70c9bb7106f1e1bf">  849</a></span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#ac38a3c2794db0ecc70c9bb7106f1e1bf">InstCombinerImpl::foldAddWithConstant</a>(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;Add) {</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Op0 = Add.getOperand(0), *Op1 = Add.getOperand(1);</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty = Add.getType();</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Op1C;</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aec0ccdbde0581b3aae7f001634a34d8e">m_ImmConstant</a>(Op1C)))</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160; </div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="namespacellvm_1_1ore.html#a8f5533240c6722d987a2443cba42019d">NV</a> = foldBinOpIntoSelectOrPhi(Add))</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1ore.html#a8f5533240c6722d987a2443cba42019d">NV</a>;</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160; </div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>;</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Op00C;</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160; </div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;  <span class="comment">// add (sub C1, X), C2 --&gt; sub (add C1, C2), X</span></div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#ac3ed5602889a22db44a16e1b97fac5b8">m_Sub</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aadd209ba7e1bfa8113a609e09a7fe62f">m_Constant</a>(Op00C), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>))))</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;    <span class="keywordflow">return</span> BinaryOperator::CreateSub(<a class="code" href="classllvm_1_1ConstantExpr.html#ae6f1c15034bc5515033874630a8ecce6">ConstantExpr::getAdd</a>(Op00C, Op1C), <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>);</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160; </div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>;</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160; </div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;  <span class="comment">// add (sub X, Y), -1 --&gt; add (not Y), X</span></div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#ac3ed5602889a22db44a16e1b97fac5b8">m_Sub</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>)))) &amp;&amp;</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aaea0d5ebb8b57ddde2095f80e2e94bb2">m_AllOnes</a>()))</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="Reassociate_8cpp.html#a680ae08c1b9b93cebdd6cbb726fe8f3d">BinaryOperator::CreateAdd</a>(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNot(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>), <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>);</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160; </div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;  <span class="comment">// zext(bool) + C -&gt; bool ? C + 1 : C</span></div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2cbdca7c8267aac6914d674f8e81841b">m_ZExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>))) &amp;&amp;</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;      <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType()-&gt;getScalarSizeInBits() == 1)</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1SelectInst.html#aa55fb74dd22008fdcc26a63f44576022">SelectInst::Create</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1InstCombiner.html#a25129446fbad8ac355a52944904a1ec6">InstCombiner::AddOne</a>(Op1C), Op1);</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;  <span class="comment">// sext(bool) + C -&gt; bool ? C - 1 : C</span></div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aaab494a433fbb23bc68393ee8bcfc5ac">m_SExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>))) &amp;&amp;</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;      <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType()-&gt;getScalarSizeInBits() == 1)</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1SelectInst.html#aa55fb74dd22008fdcc26a63f44576022">SelectInst::Create</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1InstCombiner.html#ae448b36ef67b71f0b281c8275cceacf6">InstCombiner::SubOne</a>(Op1C), Op1);</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160; </div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;  <span class="comment">// ~X + C --&gt; (C-1) - X</span></div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>))))</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;    <span class="keywordflow">return</span> BinaryOperator::CreateSub(<a class="code" href="classllvm_1_1InstCombiner.html#ae448b36ef67b71f0b281c8275cceacf6">InstCombiner::SubOne</a>(Op1C), <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>);</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160; </div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;  <span class="comment">// (iN X s&gt;&gt; (N - 1)) + 1 --&gt; zext (X &gt; -1)</span></div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> = Ty-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>();</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a64153676e101a130bbbaaf91635d253a">m_AShr</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>),</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;                                 <a class="code" href="namespacellvm_1_1PatternMatch.html#aa4a99c313af96b3b50a9768338a54b2e">m_SpecificIntAllowUndef</a>(<a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> - 1)))) &amp;&amp;</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aebdb2700a77d10ae6f0ce115e23d9f77">m_One</a>()))</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ZExtInst.html">ZExtInst</a>(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateIsNotNeg(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <span class="stringliteral">&quot;isnotneg&quot;</span>), Ty);</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160; </div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)))</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160; </div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;  <span class="comment">// (X | Op01C) + Op1C --&gt; X + (Op01C + Op1C) iff the `or` is actually an `add`</span></div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Op01C;</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a42569041ddafba7d40243e126af07f42">m_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aec0ccdbde0581b3aae7f001634a34d8e">m_ImmConstant</a>(Op01C))) &amp;&amp;</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;      <a class="code" href="namespacellvm.html#aa0f28bd61d319f9fd170e9ffee1ec7ba">haveNoCommonBitsSet</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, Op01C, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, &amp;AC, &amp;Add, &amp;DT))</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="Reassociate_8cpp.html#a680ae08c1b9b93cebdd6cbb726fe8f3d">BinaryOperator::CreateAdd</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1ConstantExpr.html#ae6f1c15034bc5515033874630a8ecce6">ConstantExpr::getAdd</a>(Op01C, Op1C));</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160; </div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;  <span class="comment">// (X | C2) + C --&gt; (X | C2) ^ C2 iff (C2 == -C)</span></div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *C2;</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a42569041ddafba7d40243e126af07f42">m_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(C2))) &amp;&amp; *C2 == -*<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;    <span class="keywordflow">return</span> BinaryOperator::CreateXor(Op0, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Add.getType(), *C2));</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160; </div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;isSignMask()) {</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;    <span class="comment">// If wrapping is not allowed, then the addition must set the sign bit:</span></div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;    <span class="comment">// X + (signmask) --&gt; X | signmask</span></div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;    <span class="keywordflow">if</span> (Add.hasNoSignedWrap() || Add.hasNoUnsignedWrap())</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;      <span class="keywordflow">return</span> BinaryOperator::CreateOr(Op0, Op1);</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160; </div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;    <span class="comment">// If wrapping is allowed, then the addition flips the sign bit of LHS:</span></div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;    <span class="comment">// X + (signmask) --&gt; X ^ signmask</span></div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;    <span class="keywordflow">return</span> BinaryOperator::CreateXor(Op0, Op1);</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;  }</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160; </div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;  <span class="comment">// Is this add the last step in a convoluted sext?</span></div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;  <span class="comment">// add(zext(xor i16 X, -32768), -32768) --&gt; sext X</span></div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2cbdca7c8267aac6914d674f8e81841b">m_ZExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a82e2ea7f0ab67e33e22b3a2a188feaba">m_Xor</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(C2)))) &amp;&amp;</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;      C2-&gt;<a class="code" href="classllvm_1_1APInt.html#a1f04e382556a817950fd0390aeaf9b0e">isMinSignedValue</a>() &amp;&amp; C2-&gt;<a class="code" href="classllvm_1_1APInt.html#aca8fce65eb69a82aa10a635e2e79877a">sext</a>(Ty-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>()) == *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1CastInst.html#a643fe5a9e7042f032dae78109c2b1e72">CastInst::Create</a>(Instruction::SExt, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, Ty);</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160; </div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a82e2ea7f0ab67e33e22b3a2a188feaba">m_Xor</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(C2)))) {</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;    <span class="comment">// (X ^ signmask) + C --&gt; (X + (signmask ^ C))</span></div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;    <span class="keywordflow">if</span> (C2-&gt;<a class="code" href="classllvm_1_1APInt.html#a4aa7e7ca8ab4093fd0dbadb223b998c0">isSignMask</a>())</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="Reassociate_8cpp.html#a680ae08c1b9b93cebdd6cbb726fe8f3d">BinaryOperator::CreateAdd</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, *C2 ^ *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>));</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160; </div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;    <span class="comment">// If X has no high-bits set above an xor mask:</span></div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;    <span class="comment">// add (xor X, LowMaskC), C --&gt; sub (LowMaskC + C), X</span></div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;    <span class="keywordflow">if</span> (C2-&gt;<a class="code" href="classllvm_1_1APInt.html#ac328c5d387ddf7d4a02afe9b669723c7">isMask</a>()) {</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;      <a class="code" href="structllvm_1_1KnownBits.html">KnownBits</a> LHSKnown = <a class="code" href="namespacellvm.html#aa1f8f0633edd8b9a1c5ec15bb9fc5640">computeKnownBits</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, 0, &amp;Add);</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;      <span class="keywordflow">if</span> ((*C2 | LHSKnown.<a class="code" href="structllvm_1_1KnownBits.html#ac67bca6c764da76f5e152330d92ed916">Zero</a>).isAllOnes())</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;        <span class="keywordflow">return</span> BinaryOperator::CreateSub(<a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, *C2 + *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>), <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>);</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;    }</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160; </div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;    <span class="comment">// Look for a math+logic pattern that corresponds to sext-in-register of a</span></div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;    <span class="comment">// value with cleared high bits. Convert that into a pair of shifts:</span></div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;    <span class="comment">// add (xor X, 0x80), 0xF..F80 --&gt; (X &lt;&lt; ShAmtC) &gt;&gt;s ShAmtC</span></div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;    <span class="comment">// add (xor X, 0xF..F80), 0x80 --&gt; (X &lt;&lt; ShAmtC) &gt;&gt;s ShAmtC</span></div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;    <span class="keywordflow">if</span> (Op0-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() &amp;&amp; *C2 == -(*<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)) {</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;      <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> = Ty-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>();</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;      <span class="keywordtype">unsigned</span> ShAmt = 0;</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;isPowerOf2())</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;        ShAmt = <a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> - <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;logBase2() - 1;</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (C2-&gt;<a class="code" href="classllvm_1_1APInt.html#ad1b0513de876d1c85cf6268ca21b2c86">isPowerOf2</a>())</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;        ShAmt = <a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> - C2-&gt;<a class="code" href="classllvm_1_1APInt.html#aae3b959a0a2981340fd03c29f528f2f0">logBase2</a>() - 1;</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;      <span class="keywordflow">if</span> (ShAmt &amp;&amp; <a class="code" href="namespacellvm.html#aedbf3998b4ff72347a45cb4169d120db">MaskedValueIsZero</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1APInt.html#adcb96bd09d7c75c7669fa5f9d1190899">APInt::getHighBitsSet</a>(<a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>, ShAmt),</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;                                     0, &amp;Add)) {</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;        <a class="code" href="classllvm_1_1Constant.html">Constant</a> *ShAmtC = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, ShAmt);</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *NewShl = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateShl(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, ShAmtC, <span class="stringliteral">&quot;sext&quot;</span>);</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;        <span class="keywordflow">return</span> BinaryOperator::CreateAShr(NewShl, ShAmtC);</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;      }</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;    }</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;  }</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160; </div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;isOne() &amp;&amp; Op0-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>()) {</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;    <span class="comment">// add (sext i1 X), 1 --&gt; zext (not X)</span></div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;    <span class="comment">// TODO: The smallest IR representation is (select X, 0, 1), and that would</span></div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;    <span class="comment">// not require the one-use check. But we need to remove a transform in</span></div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;    <span class="comment">// visitSelect and make sure that IR value tracking for select is equal or</span></div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;    <span class="comment">// better than for these ops.</span></div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aaab494a433fbb23bc68393ee8bcfc5ac">m_SExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>))) &amp;&amp;</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;        <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType()-&gt;getScalarSizeInBits() == 1)</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ZExtInst.html">ZExtInst</a>(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNot(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), Ty);</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160; </div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;    <span class="comment">// Shifts and add used to flip and mask off the low bit:</span></div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;    <span class="comment">// add (ashr (shl i32 X, 31), 31), 1 --&gt; and (not X), 1</span></div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *C3;</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a64153676e101a130bbbaaf91635d253a">m_AShr</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a37668d9884c78ac77254cf9fb8a4276a">m_Shl</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(C2)), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(C3))) &amp;&amp;</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;        C2 == C3 &amp;&amp; *C2 == Ty-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>() - 1) {</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *NotX = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNot(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>);</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;      <span class="keywordflow">return</span> BinaryOperator::CreateAnd(NotX, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, 1));</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;    }</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;  }</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160; </div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;  <span class="comment">// Fold (add (zext (add X, -1)), 1) -&gt; (zext X) if X is non-zero.</span></div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;  <span class="comment">// TODO: There&#39;s a general form for any constant on the outer add.</span></div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;isOne()) {</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2cbdca7c8267aac6914d674f8e81841b">m_ZExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a944c25ac9b73b02a17a20a08a25b9b21">m_Add</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aaea0d5ebb8b57ddde2095f80e2e94bb2">m_AllOnes</a>())))) {</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;      <span class="keyword">const</span> <a class="code" href="structllvm_1_1SimplifyQuery.html">SimplifyQuery</a> Q = SQ.<a class="code" href="structllvm_1_1SimplifyQuery.html#aaf05c1194f5c7869a00434c13c46c228">getWithInstruction</a>(&amp;Add);</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a07256e6859fcb3b9d5eb02ecea9e9a38">llvm::isKnownNonZero</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, 0, Q.<a class="code" href="structllvm_1_1SimplifyQuery.html#a928ce56952772d0e0f43cab3a489a6fe">AC</a>, Q.<a class="code" href="structllvm_1_1SimplifyQuery.html#a30647c42c8c40890c577ba5b4ab16468">CxtI</a>, Q.<a class="code" href="structllvm_1_1SimplifyQuery.html#a4776fa0f5a726bd5a8a444981c283c69">DT</a>))</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ZExtInst.html">ZExtInst</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, Ty);</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;    }</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;  }</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160; </div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;}</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160; </div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;<span class="comment">// Matches multiplication expression Op * C where C is a constant. Returns the</span></div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;<span class="comment">// constant value in C and the other operand in Op. Returns true if such a</span></div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;<span class="comment">// match is found.</span></div>
<div class="line"><a name="l00994"></a><span class="lineno"><a class="line" href="InstCombineAddSub_8cpp.html#a0a1310e81cd1bccba5e81fe929fb7c87">  994</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstCombineAddSub_8cpp.html#a0a1310e81cd1bccba5e81fe929fb7c87">MatchMul</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *&amp;<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>, <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *AI;</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a971522b36bf432ad69a0083581ab4108">m_Mul</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(AI)))) {</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;    <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = *AI;</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;  }</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a37668d9884c78ac77254cf9fb8a4276a">m_Shl</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(AI)))) {</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;    <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = <a class="code" href="classllvm_1_1APInt.html">APInt</a>(AI-&gt;<a class="code" href="classllvm_1_1APInt.html#a512fe2c15ea651294688eeec1341644c">getBitWidth</a>(), 1);</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;    <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> &lt;&lt;= *AI;</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;  }</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;}</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160; </div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;<span class="comment">// Matches remainder expression Op % C where C is a constant. Returns the</span></div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;<span class="comment">// constant value in C and the other operand in Op. Returns the signedness of</span></div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;<span class="comment">// the remainder operation in IsSigned. Returns true if such a match is</span></div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;<span class="comment">// found.</span></div>
<div class="line"><a name="l01012"></a><span class="lineno"><a class="line" href="InstCombineAddSub_8cpp.html#af25a30acf5336afad465652f62291a33"> 1012</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstCombineAddSub_8cpp.html#af25a30acf5336afad465652f62291a33">MatchRem</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *&amp;<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>, <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <span class="keywordtype">bool</span> &amp;IsSigned) {</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *AI;</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;  IsSigned = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a42df6a41563b50a3fd1872230ed0b5ec">m_SRem</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(AI)))) {</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;    IsSigned = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;    <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = *AI;</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;  }</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#ae1a04895305aaea96e5e82d95c39bbe0">m_URem</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(AI)))) {</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;    <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = *AI;</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;  }</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(AI))) &amp;&amp; (*AI + 1).isPowerOf2()) {</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;    <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = *AI + 1;</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;  }</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;}</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160; </div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;<span class="comment">// Matches division expression Op / C with the given signedness as indicated</span></div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;<span class="comment">// by IsSigned, where C is a constant. Returns the constant value in C and the</span></div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;<span class="comment">// other operand in Op. Returns true if such a match is found.</span></div>
<div class="line"><a name="l01034"></a><span class="lineno"><a class="line" href="InstCombineAddSub_8cpp.html#a13e47380f530d0f3667a5b22fc47833e"> 1034</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstCombineAddSub_8cpp.html#a13e47380f530d0f3667a5b22fc47833e">MatchDiv</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *&amp;<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>, <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <span class="keywordtype">bool</span> IsSigned) {</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *AI;</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;  <span class="keywordflow">if</span> (IsSigned &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a741e3212cc4b9d94cd549d02d26e172b">m_SDiv</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(AI)))) {</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;    <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = *AI;</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;  }</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;  <span class="keywordflow">if</span> (!IsSigned) {</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#abd9323a37d0beb24f9975b4d36994b24">m_UDiv</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(AI)))) {</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;      <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = *AI;</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;    }</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aa08fee11e8a5ec10c0cc2a7abbbd799a">m_LShr</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(AI)))) {</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;      <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = <a class="code" href="classllvm_1_1APInt.html">APInt</a>(AI-&gt;<a class="code" href="classllvm_1_1APInt.html#a512fe2c15ea651294688eeec1341644c">getBitWidth</a>(), 1);</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;      <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> &lt;&lt;= *AI;</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;    }</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;  }</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;}</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160; </div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;<span class="comment">// Returns whether C0 * C1 with the given signedness overflows.</span></div>
<div class="line"><a name="l01055"></a><span class="lineno"><a class="line" href="InstCombineAddSub_8cpp.html#a8b1f18c3a2433393b6a48cffa8651773"> 1055</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstCombineAddSub_8cpp.html#a8b1f18c3a2433393b6a48cffa8651773">MulWillOverflow</a>(<a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;C0, <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>, <span class="keywordtype">bool</span> IsSigned) {</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;  <span class="keywordtype">bool</span> overflow;</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;  <span class="keywordflow">if</span> (IsSigned)</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;    (void)C0.<a class="code" href="classllvm_1_1APInt.html#ac155d7c568fc1aba25723e77b6888908">smul_ov</a>(<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>, overflow);</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;    (<span class="keywordtype">void</span>)C0.<a class="code" href="classllvm_1_1APInt.html#a028f4d1eead63cc33499ce3459bd27c7">umul_ov</a>(<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>, overflow);</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;  <span class="keywordflow">return</span> overflow;</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;}</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160; </div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;<span class="comment">// Simplifies X % C0 + (( X / C0 ) % C1) * C0 to X % (C0 * C1), where (C0 * C1)</span></div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;<span class="comment">// does not overflow.</span></div>
<div class="line"><a name="l01066"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#aa9bbead3db102aa9d3eaeb47e695db1a"> 1066</a></span>&#160;<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#aa9bbead3db102aa9d3eaeb47e695db1a">InstCombinerImpl::SimplifyAddWithRemainder</a>(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0), *<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(1);</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, *MulOpV;</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;  <a class="code" href="classllvm_1_1APInt.html">APInt</a> C0, MulOpC;</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;  <span class="keywordtype">bool</span> IsSigned;</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;  <span class="comment">// Match I = X % C0 + MulOpV * C0</span></div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;  <span class="keywordflow">if</span> (((<a class="code" href="InstCombineAddSub_8cpp.html#af25a30acf5336afad465652f62291a33">MatchRem</a>(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, C0, IsSigned) &amp;&amp; <a class="code" href="InstCombineAddSub_8cpp.html#a0a1310e81cd1bccba5e81fe929fb7c87">MatchMul</a>(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, MulOpV, MulOpC)) ||</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;       (<a class="code" href="InstCombineAddSub_8cpp.html#af25a30acf5336afad465652f62291a33">MatchRem</a>(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, C0, IsSigned) &amp;&amp; <a class="code" href="InstCombineAddSub_8cpp.html#a0a1310e81cd1bccba5e81fe929fb7c87">MatchMul</a>(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, MulOpV, MulOpC))) &amp;&amp;</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;      C0 == MulOpC) {</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *RemOpV;</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;    <a class="code" href="classllvm_1_1APInt.html">APInt</a> <a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>;</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;    <span class="keywordtype">bool</span> Rem2IsSigned;</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;    <span class="comment">// Match MulOpC = RemOpV % C1</span></div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="InstCombineAddSub_8cpp.html#af25a30acf5336afad465652f62291a33">MatchRem</a>(MulOpV, RemOpV, <a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>, Rem2IsSigned) &amp;&amp;</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;        IsSigned == Rem2IsSigned) {</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *DivOpV;</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;      <a class="code" href="classllvm_1_1APInt.html">APInt</a> DivOpC;</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;      <span class="comment">// Match RemOpV = X / C0</span></div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="InstCombineAddSub_8cpp.html#a13e47380f530d0f3667a5b22fc47833e">MatchDiv</a>(RemOpV, DivOpV, DivOpC, IsSigned) &amp;&amp; <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> == DivOpV &amp;&amp;</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;          C0 == DivOpC &amp;&amp; !<a class="code" href="InstCombineAddSub_8cpp.html#a8b1f18c3a2433393b6a48cffa8651773">MulWillOverflow</a>(C0, <a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>, IsSigned)) {</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *NewDivisor = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType(), C0 * <a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>);</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;        <span class="keywordflow">return</span> IsSigned ? <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSRem(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, NewDivisor, <span class="stringliteral">&quot;srem&quot;</span>)</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;                        : <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateURem(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, NewDivisor, <span class="stringliteral">&quot;urem&quot;</span>);</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;      }</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;    }</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;  }</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160; </div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;}</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;<span class="comment">/// Fold</span></div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;<span class="comment">///   (1 &lt;&lt; NBits) - 1</span></div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;<span class="comment">/// Into:</span></div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;<span class="comment">///   ~(-(1 &lt;&lt; NBits))</span></div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;<span class="comment">/// Because a &#39;not&#39; is better for bit-tracking analysis and other transforms</span></div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;<span class="comment">/// than an &#39;add&#39;. The new shl is always nsw, and is nuw if old `and` was.</span></div>
<div class="line"><a name="l01102"></a><span class="lineno"><a class="line" href="InstCombineAddSub_8cpp.html#a68a28d78ec908c83a9d46101bd5cbbff"> 1102</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="InstCombineAddSub_8cpp.html#a68a28d78ec908c83a9d46101bd5cbbff">canonicalizeLowbitMask</a>(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;                                           <a class="code" href="classllvm_1_1IRBuilder.html">InstCombiner::BuilderTy</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>) {</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *NBits;</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a944c25ac9b73b02a17a20a08a25b9b21">m_Add</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a37668d9884c78ac77254cf9fb8a4276a">m_Shl</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aebdb2700a77d10ae6f0ce115e23d9f77">m_One</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(NBits))), <a class="code" href="namespacellvm_1_1PatternMatch.html#aaea0d5ebb8b57ddde2095f80e2e94bb2">m_AllOnes</a>())))</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160; </div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *MinusOne = <a class="code" href="classllvm_1_1Constant.html#a4d51384de6e1798bb6aa875aebeea9f0">Constant::getAllOnesValue</a>(NBits-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>());</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *NotMask = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateShl(MinusOne, NBits, <span class="stringliteral">&quot;notmask&quot;</span>);</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;  <span class="comment">// Be wary of constant folding.</span></div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *BOp = dyn_cast&lt;BinaryOperator&gt;(NotMask)) {</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;    <span class="comment">// Always NSW. But NUW propagates from `add`.</span></div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;    BOp-&gt;setHasNoSignedWrap();</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;    BOp-&gt;setHasNoUnsignedWrap(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.hasNoUnsignedWrap());</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;  }</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160; </div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a4f500ae0de71695b652af4c0958d8ea8">BinaryOperator::CreateNot</a>(NotMask, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getName());</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;}</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160; </div>
<div class="line"><a name="l01120"></a><span class="lineno"><a class="line" href="InstCombineAddSub_8cpp.html#ac21a19f12988b14a84b15d78184fc8af"> 1120</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="InstCombineAddSub_8cpp.html#ac21a19f12988b14a84b15d78184fc8af">foldToUnsignedSaturatedAdd</a>(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOpcode() == <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec">Instruction::Add</a> &amp;&amp; <span class="stringliteral">&quot;Expecting add instruction&quot;</span>);</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType();</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;  <span class="keyword">auto</span> getUAddSat = [&amp;]() {</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#aefa39f6b622360ce4e947feb9f671b73">Intrinsic::getDeclaration</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getModule(), Intrinsic::uadd_sat, Ty);</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;  };</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160; </div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;  <span class="comment">// add (umin X, ~Y), Y --&gt; uaddsat X, Y</span></div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>;</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#ad191220adaaedcfba833985509a17452">m_c_Add</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a858f42cd002d944befe9675788d94ba7">m_c_UMin</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))),</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;                        <a class="code" href="namespacellvm_1_1PatternMatch.html#a94bf3939e0bea91b481096473d0e549f">m_Deferred</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))))</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1CallInst.html#a850d8262cd900958b3153c4aa080b2bb">CallInst::Create</a>(getUAddSat(), { <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a> });</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160; </div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;  <span class="comment">// add (umin X, ~C), C --&gt; uaddsat X, C</span></div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, *NotC;</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a944c25ac9b73b02a17a20a08a25b9b21">m_Add</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#adc571425e9aecccf7ebf5fcc3c678d94">m_UMin</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(NotC)), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))) &amp;&amp;</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;      *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> == ~*NotC)</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1CallInst.html#a850d8262cd900958b3153c4aa080b2bb">CallInst::Create</a>(getUAddSat(), { <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) });</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160; </div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;}</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;<span class="comment">/// Try to reduce signed division by power-of-2 to an arithmetic shift right.</span></div>
<div class="line"><a name="l01143"></a><span class="lineno"><a class="line" href="InstCombineAddSub_8cpp.html#a7d07668628012ac4add2dc0c4824a5c0"> 1143</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="InstCombineAddSub_8cpp.html#a7d07668628012ac4add2dc0c4824a5c0">foldAddToAshr</a>(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;Add) {</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;  <span class="comment">// Division must be by power-of-2, but not the minimum signed value.</span></div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>;</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *DivC;</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Add.getOperand(0), <a class="code" href="namespacellvm_1_1PatternMatch.html#a741e3212cc4b9d94cd549d02d26e172b">m_SDiv</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#ad5e60756e331a97669d11b5c9d8691a2">m_Power2</a>(DivC))) ||</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;      DivC-&gt;<a class="code" href="classllvm_1_1APInt.html#a6804d9caf15411f55e7b9e9f397f0422">isNegative</a>())</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160; </div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;  <span class="comment">// Rounding is done by adding -1 if the dividend (X) is negative and has any</span></div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;  <span class="comment">// low bits set. The canonical pattern for that is an &quot;ugt&quot; compare with SMIN:</span></div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;  <span class="comment">// sext (icmp ugt (X &amp; (DivC - 1)), SMIN)</span></div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *MaskC;</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> Pred;</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Add.getOperand(1),</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;             <a class="code" href="namespacellvm_1_1PatternMatch.html#aaab494a433fbb23bc68393ee8bcfc5ac">m_SExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a3fe9b3ddb71b9fb53d9fc74b3a0710bf">m_ICmp</a>(Pred, <a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(MaskC)),</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;                           <a class="code" href="namespacellvm_1_1PatternMatch.html#a8c0f3bd24cad8bf9994d62b2d8cff6a0">m_SignMask</a>()))) ||</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;      Pred != <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a>)</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160; </div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;  <a class="code" href="classllvm_1_1APInt.html">APInt</a> <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ead6bb6a2eca7d60c75e349ea45e138d74">SMin</a> = <a class="code" href="classllvm_1_1APInt.html#a8f877403433892e14ff0c692cbe9efdf">APInt::getSignedMinValue</a>(Add.getType()-&gt;getScalarSizeInBits());</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;  <span class="keywordflow">if</span> (*MaskC != (<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ead6bb6a2eca7d60c75e349ea45e138d74">SMin</a> | (*DivC - 1)))</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160; </div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;  <span class="comment">// (X / DivC) + sext ((X &amp; (SMin | (DivC - 1)) &gt;u SMin) --&gt; X &gt;&gt;s log2(DivC)</span></div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;  <span class="keywordflow">return</span> BinaryOperator::CreateAShr(</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;      <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Add.getType(), DivC-&gt;<a class="code" href="classllvm_1_1APInt.html#a6f1d5427c61a0f0159f6e85f41944c5c">exactLogBase2</a>()));</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;}</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160; </div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#a1347d52f024418efd43a77e0fcb57355">InstCombinerImpl::</a></div>
<div class="line"><a name="l01172"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#a1347d52f024418efd43a77e0fcb57355"> 1172</a></span>&#160;<a class="code" href="classllvm_1_1InstCombinerImpl.html#a1347d52f024418efd43a77e0fcb57355">    canonicalizeCondSignextOfHighBitExtractToSignextHighBitExtract</a>(</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;        <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOpcode() == <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec">Instruction::Add</a> ||</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;          <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOpcode() == Instruction::Or ||</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;          <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOpcode() == Instruction::Sub) &amp;&amp;</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;         <span class="stringliteral">&quot;Expecting add/or/sub instruction&quot;</span>);</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160; </div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;  <span class="comment">// We have a subtraction/addition between a (potentially truncated) *logical*</span></div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;  <span class="comment">// right-shift of X and a &quot;select&quot;.</span></div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, *<a class="code" href="AMDGPURegBankSelect_8cpp.html#a14e0c000ed52e5fc187d4a885914cc1a">Select</a>;</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *LowBitsToSkip, *Extract;</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#ac56cd25f664c1497623d26158a6c5997">m_c_BinOp</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a054bc550cc29339bf1b5c79c73aa4dac">m_TruncOrSelf</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a575c2299c6f145ba3a12efa20829db43">m_CombineAnd</a>(</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;                               <a class="code" href="namespacellvm_1_1PatternMatch.html#aa08fee11e8a5ec10c0cc2a7abbbd799a">m_LShr</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a04353aa48874f9bda89ff9059cd1a5a6">m_Instruction</a>(LowBitsToSkip)),</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;                               <a class="code" href="namespacellvm_1_1PatternMatch.html#a04353aa48874f9bda89ff9059cd1a5a6">m_Instruction</a>(Extract))),</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;                           <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="AMDGPURegBankSelect_8cpp.html#a14e0c000ed52e5fc187d4a885914cc1a">Select</a>))))</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160; </div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;  <span class="comment">// `add`/`or` is commutative; but for `sub`, &quot;select&quot; *must* be on RHS.</span></div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOpcode() == Instruction::Sub &amp;&amp; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(1) != <a class="code" href="AMDGPURegBankSelect_8cpp.html#a14e0c000ed52e5fc187d4a885914cc1a">Select</a>)</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160; </div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *XTy = <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType();</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;  <span class="keywordtype">bool</span> HadTrunc = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType() != XTy;</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160; </div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;  <span class="comment">// If there was a truncation of extracted value, then we&#39;ll need to produce</span></div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;  <span class="comment">// one extra instruction, so we need to ensure one instruction will go away.</span></div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;  <span class="keywordflow">if</span> (HadTrunc &amp;&amp; !<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#ac56cd25f664c1497623d26158a6c5997">m_c_BinOp</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>()), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>())))</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160; </div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;  <span class="comment">// Extraction should extract high NBits bits, with shift amount calculated as:</span></div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;  <span class="comment">//   low bits to skip = shift bitwidth - high bits to extract</span></div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;  <span class="comment">// The shift amount itself may be extended, and we need to look past zero-ext</span></div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;  <span class="comment">// when matching NBits, that will matter for matching later.</span></div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *NBits;</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;          LowBitsToSkip,</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;          <a class="code" href="namespacellvm_1_1PatternMatch.html#a92ad549d62e33f9f5b8c3bc4b510b365">m_ZExtOrSelf</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#ac3ed5602889a22db44a16e1b97fac5b8">m_Sub</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aadd209ba7e1bfa8113a609e09a7fe62f">m_Constant</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a92ad549d62e33f9f5b8c3bc4b510b365">m_ZExtOrSelf</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(NBits))))) ||</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;      !<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#abb22519fa3bf66d9e0bc6d1a733a5821">m_SpecificInt_ICMP</a>(ICmpInst::Predicate::ICMP_EQ,</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;                                   <a class="code" href="classllvm_1_1APInt.html">APInt</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;getType()-&gt;getScalarSizeInBits(),</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;                                         <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType()-&gt;getScalarSizeInBits()))))</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160; </div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;  <span class="comment">// Sign-extending value can be zero-extended if we `sub`tract it,</span></div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;  <span class="comment">// or sign-extended otherwise.</span></div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;  <span class="keyword">auto</span> SkipExtInMagic = [&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>](<a class="code" href="classllvm_1_1Value.html">Value</a> *&amp;V) {</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOpcode() == Instruction::Sub)</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(V, <a class="code" href="namespacellvm_1_1PatternMatch.html#a92ad549d62e33f9f5b8c3bc4b510b365">m_ZExtOrSelf</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(V)));</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(V, <a class="code" href="namespacellvm_1_1PatternMatch.html#a0702b4620c670aea616d41c7871dcec6">m_SExtOrSelf</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(V)));</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;  };</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160; </div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;  <span class="comment">// Now, finally validate the sign-extending magic.</span></div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;  <span class="comment">// `select` itself may be appropriately extended, look past that.</span></div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;  SkipExtInMagic(<a class="code" href="AMDGPURegBankSelect_8cpp.html#a14e0c000ed52e5fc187d4a885914cc1a">Select</a>);</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160; </div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> Pred;</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *Thr;</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *SignExtendingValue, *Zero;</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;  <span class="keywordtype">bool</span> ShouldSignext;</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;  <span class="comment">// It must be a select between two values we will later establish to be a</span></div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;  <span class="comment">// sign-extending value and a zero constant. The condition guarding the</span></div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;  <span class="comment">// sign-extension must be based on a sign bit of the same X we had in `lshr`.</span></div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="AMDGPURegBankSelect_8cpp.html#a14e0c000ed52e5fc187d4a885914cc1a">Select</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#addb87fe3f509b7803d3f5933ee24b560">m_Select</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a3fe9b3ddb71b9fb53d9fc74b3a0710bf">m_ICmp</a>(Pred, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(Thr)),</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;                              <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(SignExtendingValue), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(Zero))) ||</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;      !isSignBitCheck(Pred, *Thr, ShouldSignext))</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160; </div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;  <span class="comment">// icmp-select pair is commutative.</span></div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;  <span class="keywordflow">if</span> (!ShouldSignext)</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;    <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(SignExtendingValue, Zero);</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160; </div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;  <span class="comment">// If we should not perform sign-extension then we must add/or/subtract zero.</span></div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Zero, <a class="code" href="namespacellvm_1_1PatternMatch.html#ae77be336e228cf9aa00709a8606dfb98">m_Zero</a>()))</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;  <span class="comment">// Otherwise, it should be some constant, left-shifted by the same NBits we</span></div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;  <span class="comment">// had in `lshr`. Said left-shift can also be appropriately extended.</span></div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;  <span class="comment">// Again, we must look past zero-ext when looking for NBits.</span></div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;  SkipExtInMagic(SignExtendingValue);</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *SignExtendingValueBaseConstant;</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(SignExtendingValue,</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;             <a class="code" href="namespacellvm_1_1PatternMatch.html#a37668d9884c78ac77254cf9fb8a4276a">m_Shl</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aadd209ba7e1bfa8113a609e09a7fe62f">m_Constant</a>(SignExtendingValueBaseConstant),</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;                   <a class="code" href="namespacellvm_1_1PatternMatch.html#a92ad549d62e33f9f5b8c3bc4b510b365">m_ZExtOrSelf</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(NBits)))))</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;  <span class="comment">// If we `sub`, then the constant should be one, else it should be all-ones.</span></div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOpcode() == Instruction::Sub</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;          ? !<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(SignExtendingValueBaseConstant, <a class="code" href="namespacellvm_1_1PatternMatch.html#aebdb2700a77d10ae6f0ce115e23d9f77">m_One</a>())</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;          : !<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(SignExtendingValueBaseConstant, <a class="code" href="namespacellvm_1_1PatternMatch.html#aaea0d5ebb8b57ddde2095f80e2e94bb2">m_AllOnes</a>()))</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160; </div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;  <span class="keyword">auto</span> *NewAShr = BinaryOperator::CreateAShr(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, LowBitsToSkip,</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;                                             Extract-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>() + <span class="stringliteral">&quot;.sext&quot;</span>);</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;  NewAShr-&gt;copyIRFlags(Extract); <span class="comment">// Preserve `exact`-ness.</span></div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;  <span class="keywordflow">if</span> (!HadTrunc)</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;    <span class="keywordflow">return</span> NewAShr;</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160; </div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.Insert(NewAShr);</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1CastInst.html#aab2e21628e0e96267839b852a708b38a">TruncInst::CreateTruncOrBitCast</a>(NewAShr, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType());</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;}</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;<span class="comment">/// This is a specialization of a more general transform from</span></div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;<span class="comment">/// foldUsingDistributiveLaws. If that code can be made to work optimally</span></div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;<span class="comment">/// for multi-use cases or propagating nsw/nuw, then we would not need this.</span></div>
<div class="line"><a name="l01275"></a><span class="lineno"><a class="line" href="InstCombineAddSub_8cpp.html#aa93d4c077fefadc17387144a62fa3a4a"> 1275</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="InstCombineAddSub_8cpp.html#aa93d4c077fefadc17387144a62fa3a4a">factorizeMathWithShlOps</a>(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;                                            <a class="code" href="classllvm_1_1IRBuilder.html">InstCombiner::BuilderTy</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>) {</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;  <span class="comment">// TODO: Also handle mul by doubling the shift amount?</span></div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOpcode() == <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec">Instruction::Add</a> ||</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;          <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOpcode() == Instruction::Sub) &amp;&amp;</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;         <span class="stringliteral">&quot;Expected add/sub&quot;</span>);</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;  <span class="keyword">auto</span> *Op0 = dyn_cast&lt;BinaryOperator&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0));</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;  <span class="keyword">auto</span> *Op1 = dyn_cast&lt;BinaryOperator&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(1));</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;  <span class="keywordflow">if</span> (!Op0 || !Op1 || !(Op0-&gt;hasOneUse() || Op1-&gt;hasOneUse()))</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160; </div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, *ShAmt;</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a37668d9884c78ac77254cf9fb8a4276a">m_Shl</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(ShAmt))) ||</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;      !<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a37668d9884c78ac77254cf9fb8a4276a">m_Shl</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(ShAmt))))</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160; </div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;  <span class="comment">// No-wrap propagates only when all ops have no-wrap.</span></div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;  <span class="keywordtype">bool</span> HasNSW = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.hasNoSignedWrap() &amp;&amp; Op0-&gt;hasNoSignedWrap() &amp;&amp;</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;                Op1-&gt;hasNoSignedWrap();</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;  <span class="keywordtype">bool</span> HasNUW = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.hasNoUnsignedWrap() &amp;&amp; Op0-&gt;hasNoUnsignedWrap() &amp;&amp;</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;                Op1-&gt;hasNoUnsignedWrap();</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160; </div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;  <span class="comment">// add/sub (X &lt;&lt; ShAmt), (Y &lt;&lt; ShAmt) --&gt; (add/sub X, Y) &lt;&lt; ShAmt</span></div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *NewMath = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBinOp(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOpcode(), <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>);</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *NewI = dyn_cast&lt;BinaryOperator&gt;(NewMath)) {</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;    NewI-&gt;setHasNoSignedWrap(HasNSW);</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;    NewI-&gt;setHasNoUnsignedWrap(HasNUW);</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;  }</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;  <span class="keyword">auto</span> *NewShl = BinaryOperator::CreateShl(NewMath, ShAmt);</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;  NewShl-&gt;setHasNoSignedWrap(HasNSW);</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;  NewShl-&gt;setHasNoUnsignedWrap(HasNUW);</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;  <span class="keywordflow">return</span> NewShl;</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;}</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;<span class="comment">/// Reduce a sequence of masked half-width multiplies to a single multiply.</span></div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;<span class="comment">/// ((XLow * YHigh) + (YLow * XHigh)) &lt;&lt; HalfBits) + (XLow * YLow) --&gt; X * Y</span></div>
<div class="line"><a name="l01311"></a><span class="lineno"><a class="line" href="InstCombineAddSub_8cpp.html#a679b779589e14def262bdfa4f3f6c5d9"> 1311</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="InstCombineAddSub_8cpp.html#a679b779589e14def262bdfa4f3f6c5d9">foldBoxMultiply</a>(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType()-&gt;getScalarSizeInBits();</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;  <span class="comment">// Skip the odd bitwidth types.</span></div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;  <span class="keywordflow">if</span> ((<a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> &amp; 0x1))</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160; </div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;  <span class="keywordtype">unsigned</span> HalfBits = <a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> &gt;&gt; 1;</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;  <a class="code" href="classllvm_1_1APInt.html">APInt</a> HalfMask = <a class="code" href="classllvm_1_1APInt.html#a331d69b5f93e47e7c596062b77dd5913">APInt::getMaxValue</a>(HalfBits);</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160; </div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;  <span class="comment">// ResLo = (CrossSum &lt;&lt; HalfBits) + (YLo * XLo)</span></div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *XLo, *YLo;</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *CrossSum;</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#ad191220adaaedcfba833985509a17452">m_c_Add</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a37668d9884c78ac77254cf9fb8a4276a">m_Shl</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(CrossSum), <a class="code" href="namespacellvm_1_1PatternMatch.html#a3acbd0be97863e3e03e3b85641254018">m_SpecificInt</a>(HalfBits)),</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;                         <a class="code" href="namespacellvm_1_1PatternMatch.html#a971522b36bf432ad69a0083581ab4108">m_Mul</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(YLo), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(XLo)))))</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160; </div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;  <span class="comment">// XLo = X &amp; HalfMask</span></div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;  <span class="comment">// YLo = Y &amp; HalfMask</span></div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;  <span class="comment">// TODO: Refactor with SimplifyDemandedBits or KnownBits known leading zeros</span></div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;  <span class="comment">// to enhance robustness</span></div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>;</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(XLo, <a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a3acbd0be97863e3e03e3b85641254018">m_SpecificInt</a>(HalfMask))) ||</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;      !<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(YLo, <a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a3acbd0be97863e3e03e3b85641254018">m_SpecificInt</a>(HalfMask))))</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160; </div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;  <span class="comment">// CrossSum = (X&#39; * (Y &gt;&gt; Halfbits)) + (Y&#39; * (X &gt;&gt; HalfBits))</span></div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;  <span class="comment">// X&#39; can be either X or XLo in the pattern (and the same for Y&#39;)</span></div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(CrossSum,</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;            <a class="code" href="namespacellvm_1_1PatternMatch.html#ad191220adaaedcfba833985509a17452">m_c_Add</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a8f3259c7db0ce698876fe79f45b80a32">m_c_Mul</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aa08fee11e8a5ec10c0cc2a7abbbd799a">m_LShr</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a3acbd0be97863e3e03e3b85641254018">m_SpecificInt</a>(HalfBits)),</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;                            <a class="code" href="namespacellvm_1_1PatternMatch.html#af4feec45578e32fe65d8efc59112bc8e">m_CombineOr</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(XLo))),</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;                    <a class="code" href="namespacellvm_1_1PatternMatch.html#a8f3259c7db0ce698876fe79f45b80a32">m_c_Mul</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aa08fee11e8a5ec10c0cc2a7abbbd799a">m_LShr</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a3acbd0be97863e3e03e3b85641254018">m_SpecificInt</a>(HalfBits)),</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;                            <a class="code" href="namespacellvm_1_1PatternMatch.html#af4feec45578e32fe65d8efc59112bc8e">m_CombineOr</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(YLo))))))</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="Reassociate_8cpp.html#abe860e1e952cdc501c96210be5e00805">BinaryOperator::CreateMul</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>);</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160; </div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;}</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160; </div>
<div class="line"><a name="l01348"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#a0a89a6b25b8a92fb896a994a36b74241"> 1348</a></span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#a0a89a6b25b8a92fb896a994a36b74241">InstCombinerImpl::visitAdd</a>(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="namespacellvm.html#a5e0af1b16cab9e0efc63a6ce9de2b9cc">simplifyAddInst</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0), <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(1),</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;                                 <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.hasNoSignedWrap(), <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.hasNoUnsignedWrap(),</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;                                 SQ.getWithInstruction(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)))</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;    <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, V);</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160; </div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;  <span class="keywordflow">if</span> (SimplifyAssociativeOrCommutative(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;    <span class="keywordflow">return</span> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160; </div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> = foldVectorBinop(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>;</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160; </div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Phi = foldBinopWithPhiOperands(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;    <span class="keywordflow">return</span> Phi;</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160; </div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;  <span class="comment">// (A*B)+(A*C) -&gt; A*(B+C) etc</span></div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = foldUsingDistributiveLaws(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;    <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, V);</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160; </div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *R = <a class="code" href="InstCombineAddSub_8cpp.html#a679b779589e14def262bdfa4f3f6c5d9">foldBoxMultiply</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;    <span class="keywordflow">return</span> R;</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160; </div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *R = <a class="code" href="InstCombineAddSub_8cpp.html#aa93d4c077fefadc17387144a62fa3a4a">factorizeMathWithShlOps</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>))</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;    <span class="keywordflow">return</span> R;</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160; </div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> = foldAddWithConstant(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>;</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160; </div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> = <a class="code" href="InstCombineAddSub_8cpp.html#a4dc5d808051c69f75bd70c56f13100ae">foldNoWrapAdd</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>))</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>;</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160; </div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0), *<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(1);</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType();</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;  <span class="keywordflow">if</span> (Ty-&gt;<a class="code" href="classllvm_1_1Type.html#a34ee40bb2f4f5ece47ef19e5f1f57e3c">isIntOrIntVectorTy</a>(1))</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;    <span class="keywordflow">return</span> BinaryOperator::CreateXor(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160; </div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;  <span class="comment">// X + X --&gt; X &lt;&lt; 1</span></div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> == <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>) {</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;    <span class="keyword">auto</span> *Shl = BinaryOperator::CreateShl(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, 1));</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;    Shl-&gt;setHasNoSignedWrap(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.hasNoSignedWrap());</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;    Shl-&gt;setHasNoUnsignedWrap(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.hasNoUnsignedWrap());</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;    <span class="keywordflow">return</span> Shl;</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;  }</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160; </div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *A, *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>;</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2fed53ed2b3225752bd9e4fce4967361">m_Neg</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A)))) {</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;    <span class="comment">// -A + -B --&gt; -(A + B)</span></div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2fed53ed2b3225752bd9e4fce4967361">m_Neg</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))))</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a19cdbeffd437228c47a4410a4ed34aca">BinaryOperator::CreateNeg</a>(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAdd(A, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>));</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160; </div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;    <span class="comment">// -A + B --&gt; B - A</span></div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;    <span class="keywordflow">return</span> BinaryOperator::CreateSub(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, A);</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;  }</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160; </div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;  <span class="comment">// A + -B  --&gt;  A - B</span></div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2fed53ed2b3225752bd9e4fce4967361">m_Neg</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))))</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;    <span class="keywordflow">return</span> BinaryOperator::CreateSub(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160; </div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="InstCombineAddSub_8cpp.html#a3aecc3c6f9a437c18254f7198edcee13">checkForNegativeOperand</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>))</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;    <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, V);</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160; </div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;  <span class="comment">// (A + 1) + ~B --&gt; A - B</span></div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;  <span class="comment">// ~B + (A + 1) --&gt; A - B</span></div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;  <span class="comment">// (~B + A) + 1 --&gt; A - B</span></div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;  <span class="comment">// (A + ~B) + 1 --&gt; A - B</span></div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#ac56cd25f664c1497623d26158a6c5997">m_c_BinOp</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a944c25ac9b73b02a17a20a08a25b9b21">m_Add</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#aebdb2700a77d10ae6f0ce115e23d9f77">m_One</a>()), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)))) ||</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a43ac4fbaaf63a88eb5ac05f6d3e5649c">m_BinOp</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#ad191220adaaedcfba833985509a17452">m_c_Add</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A)), <a class="code" href="namespacellvm_1_1PatternMatch.html#aebdb2700a77d10ae6f0ce115e23d9f77">m_One</a>())))</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;    <span class="keywordflow">return</span> BinaryOperator::CreateSub(A, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160; </div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;  <span class="comment">// (A + RHS) + RHS --&gt; A + (RHS &lt;&lt; 1)</span></div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#ad191220adaaedcfba833985509a17452">m_c_Add</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>)))))</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="Reassociate_8cpp.html#a680ae08c1b9b93cebdd6cbb726fe8f3d">BinaryOperator::CreateAdd</a>(A, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateShl(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, 1, <span class="stringliteral">&quot;reass.add&quot;</span>));</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160; </div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;  <span class="comment">// LHS + (A + LHS) --&gt; A + (LHS &lt;&lt; 1)</span></div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#ad191220adaaedcfba833985509a17452">m_c_Add</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>)))))</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="Reassociate_8cpp.html#a680ae08c1b9b93cebdd6cbb726fe8f3d">BinaryOperator::CreateAdd</a>(A, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateShl(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, 1, <span class="stringliteral">&quot;reass.add&quot;</span>));</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160; </div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;  {</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;    <span class="comment">// (A + C1) + (C2 - B) --&gt; (A - B) + (C1 + C2)</span></div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>, *C2;</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#ad191220adaaedcfba833985509a17452">m_c_Add</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a944c25ac9b73b02a17a20a08a25b9b21">m_Add</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#aec0ccdbde0581b3aae7f001634a34d8e">m_ImmConstant</a>(<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>)),</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;                          <a class="code" href="namespacellvm_1_1PatternMatch.html#ac3ed5602889a22db44a16e1b97fac5b8">m_Sub</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aec0ccdbde0581b3aae7f001634a34d8e">m_ImmConstant</a>(C2), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)))) &amp;&amp;</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;        (<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() || <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>())) {</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Sub = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSub(A, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="Reassociate_8cpp.html#a680ae08c1b9b93cebdd6cbb726fe8f3d">BinaryOperator::CreateAdd</a>(Sub, <a class="code" href="classllvm_1_1ConstantExpr.html#ae6f1c15034bc5515033874630a8ecce6">ConstantExpr::getAdd</a>(<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>, C2));</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;    }</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;  }</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160; </div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;  <span class="comment">// X % C0 + (( X / C0 ) % C1) * C0 =&gt; X % (C0 * C1)</span></div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = SimplifyAddWithRemainder(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, V);</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160; </div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;  <span class="comment">// ((X s/ C1) &lt;&lt; C2) + X =&gt; X s% -C1 where -C1 is 1 &lt;&lt; C2</span></div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>, *C2;</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a37668d9884c78ac77254cf9fb8a4276a">m_Shl</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a741e3212cc4b9d94cd549d02d26e172b">m_SDiv</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>)), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(C2)))) {</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;    <a class="code" href="classllvm_1_1APInt.html">APInt</a> <a class="code" href="lib_2Target_2ARM_2README_8txt.html#ade8c6980e1babe1b309a9bcec7eefd2c">one</a>(C2-&gt;<a class="code" href="classllvm_1_1APInt.html#a512fe2c15ea651294688eeec1341644c">getBitWidth</a>(), 1);</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;    <a class="code" href="classllvm_1_1APInt.html">APInt</a> minusC1 = -(*C1);</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;    <span class="keywordflow">if</span> (minusC1 == (<a class="code" href="lib_2Target_2ARM_2README_8txt.html#ade8c6980e1babe1b309a9bcec7eefd2c">one</a> &lt;&lt; *C2)) {</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;      <a class="code" href="classllvm_1_1Constant.html">Constant</a> *NewRHS = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), minusC1);</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;      <span class="keywordflow">return</span> BinaryOperator::CreateSRem(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, NewRHS);</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;    }</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;  }</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160; </div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;  <span class="comment">// (A &amp; 2^C1) + A =&gt; A &amp; (2^C1 - 1) iff bit C1 in A is a sign bit</span></div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#ad191220adaaedcfba833985509a17452">m_c_Add</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>)), <a class="code" href="namespacellvm_1_1PatternMatch.html#a94bf3939e0bea91b481096473d0e549f">m_Deferred</a>(A))) &amp;&amp;</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;      <a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>-&gt;isPowerOf2() &amp;&amp; (<a class="code" href="namespacellvm.html#ad46ed333b920b20e78d948610366254c">ComputeNumSignBits</a>(A) &gt; <a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>-&gt;countLeadingZeros())) {</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *NewMask = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), *<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a> - 1);</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;    <span class="keywordflow">return</span> BinaryOperator::CreateAnd(A, NewMask);</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;  }</div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160; </div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;  <span class="comment">// ZExt (B - A) + ZExt(A) --&gt; ZExt(B)</span></div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;  <span class="keywordflow">if</span> ((<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2cbdca7c8267aac6914d674f8e81841b">m_ZExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A))) &amp;&amp;</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;       <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2cbdca7c8267aac6914d674f8e81841b">m_ZExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#abd40223a6569b56992c2ab4f2ffc0c2e">m_NUWSub</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(A))))) ||</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;      (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2cbdca7c8267aac6914d674f8e81841b">m_ZExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A))) &amp;&amp;</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;       <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2cbdca7c8267aac6914d674f8e81841b">m_ZExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#abd40223a6569b56992c2ab4f2ffc0c2e">m_NUWSub</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(A))))))</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ZExtInst.html">ZExtInst</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>());</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160; </div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;  <span class="comment">// A+B --&gt; A|B iff A and B have no bits set in common.</span></div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#aa0f28bd61d319f9fd170e9ffee1ec7ba">haveNoCommonBitsSet</a>(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, &amp;AC, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, &amp;DT))</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;    <span class="keywordflow">return</span> BinaryOperator::CreateOr(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160; </div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba88a797f57846adb2c382b3732b471913">Ext</a> = narrowMathIfNoOverflow(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba88a797f57846adb2c382b3732b471913">Ext</a>;</div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160; </div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;  <span class="comment">// (add (xor A, B) (and A, B)) --&gt; (or A, B)</span></div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;  <span class="comment">// (add (and A, B) (xor A, B)) --&gt; (or A, B)</span></div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#ac56cd25f664c1497623d26158a6c5997">m_c_BinOp</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a82e2ea7f0ab67e33e22b3a2a188feaba">m_Xor</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)),</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;                          <a class="code" href="namespacellvm_1_1PatternMatch.html#ae9d735be1ececf149966a4da253f0320">m_c_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a94bf3939e0bea91b481096473d0e549f">m_Deferred</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a94bf3939e0bea91b481096473d0e549f">m_Deferred</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)))))</div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;    <span class="keywordflow">return</span> BinaryOperator::CreateOr(A, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160; </div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;  <span class="comment">// (add (or A, B) (and A, B)) --&gt; (add A, B)</span></div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;  <span class="comment">// (add (and A, B) (or A, B)) --&gt; (add A, B)</span></div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#ac56cd25f664c1497623d26158a6c5997">m_c_BinOp</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a42569041ddafba7d40243e126af07f42">m_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)),</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;                          <a class="code" href="namespacellvm_1_1PatternMatch.html#ae9d735be1ececf149966a4da253f0320">m_c_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a94bf3939e0bea91b481096473d0e549f">m_Deferred</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a94bf3939e0bea91b481096473d0e549f">m_Deferred</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))))) {</div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;    <span class="comment">// Replacing operands in-place to preserve nuw/nsw flags.</span></div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;    replaceOperand(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 0, A);</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;    replaceOperand(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 1, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;    <span class="keywordflow">return</span> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;  }</div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160; </div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;  <span class="comment">// (add A (or A, -A)) --&gt; (and (add A, -1) A)</span></div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;  <span class="comment">// (add A (or -A, A)) --&gt; (and (add A, -1) A)</span></div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;  <span class="comment">// (add (or A, -A) A) --&gt; (and (add A, -1) A)</span></div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;  <span class="comment">// (add (or -A, A) A) --&gt; (and (add A, -1) A)</span></div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#ac56cd25f664c1497623d26158a6c5997">m_c_BinOp</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a7af604b3a6b3a44113d4c54c5c04d031">m_c_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2fed53ed2b3225752bd9e4fce4967361">m_Neg</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a94bf3939e0bea91b481096473d0e549f">m_Deferred</a>(A)),</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;                                                      <a class="code" href="namespacellvm_1_1PatternMatch.html#a94bf3939e0bea91b481096473d0e549f">m_Deferred</a>(A)))))) {</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Add =</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;        <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAdd(A, <a class="code" href="classllvm_1_1Constant.html#a4d51384de6e1798bb6aa875aebeea9f0">Constant::getAllOnesValue</a>(A-&gt;getType()), <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;                          <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.hasNoUnsignedWrap(), <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.hasNoSignedWrap());</div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;    <span class="keywordflow">return</span> BinaryOperator::CreateAnd(Add, A);</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;  }</div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160; </div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;  <span class="comment">// Canonicalize ((A &amp; -A) - 1) --&gt; ((A - 1) &amp; ~A)</span></div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;  <span class="comment">// Forms all commutable operations, and simplifies ctpop -&gt; cttz folds.</span></div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;            <a class="code" href="namespacellvm_1_1PatternMatch.html#a944c25ac9b73b02a17a20a08a25b9b21">m_Add</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#ae9d735be1ececf149966a4da253f0320">m_c_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2fed53ed2b3225752bd9e4fce4967361">m_Neg</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a94bf3939e0bea91b481096473d0e549f">m_Deferred</a>(A))))),</div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;                  <a class="code" href="namespacellvm_1_1PatternMatch.html#aaea0d5ebb8b57ddde2095f80e2e94bb2">m_AllOnes</a>()))) {</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="namespacellvm.html#af14335020a68db7b9f722810e4a05180a421c6b20238e6e6585270538188f15b9">AllOnes</a> = <a class="code" href="classllvm_1_1Constant.html#a4d51384de6e1798bb6aa875aebeea9f0">ConstantInt::getAllOnesValue</a>(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>());</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Dec = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAdd(A, <a class="code" href="namespacellvm.html#af14335020a68db7b9f722810e4a05180a421c6b20238e6e6585270538188f15b9">AllOnes</a>);</div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Not = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateXor(A, <a class="code" href="namespacellvm.html#af14335020a68db7b9f722810e4a05180a421c6b20238e6e6585270538188f15b9">AllOnes</a>);</div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;    <span class="keywordflow">return</span> BinaryOperator::CreateAnd(Dec, Not);</div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;  }</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160; </div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;  <span class="comment">// Disguised reassociation/factorization:</span></div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;  <span class="comment">// ~(A * C1) + A</span></div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;  <span class="comment">// ((A * -C1) - 1) + A</span></div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;  <span class="comment">// ((A * -C1) + A) - 1</span></div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;  <span class="comment">// (A * (1 - C1)) - 1</span></div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;            <a class="code" href="namespacellvm_1_1PatternMatch.html#ad191220adaaedcfba833985509a17452">m_c_Add</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a971522b36bf432ad69a0083581ab4108">m_Mul</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>))))),</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;                    <a class="code" href="namespacellvm_1_1PatternMatch.html#a94bf3939e0bea91b481096473d0e549f">m_Deferred</a>(A)))) {</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType();</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *NewMulC = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, 1 - *<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>);</div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NewMul = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateMul(A, NewMulC);</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="Reassociate_8cpp.html#a680ae08c1b9b93cebdd6cbb726fe8f3d">BinaryOperator::CreateAdd</a>(NewMul, <a class="code" href="classllvm_1_1Constant.html#a4d51384de6e1798bb6aa875aebeea9f0">ConstantInt::getAllOnesValue</a>(Ty));</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;  }</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160; </div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;  <span class="comment">// (A * -2**C) + B --&gt; B - (A &lt;&lt; C)</span></div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *NegPow2C;</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#ad191220adaaedcfba833985509a17452">m_c_Add</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a971522b36bf432ad69a0083581ab4108">m_Mul</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#ad2c5d7e02adb2570f5058d61021b66f6">m_NegatedPower2</a>(NegPow2C))),</div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;                        <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)))) {</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *ShiftAmtC = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, NegPow2C-&gt;<a class="code" href="classllvm_1_1APInt.html#a9a99431f0828d0222c617eb876bc5d34">countTrailingZeros</a>());</div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Shl = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateShl(A, ShiftAmtC);</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;    <span class="keywordflow">return</span> BinaryOperator::CreateSub(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, Shl);</div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;  }</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160; </div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;  <span class="comment">// Canonicalize signum variant that ends in add:</span></div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;  <span class="comment">// (A s&gt;&gt; (BW - 1)) + (zext (A s&gt; 0)) --&gt; (A s&gt;&gt; (BW - 1)) | (zext (A != 0))</span></div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> Pred;</div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> <a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> = Ty-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>();</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a64153676e101a130bbbaaf91635d253a">m_AShr</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#aa4a99c313af96b3b50a9768338a54b2e">m_SpecificIntAllowUndef</a>(<a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> - 1))) &amp;&amp;</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2cbdca7c8267aac6914d674f8e81841b">m_ZExt</a>(</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;                     <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a3fe9b3ddb71b9fb53d9fc74b3a0710bf">m_ICmp</a>(Pred, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a874d53817a4923de8e58af6b278c09b0">m_ZeroInt</a>()))))) &amp;&amp;</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;      Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a">CmpInst::ICMP_SGT</a>) {</div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NotZero = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateIsNotNull(A, <span class="stringliteral">&quot;isnotnull&quot;</span>);</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Zext = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateZExt(NotZero, Ty, <span class="stringliteral">&quot;isnotnull.zext&quot;</span>);</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;    <span class="keywordflow">return</span> BinaryOperator::CreateOr(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, Zext);</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;  }</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160; </div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Ashr = <a class="code" href="InstCombineAddSub_8cpp.html#a7d07668628012ac4add2dc0c4824a5c0">foldAddToAshr</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;    <span class="keywordflow">return</span> Ashr;</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160; </div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;  <span class="comment">// TODO(jingyue): Consider willNotOverflowSignedAdd and</span></div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;  <span class="comment">// willNotOverflowUnsignedAdd to reduce the number of invocations of</span></div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;  <span class="comment">// computeKnownBits.</span></div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.hasNoSignedWrap() &amp;&amp; willNotOverflowSignedAdd(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;    Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;    <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.setHasNoSignedWrap(<span class="keyword">true</span>);</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;  }</div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.hasNoUnsignedWrap() &amp;&amp; willNotOverflowUnsignedAdd(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;    Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;    <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.setHasNoUnsignedWrap(<span class="keyword">true</span>);</div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;  }</div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160; </div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *V = <a class="code" href="InstCombineAddSub_8cpp.html#a68a28d78ec908c83a9d46101bd5cbbff">canonicalizeLowbitMask</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>))</div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;    <span class="keywordflow">return</span> V;</div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160; </div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *V =</div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;          canonicalizeCondSignextOfHighBitExtractToSignextHighBitExtract(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;    <span class="keywordflow">return</span> V;</div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160; </div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *SatAdd = <a class="code" href="InstCombineAddSub_8cpp.html#ac21a19f12988b14a84b15d78184fc8af">foldToUnsignedSaturatedAdd</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;    <span class="keywordflow">return</span> SatAdd;</div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160; </div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;  <span class="comment">// usub.sat(A, B) + B =&gt; umax(A, B)</span></div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#ac56cd25f664c1497623d26158a6c5997">m_c_BinOp</a>(</div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;          <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(m_Intrinsic&lt;Intrinsic::usub_sat&gt;(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))),</div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;          <a class="code" href="namespacellvm_1_1PatternMatch.html#a94bf3939e0bea91b481096473d0e549f">m_Deferred</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)))) {</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;    <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;        <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateIntrinsic(<a class="code" href="namespacellvm_1_1APIntOps.html#a071b3581888d9e3b0b05cec58f152a91">Intrinsic::umax</a>, {I.getType()}, {A, B}));</div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;  }</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160; </div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;  <span class="comment">// ctpop(A) + ctpop(B) =&gt; ctpop(A | B) if A and B have no bits set in common.</span></div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(m_Intrinsic&lt;Intrinsic::ctpop&gt;(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A)))) &amp;&amp;</div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(m_Intrinsic&lt;Intrinsic::ctpop&gt;(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)))) &amp;&amp;</div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;      <a class="code" href="namespacellvm.html#aa0f28bd61d319f9fd170e9ffee1ec7ba">haveNoCommonBitsSet</a>(A, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, &amp;AC, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, &amp;DT))</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;    <span class="keywordflow">return</span> replaceInstUsesWith(</div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;        <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateIntrinsic(Intrinsic::ctpop, {I.getType()},</div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;                                   {Builder.CreateOr(A, B)}));</div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160; </div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;  <span class="keywordflow">return</span> Changed ? &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;}</div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;<span class="comment">/// Eliminate an op from a linear interpolation (lerp) pattern.</span></div>
<div class="line"><a name="l01592"></a><span class="lineno"><a class="line" href="InstCombineAddSub_8cpp.html#aee922e34ce9e7dd2527478fa7e145607"> 1592</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="InstCombineAddSub_8cpp.html#aee922e34ce9e7dd2527478fa7e145607">factorizeLerp</a>(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;                                  <a class="code" href="classllvm_1_1IRBuilder.html">InstCombiner::BuilderTy</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>) {</div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, *<a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a>;</div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#ada1025d503576216884e36b2fddc22e7">m_c_FAdd</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a90b5c9b20258ae16d2be00374f116551">m_c_FMul</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>),</div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;                                            <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aac83d9218356dfe82518cb81e3a53f2f">m_FSub</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a8f87f39b5e0dedd0793bb3a450f463cf">m_FPOne</a>(),</div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;                                                            <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a>))))),</div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;                          <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a90b5c9b20258ae16d2be00374f116551">m_c_FMul</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a94bf3939e0bea91b481096473d0e549f">m_Deferred</a>(<a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a>))))))</div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160; </div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;  <span class="comment">// (Y * (1.0 - Z)) + (X * Z) --&gt; Y + Z * (X - Y) [8 commuted variants]</span></div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *XY = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateFSubFMF(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *MulZ = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateFMulFMF(<a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a>, XY, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a6e018768c6bc2ac78b69e88436de5cc4">BinaryOperator::CreateFAddFMF</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, MulZ, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;}</div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;<span class="comment">/// Factor a common operand out of fadd/fsub of fmul/fdiv.</span></div>
<div class="line"><a name="l01608"></a><span class="lineno"><a class="line" href="InstCombineAddSub_8cpp.html#ad596efe3fec6e55f7011c9b61cd7928e"> 1608</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="InstCombineAddSub_8cpp.html#ad596efe3fec6e55f7011c9b61cd7928e">factorizeFAddFSub</a>(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;                                      <a class="code" href="classllvm_1_1IRBuilder.html">InstCombiner::BuilderTy</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>) {</div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOpcode() == Instruction::FAdd ||</div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;          <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOpcode() == Instruction::FSub) &amp;&amp; <span class="stringliteral">&quot;Expecting fadd/fsub&quot;</span>);</div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.hasAllowReassoc() &amp;&amp; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.hasNoSignedZeros() &amp;&amp;</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;         <span class="stringliteral">&quot;FP factorization requires FMF&quot;</span>);</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160; </div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Lerp = <a class="code" href="InstCombineAddSub_8cpp.html#aee922e34ce9e7dd2527478fa7e145607">factorizeLerp</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>))</div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;    <span class="keywordflow">return</span> Lerp;</div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160; </div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Op0 = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0), *Op1 = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(1);</div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;  <span class="keywordflow">if</span> (!Op0-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() || !Op1-&gt;hasOneUse())</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160; </div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, *<a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a>;</div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;  <span class="keywordtype">bool</span> IsFMul;</div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;  <span class="keywordflow">if</span> ((<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a7aff89f4f22502c8ad9118bed59ce21c">m_FMul</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a>))) &amp;&amp;</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;       <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a90b5c9b20258ae16d2be00374f116551">m_c_FMul</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a>)))) ||</div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;      (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a7aff89f4f22502c8ad9118bed59ce21c">m_FMul</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>))) &amp;&amp;</div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;       <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a90b5c9b20258ae16d2be00374f116551">m_c_FMul</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a>)))))</div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;    IsFMul = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a0a77c976c6edefcb3c05ad8a225fd36e">m_FDiv</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a>))) &amp;&amp;</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;           <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a0a77c976c6edefcb3c05ad8a225fd36e">m_FDiv</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a>))))</div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;    IsFMul = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160; </div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;  <span class="comment">// (X * Z) + (Y * Z) --&gt; (X + Y) * Z</span></div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;  <span class="comment">// (X * Z) - (Y * Z) --&gt; (X - Y) * Z</span></div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;  <span class="comment">// (X / Z) + (Y / Z) --&gt; (X + Y) / Z</span></div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;  <span class="comment">// (X / Z) - (Y / Z) --&gt; (X - Y) / Z</span></div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;  <span class="keywordtype">bool</span> IsFAdd = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOpcode() == Instruction::FAdd;</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *XY = IsFAdd ? <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateFAddFMF(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;                     : <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateFSubFMF(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160; </div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;  <span class="comment">// Bail out if we just created a denormal constant.</span></div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;  <span class="comment">// TODO: This is copied from a previous implementation. Is it necessary?</span></div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APFloat.html">APFloat</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(XY, <a class="code" href="namespacellvm_1_1PatternMatch.html#acd794d7b3653822f61ba126e1678e03f">m_APFloat</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)) &amp;&amp; !<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;isNormal())</div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160; </div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;  <span class="keywordflow">return</span> IsFMul ? <a class="code" href="classllvm_1_1BinaryOperator.html#a3b9d9c1b6e4b743230c9c377c40a4247">BinaryOperator::CreateFMulFMF</a>(XY, <a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a>, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;                : <a class="code" href="classllvm_1_1BinaryOperator.html#a59ab64994d74243a175979d5b7b6b535">BinaryOperator::CreateFDivFMF</a>(XY, <a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a>, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;}</div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160; </div>
<div class="line"><a name="l01653"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#a92fdf04445f26ef88ea0e134408b30fe"> 1653</a></span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#a92fdf04445f26ef88ea0e134408b30fe">InstCombinerImpl::visitFAdd</a>(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="namespacellvm.html#a76162df5082ce14f7796e4307cba27fd">simplifyFAddInst</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0), <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(1),</div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;                                  <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getFastMathFlags(),</div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;                                  SQ.getWithInstruction(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)))</div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;    <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, V);</div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160; </div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;  <span class="keywordflow">if</span> (SimplifyAssociativeOrCommutative(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;    <span class="keywordflow">return</span> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160; </div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> = foldVectorBinop(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>;</div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160; </div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Phi = foldBinopWithPhiOperands(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;    <span class="keywordflow">return</span> Phi;</div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160; </div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *FoldedFAdd = foldBinOpIntoSelectOrPhi(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;    <span class="keywordflow">return</span> FoldedFAdd;</div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160; </div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;  <span class="comment">// (-X) + Y --&gt; Y - X</span></div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>;</div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#ada1025d503576216884e36b2fddc22e7">m_c_FAdd</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#af431ec215bba8bb9c56e7541d99920f2">m_FNeg</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))))</div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#adfdc28604ad16e04025b71bc46f2ef39">BinaryOperator::CreateFSubFMF</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160; </div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;  <span class="comment">// Similar to above, but look through fmul/fdiv for the negated term.</span></div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;  <span class="comment">// (-X * Y) + Z --&gt; Z - (X * Y) [4 commuted variants]</span></div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a>;</div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#ada1025d503576216884e36b2fddc22e7">m_c_FAdd</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a90b5c9b20258ae16d2be00374f116551">m_c_FMul</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#af431ec215bba8bb9c56e7541d99920f2">m_FNeg</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))),</div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;                         <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a>)))) {</div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *XY = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateFMulFMF(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#adfdc28604ad16e04025b71bc46f2ef39">BinaryOperator::CreateFSubFMF</a>(<a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a>, XY, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;  }</div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;  <span class="comment">// (-X / Y) + Z --&gt; Z - (X / Y) [2 commuted variants]</span></div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;  <span class="comment">// (X / -Y) + Z --&gt; Z - (X / Y) [2 commuted variants]</span></div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#ada1025d503576216884e36b2fddc22e7">m_c_FAdd</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a0a77c976c6edefcb3c05ad8a225fd36e">m_FDiv</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#af431ec215bba8bb9c56e7541d99920f2">m_FNeg</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))),</div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;                         <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a>))) ||</div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#ada1025d503576216884e36b2fddc22e7">m_c_FAdd</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a0a77c976c6edefcb3c05ad8a225fd36e">m_FDiv</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#af431ec215bba8bb9c56e7541d99920f2">m_FNeg</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>)))),</div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;                         <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a>)))) {</div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *XY = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateFDivFMF(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#adfdc28604ad16e04025b71bc46f2ef39">BinaryOperator::CreateFSubFMF</a>(<a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a>, XY, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;  }</div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160; </div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;  <span class="comment">// Check for (fadd double (sitofp x), y), see if we can merge this into an</span></div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;  <span class="comment">// integer add followed by a promotion.</span></div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0), *<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(1);</div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1SIToFPInst.html">SIToFPInst</a> *LHSConv = dyn_cast&lt;SIToFPInst&gt;(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>)) {</div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *LHSIntVal = LHSConv-&gt;getOperand(0);</div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *FPType = LHSConv-&gt;getType();</div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160; </div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;    <span class="comment">// TODO: This check is overly conservative. In many cases known bits</span></div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;    <span class="comment">// analysis can tell us that the result of the addition has less significant</span></div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;    <span class="comment">// bits than the integer type can hold.</span></div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;    <span class="keyword">auto</span> IsValidPromotion = [](<a class="code" href="classllvm_1_1Type.html">Type</a> *FTy, <a class="code" href="classllvm_1_1Type.html">Type</a> *ITy) {</div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;      <a class="code" href="classllvm_1_1Type.html">Type</a> *FScalarTy = FTy-&gt;<a class="code" href="classllvm_1_1Type.html#a4abb39a66573f61fda80469faa5d861d">getScalarType</a>();</div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;      <a class="code" href="classllvm_1_1Type.html">Type</a> *IScalarTy = ITy-&gt;<a class="code" href="classllvm_1_1Type.html#a4abb39a66573f61fda80469faa5d861d">getScalarType</a>();</div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160; </div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;      <span class="comment">// Do we have enough bits in the significand to represent the result of</span></div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;      <span class="comment">// the integer addition?</span></div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;      <span class="keywordtype">unsigned</span> MaxRepresentableBits =</div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;          <a class="code" href="structllvm_1_1APFloatBase.html#a6530cd829b7e8d4df2c29d950039961e">APFloat::semanticsPrecision</a>(FScalarTy-&gt;<a class="code" href="classllvm_1_1Type.html#adc21598ac33ea9d50f3a939f26a28940">getFltSemantics</a>());</div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;      <span class="keywordflow">return</span> IScalarTy-&gt;<a class="code" href="classllvm_1_1Type.html#a13e877ef779ba7a0688081079f4f9b03">getIntegerBitWidth</a>() &lt;= MaxRepresentableBits;</div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;    };</div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160; </div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;    <span class="comment">// (fadd double (sitofp x), fpcst) --&gt; (sitofp (add int x, intcst))</span></div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;    <span class="comment">// ... if the constant fits in the integer value.  This is useful for things</span></div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;    <span class="comment">// like (double)(x &amp; 1234) + 4.0 -&gt; (double)((X &amp; 1234)+4) which no longer</span></div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;    <span class="comment">// requires a constant pool load, and generally allows the add to be better</span></div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;    <span class="comment">// instcombined.</span></div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantFP.html">ConstantFP</a> *CFP = dyn_cast&lt;ConstantFP&gt;(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>))</div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;      <span class="keywordflow">if</span> (IsValidPromotion(FPType, LHSIntVal-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>())) {</div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;        <a class="code" href="classllvm_1_1Constant.html">Constant</a> *CI =</div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;          <a class="code" href="classllvm_1_1ConstantExpr.html#aca9adeb29ed06c9f8694fc69cb2bf426">ConstantExpr::getFPToSI</a>(CFP, LHSIntVal-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>());</div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;        <span class="keywordflow">if</span> (LHSConv-&gt;hasOneUse() &amp;&amp;</div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;            <a class="code" href="classllvm_1_1ConstantExpr.html#a76d6befe67c4e647ed64cc5f22114c80">ConstantExpr::getSIToFP</a>(CI, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType()) == CFP &amp;&amp;</div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;            willNotOverflowSignedAdd(LHSIntVal, CI, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;          <span class="comment">// Insert the new integer add.</span></div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;          <a class="code" href="classllvm_1_1Value.html">Value</a> *NewAdd = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNSWAdd(LHSIntVal, CI, <span class="stringliteral">&quot;addconv&quot;</span>);</div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1SIToFPInst.html">SIToFPInst</a>(NewAdd, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType());</div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;        }</div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;      }</div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160; </div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;    <span class="comment">// (fadd double (sitofp x), (sitofp y)) --&gt; (sitofp (add int x, y))</span></div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1SIToFPInst.html">SIToFPInst</a> *RHSConv = dyn_cast&lt;SIToFPInst&gt;(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>)) {</div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *RHSIntVal = RHSConv-&gt;getOperand(0);</div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;      <span class="comment">// It&#39;s enough to check LHS types only because we require int types to</span></div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;      <span class="comment">// be the same for this transform.</span></div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;      <span class="keywordflow">if</span> (IsValidPromotion(FPType, LHSIntVal-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>())) {</div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;        <span class="comment">// Only do this if x/y have the same type, if at least one of them has a</span></div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;        <span class="comment">// single use (so we don&#39;t increase the number of int-&gt;fp conversions),</span></div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;        <span class="comment">// and if the integer add will not overflow.</span></div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;        <span class="keywordflow">if</span> (LHSIntVal-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>() == RHSIntVal-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>() &amp;&amp;</div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;            (LHSConv-&gt;hasOneUse() || RHSConv-&gt;hasOneUse()) &amp;&amp;</div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;            willNotOverflowSignedAdd(LHSIntVal, RHSIntVal, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;          <span class="comment">// Insert the new integer add.</span></div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;          <a class="code" href="classllvm_1_1Value.html">Value</a> *NewAdd = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNSWAdd(LHSIntVal, RHSIntVal, <span class="stringliteral">&quot;addconv&quot;</span>);</div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1SIToFPInst.html">SIToFPInst</a>(NewAdd, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType());</div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;        }</div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;      }</div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;    }</div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;  }</div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160; </div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;  <span class="comment">// Handle specials cases for FAdd with selects feeding the operation</span></div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = SimplifySelectsFeedingBinaryOp(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>))</div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;    <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, V);</div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160; </div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.hasAllowReassoc() &amp;&amp; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.hasNoSignedZeros()) {</div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = <a class="code" href="InstCombineAddSub_8cpp.html#ad596efe3fec6e55f7011c9b61cd7928e">factorizeFAddFSub</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>))</div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>;</div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160; </div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;    <span class="comment">// Try to fold fadd into start value of reduction intrinsic.</span></div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#ada1025d503576216884e36b2fddc22e7">m_c_FAdd</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(m_Intrinsic&lt;Intrinsic::vector_reduce_fadd&gt;(</div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;                               <a class="code" href="namespacellvm_1_1PatternMatch.html#ab9370b798ae530641518075b0832723a">m_AnyZeroFP</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>))),</div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;                           <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>)))) {</div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;      <span class="comment">// fadd (rdx 0.0, X), Y --&gt; rdx Y, X</span></div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;      <span class="keywordflow">return</span> replaceInstUsesWith(</div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;          <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateIntrinsic(Intrinsic::vector_reduce_fadd,</div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;                                     {X-&gt;getType()}, {Y, X}, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>));</div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;    }</div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1APFloat.html">APFloat</a> *StartC, *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(m_Intrinsic&lt;Intrinsic::vector_reduce_fadd&gt;(</div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;                       <a class="code" href="namespacellvm_1_1PatternMatch.html#acd794d7b3653822f61ba126e1678e03f">m_APFloat</a>(StartC), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)))) &amp;&amp;</div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#acd794d7b3653822f61ba126e1678e03f">m_APFloat</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))) {</div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;      <span class="comment">// fadd (rdx StartC, X), C --&gt; rdx (C + StartC), X</span></div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;      <a class="code" href="classllvm_1_1Constant.html">Constant</a> *NewStartC = <a class="code" href="classllvm_1_1ConstantFP.html#a5eb8f7a5d3cfdd127ad9db2e425e14eb">ConstantFP::get</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType(), *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> + *StartC);</div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;      <span class="keywordflow">return</span> replaceInstUsesWith(</div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;          <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateIntrinsic(Intrinsic::vector_reduce_fadd,</div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;                                     {X-&gt;getType()}, {NewStartC, X}, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>));</div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;    }</div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160; </div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;    <span class="comment">// (X * MulC) + X --&gt; X * (MulC + 1.0)</span></div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *MulC;</div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#ada1025d503576216884e36b2fddc22e7">m_c_FAdd</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a7aff89f4f22502c8ad9118bed59ce21c">m_FMul</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aec0ccdbde0581b3aae7f001634a34d8e">m_ImmConstant</a>(MulC)),</div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;                           <a class="code" href="namespacellvm_1_1PatternMatch.html#a94bf3939e0bea91b481096473d0e549f">m_Deferred</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)))) {</div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Constant.html">Constant</a> *NewMulC = <a class="code" href="namespacellvm.html#a964455f36837281d37f2a44e2fcb4cca">ConstantFoldBinaryOpOperands</a>(</div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;              Instruction::FAdd, MulC, <a class="code" href="classllvm_1_1ConstantFP.html#a5eb8f7a5d3cfdd127ad9db2e425e14eb">ConstantFP::get</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType(), 1.0), <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>))</div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a3b9d9c1b6e4b743230c9c377c40a4247">BinaryOperator::CreateFMulFMF</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, NewMulC, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;    }</div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160; </div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;    <span class="comment">// (-X - Y) + (X + Z) --&gt; Z - Y</span></div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#ada1025d503576216884e36b2fddc22e7">m_c_FAdd</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aac83d9218356dfe82518cb81e3a53f2f">m_FSub</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#af431ec215bba8bb9c56e7541d99920f2">m_FNeg</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>)),</div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;                           <a class="code" href="namespacellvm_1_1PatternMatch.html#ada1025d503576216884e36b2fddc22e7">m_c_FAdd</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a94bf3939e0bea91b481096473d0e549f">m_Deferred</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a>)))))</div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#adfdc28604ad16e04025b71bc46f2ef39">BinaryOperator::CreateFSubFMF</a>(<a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160; </div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = FAddCombine(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>).<a class="code" href="HexagonBitSimplify_8cpp.html#aa56209f617200c772b32fea2947178a7">simplify</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;      <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, V);</div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;  }</div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160; </div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;}</div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;<span class="comment">/// Optimize pointer differences into the same array into a size.  Consider:</span></div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;<span class="comment">///  &amp;A[10] - &amp;A[0]: we should compile this to &quot;10&quot;.  LHS/RHS are the pointer</span></div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;<span class="comment">/// operands to the ptrtoint instructions for the LHS/RHS of the subtract.</span></div>
<div class="line"><a name="l01805"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#a884253dce055eb76863ec81c061aef33"> 1805</a></span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#a884253dce055eb76863ec81c061aef33">InstCombinerImpl::OptimizePointerDifference</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>,</div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;                                                   <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty, <span class="keywordtype">bool</span> IsNUW) {</div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;  <span class="comment">// If LHS is a gep based on RHS or RHS is a gep based on LHS, we can optimize</span></div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;  <span class="comment">// this.</span></div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;  <span class="keywordtype">bool</span> Swapped = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;  <a class="code" href="classllvm_1_1GEPOperator.html">GEPOperator</a> *GEP1 = <span class="keyword">nullptr</span>, *GEP2 = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;  <span class="keywordflow">if</span> (!isa&lt;GEPOperator&gt;(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>) &amp;&amp; isa&lt;GEPOperator&gt;(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>)) {</div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;    <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;    Swapped = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;  }</div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160; </div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;  <span class="comment">// Require at least one GEP with a common base pointer on both sides.</span></div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *LHSGEP = dyn_cast&lt;GEPOperator&gt;(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>)) {</div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;    <span class="comment">// (gep X, ...) - X</span></div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;    <span class="keywordflow">if</span> (LHSGEP-&gt;getOperand(0)-&gt;stripPointerCasts() ==</div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;        <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>-&gt;<a class="code" href="classllvm_1_1Value.html#a966eb231e7d4e572874d2cb49b18faea">stripPointerCasts</a>()) {</div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;      GEP1 = LHSGEP;</div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">auto</span> *RHSGEP = dyn_cast&lt;GEPOperator&gt;(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>)) {</div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;      <span class="comment">// (gep X, ...) - (gep X, ...)</span></div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;      <span class="keywordflow">if</span> (LHSGEP-&gt;getOperand(0)-&gt;stripPointerCasts() ==</div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;          RHSGEP-&gt;getOperand(0)-&gt;stripPointerCasts()) {</div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;        GEP1 = LHSGEP;</div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;        GEP2 = RHSGEP;</div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;      }</div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;    }</div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;  }</div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160; </div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;  <span class="keywordflow">if</span> (!GEP1)</div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160; </div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;  <span class="keywordflow">if</span> (GEP2) {</div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;    <span class="comment">// (gep X, ...) - (gep X, ...)</span></div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;    <span class="comment">// Avoid duplicating the arithmetic if there are more than one non-constant</span></div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;    <span class="comment">// indices between the two GEPs and either GEP has a non-constant index and</span></div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;    <span class="comment">// multiple users. If zero non-constant index, the result is a constant and</span></div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;    <span class="comment">// there is no duplication. If one non-constant index, the result is an add</span></div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;    <span class="comment">// or sub with a constant, which is no larger than the original code, and</span></div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;    <span class="comment">// there&#39;s no duplicated arithmetic, even if either GEP has multiple</span></div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;    <span class="comment">// users. If more than one non-constant indices combined, as long as the GEP</span></div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;    <span class="comment">// with at least one non-constant index doesn&#39;t have multiple users, there</span></div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;    <span class="comment">// is no duplication.</span></div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;    <span class="keywordtype">unsigned</span> NumNonConstantIndices1 = GEP1-&gt;<a class="code" href="classllvm_1_1GEPOperator.html#a57286aaebfc778a6c1215125ed8493ef">countNonConstantIndices</a>();</div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;    <span class="keywordtype">unsigned</span> NumNonConstantIndices2 = GEP2-&gt;countNonConstantIndices();</div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;    <span class="keywordflow">if</span> (NumNonConstantIndices1 + NumNonConstantIndices2 &gt; 1 &amp;&amp;</div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;        ((NumNonConstantIndices1 &gt; 0 &amp;&amp; !GEP1-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>()) ||</div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;         (NumNonConstantIndices2 &gt; 0 &amp;&amp; !GEP2-&gt;hasOneUse()))) {</div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;    }</div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;  }</div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160; </div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;  <span class="comment">// Emit the offset of the GEP and an intptr_t.</span></div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Result = EmitGEPOffset(GEP1);</div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160; </div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;  <span class="comment">// If this is a single inbounds GEP and the original sub was nuw,</span></div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;  <span class="comment">// then the final multiplication is also nuw.</span></div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = dyn_cast&lt;Instruction&gt;(Result))</div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;    <span class="keywordflow">if</span> (IsNUW &amp;&amp; !GEP2 &amp;&amp; !Swapped &amp;&amp; GEP1-&gt;<a class="code" href="classllvm_1_1GEPOperator.html#a3783a9756e9b9a1fe124622d27522713">isInBounds</a>() &amp;&amp;</div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;        <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOpcode() == <a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Instruction::Mul</a>)</div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;      <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;setHasNoUnsignedWrap();</div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160; </div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;  <span class="comment">// If we have a 2nd GEP of the same base pointer, subtract the offsets.</span></div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;  <span class="comment">// If both GEPs are inbounds, then the subtract does not have signed overflow.</span></div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;  <span class="keywordflow">if</span> (GEP2) {</div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Offset = EmitGEPOffset(GEP2);</div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;    Result = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSub(Result, Offset, <span class="stringliteral">&quot;gepdiff&quot;</span>, <span class="comment">/* NUW */</span> <span class="keyword">false</span>,</div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;                               GEP1-&gt;<a class="code" href="classllvm_1_1GEPOperator.html#a3783a9756e9b9a1fe124622d27522713">isInBounds</a>() &amp;&amp; GEP2-&gt;isInBounds());</div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;  }</div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160; </div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;  <span class="comment">// If we have p - gep(p, ...)  then we have to negate the result.</span></div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;  <span class="keywordflow">if</span> (Swapped)</div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;    Result = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNeg(Result, <span class="stringliteral">&quot;diff.neg&quot;</span>);</div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160; </div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateIntCast(Result, Ty, <span class="keyword">true</span>);</div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;}</div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160; </div>
<div class="line"><a name="l01881"></a><span class="lineno"><a class="line" href="InstCombineAddSub_8cpp.html#a7badd6236e4072f75267bf86664547d2"> 1881</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="InstCombineAddSub_8cpp.html#a7badd6236e4072f75267bf86664547d2">foldSubOfMinMax</a>(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;                                    <a class="code" href="classllvm_1_1IRBuilder.html">InstCombiner::BuilderTy</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>) {</div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Op0 = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0);</div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Op1 = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(1);</div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType();</div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;  <span class="keyword">auto</span> *<a class="code" href="structllvm_1_1MinMax.html">MinMax</a> = dyn_cast&lt;MinMaxIntrinsic&gt;(Op1);</div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="structllvm_1_1MinMax.html">MinMax</a>)</div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160; </div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;  <span class="comment">// sub(add(X,Y), s/umin(X,Y)) --&gt; s/umax(X,Y)</span></div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;  <span class="comment">// sub(add(X,Y), s/umax(X,Y)) --&gt; s/umin(X,Y)</span></div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> = <a class="code" href="structllvm_1_1MinMax.html">MinMax</a>-&gt;getLHS();</div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a> = <a class="code" href="structllvm_1_1MinMax.html">MinMax</a>-&gt;getRHS();</div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#ad191220adaaedcfba833985509a17452">m_c_Add</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))) &amp;&amp;</div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;      (Op0-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() || Op1-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>())) {</div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;    <a class="code" href="namespacellvm_1_1Intrinsic.html#a80add6b3b1cdaec560907995127adc16">Intrinsic::ID</a> InvID = <a class="code" href="namespacellvm.html#a0434306df3aa5ec48fcf19d0958d7c01">getInverseMinMaxIntrinsic</a>(<a class="code" href="structllvm_1_1MinMax.html">MinMax</a>-&gt;getIntrinsicID());</div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;    <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = <a class="code" href="namespacellvm_1_1Intrinsic.html#aefa39f6b622360ce4e947feb9f671b73">Intrinsic::getDeclaration</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getModule(), InvID, Ty);</div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1CallInst.html#a850d8262cd900958b3153c4aa080b2bb">CallInst::Create</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, {<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>});</div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;  }</div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160; </div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;  <span class="comment">// sub(add(X,Y),umin(Y,Z)) --&gt; add(X,usub.sat(Y,Z))</span></div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;  <span class="comment">// sub(add(X,Z),umin(Y,Z)) --&gt; add(X,usub.sat(Z,Y))</span></div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a>;</div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#adc571425e9aecccf7ebf5fcc3c678d94">m_UMin</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a>))))) {</div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#ad191220adaaedcfba833985509a17452">m_c_Add</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>))))) {</div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *USub = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateIntrinsic(Intrinsic::usub_sat, Ty, {<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, <a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a>});</div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="Reassociate_8cpp.html#a680ae08c1b9b93cebdd6cbb726fe8f3d">BinaryOperator::CreateAdd</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, USub);</div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;    }</div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#ad191220adaaedcfba833985509a17452">m_c_Add</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>))))) {</div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *USub = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateIntrinsic(Intrinsic::usub_sat, Ty, {<a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>});</div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="Reassociate_8cpp.html#a680ae08c1b9b93cebdd6cbb726fe8f3d">BinaryOperator::CreateAdd</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, USub);</div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;    }</div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;  }</div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160; </div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;  <span class="comment">// sub Op0, smin((sub nsw Op0, Z), 0) --&gt; smax Op0, Z</span></div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;  <span class="comment">// sub Op0, smax((sub nsw Op0, Z), 0) --&gt; smin Op0, Z</span></div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="structllvm_1_1MinMax.html">MinMax</a>-&gt;isSigned() &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a874d53817a4923de8e58af6b278c09b0">m_ZeroInt</a>()) &amp;&amp;</div>
<div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#ace8c2df4c506b92296cad275b4211022">m_NSWSub</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Op0), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a>)))) {</div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;    <a class="code" href="namespacellvm_1_1Intrinsic.html#a80add6b3b1cdaec560907995127adc16">Intrinsic::ID</a> InvID = <a class="code" href="namespacellvm.html#a0434306df3aa5ec48fcf19d0958d7c01">getInverseMinMaxIntrinsic</a>(<a class="code" href="structllvm_1_1MinMax.html">MinMax</a>-&gt;getIntrinsicID());</div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;    <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = <a class="code" href="namespacellvm_1_1Intrinsic.html#aefa39f6b622360ce4e947feb9f671b73">Intrinsic::getDeclaration</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getModule(), InvID, Ty);</div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1CallInst.html#a850d8262cd900958b3153c4aa080b2bb">CallInst::Create</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, {Op0, <a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a>});</div>
<div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;  }</div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160; </div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;}</div>
<div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160; </div>
<div class="line"><a name="l01927"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#a606601489498c1ba41f25e77eb2dd0cf"> 1927</a></span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#a606601489498c1ba41f25e77eb2dd0cf">InstCombinerImpl::visitSub</a>(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="namespacellvm.html#a5942ddc4393a8ef081555f9a938c86e9">simplifySubInst</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0), <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(1),</div>
<div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;                                 <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.hasNoSignedWrap(), <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.hasNoUnsignedWrap(),</div>
<div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;                                 SQ.getWithInstruction(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)))</div>
<div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;    <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, V);</div>
<div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160; </div>
<div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> = foldVectorBinop(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>;</div>
<div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160; </div>
<div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Phi = foldBinopWithPhiOperands(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;    <span class="keywordflow">return</span> Phi;</div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160; </div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Op0 = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0), *Op1 = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(1);</div>
<div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160; </div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;  <span class="comment">// If this is a &#39;B = x-(-A)&#39;, change to B = x+A.</span></div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;  <span class="comment">// We deal with this without involving Negator to preserve NSW flag.</span></div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = dyn_castNegVal(Op1)) {</div>
<div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;    <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *Res = <a class="code" href="Reassociate_8cpp.html#a680ae08c1b9b93cebdd6cbb726fe8f3d">BinaryOperator::CreateAdd</a>(Op0, V);</div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160; </div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">const</span> <span class="keyword">auto</span> *BO = dyn_cast&lt;BinaryOperator&gt;(Op1)) {</div>
<div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(BO-&gt;getOpcode() == Instruction::Sub &amp;&amp;</div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;             <span class="stringliteral">&quot;Expected a subtraction operator!&quot;</span>);</div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;      <span class="keywordflow">if</span> (BO-&gt;hasNoSignedWrap() &amp;&amp; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.hasNoSignedWrap())</div>
<div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;        Res-&gt;<a class="code" href="classllvm_1_1Instruction.html#a4166b451a572b1e5d3fea7250af53653">setHasNoSignedWrap</a>(<span class="keyword">true</span>);</div>
<div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;      <span class="keywordflow">if</span> (cast&lt;Constant&gt;(Op1)-&gt;isNotMinSignedValue() &amp;&amp; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.hasNoSignedWrap())</div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;        Res-&gt;<a class="code" href="classllvm_1_1Instruction.html#a4166b451a572b1e5d3fea7250af53653">setHasNoSignedWrap</a>(<span class="keyword">true</span>);</div>
<div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;    }</div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160; </div>
<div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;    <span class="keywordflow">return</span> Res;</div>
<div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;  }</div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160; </div>
<div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;  <span class="comment">// Try this before Negator to preserve NSW flag.</span></div>
<div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *R = <a class="code" href="InstCombineAddSub_8cpp.html#aa93d4c077fefadc17387144a62fa3a4a">factorizeMathWithShlOps</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>))</div>
<div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;    <span class="keywordflow">return</span> R;</div>
<div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160; </div>
<div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aec0ccdbde0581b3aae7f001634a34d8e">m_ImmConstant</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))) {</div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>;</div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *C2;</div>
<div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160; </div>
<div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;    <span class="comment">// C-(X+C2) --&gt; (C-C2)-X</span></div>
<div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a944c25ac9b73b02a17a20a08a25b9b21">m_Add</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aec0ccdbde0581b3aae7f001634a34d8e">m_ImmConstant</a>(C2))))</div>
<div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;      <span class="keywordflow">return</span> BinaryOperator::CreateSub(<a class="code" href="classllvm_1_1ConstantExpr.html#a554ab77949b0a16670a83ec3307501eb">ConstantExpr::getSub</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, C2), <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>);</div>
<div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;  }</div>
<div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160; </div>
<div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;  <span class="keyword">auto</span> TryToNarrowDeduceFlags = [<span class="keyword">this</span>, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, &amp;Op0, &amp;Op1]() -&gt; <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> * {</div>
<div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba88a797f57846adb2c382b3732b471913">Ext</a> = narrowMathIfNoOverflow(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba88a797f57846adb2c382b3732b471913">Ext</a>;</div>
<div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160; </div>
<div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;    <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.hasNoSignedWrap() &amp;&amp; willNotOverflowSignedSub(Op0, Op1, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;      Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;      <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.setHasNoSignedWrap(<span class="keyword">true</span>);</div>
<div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;    }</div>
<div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.hasNoUnsignedWrap() &amp;&amp; willNotOverflowUnsignedSub(Op0, Op1, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;      Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;      <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.setHasNoUnsignedWrap(<span class="keyword">true</span>);</div>
<div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;    }</div>
<div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160; </div>
<div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;    <span class="keywordflow">return</span> Changed ? &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;  };</div>
<div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160; </div>
<div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;  <span class="comment">// First, let&#39;s try to interpret `sub a, b` as `add a, (sub 0, b)`,</span></div>
<div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;  <span class="comment">// and let&#39;s try to sink `(sub 0, b)` into `b` itself. But only if this isn&#39;t</span></div>
<div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;  <span class="comment">// a pure negation used by a select that looks like abs/nabs.</span></div>
<div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;  <span class="keywordtype">bool</span> IsNegation = <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a874d53817a4923de8e58af6b278c09b0">m_ZeroInt</a>());</div>
<div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;  <span class="keywordflow">if</span> (!IsNegation || <a class="code" href="namespacellvm.html#a7dc3069afa2ce5ea62ac2eb183e51c00">none_of</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.users(), [&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, Op1](<span class="keyword">const</span> <a class="code" href="classllvm_1_1User.html">User</a> *U) {</div>
<div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;        const Instruction *UI = dyn_cast&lt;Instruction&gt;(U);</div>
<div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;        if (!UI)</div>
<div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;          return false;</div>
<div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;        return match(UI,</div>
<div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;                     m_Select(m_Value(), m_Specific(Op1), m_Specific(&amp;I))) ||</div>
<div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;               match(UI, m_Select(m_Value(), m_Specific(&amp;I), m_Specific(Op1)));</div>
<div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;      })) {</div>
<div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *NegOp1 = <a class="code" href="classllvm_1_1Negator.html#a3b8b2ad75675790e85bd1c2a28545457">Negator::Negate</a>(IsNegation, Op1, *<span class="keyword">this</span>))</div>
<div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="Reassociate_8cpp.html#a680ae08c1b9b93cebdd6cbb726fe8f3d">BinaryOperator::CreateAdd</a>(NegOp1, Op0);</div>
<div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;  }</div>
<div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;  <span class="keywordflow">if</span> (IsNegation)</div>
<div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;    <span class="keywordflow">return</span> TryToNarrowDeduceFlags(); <span class="comment">// Should have been handled in Negator!</span></div>
<div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160; </div>
<div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;  <span class="comment">// (A*B)-(A*C) -&gt; A*(B-C) etc</span></div>
<div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = foldUsingDistributiveLaws(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;    <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, V);</div>
<div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160; </div>
<div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType()-&gt;isIntOrIntVectorTy(1))</div>
<div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;    <span class="keywordflow">return</span> BinaryOperator::CreateXor(Op0, Op1);</div>
<div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160; </div>
<div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;  <span class="comment">// Replace (-1 - A) with (~A).</span></div>
<div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aaea0d5ebb8b57ddde2095f80e2e94bb2">m_AllOnes</a>()))</div>
<div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a4f500ae0de71695b652af4c0958d8ea8">BinaryOperator::CreateNot</a>(Op1);</div>
<div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160; </div>
<div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;  <span class="comment">// (X + -1) - Y --&gt; ~Y + X</span></div>
<div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>;</div>
<div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a944c25ac9b73b02a17a20a08a25b9b21">m_Add</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aaea0d5ebb8b57ddde2095f80e2e94bb2">m_AllOnes</a>()))))</div>
<div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="Reassociate_8cpp.html#a680ae08c1b9b93cebdd6cbb726fe8f3d">BinaryOperator::CreateAdd</a>(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNot(Op1), <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>);</div>
<div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160; </div>
<div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;  <span class="comment">// Reassociate sub/add sequences to create more add instructions and</span></div>
<div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;  <span class="comment">// reduce dependency chains:</span></div>
<div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;  <span class="comment">// ((X - Y) + Z) - Op1 --&gt; (X + Z) - (Y + Op1)</span></div>
<div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a>;</div>
<div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#ad191220adaaedcfba833985509a17452">m_c_Add</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#ac3ed5602889a22db44a16e1b97fac5b8">m_Sub</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))),</div>
<div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;                                  <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a>))))) {</div>
<div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *XZ = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAdd(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a>);</div>
<div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *YW = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAdd(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, Op1);</div>
<div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;    <span class="keywordflow">return</span> BinaryOperator::CreateSub(XZ, YW);</div>
<div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;  }</div>
<div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160; </div>
<div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;  <span class="comment">// ((X - Y) - Op1)  --&gt;  X - (Y + Op1)</span></div>
<div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#ac3ed5602889a22db44a16e1b97fac5b8">m_Sub</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))))) {</div>
<div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Add = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAdd(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, Op1);</div>
<div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;    <span class="keywordflow">return</span> BinaryOperator::CreateSub(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, Add);</div>
<div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;  }</div>
<div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160; </div>
<div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;  <span class="comment">// (~X) - (~Y) --&gt; Y - X</span></div>
<div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;  <span class="comment">// This is placed after the other reassociations and explicitly excludes a</span></div>
<div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;  <span class="comment">// sub-of-sub pattern to avoid infinite looping.</span></div>
<div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;  <span class="keywordflow">if</span> (isFreeToInvert(Op0, Op0-&gt;hasOneUse()) &amp;&amp;</div>
<div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;      isFreeToInvert(Op1, Op1-&gt;hasOneUse()) &amp;&amp;</div>
<div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;      !<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#ac3ed5602889a22db44a16e1b97fac5b8">m_Sub</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aec0ccdbde0581b3aae7f001634a34d8e">m_ImmConstant</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>()))) {</div>
<div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NotOp0 = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNot(Op0);</div>
<div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NotOp1 = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNot(Op1);</div>
<div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;    <span class="keywordflow">return</span> BinaryOperator::CreateSub(NotOp1, NotOp0);</div>
<div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;  }</div>
<div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160; </div>
<div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;  <span class="keyword">auto</span> m_AddRdx = [](<a class="code" href="classllvm_1_1Value.html">Value</a> *&amp;Vec) {</div>
<div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(m_Intrinsic&lt;Intrinsic::vector_reduce_add&gt;(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(Vec)));</div>
<div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;  };</div>
<div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *V0, *V1;</div>
<div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, m_AddRdx(V0)) &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, m_AddRdx(V1)) &amp;&amp;</div>
<div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;      V0-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>() == V1-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()) {</div>
<div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;    <span class="comment">// Difference of sums is sum of differences:</span></div>
<div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;    <span class="comment">// add_rdx(V0) - add_rdx(V1) --&gt; add_rdx(V0 - V1)</span></div>
<div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Sub = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSub(V0, V1);</div>
<div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Rdx = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateIntrinsic(Intrinsic::vector_reduce_add,</div>
<div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;                                         {Sub-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()}, {Sub});</div>
<div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;    <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, Rdx);</div>
<div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;  }</div>
<div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160; </div>
<div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = dyn_cast&lt;Constant&gt;(Op0)) {</div>
<div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>;</div>
<div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2cbdca7c8267aac6914d674f8e81841b">m_ZExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>))) &amp;&amp; <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType()-&gt;isIntOrIntVectorTy(1))</div>
<div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;      <span class="comment">// C - (zext bool) --&gt; bool ? C - 1 : C</span></div>
<div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1SelectInst.html#aa55fb74dd22008fdcc26a63f44576022">SelectInst::Create</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1InstCombiner.html#ae448b36ef67b71f0b281c8275cceacf6">InstCombiner::SubOne</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>), <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aaab494a433fbb23bc68393ee8bcfc5ac">m_SExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>))) &amp;&amp; <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType()-&gt;isIntOrIntVectorTy(1))</div>
<div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;      <span class="comment">// C - (sext bool) --&gt; bool ? C + 1 : C</span></div>
<div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1SelectInst.html#aa55fb74dd22008fdcc26a63f44576022">SelectInst::Create</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1InstCombiner.html#a25129446fbad8ac355a52944904a1ec6">InstCombiner::AddOne</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>), <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160; </div>
<div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;    <span class="comment">// C - ~X == X + (1+C)</span></div>
<div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>))))</div>
<div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="Reassociate_8cpp.html#a680ae08c1b9b93cebdd6cbb726fe8f3d">BinaryOperator::CreateAdd</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1InstCombiner.html#a25129446fbad8ac355a52944904a1ec6">InstCombiner::AddOne</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>));</div>
<div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160; </div>
<div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;    <span class="comment">// Try to fold constant sub into select arguments.</span></div>
<div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> *<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a> = dyn_cast&lt;SelectInst&gt;(Op1))</div>
<div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *R = FoldOpIntoSelect(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>))</div>
<div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;        <span class="keywordflow">return</span> R;</div>
<div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160; </div>
<div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;    <span class="comment">// Try to fold constant sub into PHI values.</span></div>
<div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *PN = dyn_cast&lt;PHINode&gt;(Op1))</div>
<div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *R = foldOpIntoPhi(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, PN))</div>
<div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;        <span class="keywordflow">return</span> R;</div>
<div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160; </div>
<div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *C2;</div>
<div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160; </div>
<div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;    <span class="comment">// C-(C2-X) --&gt; X+(C-C2)</span></div>
<div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#ac3ed5602889a22db44a16e1b97fac5b8">m_Sub</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aec0ccdbde0581b3aae7f001634a34d8e">m_ImmConstant</a>(C2), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>))))</div>
<div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="Reassociate_8cpp.html#a680ae08c1b9b93cebdd6cbb726fe8f3d">BinaryOperator::CreateAdd</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1ConstantExpr.html#a554ab77949b0a16670a83ec3307501eb">ConstantExpr::getSub</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, C2));</div>
<div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;  }</div>
<div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160; </div>
<div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *Op0C;</div>
<div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(Op0C))) {</div>
<div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;    <span class="keywordflow">if</span> (Op0C-&gt;<a class="code" href="classllvm_1_1APInt.html#ac328c5d387ddf7d4a02afe9b669723c7">isMask</a>()) {</div>
<div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;      <span class="comment">// Turn this into a xor if LHS is 2^n-1 and the remaining bits are known</span></div>
<div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;      <span class="comment">// zero.</span></div>
<div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;      <a class="code" href="structllvm_1_1KnownBits.html">KnownBits</a> RHSKnown = <a class="code" href="namespacellvm.html#aa1f8f0633edd8b9a1c5ec15bb9fc5640">computeKnownBits</a>(Op1, 0, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;      <span class="keywordflow">if</span> ((*Op0C | RHSKnown.<a class="code" href="structllvm_1_1KnownBits.html#ac67bca6c764da76f5e152330d92ed916">Zero</a>).isAllOnes())</div>
<div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;        <span class="keywordflow">return</span> BinaryOperator::CreateXor(Op1, Op0);</div>
<div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;    }</div>
<div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160; </div>
<div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;    <span class="comment">// C - ((C3 -nuw X) &amp; C2) --&gt; (C - (C2 &amp; C3)) + (X &amp; C2) when:</span></div>
<div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;    <span class="comment">// (C3 - ((C2 &amp; C3) - 1)) is pow2</span></div>
<div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;    <span class="comment">// ((C2 + C3) &amp; ((C2 &amp; C3) - 1)) == ((C2 &amp; C3) - 1)</span></div>
<div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;    <span class="comment">// C2 is negative pow2 || sub nuw</span></div>
<div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *C2, *C3;</div>
<div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;    <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *InnerSub;</div>
<div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a43ac4fbaaf63a88eb5ac05f6d3e5649c">m_BinOp</a>(InnerSub), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(C2)))) &amp;&amp;</div>
<div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(InnerSub, <a class="code" href="namespacellvm_1_1PatternMatch.html#ac3ed5602889a22db44a16e1b97fac5b8">m_Sub</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(C3), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>))) &amp;&amp;</div>
<div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;        (InnerSub-&gt;<a class="code" href="classllvm_1_1Instruction.html#a100c666f9253331dd1d166a863248326">hasNoUnsignedWrap</a>() || C2-&gt;<a class="code" href="classllvm_1_1APInt.html#a1b6b4785fa27be394cf040e543d9fe7c">isNegatedPowerOf2</a>())) {</div>
<div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;      <a class="code" href="classllvm_1_1APInt.html">APInt</a> C2AndC3 = *C2 &amp; *C3;</div>
<div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;      <a class="code" href="classllvm_1_1APInt.html">APInt</a> C2AndC3Minus1 = C2AndC3 - 1;</div>
<div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;      <a class="code" href="classllvm_1_1APInt.html">APInt</a> C2AddC3 = *C2 + *C3;</div>
<div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;      <span class="keywordflow">if</span> ((*C3 - C2AndC3Minus1).isPowerOf2() &amp;&amp;</div>
<div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;          C2AndC3Minus1.<a class="code" href="classllvm_1_1APInt.html#acfae9bdee6027ffa8ffe244cc22e3a76">isSubsetOf</a>(C2AddC3)) {</div>
<div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType(), *C2));</div>
<div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="Reassociate_8cpp.html#a680ae08c1b9b93cebdd6cbb726fe8f3d">BinaryOperator::CreateAdd</a>(</div>
<div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;            <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a>, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType(), *Op0C - C2AndC3));</div>
<div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;      }</div>
<div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;    }</div>
<div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;  }</div>
<div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160; </div>
<div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;  {</div>
<div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>;</div>
<div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;    <span class="comment">// X-(X+Y) == -Y    X-(Y+X) == -Y</span></div>
<div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#ad191220adaaedcfba833985509a17452">m_c_Add</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Op0), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))))</div>
<div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a19cdbeffd437228c47a4410a4ed34aca">BinaryOperator::CreateNeg</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>);</div>
<div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160; </div>
<div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;    <span class="comment">// (X-Y)-X == -Y</span></div>
<div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#ac3ed5602889a22db44a16e1b97fac5b8">m_Sub</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Op1), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))))</div>
<div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a19cdbeffd437228c47a4410a4ed34aca">BinaryOperator::CreateNeg</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>);</div>
<div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;  }</div>
<div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160; </div>
<div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;  <span class="comment">// (sub (or A, B) (and A, B)) --&gt; (xor A, B)</span></div>
<div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;  {</div>
<div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *A, *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>;</div>
<div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))) &amp;&amp;</div>
<div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a7af604b3a6b3a44113d4c54c5c04d031">m_c_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))))</div>
<div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;      <span class="keywordflow">return</span> BinaryOperator::CreateXor(A, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;  }</div>
<div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160; </div>
<div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;  <span class="comment">// (sub (add A, B) (or A, B)) --&gt; (and A, B)</span></div>
<div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;  {</div>
<div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *A, *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>;</div>
<div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a944c25ac9b73b02a17a20a08a25b9b21">m_Add</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))) &amp;&amp;</div>
<div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a7af604b3a6b3a44113d4c54c5c04d031">m_c_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))))</div>
<div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;      <span class="keywordflow">return</span> BinaryOperator::CreateAnd(A, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;  }</div>
<div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160; </div>
<div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;  <span class="comment">// (sub (add A, B) (and A, B)) --&gt; (or A, B)</span></div>
<div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;  {</div>
<div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *A, *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>;</div>
<div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a944c25ac9b73b02a17a20a08a25b9b21">m_Add</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))) &amp;&amp;</div>
<div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#ae9d735be1ececf149966a4da253f0320">m_c_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))))</div>
<div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;      <span class="keywordflow">return</span> BinaryOperator::CreateOr(A, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;  }</div>
<div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160; </div>
<div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;  <span class="comment">// (sub (and A, B) (or A, B)) --&gt; neg (xor A, B)</span></div>
<div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;  {</div>
<div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *A, *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>;</div>
<div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))) &amp;&amp;</div>
<div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a7af604b3a6b3a44113d4c54c5c04d031">m_c_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))) &amp;&amp;</div>
<div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;        (Op0-&gt;hasOneUse() || Op1-&gt;hasOneUse()))</div>
<div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a19cdbeffd437228c47a4410a4ed34aca">BinaryOperator::CreateNeg</a>(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateXor(A, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>));</div>
<div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;  }</div>
<div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160; </div>
<div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;  <span class="comment">// (sub (or A, B), (xor A, B)) --&gt; (and A, B)</span></div>
<div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;  {</div>
<div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *A, *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>;</div>
<div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a82e2ea7f0ab67e33e22b3a2a188feaba">m_Xor</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))) &amp;&amp;</div>
<div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a7af604b3a6b3a44113d4c54c5c04d031">m_c_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))))</div>
<div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;      <span class="keywordflow">return</span> BinaryOperator::CreateAnd(A, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;  }</div>
<div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160; </div>
<div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;  <span class="comment">// (sub (xor A, B) (or A, B)) --&gt; neg (and A, B)</span></div>
<div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;  {</div>
<div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *A, *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>;</div>
<div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a82e2ea7f0ab67e33e22b3a2a188feaba">m_Xor</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))) &amp;&amp;</div>
<div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a7af604b3a6b3a44113d4c54c5c04d031">m_c_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))) &amp;&amp;</div>
<div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;        (Op0-&gt;hasOneUse() || Op1-&gt;hasOneUse()))</div>
<div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a19cdbeffd437228c47a4410a4ed34aca">BinaryOperator::CreateNeg</a>(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(A, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>));</div>
<div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;  }</div>
<div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160; </div>
<div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;  {</div>
<div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>;</div>
<div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;    <span class="comment">// ((X | Y) - X) --&gt; (~X &amp; Y)</span></div>
<div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a7af604b3a6b3a44113d4c54c5c04d031">m_c_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Op1)))))</div>
<div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;      <span class="keywordflow">return</span> BinaryOperator::CreateAnd(</div>
<div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;          <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNot(Op1, Op1-&gt;getName() + <span class="stringliteral">&quot;.not&quot;</span>));</div>
<div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;  }</div>
<div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160; </div>
<div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;  {</div>
<div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;    <span class="comment">// (sub (and Op1, (neg X)), Op1) --&gt; neg (and Op1, (add X, -1))</span></div>
<div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>;</div>
<div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#ae9d735be1ececf149966a4da253f0320">m_c_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Op1),</div>
<div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;                                    <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2fed53ed2b3225752bd9e4fce4967361">m_Neg</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>))))))) {</div>
<div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a19cdbeffd437228c47a4410a4ed34aca">BinaryOperator::CreateNeg</a>(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(</div>
<div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;          Op1, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAdd(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1Constant.html#a4d51384de6e1798bb6aa875aebeea9f0">Constant::getAllOnesValue</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType()))));</div>
<div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;    }</div>
<div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;  }</div>
<div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160; </div>
<div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;  {</div>
<div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;    <span class="comment">// (sub (and Op1, C), Op1) --&gt; neg (and Op1, ~C)</span></div>
<div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Op1), <a class="code" href="namespacellvm_1_1PatternMatch.html#aadd209ba7e1bfa8113a609e09a7fe62f">m_Constant</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))))) {</div>
<div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a19cdbeffd437228c47a4410a4ed34aca">BinaryOperator::CreateNeg</a>(</div>
<div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;          <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(Op1, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNot(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)));</div>
<div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;    }</div>
<div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;  }</div>
<div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160; </div>
<div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *R = <a class="code" href="InstCombineAddSub_8cpp.html#a7badd6236e4072f75267bf86664547d2">foldSubOfMinMax</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>))</div>
<div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;    <span class="keywordflow">return</span> R;</div>
<div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160; </div>
<div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;  {</div>
<div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;    <span class="comment">// If we have a subtraction between some value and a select between</span></div>
<div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;    <span class="comment">// said value and something else, sink subtraction into select hands, i.e.:</span></div>
<div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;    <span class="comment">//   sub (select %Cond, %TrueVal, %FalseVal), %Op1</span></div>
<div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;    <span class="comment">//     -&gt;</span></div>
<div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;    <span class="comment">//   select %Cond, (sub %TrueVal, %Op1), (sub %FalseVal, %Op1)</span></div>
<div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;    <span class="comment">//  or</span></div>
<div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;    <span class="comment">//   sub %Op0, (select %Cond, %TrueVal, %FalseVal)</span></div>
<div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;    <span class="comment">//     -&gt;</span></div>
<div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;    <span class="comment">//   select %Cond, (sub %Op0, %TrueVal), (sub %Op0, %FalseVal)</span></div>
<div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;    <span class="comment">// This will result in select between new subtraction and 0.</span></div>
<div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;    <span class="keyword">auto</span> SinkSubIntoSelect =</div>
<div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;        [Ty = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType()](<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="AMDGPURegBankSelect_8cpp.html#a14e0c000ed52e5fc187d4a885914cc1a">Select</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *OtherHandOfSub,</div>
<div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;                           <span class="keyword">auto</span> SubBuilder) -&gt; <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> * {</div>
<div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>, *<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>, *<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>;</div>
<div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="AMDGPURegBankSelect_8cpp.html#a14e0c000ed52e5fc187d4a885914cc1a">Select</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#addb87fe3f509b7803d3f5933ee24b560">m_Select</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>),</div>
<div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;                                           <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>)))))</div>
<div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;      <span class="keywordflow">if</span> (OtherHandOfSub != <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a> &amp;&amp; OtherHandOfSub != <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>)</div>
<div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;      <span class="comment">// While it is really tempting to just create two subtractions and let</span></div>
<div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;      <span class="comment">// InstCombine fold one of those to 0, it isn&#39;t possible to do so</span></div>
<div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;      <span class="comment">// because of worklist visitation order. So ugly it is.</span></div>
<div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;      <span class="keywordtype">bool</span> OtherHandOfSubIsTrueVal = OtherHandOfSub == <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>;</div>
<div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *NewSub = SubBuilder(OtherHandOfSubIsTrueVal ? <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a> : <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>);</div>
<div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;      <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Zero = <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(Ty);</div>
<div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;      <a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> *NewSel =</div>
<div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;          <a class="code" href="classllvm_1_1SelectInst.html#aa55fb74dd22008fdcc26a63f44576022">SelectInst::Create</a>(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>, OtherHandOfSubIsTrueVal ? Zero : NewSub,</div>
<div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;                             OtherHandOfSubIsTrueVal ? NewSub : Zero);</div>
<div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;      <span class="comment">// Preserve prof metadata if any.</span></div>
<div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;      NewSel-&gt;<a class="code" href="classllvm_1_1Instruction.html#aec6eaa1e49f48c178e0ab9c030b5971e">copyMetadata</a>(cast&lt;Instruction&gt;(*<a class="code" href="AMDGPURegBankSelect_8cpp.html#a14e0c000ed52e5fc187d4a885914cc1a">Select</a>));</div>
<div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;      <span class="keywordflow">return</span> NewSel;</div>
<div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;    };</div>
<div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *NewSel = SinkSubIntoSelect(</div>
<div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;            <span class="comment">/*Select=*/</span>Op0, <span class="comment">/*OtherHandOfSub=*/</span>Op1,</div>
<div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;            [<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a> = &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>, Op1](<a class="code" href="classllvm_1_1Value.html">Value</a> *OtherHandOfSelect) {</div>
<div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;              <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>-&gt;CreateSub(OtherHandOfSelect,</div>
<div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;                                        <span class="comment">/*OtherHandOfSub=*/</span>Op1);</div>
<div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;            }))</div>
<div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;      <span class="keywordflow">return</span> NewSel;</div>
<div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *NewSel = SinkSubIntoSelect(</div>
<div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;            <span class="comment">/*Select=*/</span>Op1, <span class="comment">/*OtherHandOfSub=*/</span>Op0,</div>
<div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;            [<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a> = &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>, Op0](<a class="code" href="classllvm_1_1Value.html">Value</a> *OtherHandOfSelect) {</div>
<div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;              <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>-&gt;CreateSub(<span class="comment">/*OtherHandOfSub=*/</span>Op0,</div>
<div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;                                        OtherHandOfSelect);</div>
<div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;            }))</div>
<div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;      <span class="keywordflow">return</span> NewSel;</div>
<div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;  }</div>
<div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160; </div>
<div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;  <span class="comment">// (X - (X &amp; Y))   --&gt;   (X &amp; ~Y)</span></div>
<div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#ae9d735be1ececf149966a4da253f0320">m_c_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Op0), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))) &amp;&amp;</div>
<div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;      (Op1-&gt;hasOneUse() || isa&lt;Constant&gt;(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>)))</div>
<div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;    <span class="keywordflow">return</span> BinaryOperator::CreateAnd(</div>
<div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;        Op0, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNot(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>-&gt;getName() + <span class="stringliteral">&quot;.not&quot;</span>));</div>
<div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160; </div>
<div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;  <span class="comment">// ~X - Min/Max(~X, Y) -&gt; ~Min/Max(X, ~Y) - X</span></div>
<div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;  <span class="comment">// ~X - Min/Max(Y, ~X) -&gt; ~Min/Max(X, ~Y) - X</span></div>
<div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;  <span class="comment">// Min/Max(~X, Y) - ~X -&gt; X - ~Min/Max(X, ~Y)</span></div>
<div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;  <span class="comment">// Min/Max(Y, ~X) - ~X -&gt; X - ~Min/Max(X, ~Y)</span></div>
<div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;  <span class="comment">// As long as Y is freely invertible, this will be neutral or a win.</span></div>
<div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;  <span class="comment">// Note: We don&#39;t generate the inverse max/min, just create the &#39;not&#39; of</span></div>
<div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;  <span class="comment">// it and let other folds do the rest.</span></div>
<div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>))) &amp;&amp;</div>
<div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#adcc0eb018adede4d62dafa5e60bce4be">m_c_MaxOrMin</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Op0), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))) &amp;&amp;</div>
<div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;      !Op0-&gt;hasNUsesOrMore(3) &amp;&amp; isFreeToInvert(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>-&gt;hasOneUse())) {</div>
<div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Not = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNot(Op1);</div>
<div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;    <span class="keywordflow">return</span> BinaryOperator::CreateSub(Not, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>);</div>
<div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;  }</div>
<div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>))) &amp;&amp;</div>
<div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#adcc0eb018adede4d62dafa5e60bce4be">m_c_MaxOrMin</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Op1), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))) &amp;&amp;</div>
<div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;      !Op1-&gt;hasNUsesOrMore(3) &amp;&amp; isFreeToInvert(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>-&gt;hasOneUse())) {</div>
<div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Not = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNot(Op0);</div>
<div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;    <span class="keywordflow">return</span> BinaryOperator::CreateSub(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, Not);</div>
<div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;  }</div>
<div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160; </div>
<div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;  <span class="comment">// Optimize pointer differences into the same array into a size.  Consider:</span></div>
<div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;  <span class="comment">//  &amp;A[10] - &amp;A[0]: we should compile this to &quot;10&quot;.</span></div>
<div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *LHSOp, *RHSOp;</div>
<div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a3ffbacd388121d5e3ba1c4360b7449d0">m_PtrToInt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(LHSOp))) &amp;&amp;</div>
<div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a3ffbacd388121d5e3ba1c4360b7449d0">m_PtrToInt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(RHSOp))))</div>
<div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *Res = OptimizePointerDifference(LHSOp, RHSOp, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType(),</div>
<div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;                                               <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.hasNoUnsignedWrap()))</div>
<div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;      <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, Res);</div>
<div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160; </div>
<div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;  <span class="comment">// trunc(p)-trunc(q) -&gt; trunc(p-q)</span></div>
<div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a5b844aada27c4c6fdb87146ac458c0d8">m_Trunc</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a3ffbacd388121d5e3ba1c4360b7449d0">m_PtrToInt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(LHSOp)))) &amp;&amp;</div>
<div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a5b844aada27c4c6fdb87146ac458c0d8">m_Trunc</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a3ffbacd388121d5e3ba1c4360b7449d0">m_PtrToInt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(RHSOp)))))</div>
<div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *Res = OptimizePointerDifference(LHSOp, RHSOp, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType(),</div>
<div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;                                               <span class="comment">/* IsNUW */</span> <span class="keyword">false</span>))</div>
<div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;      <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, Res);</div>
<div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160; </div>
<div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;  <span class="comment">// Canonicalize a shifty way to code absolute value to the common pattern.</span></div>
<div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;  <span class="comment">// There are 2 potential commuted variants.</span></div>
<div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;  <span class="comment">// We&#39;re relying on the fact that we only do this transform when the shift has</span></div>
<div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;  <span class="comment">// exactly 2 uses and the xor has exactly 1 use (otherwise, we might increase</span></div>
<div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;  <span class="comment">// instructions).</span></div>
<div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *A;</div>
<div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *ShAmt;</div>
<div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType();</div>
<div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> = Ty-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>();</div>
<div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a64153676e101a130bbbaaf91635d253a">m_AShr</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(ShAmt))) &amp;&amp;</div>
<div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;      Op1-&gt;hasNUses(2) &amp;&amp; *ShAmt == <a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> - 1 &amp;&amp;</div>
<div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a5cd1934b6c8ddec3a2d161ce710d59bc">m_c_Xor</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Op1))))) {</div>
<div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;    <span class="comment">// B = ashr i32 A, 31 ; smear the sign bit</span></div>
<div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;    <span class="comment">// sub (xor A, B), B  ; flip bits if negative and subtract -1 (add 1)</span></div>
<div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;    <span class="comment">// --&gt; (A &lt; 0) ? -A : A</span></div>
<div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *IsNeg = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateIsNeg(A);</div>
<div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;    <span class="comment">// Copy the nuw/nsw flags from the sub to the negate.</span></div>
<div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NegA = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNeg(A, <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.hasNoUnsignedWrap(),</div>
<div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;                                    <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.hasNoSignedWrap());</div>
<div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1SelectInst.html#aa55fb74dd22008fdcc26a63f44576022">SelectInst::Create</a>(IsNeg, NegA, A);</div>
<div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;  }</div>
<div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160; </div>
<div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;  <span class="comment">// If we are subtracting a low-bit masked subset of some value from an add</span></div>
<div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;  <span class="comment">// of that same value with no low bits changed, that is clearing some low bits</span></div>
<div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;  <span class="comment">// of the sum:</span></div>
<div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;  <span class="comment">// sub (X + AddC), (X &amp; AndC) --&gt; and (X + AddC), ~AndC</span></div>
<div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *AddC, *AndC;</div>
<div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a944c25ac9b73b02a17a20a08a25b9b21">m_Add</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(AddC))) &amp;&amp;</div>
<div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(AndC)))) {</div>
<div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;    <span class="keywordtype">unsigned</span> Cttz = AddC-&gt;<a class="code" href="classllvm_1_1APInt.html#a9a99431f0828d0222c617eb876bc5d34">countTrailingZeros</a>();</div>
<div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;    <a class="code" href="classllvm_1_1APInt.html">APInt</a> HighMask(<a class="code" href="classllvm_1_1APInt.html#adcb96bd09d7c75c7669fa5f9d1190899">APInt::getHighBitsSet</a>(<a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>, <a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> - Cttz));</div>
<div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;    <span class="keywordflow">if</span> ((HighMask &amp; *AndC).<a class="code" href="Lint_8cpp.html#a45005634b54e2126cb3e6ec0dbc9ade4">isZero</a>())</div>
<div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;      <span class="keywordflow">return</span> BinaryOperator::CreateAnd(Op0, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, ~(*AndC)));</div>
<div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;  }</div>
<div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160; </div>
<div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *V =</div>
<div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;          canonicalizeCondSignextOfHighBitExtractToSignextHighBitExtract(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;    <span class="keywordflow">return</span> V;</div>
<div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160; </div>
<div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;  <span class="comment">// X - usub.sat(X, Y) =&gt; umin(X, Y)</span></div>
<div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(m_Intrinsic&lt;Intrinsic::usub_sat&gt;(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Op0),</div>
<div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;                                                           <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>)))))</div>
<div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;    <span class="keywordflow">return</span> replaceInstUsesWith(</div>
<div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;        <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateIntrinsic(<a class="code" href="namespacellvm_1_1APIntOps.html#aa606171b17bdde9015fa656e226ca9e0">Intrinsic::umin</a>, {I.getType()}, {Op0, Y}));</div>
<div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160; </div>
<div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;  <span class="comment">// umax(X, Op1) - Op1 --&gt; usub.sat(X, Op1)</span></div>
<div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;  <span class="comment">// TODO: The one-use restriction is not strictly necessary, but it may</span></div>
<div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;  <span class="comment">//       require improving other pattern matching and/or codegen.</span></div>
<div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aaa1ec19d8da987f818acfcfd9111f480">m_c_UMax</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Op1)))))</div>
<div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;    <span class="keywordflow">return</span> replaceInstUsesWith(</div>
<div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;        <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateIntrinsic(Intrinsic::usub_sat, {Ty}, {X, Op1}));</div>
<div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160; </div>
<div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;  <span class="comment">// Op0 - umin(X, Op0) --&gt; usub.sat(Op0, X)</span></div>
<div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a858f42cd002d944befe9675788d94ba7">m_c_UMin</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Op0)))))</div>
<div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;    <span class="keywordflow">return</span> replaceInstUsesWith(</div>
<div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;        <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateIntrinsic(Intrinsic::usub_sat, {Ty}, {Op0, X}));</div>
<div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160; </div>
<div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;  <span class="comment">// Op0 - umax(X, Op0) --&gt; 0 - usub.sat(X, Op0)</span></div>
<div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aaa1ec19d8da987f818acfcfd9111f480">m_c_UMax</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Op0))))) {</div>
<div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *USub = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateIntrinsic(Intrinsic::usub_sat, {Ty}, {<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, Op0});</div>
<div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a19cdbeffd437228c47a4410a4ed34aca">BinaryOperator::CreateNeg</a>(USub);</div>
<div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;  }</div>
<div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160; </div>
<div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;  <span class="comment">// umin(X, Op1) - Op1 --&gt; 0 - usub.sat(Op1, X)</span></div>
<div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a858f42cd002d944befe9675788d94ba7">m_c_UMin</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Op1))))) {</div>
<div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *USub = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateIntrinsic(Intrinsic::usub_sat, {Ty}, {Op1, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>});</div>
<div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a19cdbeffd437228c47a4410a4ed34aca">BinaryOperator::CreateNeg</a>(USub);</div>
<div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;  }</div>
<div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160; </div>
<div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;  <span class="comment">// C - ctpop(X) =&gt; ctpop(~X) if C is bitwidth</span></div>
<div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a3acbd0be97863e3e03e3b85641254018">m_SpecificInt</a>(<a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>)) &amp;&amp;</div>
<div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(m_Intrinsic&lt;Intrinsic::ctpop&gt;(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)))))</div>
<div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;    <span class="keywordflow">return</span> replaceInstUsesWith(</div>
<div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;        <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateIntrinsic(Intrinsic::ctpop, {I.getType()},</div>
<div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;                                   {Builder.CreateNot(X)}));</div>
<div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160; </div>
<div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;  <span class="comment">// Reduce multiplies for difference-of-squares by factoring:</span></div>
<div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;  <span class="comment">// (X * X) - (Y * Y) --&gt; (X + Y) * (X - Y)</span></div>
<div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a971522b36bf432ad69a0083581ab4108">m_Mul</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a94bf3939e0bea91b481096473d0e549f">m_Deferred</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)))) &amp;&amp;</div>
<div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a971522b36bf432ad69a0083581ab4108">m_Mul</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a94bf3939e0bea91b481096473d0e549f">m_Deferred</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))))) {</div>
<div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;    <span class="keyword">auto</span> *OBO0 = cast&lt;OverflowingBinaryOperator&gt;(Op0);</div>
<div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;    <span class="keyword">auto</span> *OBO1 = cast&lt;OverflowingBinaryOperator&gt;(Op1);</div>
<div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;    <span class="keywordtype">bool</span> PropagateNSW = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.hasNoSignedWrap() &amp;&amp; OBO0-&gt;hasNoSignedWrap() &amp;&amp;</div>
<div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;                        OBO1-&gt;hasNoSignedWrap() &amp;&amp; <a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> &gt; 2;</div>
<div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;    <span class="keywordtype">bool</span> PropagateNUW = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.hasNoUnsignedWrap() &amp;&amp; OBO0-&gt;hasNoUnsignedWrap() &amp;&amp;</div>
<div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;                        OBO1-&gt;hasNoUnsignedWrap() &amp;&amp; <a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> &gt; 1;</div>
<div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Add = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAdd(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, <span class="stringliteral">&quot;add&quot;</span>, PropagateNUW, PropagateNSW);</div>
<div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Sub = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSub(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, <span class="stringliteral">&quot;sub&quot;</span>, PropagateNUW, PropagateNSW);</div>
<div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Mul</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateMul(Add, Sub, <span class="stringliteral">&quot;&quot;</span>, PropagateNUW, PropagateNSW);</div>
<div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;    <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Mul</a>);</div>
<div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;  }</div>
<div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160; </div>
<div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;  <span class="keywordflow">return</span> TryToNarrowDeduceFlags();</div>
<div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;}</div>
<div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;<span class="comment">/// This eliminates floating-point negation in either &#39;fneg(X)&#39; or</span></div>
<div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;<span class="comment">/// &#39;fsub(-0.0, X)&#39; form by combining into a constant operand.</span></div>
<div class="line"><a name="l02406"></a><span class="lineno"><a class="line" href="InstCombineAddSub_8cpp.html#a4b7936703dea8c68a74e4e155a02d50b"> 2406</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="InstCombineAddSub_8cpp.html#a4b7936703dea8c68a74e4e155a02d50b">foldFNegIntoConstant</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>) {</div>
<div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;  <span class="comment">// This is limited with one-use because fneg is assumed better for</span></div>
<div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;  <span class="comment">// reassociation and cheaper in codegen than fmul/fdiv.</span></div>
<div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;  <span class="comment">// TODO: Should the m_OneUse restriction be removed?</span></div>
<div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *FNegOp;</div>
<div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#af431ec215bba8bb9c56e7541d99920f2">m_FNeg</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a04353aa48874f9bda89ff9059cd1a5a6">m_Instruction</a>(FNegOp)))))</div>
<div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160; </div>
<div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>;</div>
<div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160; </div>
<div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;  <span class="comment">// Fold negation into constant operand.</span></div>
<div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;  <span class="comment">// -(X * C) --&gt; X * (-C)</span></div>
<div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(FNegOp, <a class="code" href="namespacellvm_1_1PatternMatch.html#a7aff89f4f22502c8ad9118bed59ce21c">m_FMul</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aadd209ba7e1bfa8113a609e09a7fe62f">m_Constant</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))))</div>
<div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Constant.html">Constant</a> *NegC = <a class="code" href="namespacellvm.html#a6810c4cb05b49909862249d3b3afa2af">ConstantFoldUnaryOpOperand</a>(Instruction::FNeg, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>))</div>
<div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a3b9d9c1b6e4b743230c9c377c40a4247">BinaryOperator::CreateFMulFMF</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, NegC, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;  <span class="comment">// -(X / C) --&gt; X / (-C)</span></div>
<div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(FNegOp, <a class="code" href="namespacellvm_1_1PatternMatch.html#a0a77c976c6edefcb3c05ad8a225fd36e">m_FDiv</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aadd209ba7e1bfa8113a609e09a7fe62f">m_Constant</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))))</div>
<div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Constant.html">Constant</a> *NegC = <a class="code" href="namespacellvm.html#a6810c4cb05b49909862249d3b3afa2af">ConstantFoldUnaryOpOperand</a>(Instruction::FNeg, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>))</div>
<div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a59ab64994d74243a175979d5b7b6b535">BinaryOperator::CreateFDivFMF</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, NegC, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;  <span class="comment">// -(C / X) --&gt; (-C) / X</span></div>
<div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(FNegOp, <a class="code" href="namespacellvm_1_1PatternMatch.html#a0a77c976c6edefcb3c05ad8a225fd36e">m_FDiv</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aadd209ba7e1bfa8113a609e09a7fe62f">m_Constant</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>))))</div>
<div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Constant.html">Constant</a> *NegC = <a class="code" href="namespacellvm.html#a6810c4cb05b49909862249d3b3afa2af">ConstantFoldUnaryOpOperand</a>(Instruction::FNeg, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>)) {</div>
<div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *FDiv = <a class="code" href="classllvm_1_1BinaryOperator.html#a59ab64994d74243a175979d5b7b6b535">BinaryOperator::CreateFDivFMF</a>(NegC, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160; </div>
<div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;      <span class="comment">// Intersect &#39;nsz&#39; and &#39;ninf&#39; because those special value exceptions may</span></div>
<div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;      <span class="comment">// not apply to the fdiv. Everything else propagates from the fneg.</span></div>
<div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;      <span class="comment">// TODO: We could propagate nsz/ninf from fdiv alone?</span></div>
<div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;      <a class="code" href="classllvm_1_1FastMathFlags.html">FastMathFlags</a> FMF = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getFastMathFlags();</div>
<div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;      <a class="code" href="classllvm_1_1FastMathFlags.html">FastMathFlags</a> OpFMF = FNegOp-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9a167f91db810097d281b1ed627f4575">getFastMathFlags</a>();</div>
<div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;      FDiv-&gt;<a class="code" href="classllvm_1_1Instruction.html#a27d07a2504f0f592823ee21311099249">setHasNoSignedZeros</a>(FMF.<a class="code" href="classllvm_1_1FastMathFlags.html#a278a2e29bf56f2e2109fd35ae454b050">noSignedZeros</a>() &amp;&amp; OpFMF.<a class="code" href="classllvm_1_1FastMathFlags.html#a278a2e29bf56f2e2109fd35ae454b050">noSignedZeros</a>());</div>
<div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;      FDiv-&gt;<a class="code" href="classllvm_1_1Instruction.html#a94eaf07edb6829da0be0e8681375ac4e">setHasNoInfs</a>(FMF.<a class="code" href="classllvm_1_1FastMathFlags.html#a39b529fcda9ee90b17a3e1fed732a22a">noInfs</a>() &amp;&amp; OpFMF.<a class="code" href="classllvm_1_1FastMathFlags.html#a39b529fcda9ee90b17a3e1fed732a22a">noInfs</a>());</div>
<div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;      <span class="keywordflow">return</span> FDiv;</div>
<div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;    }</div>
<div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;  <span class="comment">// With NSZ [ counter-example with -0.0: -(-0.0 + 0.0) != 0.0 + -0.0 ]:</span></div>
<div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;  <span class="comment">// -(X + C) --&gt; -X + -C --&gt; -C - X</span></div>
<div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.hasNoSignedZeros() &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(FNegOp, <a class="code" href="namespacellvm_1_1PatternMatch.html#a5e3486337f60bed631149fb6b141bc3e">m_FAdd</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aadd209ba7e1bfa8113a609e09a7fe62f">m_Constant</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))))</div>
<div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Constant.html">Constant</a> *NegC = <a class="code" href="namespacellvm.html#a6810c4cb05b49909862249d3b3afa2af">ConstantFoldUnaryOpOperand</a>(Instruction::FNeg, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>))</div>
<div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#adfdc28604ad16e04025b71bc46f2ef39">BinaryOperator::CreateFSubFMF</a>(NegC, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160; </div>
<div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;}</div>
<div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160; </div>
<div class="line"><a name="l02449"></a><span class="lineno"><a class="line" href="InstCombineAddSub_8cpp.html#ae2952f3b504e347693918d4cacb9a3a5"> 2449</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="InstCombineAddSub_8cpp.html#ae2952f3b504e347693918d4cacb9a3a5">hoistFNegAboveFMulFDiv</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</div>
<div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;                                           <a class="code" href="classllvm_1_1IRBuilder.html">InstCombiner::BuilderTy</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>) {</div>
<div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *FNeg;</div>
<div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#af431ec215bba8bb9c56e7541d99920f2">m_FNeg</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(FNeg))))</div>
<div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160; </div>
<div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>;</div>
<div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(FNeg, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a7aff89f4f22502c8ad9118bed59ce21c">m_FMul</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>)))))</div>
<div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a3b9d9c1b6e4b743230c9c377c40a4247">BinaryOperator::CreateFMulFMF</a>(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateFNegFMF(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>), <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160; </div>
<div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(FNeg, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a0a77c976c6edefcb3c05ad8a225fd36e">m_FDiv</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>)))))</div>
<div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a59ab64994d74243a175979d5b7b6b535">BinaryOperator::CreateFDivFMF</a>(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateFNegFMF(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>), <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160; </div>
<div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;}</div>
<div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160; </div>
<div class="line"><a name="l02465"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#af616ac59efde7c61f6e8ff8bd80d2027"> 2465</a></span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#af616ac59efde7c61f6e8ff8bd80d2027">InstCombinerImpl::visitFNeg</a>(<a class="code" href="classllvm_1_1UnaryOperator.html">UnaryOperator</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0);</div>
<div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160; </div>
<div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="namespacellvm.html#a6e06e93488a2f32aeb56f86797a78c33">simplifyFNegInst</a>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getFastMathFlags(),</div>
<div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;                                  getSimplifyQuery().getWithInstruction(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)))</div>
<div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;    <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, V);</div>
<div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160; </div>
<div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> = <a class="code" href="InstCombineAddSub_8cpp.html#a4b7936703dea8c68a74e4e155a02d50b">foldFNegIntoConstant</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>))</div>
<div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>;</div>
<div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160; </div>
<div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>;</div>
<div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160; </div>
<div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;  <span class="comment">// If we can ignore the sign of zeros: -(X - Y) --&gt; (Y - X)</span></div>
<div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.hasNoSignedZeros() &amp;&amp;</div>
<div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aac83d9218356dfe82518cb81e3a53f2f">m_FSub</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>)))))</div>
<div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#adfdc28604ad16e04025b71bc46f2ef39">BinaryOperator::CreateFSubFMF</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160; </div>
<div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *R = <a class="code" href="InstCombineAddSub_8cpp.html#ae2952f3b504e347693918d4cacb9a3a5">hoistFNegAboveFMulFDiv</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>))</div>
<div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;    <span class="keywordflow">return</span> R;</div>
<div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160; </div>
<div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *OneUse;</div>
<div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(OneUse))))</div>
<div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160; </div>
<div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;  <span class="comment">// Try to eliminate fneg if at least 1 arm of the select is negated.</span></div>
<div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>;</div>
<div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(OneUse, <a class="code" href="namespacellvm_1_1PatternMatch.html#addb87fe3f509b7803d3f5933ee24b560">m_Select</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>)))) {</div>
<div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;    <span class="comment">// Unlike most transforms, this one is not safe to propagate nsz unless</span></div>
<div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;    <span class="comment">// it is present on the original select. We union the flags from the select</span></div>
<div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;    <span class="comment">// and fneg and then remove nsz if needed.</span></div>
<div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;    <span class="keyword">auto</span> propagateSelectFMF = [&amp;](<a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> *<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>, <span class="keywordtype">bool</span> CommonOperand) {</div>
<div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;      <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>-&gt;copyFastMathFlags(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *OldSel = dyn_cast&lt;SelectInst&gt;(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>)) {</div>
<div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;        <a class="code" href="classllvm_1_1FastMathFlags.html">FastMathFlags</a> FMF = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getFastMathFlags();</div>
<div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;        FMF |= OldSel-&gt;getFastMathFlags();</div>
<div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;        <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>-&gt;setFastMathFlags(FMF);</div>
<div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;        <span class="keywordflow">if</span> (!OldSel-&gt;hasNoSignedZeros() &amp;&amp; !CommonOperand &amp;&amp;</div>
<div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;            !<a class="code" href="namespacellvm.html#ab8a7ef433279aabf7f30fa5504a4d4ef">isGuaranteedNotToBeUndefOrPoison</a>(OldSel-&gt;getCondition()))</div>
<div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;          <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>-&gt;setHasNoSignedZeros(<span class="keyword">false</span>);</div>
<div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;      }</div>
<div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;    };</div>
<div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;    <span class="comment">// -(Cond ? -P : Y) --&gt; Cond ? P : -Y</span></div>
<div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>;</div>
<div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#af431ec215bba8bb9c56e7541d99920f2">m_FNeg</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>)))) {</div>
<div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *NegY = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateFNegFMF(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>-&gt;getName() + <span class="stringliteral">&quot;.neg&quot;</span>);</div>
<div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;      <a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> *NewSel = <a class="code" href="classllvm_1_1SelectInst.html#aa55fb74dd22008fdcc26a63f44576022">SelectInst::Create</a>(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>, <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>, NegY);</div>
<div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;      propagateSelectFMF(NewSel, <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> == <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>);</div>
<div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;      <span class="keywordflow">return</span> NewSel;</div>
<div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;    }</div>
<div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;    <span class="comment">// -(Cond ? X : -P) --&gt; Cond ? -X : P</span></div>
<div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#af431ec215bba8bb9c56e7541d99920f2">m_FNeg</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>)))) {</div>
<div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *NegX = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateFNegFMF(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getName() + <span class="stringliteral">&quot;.neg&quot;</span>);</div>
<div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;      <a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> *NewSel = <a class="code" href="classllvm_1_1SelectInst.html#aa55fb74dd22008fdcc26a63f44576022">SelectInst::Create</a>(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>, NegX, <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>);</div>
<div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;      propagateSelectFMF(NewSel, <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> == <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>);</div>
<div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;      <span class="keywordflow">return</span> NewSel;</div>
<div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;    }</div>
<div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;  }</div>
<div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160; </div>
<div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;  <span class="comment">// fneg (copysign x, y) -&gt; copysign x, (fneg y)</span></div>
<div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(OneUse, <a class="code" href="namespacellvm_1_1PatternMatch.html#acb52eaa15512b845d33e0ec03648af5c">m_CopySign</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>)))) {</div>
<div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;    <span class="comment">// The source copysign has an additional value input, so we can&#39;t propagate</span></div>
<div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;    <span class="comment">// flags the copysign doesn&#39;t also have.</span></div>
<div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;    <a class="code" href="classllvm_1_1FastMathFlags.html">FastMathFlags</a> FMF = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getFastMathFlags();</div>
<div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;    FMF &amp;= cast&lt;FPMathOperator&gt;(OneUse)-&gt;getFastMathFlags();</div>
<div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160; </div>
<div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;    <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;::FastMathFlagGuard</a> FMFGuard(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>);</div>
<div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.setFastMathFlags(FMF);</div>
<div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160; </div>
<div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NegY = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateFNeg(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>);</div>
<div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NewCopySign = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCopySign(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, NegY);</div>
<div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;    <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, NewCopySign);</div>
<div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;  }</div>
<div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160; </div>
<div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;}</div>
<div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160; </div>
<div class="line"><a name="l02541"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#afa72f4f7fc2ee2bf6cd3b64bd07c37e8"> 2541</a></span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#afa72f4f7fc2ee2bf6cd3b64bd07c37e8">InstCombinerImpl::visitFSub</a>(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="namespacellvm.html#a6e8a8610223f1f09b6000dcbca9649a5">simplifyFSubInst</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0), <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(1),</div>
<div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;                                  <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getFastMathFlags(),</div>
<div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;                                  getSimplifyQuery().getWithInstruction(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)))</div>
<div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;    <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, V);</div>
<div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160; </div>
<div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> = foldVectorBinop(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>;</div>
<div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160; </div>
<div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Phi = foldBinopWithPhiOperands(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;    <span class="keywordflow">return</span> Phi;</div>
<div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160; </div>
<div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;  <span class="comment">// Subtraction from -0.0 is the canonical form of fneg.</span></div>
<div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;  <span class="comment">// fsub -0.0, X ==&gt; fneg X</span></div>
<div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;  <span class="comment">// fsub nsz 0.0, X ==&gt; fneg nsz X</span></div>
<div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;  <span class="comment">// FIXME This matcher does not respect FTZ or DAZ yet:</span></div>
<div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;  <span class="comment">// fsub -0.0, Denorm ==&gt; +-0</span></div>
<div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;  <span class="comment">// fneg Denorm ==&gt; -Denorm</span></div>
<div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>;</div>
<div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#af431ec215bba8bb9c56e7541d99920f2">m_FNeg</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>))))</div>
<div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1UnaryOperator.html#a9f731708e681757d51c4dc2a004873c8">UnaryOperator::CreateFNegFMF</a>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160; </div>
<div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> = <a class="code" href="InstCombineAddSub_8cpp.html#a4b7936703dea8c68a74e4e155a02d50b">foldFNegIntoConstant</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>))</div>
<div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>;</div>
<div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160; </div>
<div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *R = <a class="code" href="InstCombineAddSub_8cpp.html#ae2952f3b504e347693918d4cacb9a3a5">hoistFNegAboveFMulFDiv</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>))</div>
<div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;    <span class="keywordflow">return</span> R;</div>
<div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160; </div>
<div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>;</div>
<div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160; </div>
<div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Op0 = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0), *Op1 = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(1);</div>
<div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;  <span class="comment">// If Op0 is not -0.0 or we can ignore -0.0: Z - (X - Y) --&gt; Z + (Y - X)</span></div>
<div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;  <span class="comment">// Canonicalize to fadd to make analysis easier.</span></div>
<div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;  <span class="comment">// This can also help codegen because fadd is commutative.</span></div>
<div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;  <span class="comment">// Note that if this fsub was really an fneg, the fadd with -0.0 will get</span></div>
<div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;  <span class="comment">// killed later. We still limit that particular transform with &#39;hasOneUse&#39;</span></div>
<div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;  <span class="comment">// because an fneg is assumed better/cheaper than a generic fsub.</span></div>
<div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.hasNoSignedZeros() || <a class="code" href="namespacellvm.html#ae23e16c67aeaf23c68bf86fe04df42ee">CannotBeNegativeZero</a>(Op0, SQ.TLI)) {</div>
<div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aac83d9218356dfe82518cb81e3a53f2f">m_FSub</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))))) {</div>
<div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *NewSub = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateFSubFMF(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a6e018768c6bc2ac78b69e88436de5cc4">BinaryOperator::CreateFAddFMF</a>(Op0, NewSub, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;    }</div>
<div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;  }</div>
<div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160; </div>
<div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;  <span class="comment">// (-X) - Op1 --&gt; -(X + Op1)</span></div>
<div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.hasNoSignedZeros() &amp;&amp; !isa&lt;ConstantExpr&gt;(Op0) &amp;&amp;</div>
<div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#af431ec215bba8bb9c56e7541d99920f2">m_FNeg</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>))))) {</div>
<div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eaf552e181879ad14956985859308d77d9">FAdd</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateFAddFMF(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, Op1, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1UnaryOperator.html#a9f731708e681757d51c4dc2a004873c8">UnaryOperator::CreateFNegFMF</a>(<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eaf552e181879ad14956985859308d77d9">FAdd</a>, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;  }</div>
<div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160; </div>
<div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;  <span class="keywordflow">if</span> (isa&lt;Constant&gt;(Op0))</div>
<div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> *<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a> = dyn_cast&lt;SelectInst&gt;(Op1))</div>
<div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="namespacellvm_1_1ore.html#a8f5533240c6722d987a2443cba42019d">NV</a> = FoldOpIntoSelect(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>))</div>
<div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1ore.html#a8f5533240c6722d987a2443cba42019d">NV</a>;</div>
<div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160; </div>
<div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;  <span class="comment">// X - C --&gt; X + (-C)</span></div>
<div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;  <span class="comment">// But don&#39;t transform constant expressions because there&#39;s an inverse fold</span></div>
<div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;  <span class="comment">// for X + (-Y) --&gt; X - Y.</span></div>
<div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aec0ccdbde0581b3aae7f001634a34d8e">m_ImmConstant</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)))</div>
<div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Constant.html">Constant</a> *NegC = <a class="code" href="namespacellvm.html#a6810c4cb05b49909862249d3b3afa2af">ConstantFoldUnaryOpOperand</a>(Instruction::FNeg, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>))</div>
<div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a6e018768c6bc2ac78b69e88436de5cc4">BinaryOperator::CreateFAddFMF</a>(Op0, NegC, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160; </div>
<div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;  <span class="comment">// X - (-Y) --&gt; X + Y</span></div>
<div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#af431ec215bba8bb9c56e7541d99920f2">m_FNeg</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))))</div>
<div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a6e018768c6bc2ac78b69e88436de5cc4">BinaryOperator::CreateFAddFMF</a>(Op0, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160; </div>
<div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;  <span class="comment">// Similar to above, but look through a cast of the negated value:</span></div>
<div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;  <span class="comment">// X - (fptrunc(-Y)) --&gt; X + fptrunc(Y)</span></div>
<div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType();</div>
<div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a3029ab4957ff8bf58c4cd361cb243c47">m_FPTrunc</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#af431ec215bba8bb9c56e7541d99920f2">m_FNeg</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))))))</div>
<div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a6e018768c6bc2ac78b69e88436de5cc4">BinaryOperator::CreateFAddFMF</a>(Op0, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateFPTrunc(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, Ty), &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160; </div>
<div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;  <span class="comment">// X - (fpext(-Y)) --&gt; X + fpext(Y)</span></div>
<div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2997340992a508357b480467a6901c70">m_FPExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#af431ec215bba8bb9c56e7541d99920f2">m_FNeg</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))))))</div>
<div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a6e018768c6bc2ac78b69e88436de5cc4">BinaryOperator::CreateFAddFMF</a>(Op0, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateFPExt(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, Ty), &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160; </div>
<div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;  <span class="comment">// Similar to above, but look through fmul/fdiv of the negated value:</span></div>
<div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;  <span class="comment">// Op0 - (-X * Y) --&gt; Op0 + (X * Y)</span></div>
<div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;  <span class="comment">// Op0 - (Y * -X) --&gt; Op0 + (X * Y)</span></div>
<div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a90b5c9b20258ae16d2be00374f116551">m_c_FMul</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#af431ec215bba8bb9c56e7541d99920f2">m_FNeg</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))))) {</div>
<div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eab48b2a9934af7a531cfd7236ded9d50e">FMul</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateFMulFMF(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a6e018768c6bc2ac78b69e88436de5cc4">BinaryOperator::CreateFAddFMF</a>(Op0, <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eab48b2a9934af7a531cfd7236ded9d50e">FMul</a>, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;  }</div>
<div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;  <span class="comment">// Op0 - (-X / Y) --&gt; Op0 + (X / Y)</span></div>
<div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;  <span class="comment">// Op0 - (X / -Y) --&gt; Op0 + (X / Y)</span></div>
<div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a0a77c976c6edefcb3c05ad8a225fd36e">m_FDiv</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#af431ec215bba8bb9c56e7541d99920f2">m_FNeg</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>)))) ||</div>
<div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a0a77c976c6edefcb3c05ad8a225fd36e">m_FDiv</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#af431ec215bba8bb9c56e7541d99920f2">m_FNeg</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>)))))) {</div>
<div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *FDiv = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateFDivFMF(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a6e018768c6bc2ac78b69e88436de5cc4">BinaryOperator::CreateFAddFMF</a>(Op0, FDiv, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160;  }</div>
<div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160; </div>
<div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;  <span class="comment">// Handle special cases for FSub with selects feeding the operation</span></div>
<div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = SimplifySelectsFeedingBinaryOp(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, Op0, Op1))</div>
<div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160;    <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, V);</div>
<div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160; </div>
<div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.hasAllowReassoc() &amp;&amp; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.hasNoSignedZeros()) {</div>
<div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;    <span class="comment">// (Y - X) - Y --&gt; -X</span></div>
<div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aac83d9218356dfe82518cb81e3a53f2f">m_FSub</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Op1), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>))))</div>
<div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1UnaryOperator.html#a9f731708e681757d51c4dc2a004873c8">UnaryOperator::CreateFNegFMF</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160; </div>
<div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;    <span class="comment">// Y - (X + Y) --&gt; -X</span></div>
<div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;    <span class="comment">// Y - (Y + X) --&gt; -X</span></div>
<div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#ada1025d503576216884e36b2fddc22e7">m_c_FAdd</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Op0), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>))))</div>
<div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1UnaryOperator.html#a9f731708e681757d51c4dc2a004873c8">UnaryOperator::CreateFNegFMF</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160; </div>
<div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160;    <span class="comment">// (X * C) - X --&gt; X * (C - 1.0)</span></div>
<div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a7aff89f4f22502c8ad9118bed59ce21c">m_FMul</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Op1), <a class="code" href="namespacellvm_1_1PatternMatch.html#aadd209ba7e1bfa8113a609e09a7fe62f">m_Constant</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)))) {</div>
<div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Constant.html">Constant</a> *CSubOne = <a class="code" href="namespacellvm.html#a964455f36837281d37f2a44e2fcb4cca">ConstantFoldBinaryOpOperands</a>(</div>
<div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;              Instruction::FSub, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="classllvm_1_1ConstantFP.html#a5eb8f7a5d3cfdd127ad9db2e425e14eb">ConstantFP::get</a>(Ty, 1.0), <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>))</div>
<div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a3b9d9c1b6e4b743230c9c377c40a4247">BinaryOperator::CreateFMulFMF</a>(Op1, CSubOne, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160;    }</div>
<div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160;    <span class="comment">// X - (X * C) --&gt; X * (1.0 - C)</span></div>
<div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a7aff89f4f22502c8ad9118bed59ce21c">m_FMul</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Op0), <a class="code" href="namespacellvm_1_1PatternMatch.html#aadd209ba7e1bfa8113a609e09a7fe62f">m_Constant</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)))) {</div>
<div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Constant.html">Constant</a> *OneSubC = <a class="code" href="namespacellvm.html#a964455f36837281d37f2a44e2fcb4cca">ConstantFoldBinaryOpOperands</a>(</div>
<div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;              Instruction::FSub, <a class="code" href="classllvm_1_1ConstantFP.html#a5eb8f7a5d3cfdd127ad9db2e425e14eb">ConstantFP::get</a>(Ty, 1.0), <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>))</div>
<div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a3b9d9c1b6e4b743230c9c377c40a4247">BinaryOperator::CreateFMulFMF</a>(Op0, OneSubC, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;    }</div>
<div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160; </div>
<div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;    <span class="comment">// Reassociate fsub/fadd sequences to create more fadd instructions and</span></div>
<div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;    <span class="comment">// reduce dependency chains:</span></div>
<div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;    <span class="comment">// ((X - Y) + Z) - Op1 --&gt; (X + Z) - (Y + Op1)</span></div>
<div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a>;</div>
<div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#ada1025d503576216884e36b2fddc22e7">m_c_FAdd</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aac83d9218356dfe82518cb81e3a53f2f">m_FSub</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))),</div>
<div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;                                     <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a>))))) {</div>
<div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *XZ = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateFAddFMF(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a>, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *YW = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateFAddFMF(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, Op1, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#adfdc28604ad16e04025b71bc46f2ef39">BinaryOperator::CreateFSubFMF</a>(XZ, YW, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;    }</div>
<div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160; </div>
<div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;    <span class="keyword">auto</span> m_FaddRdx = [](<a class="code" href="classllvm_1_1Value.html">Value</a> *&amp;Sum, <a class="code" href="classllvm_1_1Value.html">Value</a> *&amp;Vec) {</div>
<div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(m_Intrinsic&lt;Intrinsic::vector_reduce_fadd&gt;(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(Sum),</div>
<div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;                                                                 <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(Vec)));</div>
<div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;    };</div>
<div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *A0, *A1, *V0, *V1;</div>
<div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, m_FaddRdx(A0, V0)) &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, m_FaddRdx(A1, V1)) &amp;&amp;</div>
<div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;        V0-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>() == V1-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()) {</div>
<div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160;      <span class="comment">// Difference of sums is sum of differences:</span></div>
<div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;      <span class="comment">// add_rdx(A0, V0) - add_rdx(A1, V1) --&gt; add_rdx(A0, V0 - V1) - A1</span></div>
<div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Sub = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateFSubFMF(V0, V1, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Rdx = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateIntrinsic(Intrinsic::vector_reduce_fadd,</div>
<div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;                                           {Sub-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()}, {A0, Sub}, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#adfdc28604ad16e04025b71bc46f2ef39">BinaryOperator::CreateFSubFMF</a>(Rdx, A1, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;    }</div>
<div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160; </div>
<div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = <a class="code" href="InstCombineAddSub_8cpp.html#ad596efe3fec6e55f7011c9b61cd7928e">factorizeFAddFSub</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>))</div>
<div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>;</div>
<div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160; </div>
<div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160;    <span class="comment">// TODO: This performs reassociative folds for FP ops. Some fraction of the</span></div>
<div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160;    <span class="comment">// functionality has been subsumed by simple pattern matching here and in</span></div>
<div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;    <span class="comment">// InstSimplify. We should let a dedicated reassociation pass handle more</span></div>
<div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;    <span class="comment">// complex pattern matching and remove this from InstCombine.</span></div>
<div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = FAddCombine(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>).<a class="code" href="HexagonBitSimplify_8cpp.html#aa56209f617200c772b32fea2947178a7">simplify</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;      <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, V);</div>
<div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160; </div>
<div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;    <span class="comment">// (X - Y) - Op1 --&gt; X - (Y + Op1)</span></div>
<div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aac83d9218356dfe82518cb81e3a53f2f">m_FSub</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))))) {</div>
<div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eaf552e181879ad14956985859308d77d9">FAdd</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateFAddFMF(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, Op1, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#adfdc28604ad16e04025b71bc46f2ef39">BinaryOperator::CreateFSubFMF</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eaf552e181879ad14956985859308d77d9">FAdd</a>, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;    }</div>
<div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;  }</div>
<div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160; </div>
<div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="anamespacellvm_1_1lltok_html_af353621f14cb4b4b3af5ffaff84076b1a56697632782c9ab774d6c132a955674a"><div class="ttname"><a href="namespacellvm_1_1lltok.html#af353621f14cb4b4b3af5ffaff84076b1a56697632782c9ab774d6c132a955674a">llvm::lltok::APFloat</a></div><div class="ttdeci">@ APFloat</div><div class="ttdef"><b>Definition:</b> <a href="LLToken_8h_source.html#l00461">LLToken.h:461</a></div></div>
<div class="ttc" id="alib_2Target_2X86_2README_8txt_html_a9a315d042512705500b545a6c6acb2bd"><div class="ttname"><a href="lib_2Target_2X86_2README_8txt.html#a9a315d042512705500b545a6c6acb2bd">set</a></div><div class="ttdeci">We currently generate a but we really shouldn eax ecx xorl edx divl ecx eax divl ecx movl eax ret A similar code sequence works for division We currently compile i32 v2 eax eax jo LBB1_2 atomic and others It is also currently not done for read modify write instructions It is also current not done if the OF or CF flags are needed The shift operators have the complication that when the shift count is EFLAGS is not set</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2X86_2README_8txt_source.html#l01277">README.txt:1277</a></div></div>
<div class="ttc" id="aInstCombineAddSub_8cpp_html_ac21a19f12988b14a84b15d78184fc8af"><div class="ttname"><a href="InstCombineAddSub_8cpp.html#ac21a19f12988b14a84b15d78184fc8af">foldToUnsignedSaturatedAdd</a></div><div class="ttdeci">static Instruction * foldToUnsignedSaturatedAdd(BinaryOperator &amp;I)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAddSub_8cpp_source.html#l01120">InstCombineAddSub.cpp:1120</a></div></div>
<div class="ttc" id="anamespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">This is an optimization pass for GlobalISel generic memory operations.</div><div class="ttdef"><b>Definition:</b> <a href="AddressRanges_8h_source.html#l00018">AddressRanges.h:18</a></div></div>
<div class="ttc" id="aInstCombineAddSub_8cpp_html_ae2952f3b504e347693918d4cacb9a3a5"><div class="ttname"><a href="InstCombineAddSub_8cpp.html#ae2952f3b504e347693918d4cacb9a3a5">hoistFNegAboveFMulFDiv</a></div><div class="ttdeci">static Instruction * hoistFNegAboveFMulFDiv(Instruction &amp;I, InstCombiner::BuilderTy &amp;Builder)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAddSub_8cpp_source.html#l02449">InstCombineAddSub.cpp:2449</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_a92fdf04445f26ef88ea0e134408b30fe"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#a92fdf04445f26ef88ea0e134408b30fe">llvm::InstCombinerImpl::visitFAdd</a></div><div class="ttdeci">Instruction * visitFAdd(BinaryOperator &amp;I)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAddSub_8cpp_source.html#l01653">InstCombineAddSub.cpp:1653</a></div></div>
<div class="ttc" id="anamespacellvm_html_aa0f28bd61d319f9fd170e9ffee1ec7ba"><div class="ttname"><a href="namespacellvm.html#aa0f28bd61d319f9fd170e9ffee1ec7ba">llvm::haveNoCommonBitsSet</a></div><div class="ttdeci">bool haveNoCommonBitsSet(const Value *LHS, const Value *RHS, const DataLayout &amp;DL, AssumptionCache *AC=nullptr, const Instruction *CxtI=nullptr, const DominatorTree *DT=nullptr, bool UseInstrInfo=true)</div><div class="ttdoc">Return true if LHS and RHS have no common bits set.</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l00231">ValueTracking.cpp:231</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a054bc550cc29339bf1b5c79c73aa4dac"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a054bc550cc29339bf1b5c79c73aa4dac">llvm::PatternMatch::m_TruncOrSelf</a></div><div class="ttdeci">match_combine_or&lt; CastClass_match&lt; OpTy, Instruction::Trunc &gt;, OpTy &gt; m_TruncOrSelf(const OpTy &amp;Op)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01617">PatternMatch.h:1617</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7dc3069afa2ce5ea62ac2eb183e51c00"><div class="ttname"><a href="namespacellvm.html#a7dc3069afa2ce5ea62ac2eb183e51c00">llvm::none_of</a></div><div class="ttdeci">bool none_of(R &amp;&amp;Range, UnaryPredicate P)</div><div class="ttdoc">Provide wrappers to std::none_of which take ranges instead of having to pass begin/end explicitly.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01749">STLExtras.h:1749</a></div></div>
<div class="ttc" id="anamespacellvm_html_a6810c4cb05b49909862249d3b3afa2af"><div class="ttname"><a href="namespacellvm.html#a6810c4cb05b49909862249d3b3afa2af">llvm::ConstantFoldUnaryOpOperand</a></div><div class="ttdeci">Constant * ConstantFoldUnaryOpOperand(unsigned Opcode, Constant *Op, const DataLayout &amp;DL)</div><div class="ttdoc">Attempt to constant fold a unary operation with the specified operand.</div><div class="ttdef"><b>Definition:</b> <a href="ConstantFolding_8cpp_source.html#l01328">ConstantFolding.cpp:1328</a></div></div>
<div class="ttc" id="anamespacellvm_html_aedbf3998b4ff72347a45cb4169d120db"><div class="ttname"><a href="namespacellvm.html#aedbf3998b4ff72347a45cb4169d120db">llvm::MaskedValueIsZero</a></div><div class="ttdeci">bool MaskedValueIsZero(const Value *V, const APInt &amp;Mask, const DataLayout &amp;DL, unsigned Depth=0, AssumptionCache *AC=nullptr, const Instruction *CxtI=nullptr, const DominatorTree *DT=nullptr, bool UseInstrInfo=true)</div><div class="ttdoc">Return true if 'V &amp; Mask' is known to be zero.</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l00364">ValueTracking.cpp:364</a></div></div>
<div class="ttc" id="aclassllvm_1_1DataLayout_html"><div class="ttname"><a href="classllvm_1_1DataLayout.html">llvm::DataLayout</a></div><div class="ttdoc">A parsed version of the target data layout string in and methods for querying it.</div><div class="ttdef"><b>Definition:</b> <a href="DataLayout_8h_source.html#l00110">DataLayout.h:110</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_a76d6befe67c4e647ed64cc5f22114c80"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#a76d6befe67c4e647ed64cc5f22114c80">llvm::ConstantExpr::getSIToFP</a></div><div class="ttdeci">static Constant * getSIToFP(Constant *C, Type *Ty, bool OnlyIfReduced=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02168">Constants.cpp:2168</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a3a402430a1bbe70a9282dcb0e0b6a2cd"><div class="ttname"><a href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">llvm::Value::hasOneUse</a></div><div class="ttdeci">bool hasOneUse() const</div><div class="ttdoc">Return true if there is exactly one use of this value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00434">Value.h:434</a></div></div>
<div class="ttc" id="aInstCombiner_8h_html"><div class="ttname"><a href="InstCombiner_8h.html">InstCombiner.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_aac36edd0f1ce976f0025c98e88d3830eab48b2a9934af7a531cfd7236ded9d50e"><div class="ttname"><a href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eab48b2a9934af7a531cfd7236ded9d50e">llvm::RecurKind::FMul</a></div><div class="ttdeci">@ FMul</div><div class="ttdoc">Product of floats.</div></div>
<div class="ttc" id="aInstCombineAddSub_8cpp_html_a13e47380f530d0f3667a5b22fc47833e"><div class="ttname"><a href="InstCombineAddSub_8cpp.html#a13e47380f530d0f3667a5b22fc47833e">MatchDiv</a></div><div class="ttdeci">static bool MatchDiv(Value *E, Value *&amp;Op, APInt &amp;C, bool IsSigned)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAddSub_8cpp_source.html#l01034">InstCombineAddSub.cpp:1034</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78b"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">llvm::CmpInst::Predicate</a></div><div class="ttdeci">Predicate</div><div class="ttdoc">This enumeration lists the possible predicates for CmpInst subclasses.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00718">InstrTypes.h:718</a></div></div>
<div class="ttc" id="astructllvm_1_1SimplifyQuery_html"><div class="ttname"><a href="structllvm_1_1SimplifyQuery.html">llvm::SimplifyQuery</a></div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8h_source.html#l00093">InstructionSimplify.h:93</a></div></div>
<div class="ttc" id="aHexagonBitSimplify_8cpp_html_aa56209f617200c772b32fea2947178a7"><div class="ttname"><a href="HexagonBitSimplify_8cpp.html#aa56209f617200c772b32fea2947178a7">simplify</a></div><div class="ttdeci">hexagon bit simplify</div><div class="ttdef"><b>Definition:</b> <a href="HexagonBitSimplify_8cpp_source.html#l00289">HexagonBitSimplify.cpp:289</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_ad2c5d7e02adb2570f5058d61021b66f6"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#ad2c5d7e02adb2570f5058d61021b66f6">llvm::PatternMatch::m_NegatedPower2</a></div><div class="ttdeci">cst_pred_ty&lt; is_negated_power2 &gt; m_NegatedPower2()</div><div class="ttdoc">Match a integer or vector negated power-of-2.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00552">PatternMatch.h:552</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_a58d6359cee16e5da66861058836dcca9"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#a58d6359cee16e5da66861058836dcca9">llvm::ConstantExpr::getZExt</a></div><div class="ttdeci">static Constant * getZExt(Constant *C, Type *Ty, bool OnlyIfReduced=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02119">Constants.cpp:2119</a></div></div>
<div class="ttc" id="aclassT_html"><div class="ttname"><a href="classT.html">T</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_ac328c5d387ddf7d4a02afe9b669723c7"><div class="ttname"><a href="classllvm_1_1APInt.html#ac328c5d387ddf7d4a02afe9b669723c7">llvm::APInt::isMask</a></div><div class="ttdeci">bool isMask(unsigned numBits) const</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00476">APInt.h:476</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html"><div class="ttname"><a href="classllvm_1_1Function.html">llvm::Function</a></div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00059">Function.h:59</a></div></div>
<div class="ttc" id="aREADME-SSE_8txt_html_a63d206a063eefcdf8c318ded97b65020"><div class="ttname"><a href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a></div><div class="ttdeci">This currently compiles esp xmm0 movsd esp eax eax esp ret We should use not the dag combiner This is because dagcombine2 needs to be able to see through the X86ISD::Wrapper which DAGCombine can t really do The code for turning x load into a single vector load is target independent and should be moved to the dag combiner The code for turning x load into a vector load can only handle a direct load from a global or a direct load from the stack It should be generalized to handle any load from P</div><div class="ttdef"><b>Definition:</b> <a href="README-SSE_8txt_source.html#l00411">README-SSE.txt:411</a></div></div>
<div class="ttc" id="aclassllvm_1_1BinaryOperator_html_a4f500ae0de71695b652af4c0958d8ea8"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html#a4f500ae0de71695b652af4c0958d8ea8">llvm::BinaryOperator::CreateNot</a></div><div class="ttdeci">static BinaryOperator * CreateNot(Value *Op, const Twine &amp;Name=&quot;&quot;, Instruction *InsertBefore=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l03006">Instructions.cpp:3006</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_aa08fee11e8a5ec10c0cc2a7abbbd799a"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#aa08fee11e8a5ec10c0cc2a7abbbd799a">llvm::PatternMatch::m_LShr</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::LShr &gt; m_LShr(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01117">PatternMatch.h:1117</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_ad1b0513de876d1c85cf6268ca21b2c86"><div class="ttname"><a href="classllvm_1_1APInt.html#ad1b0513de876d1c85cf6268ca21b2c86">llvm::APInt::isPowerOf2</a></div><div class="ttdeci">bool isPowerOf2() const</div><div class="ttdoc">Check if this APInt's value is a power of two greater than zero.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00432">APInt.h:432</a></div></div>
<div class="ttc" id="astructllvm_1_1KnownBits_html_ac67bca6c764da76f5e152330d92ed916"><div class="ttname"><a href="structllvm_1_1KnownBits.html#ac67bca6c764da76f5e152330d92ed916">llvm::KnownBits::Zero</a></div><div class="ttdeci">APInt Zero</div><div class="ttdef"><b>Definition:</b> <a href="KnownBits_8h_source.html#l00024">KnownBits.h:24</a></div></div>
<div class="ttc" id="alib_2Target_2README_8txt_html_a2a2df5a25b9c703e74e82b48a75d0c3d"><div class="ttname"><a href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a></div><div class="ttdeci">instcombine should handle this C2 when C1</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2README_8txt_source.html#l00263">README.txt:263</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a8f87f39b5e0dedd0793bb3a450f463cf"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a8f87f39b5e0dedd0793bb3a450f463cf">llvm::PatternMatch::m_FPOne</a></div><div class="ttdeci">specific_fpval m_FPOne()</div><div class="ttdoc">Match a float 1.0 or vector with all elements equal to 1.0.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00818">PatternMatch.h:818</a></div></div>
<div class="ttc" id="anamespacellvm_html_ab8a7ef433279aabf7f30fa5504a4d4ef"><div class="ttname"><a href="namespacellvm.html#ab8a7ef433279aabf7f30fa5504a4d4ef">llvm::isGuaranteedNotToBeUndefOrPoison</a></div><div class="ttdeci">bool isGuaranteedNotToBeUndefOrPoison(const Value *V, AssumptionCache *AC=nullptr, const Instruction *CtxI=nullptr, const DominatorTree *DT=nullptr, unsigned Depth=0)</div><div class="ttdoc">Return true if this function can prove that V does not have undef bits and is never poison.</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l05581">ValueTracking.cpp:5581</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a4abb39a66573f61fda80469faa5d861d"><div class="ttname"><a href="classllvm_1_1Type.html#a4abb39a66573f61fda80469faa5d861d">llvm::Type::getScalarType</a></div><div class="ttdeci">Type * getScalarType() const</div><div class="ttdoc">If this is a vector type, return the element type, otherwise return 'this'.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00341">Type.h:341</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_aa342c9b3d47cd9bde63b80c83ead429b"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#aa342c9b3d47cd9bde63b80c83ead429b">llvm::ConstantExpr::getSExt</a></div><div class="ttdeci">static Constant * getSExt(Constant *C, Type *Ty, bool OnlyIfReduced=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02105">Constants.cpp:2105</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdoc">This is a 'vector' (really, a variable-sized array), optimized for the case when the array is small.</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l01199">SmallVector.h:1199</a></div></div>
<div class="ttc" id="aclassllvm_1_1BinaryOperator_html_a59ab64994d74243a175979d5b7b6b535"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html#a59ab64994d74243a175979d5b7b6b535">llvm::BinaryOperator::CreateFDivFMF</a></div><div class="ttdeci">static BinaryOperator * CreateFDivFMF(Value *V1, Value *V2, Instruction *FMFSource, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00271">InstrTypes.h:271</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a944c25ac9b73b02a17a20a08a25b9b21"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a944c25ac9b73b02a17a20a08a25b9b21">llvm::PatternMatch::m_Add</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::Add &gt; m_Add(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00979">PatternMatch.h:979</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_adc21598ac33ea9d50f3a939f26a28940"><div class="ttname"><a href="classllvm_1_1Type.html#adc21598ac33ea9d50f3a939f26a28940">llvm::Type::getFltSemantics</a></div><div class="ttdeci">const fltSemantics &amp; getFltSemantics() const</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00066">Type.cpp:66</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a331d69b5f93e47e7c596062b77dd5913"><div class="ttname"><a href="classllvm_1_1APInt.html#a331d69b5f93e47e7c596062b77dd5913">llvm::APInt::getMaxValue</a></div><div class="ttdeci">static APInt getMaxValue(unsigned numBits)</div><div class="ttdoc">Gets maximum unsigned value of APInt for specific bit width.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00186">APInt.h:186</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_af4feec45578e32fe65d8efc59112bc8e"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#af4feec45578e32fe65d8efc59112bc8e">llvm::PatternMatch::m_CombineOr</a></div><div class="ttdeci">match_combine_or&lt; LTy, RTy &gt; m_CombineOr(const LTy &amp;L, const RTy &amp;R)</div><div class="ttdoc">Combine two pattern matchers matching L || R.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00218">PatternMatch.h:218</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilder_html"><div class="ttname"><a href="classllvm_1_1IRBuilder.html">llvm::IRBuilder&lt; TargetFolder, IRBuilderCallbackInserter &gt;</a></div></div>
<div class="ttc" id="aclassllvm_1_1CastInst_html_a643fe5a9e7042f032dae78109c2b1e72"><div class="ttname"><a href="classllvm_1_1CastInst.html#a643fe5a9e7042f032dae78109c2b1e72">llvm::CastInst::Create</a></div><div class="ttdeci">static CastInst * Create(Instruction::CastOps, Value *S, Type *Ty, const Twine &amp;Name=&quot;&quot;, Instruction *InsertBefore=nullptr)</div><div class="ttdoc">Provides a way to construct any of the CastInst subclasses using an opcode instead of the subclass's ...</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l03354">Instructions.cpp:3354</a></div></div>
<div class="ttc" id="aValueTracking_8h_html"><div class="ttname"><a href="ValueTracking_8h.html">ValueTracking.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_acd794d7b3653822f61ba126e1678e03f"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#acd794d7b3653822f61ba126e1678e03f">llvm::PatternMatch::m_APFloat</a></div><div class="ttdeci">apfloat_match m_APFloat(const APFloat *&amp;Res)</div><div class="ttdoc">Match a ConstantFP or splatted ConstantVector, binding the specified pointer to the contained APFloat...</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00295">PatternMatch.h:295</a></div></div>
<div class="ttc" id="anamespacellvm_html_a07256e6859fcb3b9d5eb02ecea9e9a38"><div class="ttname"><a href="namespacellvm.html#a07256e6859fcb3b9d5eb02ecea9e9a38">llvm::isKnownNonZero</a></div><div class="ttdeci">bool isKnownNonZero(const Value *V, const DataLayout &amp;DL, unsigned Depth=0, AssumptionCache *AC=nullptr, const Instruction *CxtI=nullptr, const DominatorTree *DT=nullptr, bool UseInstrInfo=true)</div><div class="ttdoc">Return true if the given value is known to be non-zero when defined.</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l00313">ValueTracking.cpp:313</a></div></div>
<div class="ttc" id="aAPInt_8h_html"><div class="ttname"><a href="APInt_8h.html">APInt.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a">llvm::CmpInst::ICMP_SGT</a></div><div class="ttdeci">@ ICMP_SGT</div><div class="ttdoc">signed greater than</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00745">InstrTypes.h:745</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantFP_html_ae46c23ed39de6de6cf9ec6e57755e4c5"><div class="ttname"><a href="classllvm_1_1ConstantFP.html#ae46c23ed39de6de6cf9ec6e57755e4c5">llvm::ConstantFP::isZero</a></div><div class="ttdeci">bool isZero() const</div><div class="ttdoc">Return true if the value is positive or negative zero.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00301">Constants.h:301</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html"><div class="ttname"><a href="classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdoc">The instances of the Type class are immutable: once they are created, they are never changed.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00045">Type.h:45</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a512fe2c15ea651294688eeec1341644c"><div class="ttname"><a href="classllvm_1_1APInt.html#a512fe2c15ea651294688eeec1341644c">llvm::APInt::getBitWidth</a></div><div class="ttdeci">unsigned getBitWidth() const</div><div class="ttdoc">Return the number of bits in the APInt.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01439">APInt.h:1439</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_aca9adeb29ed06c9f8694fc69cb2bf426"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#aca9adeb29ed06c9f8694fc69cb2bf426">llvm::ConstantExpr::getFPToSI</a></div><div class="ttdeci">static Constant * getFPToSI(Constant *C, Type *Ty, bool OnlyIfReduced=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02190">Constants.cpp:2190</a></div></div>
<div class="ttc" id="aclassllvm_1_1FastMathFlags_html_a278a2e29bf56f2e2109fd35ae454b050"><div class="ttname"><a href="classllvm_1_1FastMathFlags.html#a278a2e29bf56f2e2109fd35ae454b050">llvm::FastMathFlags::noSignedZeros</a></div><div class="ttdeci">bool noSignedZeros() const</div><div class="ttdef"><b>Definition:</b> <a href="FMF_8h_source.html#l00069">FMF.h:69</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantFP_html_a7faf4e0334b77ab527e4b45e3a1f4d65"><div class="ttname"><a href="classllvm_1_1ConstantFP.html#a7faf4e0334b77ab527e4b45e3a1f4d65">llvm::ConstantFP::getValueAPF</a></div><div class="ttdeci">const APFloat &amp; getValueAPF() const</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00297">Constants.h:297</a></div></div>
<div class="ttc" id="anamespacellvm_html_a6e8a8610223f1f09b6000dcbca9649a5"><div class="ttname"><a href="namespacellvm.html#a6e8a8610223f1f09b6000dcbca9649a5">llvm::simplifyFSubInst</a></div><div class="ttdeci">Value * simplifyFSubInst(Value *LHS, Value *RHS, FastMathFlags FMF, const SimplifyQuery &amp;Q, fp::ExceptionBehavior ExBehavior=fp::ebIgnore, RoundingMode Rounding=RoundingMode::NearestTiesToEven)</div><div class="ttdoc">Given operands for an FSub, fold the result or return null.</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8cpp_source.html#l05584">InstructionSimplify.cpp:5584</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a43ac4fbaaf63a88eb5ac05f6d3e5649c"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a43ac4fbaaf63a88eb5ac05f6d3e5649c">llvm::PatternMatch::m_BinOp</a></div><div class="ttdeci">class_match&lt; BinaryOperator &gt; m_BinOp()</div><div class="ttdoc">Match an arbitrary binary operation and ignore it.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00084">PatternMatch.h:84</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ore_html_a8f5533240c6722d987a2443cba42019d"><div class="ttname"><a href="namespacellvm_1_1ore.html#a8f5533240c6722d987a2443cba42019d">llvm::ore::NV</a></div><div class="ttdeci">DiagnosticInfoOptimizationBase::Argument NV</div><div class="ttdef"><b>Definition:</b> <a href="OptimizationRemarkEmitter_8h_source.html#l00136">OptimizationRemarkEmitter.h:136</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a64153676e101a130bbbaaf91635d253a"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a64153676e101a130bbbaaf91635d253a">llvm::PatternMatch::m_AShr</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::AShr &gt; m_AShr(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01123">PatternMatch.h:1123</a></div></div>
<div class="ttc" id="anamespacellvm_html_ad46ed333b920b20e78d948610366254c"><div class="ttname"><a href="namespacellvm.html#ad46ed333b920b20e78d948610366254c">llvm::ComputeNumSignBits</a></div><div class="ttdeci">unsigned ComputeNumSignBits(const Value *Op, const DataLayout &amp;DL, unsigned Depth=0, AssumptionCache *AC=nullptr, const Instruction *CxtI=nullptr, const DominatorTree *DT=nullptr, bool UseInstrInfo=true)</div><div class="ttdoc">Return the number of times the sign bit of the register is replicated into the other bits.</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l00383">ValueTracking.cpp:383</a></div></div>
<div class="ttc" id="anamespacellvm_1_1tgtok_html_abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4"><div class="ttname"><a href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">llvm::tgtok::FalseVal</a></div><div class="ttdeci">@ FalseVal</div><div class="ttdef"><b>Definition:</b> <a href="TGLexer_8h_source.html#l00062">TGLexer.h:62</a></div></div>
<div class="ttc" id="aOperator_8h_html"><div class="ttname"><a href="Operator_8h.html">Operator.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_aec6eaa1e49f48c178e0ab9c030b5971e"><div class="ttname"><a href="classllvm_1_1Instruction.html#aec6eaa1e49f48c178e0ab9c030b5971e">llvm::Instruction::copyMetadata</a></div><div class="ttdeci">void copyMetadata(const Instruction &amp;SrcInst, ArrayRef&lt; unsigned &gt; WL=ArrayRef&lt; unsigned &gt;())</div><div class="ttdoc">Copy metadata from SrcInst to this instruction.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00882">Instruction.cpp:882</a></div></div>
<div class="ttc" id="aAlignOf_8h_html"><div class="ttname"><a href="AlignOf_8h.html">AlignOf.h</a></div></div>
<div class="ttc" id="aInstCombineAddSub_8cpp_html_a7badd6236e4072f75267bf86664547d2"><div class="ttname"><a href="InstCombineAddSub_8cpp.html#a7badd6236e4072f75267bf86664547d2">foldSubOfMinMax</a></div><div class="ttdeci">static Instruction * foldSubOfMinMax(BinaryOperator &amp;I, InstCombiner::BuilderTy &amp;Builder)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAddSub_8cpp_source.html#l01881">InstCombineAddSub.cpp:1881</a></div></div>
<div class="ttc" id="aAMDGPURegBankSelect_8cpp_html_a14e0c000ed52e5fc187d4a885914cc1a"><div class="ttname"><a href="AMDGPURegBankSelect_8cpp.html#a14e0c000ed52e5fc187d4a885914cc1a">Select</a></div><div class="ttdeci">amdgpu AMDGPU Register Bank Select</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPURegBankSelect_8cpp_source.html#l00045">AMDGPURegBankSelect.cpp:45</a></div></div>
<div class="ttc" id="aSTLExtras_8h_html"><div class="ttname"><a href="STLExtras_8h.html">STLExtras.h</a></div></div>
<div class="ttc" id="aX86PartialReduction_8cpp_html_a87b8bfbbe9d8f7146d7f20a5fb42efd0"><div class="ttname"><a href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a></div><div class="ttdeci">Value * RHS</div><div class="ttdef"><b>Definition:</b> <a href="X86PartialReduction_8cpp_source.html#l00076">X86PartialReduction.cpp:76</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_ae9d735be1ececf149966a4da253f0320"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#ae9d735be1ececf149966a4da253f0320">llvm::PatternMatch::m_c_And</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::And, true &gt; m_c_And(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdoc">Matches an And with LHS and RHS in either order.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l02262">PatternMatch.h:2262</a></div></div>
<div class="ttc" id="aclassllvm_1_1BinaryOperator_html_a19cdbeffd437228c47a4410a4ed34aca"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html#a19cdbeffd437228c47a4410a4ed34aca">llvm::BinaryOperator::CreateNeg</a></div><div class="ttdeci">NUW NUW NUW NUW Exact static Exact BinaryOperator * CreateNeg(Value *Op, const Twine &amp;Name=&quot;&quot;, Instruction *InsertBefore=nullptr)</div><div class="ttdoc">Helper functions to construct and inspect unary operations (NEG and NOT) via binary operators SUB and...</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l02966">Instructions.cpp:2966</a></div></div>
<div class="ttc" id="aclassllvm_1_1UnaryOperator_html"><div class="ttname"><a href="classllvm_1_1UnaryOperator.html">llvm::UnaryOperator</a></div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00100">InstrTypes.h:100</a></div></div>
<div class="ttc" id="aInstCombineAddSub_8cpp_html_aee922e34ce9e7dd2527478fa7e145607"><div class="ttname"><a href="InstCombineAddSub_8cpp.html#aee922e34ce9e7dd2527478fa7e145607">factorizeLerp</a></div><div class="ttdeci">static Instruction * factorizeLerp(BinaryOperator &amp;I, InstCombiner::BuilderTy &amp;Builder)</div><div class="ttdoc">Eliminate an op from a linear interpolation (lerp) pattern.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAddSub_8cpp_source.html#l01592">InstCombineAddSub.cpp:1592</a></div></div>
<div class="ttc" id="aclassllvm_1_1FastMathFlags_html"><div class="ttname"><a href="classllvm_1_1FastMathFlags.html">llvm::FastMathFlags</a></div><div class="ttdoc">Convenience struct for specifying and reasoning about fast-math flags.</div><div class="ttdef"><b>Definition:</b> <a href="FMF_8h_source.html#l00021">FMF.h:21</a></div></div>
<div class="ttc" id="anamespacellvm_html_aac36edd0f1ce976f0025c98e88d3830ead6bb6a2eca7d60c75e349ea45e138d74"><div class="ttname"><a href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ead6bb6a2eca7d60c75e349ea45e138d74">llvm::RecurKind::SMin</a></div><div class="ttdeci">@ SMin</div><div class="ttdoc">Signed integer min implemented in terms of select(cmp()).</div></div>
<div class="ttc" id="anamespacellvm_html_a1a1e51a5952c3afa00875df90e7ae6f8"><div class="ttname"><a href="namespacellvm.html#a1a1e51a5952c3afa00875df90e7ae6f8">llvm::isInt</a></div><div class="ttdeci">constexpr bool isInt(int64_t x)</div><div class="ttdoc">Checks if an integer fits into the given bit width.</div><div class="ttdef"><b>Definition:</b> <a href="MathExtras_8h_source.html#l00179">MathExtras.h:179</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_ac38a3c2794db0ecc70c9bb7106f1e1bf"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#ac38a3c2794db0ecc70c9bb7106f1e1bf">llvm::InstCombinerImpl::foldAddWithConstant</a></div><div class="ttdeci">Instruction * foldAddWithConstant(BinaryOperator &amp;Add)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAddSub_8cpp_source.html#l00849">InstCombineAddSub.cpp:849</a></div></div>
<div class="ttc" id="anamespacellvm_html_a76162df5082ce14f7796e4307cba27fd"><div class="ttname"><a href="namespacellvm.html#a76162df5082ce14f7796e4307cba27fd">llvm::simplifyFAddInst</a></div><div class="ttdeci">Value * simplifyFAddInst(Value *LHS, Value *RHS, FastMathFlags FMF, const SimplifyQuery &amp;Q, fp::ExceptionBehavior ExBehavior=fp::ebIgnore, RoundingMode Rounding=RoundingMode::NearestTiesToEven)</div><div class="ttdoc">Given operands for an FAdd, fold the result or return null.</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8cpp_source.html#l05576">InstructionSimplify.cpp:5576</a></div></div>
<div class="ttc" id="aclassllvm_1_1APFloat_html_a037ff294d9d370e29651cbc99442a575"><div class="ttname"><a href="classllvm_1_1APFloat.html#a037ff294d9d370e29651cbc99442a575">llvm::APFloat::getSemantics</a></div><div class="ttdeci">const fltSemantics &amp; getSemantics() const</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l01267">APFloat.h:1267</a></div></div>
<div class="ttc" id="astructllvm_1_1AlignedCharArrayUnion_html"><div class="ttname"><a href="structllvm_1_1AlignedCharArrayUnion.html">llvm::AlignedCharArrayUnion</a></div><div class="ttdoc">A suitably aligned and sized character array member which can hold elements of any type.</div><div class="ttdef"><b>Definition:</b> <a href="AlignOf_8h_source.html#l00027">AlignOf.h:27</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a94bf3939e0bea91b481096473d0e549f"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a94bf3939e0bea91b481096473d0e549f">llvm::PatternMatch::m_Deferred</a></div><div class="ttdeci">deferredval_ty&lt; Value &gt; m_Deferred(Value *const &amp;V)</div><div class="ttdoc">Like m_Specific(), but works if the specific value to match is determined as part of the same match()...</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00790">PatternMatch.h:790</a></div></div>
<div class="ttc" id="anamespacellvm_1_1APIntOps_html_aa606171b17bdde9015fa656e226ca9e0"><div class="ttname"><a href="namespacellvm_1_1APIntOps.html#aa606171b17bdde9015fa656e226ca9e0">llvm::APIntOps::umin</a></div><div class="ttdeci">const APInt &amp; umin(const APInt &amp;A, const APInt &amp;B)</div><div class="ttdoc">Determine the smaller of two APInts considered to be unsigned.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l02185">APInt.h:2185</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a0a77c976c6edefcb3c05ad8a225fd36e"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a0a77c976c6edefcb3c05ad8a225fd36e">llvm::PatternMatch::m_FDiv</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::FDiv &gt; m_FDiv(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01069">PatternMatch.h:1069</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_adcc0eb018adede4d62dafa5e60bce4be"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#adcc0eb018adede4d62dafa5e60bce4be">llvm::PatternMatch::m_c_MaxOrMin</a></div><div class="ttdeci">match_combine_or&lt; match_combine_or&lt; MaxMin_match&lt; ICmpInst, LHS, RHS, smax_pred_ty, true &gt;, MaxMin_match&lt; ICmpInst, LHS, RHS, smin_pred_ty, true &gt; &gt;, match_combine_or&lt; MaxMin_match&lt; ICmpInst, LHS, RHS, umax_pred_ty, true &gt;, MaxMin_match&lt; ICmpInst, LHS, RHS, umin_pred_ty, true &gt; &gt; &gt; m_c_MaxOrMin(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l02362">PatternMatch.h:2362</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_a96d73bbd7af15cb1fc38c3f4a3bd82e9"><div class="ttname"><a href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a></div><div class="ttdeci">#define F(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00055">MD5.cpp:55</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RISCVFenceField_html_a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731"><div class="ttname"><a href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">llvm::RISCVFenceField::R</a></div><div class="ttdeci">@ R</div><div class="ttdef"><b>Definition:</b> <a href="RISCVBaseInfo_8h_source.html#l00278">RISCVBaseInfo.h:278</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a5e3486337f60bed631149fb6b141bc3e"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a5e3486337f60bed631149fb6b141bc3e">llvm::PatternMatch::m_FAdd</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::FAdd &gt; m_FAdd(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00985">PatternMatch.h:985</a></div></div>
<div class="ttc" id="aKnownBits_8h_html"><div class="ttname"><a href="KnownBits_8h.html">KnownBits.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_aac83d9218356dfe82518cb81e3a53f2f"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#aac83d9218356dfe82518cb81e3a53f2f">llvm::PatternMatch::m_FSub</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::FSub &gt; m_FSub(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00997">PatternMatch.h:997</a></div></div>
<div class="ttc" id="aInstCombineAddSub_8cpp_html_ad596efe3fec6e55f7011c9b61cd7928e"><div class="ttname"><a href="InstCombineAddSub_8cpp.html#ad596efe3fec6e55f7011c9b61cd7928e">factorizeFAddFSub</a></div><div class="ttdeci">static Instruction * factorizeFAddFSub(BinaryOperator &amp;I, InstCombiner::BuilderTy &amp;Builder)</div><div class="ttdoc">Factor a common operand out of fadd/fsub of fmul/fdiv.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAddSub_8cpp_source.html#l01608">InstCombineAddSub.cpp:1608</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a4aa7e7ca8ab4093fd0dbadb223b998c0"><div class="ttname"><a href="classllvm_1_1APInt.html#a4aa7e7ca8ab4093fd0dbadb223b998c0">llvm::APInt::isSignMask</a></div><div class="ttdeci">bool isSignMask() const</div><div class="ttdoc">Check if the APInt's value is returned by getSignMask.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00454">APInt.h:454</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_aca6428e7fec51ba0b55594f469eb9691"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">llvm::PatternMatch::m_OneUse</a></div><div class="ttdeci">OneUse_match&lt; T &gt; m_OneUse(const T &amp;SubPattern)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00067">PatternMatch.h:67</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_a554ab77949b0a16670a83ec3307501eb"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#a554ab77949b0a16670a83ec3307501eb">llvm::ConstantExpr::getSub</a></div><div class="ttdeci">static Constant * getSub(Constant *C1, Constant *C2, bool HasNUW=false, bool HasNSW=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02664">Constants.cpp:2664</a></div></div>
<div class="ttc" id="anamespacellvm_html_a73257f51950d9ea50955e3fb9c724a25"><div class="ttname"><a href="namespacellvm.html#a73257f51950d9ea50955e3fb9c724a25">llvm::get</a></div><div class="ttdeci">decltype(auto) get(const PointerIntPair&lt; PointerTy, IntBits, IntType, PtrTraits, Info &gt; &amp;Pair)</div><div class="ttdef"><b>Definition:</b> <a href="PointerIntPair_8h_source.html#l00234">PointerIntPair.h:234</a></div></div>
<div class="ttc" id="aIR_2Instruction_8h_html"><div class="ttname"><a href="IR_2Instruction_8h.html">Instruction.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_aac9e78b3aa02ec087c4621358f506718"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">llvm::PatternMatch::m_APInt</a></div><div class="ttdeci">apint_match m_APInt(const APInt *&amp;Res)</div><div class="ttdoc">Match a ConstantInt or splatted ConstantVector, binding the specified pointer to the contained APInt.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00278">PatternMatch.h:278</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a028f4d1eead63cc33499ce3459bd27c7"><div class="ttname"><a href="classllvm_1_1APInt.html#a028f4d1eead63cc33499ce3459bd27c7">llvm::APInt::umul_ov</a></div><div class="ttdeci">APInt umul_ov(const APInt &amp;RHS, bool &amp;Overflow) const</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8cpp_source.html#l01969">APInt.cpp:1969</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_ac56cd25f664c1497623d26158a6c5997"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#ac56cd25f664c1497623d26158a6c5997">llvm::PatternMatch::m_c_BinOp</a></div><div class="ttdeci">AnyBinaryOp_match&lt; LHS, RHS, true &gt; m_c_BinOp(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdoc">Matches a BinaryOperator with LHS and RHS in either order.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l02226">PatternMatch.h:2226</a></div></div>
<div class="ttc" id="astructllvm_1_1SimplifyQuery_html_a928ce56952772d0e0f43cab3a489a6fe"><div class="ttname"><a href="structllvm_1_1SimplifyQuery.html#a928ce56952772d0e0f43cab3a489a6fe">llvm::SimplifyQuery::AC</a></div><div class="ttdeci">AssumptionCache * AC</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8h_source.html#l00097">InstructionSimplify.h:97</a></div></div>
<div class="ttc" id="aX86PartialReduction_8cpp_html_a9e1483f7215664a2315c53c3558d9a8d"><div class="ttname"><a href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a></div><div class="ttdeci">Value * LHS</div><div class="ttdef"><b>Definition:</b> <a href="X86PartialReduction_8cpp_source.html#l00075">X86PartialReduction.cpp:75</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a6804d9caf15411f55e7b9e9f397f0422"><div class="ttname"><a href="classllvm_1_1APInt.html#a6804d9caf15411f55e7b9e9f397f0422">llvm::APInt::isNegative</a></div><div class="ttdeci">bool isNegative() const</div><div class="ttdoc">Determine sign of this APInt.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00312">APInt.h:312</a></div></div>
<div class="ttc" id="aclassllvm_1_1SelectInst_html_aa55fb74dd22008fdcc26a63f44576022"><div class="ttname"><a href="classllvm_1_1SelectInst.html#aa55fb74dd22008fdcc26a63f44576022">llvm::SelectInst::Create</a></div><div class="ttdeci">static SelectInst * Create(Value *C, Value *S1, Value *S2, const Twine &amp;NameStr=&quot;&quot;, Instruction *InsertBefore=nullptr, Instruction *MDFrom=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01777">Instructions.h:1777</a></div></div>
<div class="ttc" id="anamespacellvm_html_aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b"><div class="ttname"><a href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">llvm::RecurKind::And</a></div><div class="ttdeci">@ And</div><div class="ttdoc">Bitwise or logical AND of integers.</div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_acb52eaa15512b845d33e0ec03648af5c"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#acb52eaa15512b845d33e0ec03648af5c">llvm::PatternMatch::m_CopySign</a></div><div class="ttdeci">m_Intrinsic_Ty&lt; Opnd0, Opnd1 &gt;::Ty m_CopySign(const Opnd0 &amp;Op0, const Opnd1 &amp;Op1)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l02210">PatternMatch.h:2210</a></div></div>
<div class="ttc" id="aInstCombineInternal_8h_html"><div class="ttname"><a href="InstCombineInternal_8h.html">InstCombineInternal.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_addb87fe3f509b7803d3f5933ee24b560"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#addb87fe3f509b7803d3f5933ee24b560">llvm::PatternMatch::m_Select</a></div><div class="ttdeci">ThreeOps_match&lt; Cond, LHS, RHS, Instruction::Select &gt; m_Select(const Cond &amp;C, const LHS &amp;L, const RHS &amp;R)</div><div class="ttdoc">Matches SelectInst.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01462">PatternMatch.h:1462</a></div></div>
<div class="ttc" id="aConstants_8h_html"><div class="ttname"><a href="Constants_8h.html">Constants.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a25d956d9e0beadd47ce4bc255dfa811d"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">llvm::PatternMatch::match</a></div><div class="ttdeci">bool match(Val *V, const Pattern &amp;P)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00049">PatternMatch.h:49</a></div></div>
<div class="ttc" id="aLint_8cpp_html_a45005634b54e2126cb3e6ec0dbc9ade4"><div class="ttname"><a href="Lint_8cpp.html#a45005634b54e2126cb3e6ec0dbc9ade4">isZero</a></div><div class="ttdeci">static bool isZero(Value *V, const DataLayout &amp;DL, DominatorTree *DT, AssumptionCache *AC)</div><div class="ttdef"><b>Definition:</b> <a href="Lint_8cpp_source.html#l00524">Lint.cpp:524</a></div></div>
<div class="ttc" id="aBuiltinGCs_8cpp_html_a6742d2e0a668baf1196ec69e158d5f15"><div class="ttname"><a href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a></div><div class="ttdeci">static GCRegistry::Add&lt; CoreCLRGC &gt; E(&quot;coreclr&quot;, &quot;CoreCLR-compatible GC&quot;)</div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a4166b451a572b1e5d3fea7250af53653"><div class="ttname"><a href="classllvm_1_1Instruction.html#a4166b451a572b1e5d3fea7250af53653">llvm::Instruction::setHasNoSignedWrap</a></div><div class="ttdeci">void setHasNoSignedWrap(bool b=true)</div><div class="ttdoc">Set or clear the nsw flag on this instruction, which must be an operator which supports this flag.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00165">Instruction.cpp:165</a></div></div>
<div class="ttc" id="anamespacellvm_html_a964455f36837281d37f2a44e2fcb4cca"><div class="ttname"><a href="namespacellvm.html#a964455f36837281d37f2a44e2fcb4cca">llvm::ConstantFoldBinaryOpOperands</a></div><div class="ttdeci">Constant * ConstantFoldBinaryOpOperands(unsigned Opcode, Constant *LHS, Constant *RHS, const DataLayout &amp;DL)</div><div class="ttdoc">Attempt to constant fold a binary operation with the specified operands.</div><div class="ttdef"><b>Definition:</b> <a href="ConstantFolding_8cpp_source.html#l01335">ConstantFolding.cpp:1335</a></div></div>
<div class="ttc" id="aclassllvm_1_1User_html"><div class="ttname"><a href="classllvm_1_1User.html">llvm::User</a></div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00044">User.h:44</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_aa4a99c313af96b3b50a9768338a54b2e"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#aa4a99c313af96b3b50a9768338a54b2e">llvm::PatternMatch::m_SpecificIntAllowUndef</a></div><div class="ttdeci">specific_intval&lt; true &gt; m_SpecificIntAllowUndef(APInt V)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00862">PatternMatch.h:862</a></div></div>
<div class="ttc" id="anamespacellvm_html_ab7af0c09900daed62bbdb01dba180f7c"><div class="ttname"><a href="namespacellvm.html#ab7af0c09900daed62bbdb01dba180f7c">llvm::RoundingMode</a></div><div class="ttdeci">RoundingMode</div><div class="ttdoc">Rounding mode.</div><div class="ttdef"><b>Definition:</b> <a href="FloatingPointMode_8h_source.html#l00036">FloatingPointMode.h:36</a></div></div>
<div class="ttc" id="aREADME__ALTIVEC_8txt_html_a9aacd9146afe44bf656cd664e2a88c8c"><div class="ttname"><a href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a></div><div class="ttdeci">(vector float) vec_cmpeq(*A, *B) C</div><div class="ttdef"><b>Definition:</b> <a href="README__ALTIVEC_8txt_source.html#l00086">README_ALTIVEC.txt:86</a></div></div>
<div class="ttc" id="aInstrTypes_8h_html"><div class="ttname"><a href="InstrTypes_8h.html">InstrTypes.h</a></div></div>
<div class="ttc" id="alib_2Target_2README_8txt_html_a3217063f680fa8e35dea3c59b6e52b18"><div class="ttname"><a href="lib_2Target_2README_8txt.html#a3217063f680fa8e35dea3c59b6e52b18">int</a></div><div class="ttdeci">Clang compiles this i1 i64 store i64 i64 store i64 i64 store i64 i64 store i64 align Which gets codegen d xmm0 movaps rbp movaps rbp movaps rbp movaps rbp rbp rbp rbp rbp It would be better to have movq s of instead of the movaps s LLVM produces ret int</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2README_8txt_source.html#l00536">README.txt:536</a></div></div>
<div class="ttc" id="anamespacellvm_html_a0068da90e0fe51c9645b75e2a2235dc1"><div class="ttname"><a href="namespacellvm.html#a0068da90e0fe51c9645b75e2a2235dc1">llvm::operator+=</a></div><div class="ttdeci">std::string &amp; operator+=(std::string &amp;buffer, StringRef string)</div><div class="ttdef"><b>Definition:</b> <a href="StringRef_8h_source.html#l00891">StringRef.h:891</a></div></div>
<div class="ttc" id="aOcamlGCPrinter_8cpp_html_afcf2f797ed287a723263583c9b1c1bce"><div class="ttname"><a href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a></div><div class="ttdeci">static GCMetadataPrinterRegistry::Add&lt; OcamlGCMetadataPrinter &gt; Y(&quot;ocaml&quot;, &quot;ocaml 3.10-compatible collector&quot;)</div></div>
<div class="ttc" id="aclassllvm_1_1CallInst_html_a850d8262cd900958b3153c4aa080b2bb"><div class="ttname"><a href="classllvm_1_1CallInst.html#a850d8262cd900958b3153c4aa080b2bb">llvm::CallInst::Create</a></div><div class="ttdeci">static CallInst * Create(FunctionType *Ty, Value *F, const Twine &amp;NameStr=&quot;&quot;, Instruction *InsertBefore=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01528">Instructions.h:1528</a></div></div>
<div class="ttc" id="aSIInstrInfo_8cpp_html_a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791"><div class="ttname"><a href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a></div><div class="ttdeci">@ SI</div><div class="ttdef"><b>Definition:</b> <a href="SIInstrInfo_8cpp_source.html#l07993">SIInstrInfo.cpp:7993</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ms__demangle_html_afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e"><div class="ttname"><a href="namespacellvm_1_1ms__demangle.html#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">llvm::ms_demangle::QualifierMangleMode::Result</a></div><div class="ttdeci">@ Result</div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a04353aa48874f9bda89ff9059cd1a5a6"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a04353aa48874f9bda89ff9059cd1a5a6">llvm::PatternMatch::m_Instruction</a></div><div class="ttdeci">bind_ty&lt; Instruction &gt; m_Instruction(Instruction *&amp;I)</div><div class="ttdoc">Match an instruction, capturing it if we match.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00716">PatternMatch.h:716</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a2cbdca7c8267aac6914d674f8e81841b"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a2cbdca7c8267aac6914d674f8e81841b">llvm::PatternMatch::m_ZExt</a></div><div class="ttdeci">CastClass_match&lt; OpTy, Instruction::ZExt &gt; m_ZExt(const OpTy &amp;Op)</div><div class="ttdoc">Matches ZExt.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01629">PatternMatch.h:1629</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_ad191220adaaedcfba833985509a17452"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#ad191220adaaedcfba833985509a17452">llvm::PatternMatch::m_c_Add</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::Add, true &gt; m_c_Add(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdoc">Matches a Add with LHS and RHS in either order.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l02248">PatternMatch.h:2248</a></div></div>
<div class="ttc" id="aBuiltinGCs_8cpp_html_a7abf5fb4071cb25dbce06dfb5ee3c937"><div class="ttname"><a href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a></div><div class="ttdeci">static GCRegistry::Add&lt; OcamlGC &gt; B(&quot;ocaml&quot;, &quot;ocaml 3.10-compatible GC&quot;)</div></div>
<div class="ttc" id="aInstCombineAddSub_8cpp_html_a3aecc3c6f9a437c18254f7198edcee13"><div class="ttname"><a href="InstCombineAddSub_8cpp.html#a3aecc3c6f9a437c18254f7198edcee13">checkForNegativeOperand</a></div><div class="ttdeci">static Value * checkForNegativeOperand(BinaryOperator &amp;I, InstCombiner::BuilderTy &amp;Builder)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAddSub_8cpp_source.html#l00752">InstCombineAddSub.cpp:752</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_af431ec215bba8bb9c56e7541d99920f2"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#af431ec215bba8bb9c56e7541d99920f2">llvm::PatternMatch::m_FNeg</a></div><div class="ttdeci">FNeg_match&lt; OpTy &gt; m_FNeg(const OpTy &amp;X)</div><div class="ttdoc">Match 'fneg X' as 'fsub -0.0, X'.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01033">PatternMatch.h:1033</a></div></div>
<div class="ttc" id="aclassllvm_1_1Constant_html_a4d51384de6e1798bb6aa875aebeea9f0"><div class="ttname"><a href="classllvm_1_1Constant.html#a4d51384de6e1798bb6aa875aebeea9f0">llvm::Constant::getAllOnesValue</a></div><div class="ttdeci">static Constant * getAllOnesValue(Type *Ty)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00403">Constants.cpp:403</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a741e3212cc4b9d94cd549d02d26e172b"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a741e3212cc4b9d94cd549d02d26e172b">llvm::PatternMatch::m_SDiv</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::SDiv &gt; m_SDiv(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01063">PatternMatch.h:1063</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html"><div class="ttname"><a href="classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00041">Instruction.h:41</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a9f382207d841377156d4c7868b66b9a5"><div class="ttname"><a href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">llvm::Type::getScalarSizeInBits</a></div><div class="ttdeci">unsigned getScalarSizeInBits() const LLVM_READONLY</div><div class="ttdoc">If this is a vector type, return the getPrimitiveSizeInBits value for the element type.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00188">Type.cpp:188</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_adc571425e9aecccf7ebf5fcc3c678d94"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#adc571425e9aecccf7ebf5fcc3c678d94">llvm::PatternMatch::m_UMin</a></div><div class="ttdeci">MaxMin_match&lt; ICmpInst, LHS, RHS, umin_pred_ty &gt; m_UMin(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01871">PatternMatch.h:1871</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a7af604b3a6b3a44113d4c54c5c04d031"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a7af604b3a6b3a44113d4c54c5c04d031">llvm::PatternMatch::m_c_Or</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::Or, true &gt; m_c_Or(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdoc">Matches an Or with LHS and RHS in either order.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l02269">PatternMatch.h:2269</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantFP_html"><div class="ttname"><a href="classllvm_1_1ConstantFP.html">llvm::ConstantFP</a></div><div class="ttdoc">ConstantFP - Floating Point Values [float, double].</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00256">Constants.h:256</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_adcb96bd09d7c75c7669fa5f9d1190899"><div class="ttname"><a href="classllvm_1_1APInt.html#adcb96bd09d7c75c7669fa5f9d1190899">llvm::APInt::getHighBitsSet</a></div><div class="ttdeci">static APInt getHighBitsSet(unsigned numBits, unsigned hiBitsSet)</div><div class="ttdoc">Constructs an APInt value that has the top hiBitsSet bits set.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00279">APInt.h:279</a></div></div>
<div class="ttc" id="aAPFloat_8h_html"><div class="ttname"><a href="APFloat_8h.html">APFloat.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_a969709dd49c28865a482d8b870f87c46"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">llvm::ConstantInt::get</a></div><div class="ttdeci">static Constant * get(Type *Ty, uint64_t V, bool IsSigned=false)</div><div class="ttdoc">If Ty is a vector type, return a Constant with a splat of the given value.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00887">Constants.cpp:887</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_ace8c2df4c506b92296cad275b4211022"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#ace8c2df4c506b92296cad275b4211022">llvm::PatternMatch::m_NSWSub</a></div><div class="ttdeci">OverflowingBinaryOp_match&lt; LHS, RHS, Instruction::Sub, OverflowingBinaryOperator::NoSignedWrap &gt; m_NSWSub(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01164">PatternMatch.h:1164</a></div></div>
<div class="ttc" id="aInstCombineAddSub_8cpp_html_a7d07668628012ac4add2dc0c4824a5c0"><div class="ttname"><a href="InstCombineAddSub_8cpp.html#a7d07668628012ac4add2dc0c4824a5c0">foldAddToAshr</a></div><div class="ttdeci">static Instruction * foldAddToAshr(BinaryOperator &amp;Add)</div><div class="ttdoc">Try to reduce signed division by power-of-2 to an arithmetic shift right.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAddSub_8cpp_source.html#l01143">InstCombineAddSub.cpp:1143</a></div></div>
<div class="ttc" id="aInstCombineAddSub_8cpp_html_a68a28d78ec908c83a9d46101bd5cbbff"><div class="ttname"><a href="InstCombineAddSub_8cpp.html#a68a28d78ec908c83a9d46101bd5cbbff">canonicalizeLowbitMask</a></div><div class="ttdeci">static Instruction * canonicalizeLowbitMask(BinaryOperator &amp;I, InstCombiner::BuilderTy &amp;Builder)</div><div class="ttdoc">Fold (1 &lt;&lt; NBits) - 1 Into: ~(-(1 &lt;&lt; NBits)) Because a 'not' is better for bit-tracking analysis and ...</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAddSub_8cpp_source.html#l01102">InstCombineAddSub.cpp:1102</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_ae1a04895305aaea96e5e82d95c39bbe0"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#ae1a04895305aaea96e5e82d95c39bbe0">llvm::PatternMatch::m_URem</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::URem &gt; m_URem(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01075">PatternMatch.h:1075</a></div></div>
<div class="ttc" id="aPatternMatch_8h_html"><div class="ttname"><a href="PatternMatch_8h.html">PatternMatch.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a9a99431f0828d0222c617eb876bc5d34"><div class="ttname"><a href="classllvm_1_1APInt.html#a9a99431f0828d0222c617eb876bc5d34">llvm::APInt::countTrailingZeros</a></div><div class="ttdeci">unsigned countTrailingZeros() const</div><div class="ttdoc">Count the number of trailing zero bits.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01591">APInt.h:1591</a></div></div>
<div class="ttc" id="aclassllvm_1_1CastInst_html_aab2e21628e0e96267839b852a708b38a"><div class="ttname"><a href="classllvm_1_1CastInst.html#aab2e21628e0e96267839b852a708b38a">llvm::CastInst::CreateTruncOrBitCast</a></div><div class="ttdeci">static CastInst * CreateTruncOrBitCast(Value *S, Type *Ty, const Twine &amp;Name=&quot;&quot;, Instruction *InsertBefore=nullptr)</div><div class="ttdoc">Create a Trunc or BitCast cast instruction.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l03430">Instructions.cpp:3430</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a13e877ef779ba7a0688081079f4f9b03"><div class="ttname"><a href="classllvm_1_1Type.html#a13e877ef779ba7a0688081079f4f9b03">llvm::Type::getIntegerBitWidth</a></div><div class="ttdeci">unsigned getIntegerBitWidth() const</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00097">DerivedTypes.h:97</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombiner_html_ae448b36ef67b71f0b281c8275cceacf6"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#ae448b36ef67b71f0b281c8275cceacf6">llvm::InstCombiner::SubOne</a></div><div class="ttdeci">static Constant * SubOne(Constant *C)</div><div class="ttdoc">Subtract one from a Constant.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombiner_8h_source.html#l00207">InstCombiner.h:207</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_aaa1ec19d8da987f818acfcfd9111f480"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#aaa1ec19d8da987f818acfcfd9111f480">llvm::PatternMatch::m_c_UMax</a></div><div class="ttdeci">MaxMin_match&lt; ICmpInst, LHS, RHS, umax_pred_ty, true &gt; m_c_UMax(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdoc">Matches a UMax with LHS and RHS in either order.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l02352">PatternMatch.h:2352</a></div></div>
<div class="ttc" id="aType_8h_html"><div class="ttname"><a href="Type_8h.html">Type.h</a></div></div>
<div class="ttc" id="aErlangGCPrinter_8cpp_html_a74b474c0616ab55c1d9487f11fd31d26"><div class="ttname"><a href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a></div><div class="ttdeci">static GCMetadataPrinterRegistry::Add&lt; ErlangGCPrinter &gt; X(&quot;erlang&quot;, &quot;erlang-compatible garbage collector&quot;)</div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_aebdb2700a77d10ae6f0ce115e23d9f77"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#aebdb2700a77d10ae6f0ce115e23d9f77">llvm::PatternMatch::m_One</a></div><div class="ttdeci">cst_pred_ty&lt; is_one &gt; m_One()</div><div class="ttdoc">Match an integer 1 or a vector with all elements equal to 1.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00517">PatternMatch.h:517</a></div></div>
<div class="ttc" id="alib_2Target_2ARM_2README_8txt_html_ade8c6980e1babe1b309a9bcec7eefd2c"><div class="ttname"><a href="lib_2Target_2ARM_2README_8txt.html#ade8c6980e1babe1b309a9bcec7eefd2c">one</a></div><div class="ttdeci">the resulting code requires compare and branches when and if the revised code is with conditional branches instead of More there is a byte word extend before each where there should be only one</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2ARM_2README_8txt_source.html#l00401">README.txt:401</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a321b8e5bfbda0da1e621822399fe3960"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a321b8e5bfbda0da1e621822399fe3960">llvm::PatternMatch::m_NSWAdd</a></div><div class="ttdeci">OverflowingBinaryOp_match&lt; LHS, RHS, Instruction::Add, OverflowingBinaryOperator::NoSignedWrap &gt; m_NSWAdd(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01156">PatternMatch.h:1156</a></div></div>
<div class="ttc" id="aclassllvm_1_1APFloat_html_a82567bb6632fa71c7c727b9464368173"><div class="ttname"><a href="classllvm_1_1APFloat.html#a82567bb6632fa71c7c727b9464368173">llvm::APFloat::multiply</a></div><div class="ttdeci">opStatus multiply(const APFloat &amp;RHS, roundingMode RM)</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l01024">APFloat.h:1024</a></div></div>
<div class="ttc" id="aADT_2tmp_8txt_html_a07ed0bfaa124c15897944fe3eaa971ab"><div class="ttname"><a href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a></div><div class="ttdeci">Class for arbitrary precision integers APInt is a functional replacement for common case unsigned integer type like unsigned long or uint64_t</div><div class="ttdef"><b>Definition:</b> <a href="ADT_2tmp_8txt_source.html#l00001">tmp.txt:1</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_ad5e60756e331a97669d11b5c9d8691a2"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#ad5e60756e331a97669d11b5c9d8691a2">llvm::PatternMatch::m_Power2</a></div><div class="ttdeci">cst_pred_ty&lt; is_power2 &gt; m_Power2()</div><div class="ttdoc">Match an integer or vector power-of-2.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00544">PatternMatch.h:544</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a82e2ea7f0ab67e33e22b3a2a188feaba"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a82e2ea7f0ab67e33e22b3a2a188feaba">llvm::PatternMatch::m_Xor</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::Xor &gt; m_Xor(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01105">PatternMatch.h:1105</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_acfae9bdee6027ffa8ffe244cc22e3a76"><div class="ttname"><a href="classllvm_1_1APInt.html#acfae9bdee6027ffa8ffe244cc22e3a76">llvm::APInt::isSubsetOf</a></div><div class="ttdeci">bool isSubsetOf(const APInt &amp;RHS) const</div><div class="ttdoc">This operation checks that all bits set in this APInt are also set in RHS.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01235">APInt.h:1235</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_af616ac59efde7c61f6e8ff8bd80d2027"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#af616ac59efde7c61f6e8ff8bd80d2027">llvm::InstCombinerImpl::visitFNeg</a></div><div class="ttdeci">Instruction * visitFNeg(UnaryOperator &amp;I)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAddSub_8cpp_source.html#l02465">InstCombineAddSub.cpp:2465</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a3029ab4957ff8bf58c4cd361cb243c47"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a3029ab4957ff8bf58c4cd361cb243c47">llvm::PatternMatch::m_FPTrunc</a></div><div class="ttdeci">CastClass_match&lt; OpTy, Instruction::FPTrunc &gt; m_FPTrunc(const OpTy &amp;Op)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01682">PatternMatch.h:1682</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a92ad549d62e33f9f5b8c3bc4b510b365"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a92ad549d62e33f9f5b8c3bc4b510b365">llvm::PatternMatch::m_ZExtOrSelf</a></div><div class="ttdeci">match_combine_or&lt; CastClass_match&lt; OpTy, Instruction::ZExt &gt;, OpTy &gt; m_ZExtOrSelf(const OpTy &amp;Op)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01635">PatternMatch.h:1635</a></div></div>
<div class="ttc" id="aclassllvm_1_1APFloat_html"><div class="ttname"><a href="classllvm_1_1APFloat.html">llvm::APFloat</a></div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00744">APFloat.h:744</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_ae77be336e228cf9aa00709a8606dfb98"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#ae77be336e228cf9aa00709a8606dfb98">llvm::PatternMatch::m_Zero</a></div><div class="ttdeci">is_zero m_Zero()</div><div class="ttdoc">Match any null constant or a vector with all elements equal to 0.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00537">PatternMatch.h:537</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a1b0e3cdd7316497baa075ef6fc21d2d4"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a1b0e3cdd7316497baa075ef6fc21d2d4">llvm::PatternMatch::m_NUWAdd</a></div><div class="ttdeci">OverflowingBinaryOp_match&lt; LHS, RHS, Instruction::Add, OverflowingBinaryOperator::NoUnsignedWrap &gt; m_NUWAdd(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01189">PatternMatch.h:1189</a></div></div>
<div class="ttc" id="anamespacellvm_1_1MipsISD_html_a422daf9aa810935178671306b651d69ba88a797f57846adb2c382b3732b471913"><div class="ttname"><a href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba88a797f57846adb2c382b3732b471913">llvm::MipsISD::Ext</a></div><div class="ttdeci">@ Ext</div><div class="ttdef"><b>Definition:</b> <a href="MipsISelLowering_8h_source.html#l00159">MipsISelLowering.h:159</a></div></div>
<div class="ttc" id="aclassllvm_1_1Constant_html"><div class="ttname"><a href="classllvm_1_1Constant.html">llvm::Constant</a></div><div class="ttdoc">This is an important base class in LLVM.</div><div class="ttdef"><b>Definition:</b> <a href="Constant_8h_source.html#l00041">Constant.h:41</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_a0a89a6b25b8a92fb896a994a36b74241"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#a0a89a6b25b8a92fb896a994a36b74241">llvm::InstCombinerImpl::visitAdd</a></div><div class="ttdeci">Instruction * visitAdd(BinaryOperator &amp;I)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAddSub_8cpp_source.html#l01348">InstCombineAddSub.cpp:1348</a></div></div>
<div class="ttc" id="aclassllvm_1_1FastMathFlags_html_a39b529fcda9ee90b17a3e1fed732a22a"><div class="ttname"><a href="classllvm_1_1FastMathFlags.html#a39b529fcda9ee90b17a3e1fed732a22a">llvm::FastMathFlags::noInfs</a></div><div class="ttdeci">bool noInfs() const</div><div class="ttdef"><b>Definition:</b> <a href="FMF_8h_source.html#l00068">FMF.h:68</a></div></div>
<div class="ttc" id="aclassllvm_1_1UnaryOperator_html_a9f731708e681757d51c4dc2a004873c8"><div class="ttname"><a href="classllvm_1_1UnaryOperator.html#a9f731708e681757d51c4dc2a004873c8">llvm::UnaryOperator::CreateFNegFMF</a></div><div class="ttdeci">static UnaryOperator * CreateFNegFMF(Value *Op, Instruction *FMFSource, const Twine &amp;Name=&quot;&quot;, Instruction *InsertBefore=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00163">InstrTypes.h:163</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombiner_html_a25129446fbad8ac355a52944904a1ec6"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#a25129446fbad8ac355a52944904a1ec6">llvm::InstCombiner::AddOne</a></div><div class="ttdeci">static Constant * AddOne(Constant *C)</div><div class="ttdoc">Add one to a Constant.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombiner_8h_source.html#l00202">InstCombiner.h:202</a></div></div>
<div class="ttc" id="aclassllvm_1_1BinaryOperator_html_a3b9d9c1b6e4b743230c9c377c40a4247"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html#a3b9d9c1b6e4b743230c9c377c40a4247">llvm::BinaryOperator::CreateFMulFMF</a></div><div class="ttdeci">static BinaryOperator * CreateFMulFMF(Value *V1, Value *V2, Instruction *FMFSource, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00266">InstrTypes.h:266</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a100c666f9253331dd1d166a863248326"><div class="ttname"><a href="classllvm_1_1Instruction.html#a100c666f9253331dd1d166a863248326">llvm::Instruction::hasNoUnsignedWrap</a></div><div class="ttdeci">bool hasNoUnsignedWrap() const LLVM_READONLY</div><div class="ttdoc">Determine whether the no unsigned wrap flag is set.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00173">Instruction.cpp:173</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_a1347d52f024418efd43a77e0fcb57355"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#a1347d52f024418efd43a77e0fcb57355">llvm::InstCombinerImpl::canonicalizeCondSignextOfHighBitExtractToSignextHighBitExtract</a></div><div class="ttdeci">Instruction * canonicalizeCondSignextOfHighBitExtractToSignextHighBitExtract(BinaryOperator &amp;I)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAddSub_8cpp_source.html#l01172">InstCombineAddSub.cpp:1172</a></div></div>
<div class="ttc" id="aclassllvm_1_1GEPOperator_html_a57286aaebfc778a6c1215125ed8493ef"><div class="ttname"><a href="classllvm_1_1GEPOperator.html#a57286aaebfc778a6c1215125ed8493ef">llvm::GEPOperator::countNonConstantIndices</a></div><div class="ttdeci">unsigned countNonConstantIndices() const</div><div class="ttdef"><b>Definition:</b> <a href="Operator_8h_source.html#l00475">Operator.h:475</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_aae3b959a0a2981340fd03c29f528f2f0"><div class="ttname"><a href="classllvm_1_1APInt.html#aae3b959a0a2981340fd03c29f528f2f0">llvm::APInt::logBase2</a></div><div class="ttdeci">unsigned logBase2() const</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01700">APInt.h:1700</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a42569041ddafba7d40243e126af07f42"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a42569041ddafba7d40243e126af07f42">llvm::PatternMatch::m_Or</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::Or &gt; m_Or(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01099">PatternMatch.h:1099</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_aaea0d5ebb8b57ddde2095f80e2e94bb2"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#aaea0d5ebb8b57ddde2095f80e2e94bb2">llvm::PatternMatch::m_AllOnes</a></div><div class="ttdeci">cst_pred_ty&lt; is_all_ones &gt; m_AllOnes()</div><div class="ttdoc">Match an integer or vector with all bits set.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00453">PatternMatch.h:453</a></div></div>
<div class="ttc" id="aAMDGPUInstructionSelector_8cpp_html_a6dee2d9e1e2a288de903228075ac71de"><div class="ttname"><a href="AMDGPUInstructionSelector_8cpp.html#a6dee2d9e1e2a288de903228075ac71de">isConstant</a></div><div class="ttdeci">static bool isConstant(const MachineInstr &amp;MI)</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUInstructionSelector_8cpp_source.html#l02605">AMDGPUInstructionSelector.cpp:2605</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_aec0ccdbde0581b3aae7f001634a34d8e"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#aec0ccdbde0581b3aae7f001634a34d8e">llvm::PatternMatch::m_ImmConstant</a></div><div class="ttdeci">match_combine_and&lt; class_match&lt; Constant &gt;, match_unless&lt; constantexpr_match &gt; &gt; m_ImmConstant()</div><div class="ttdoc">Match an arbitrary immediate Constant and ignore it.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00751">PatternMatch.h:751</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00058">MD5.cpp:58</a></div></div>
<div class="ttc" id="alib_2Target_2README_8txt_html_a02def7c594e9f19ff247ed0bf33d1c30"><div class="ttname"><a href="lib_2Target_2README_8txt.html#a02def7c594e9f19ff247ed0bf33d1c30">size</a></div><div class="ttdeci">i&lt; reg-&gt; size</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2README_8txt_source.html#l00166">README.txt:166</a></div></div>
<div class="ttc" id="astructllvm_1_1SimplifyQuery_html_a4776fa0f5a726bd5a8a444981c283c69"><div class="ttname"><a href="structllvm_1_1SimplifyQuery.html#a4776fa0f5a726bd5a8a444981c283c69">llvm::SimplifyQuery::DT</a></div><div class="ttdeci">const DominatorTree * DT</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8h_source.html#l00096">InstructionSimplify.h:96</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a427435d4da769ae680a8e77ef89520aa"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">llvm::PatternMatch::m_And</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::And &gt; m_And(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01093">PatternMatch.h:1093</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_ae8f5bf5cc06f696b52c709677df00fbf"><div class="ttname"><a href="classllvm_1_1Instruction.html#ae8f5bf5cc06f696b52c709677df00fbf">llvm::Instruction::setDebugLoc</a></div><div class="ttdeci">void setDebugLoc(DebugLoc Loc)</div><div class="ttdoc">Set the debug location information for this instruction.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00355">Instruction.h:355</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a42df6a41563b50a3fd1872230ed0b5ec"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a42df6a41563b50a3fd1872230ed0b5ec">llvm::PatternMatch::m_SRem</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::SRem &gt; m_SRem(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01081">PatternMatch.h:1081</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_aa9bbead3db102aa9d3eaeb47e695db1a"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#aa9bbead3db102aa9d3eaeb47e695db1a">llvm::InstCombinerImpl::SimplifyAddWithRemainder</a></div><div class="ttdeci">Value * SimplifyAddWithRemainder(BinaryOperator &amp;I)</div><div class="ttdoc">Tries to simplify add operations using the definition of remainder.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAddSub_8cpp_source.html#l01066">InstCombineAddSub.cpp:1066</a></div></div>
<div class="ttc" id="anamespacellvm_html_aa1f8f0633edd8b9a1c5ec15bb9fc5640"><div class="ttname"><a href="namespacellvm.html#aa1f8f0633edd8b9a1c5ec15bb9fc5640">llvm::computeKnownBits</a></div><div class="ttdeci">void computeKnownBits(const Value *V, KnownBits &amp;Known, const DataLayout &amp;DL, unsigned Depth=0, AssumptionCache *AC=nullptr, const Instruction *CxtI=nullptr, const DominatorTree *DT=nullptr, OptimizationRemarkEmitter *ORE=nullptr, bool UseInstrInfo=true)</div><div class="ttdoc">Determine which bits of V are known to be either zero or one and return them in the KnownZero/KnownOn...</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l00186">ValueTracking.cpp:186</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_afa72f4f7fc2ee2bf6cd3b64bd07c37e8"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#afa72f4f7fc2ee2bf6cd3b64bd07c37e8">llvm::InstCombinerImpl::visitFSub</a></div><div class="ttdeci">Instruction * visitFSub(BinaryOperator &amp;I)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAddSub_8cpp_source.html#l02541">InstCombineAddSub.cpp:2541</a></div></div>
<div class="ttc" id="aSILowerControlFlow_8cpp_html_a4868c5d81c5ccc98c47aeab6244346a0"><div class="ttname"><a href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a></div><div class="ttdeci">assert(ImpDefSCC.getReg()==AMDGPU::SCC &amp;&amp;ImpDefSCC.isDef())</div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_ac3ed5602889a22db44a16e1b97fac5b8"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#ac3ed5602889a22db44a16e1b97fac5b8">llvm::PatternMatch::m_Sub</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::Sub &gt; m_Sub(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00991">PatternMatch.h:991</a></div></div>
<div class="ttc" id="anamespacestd_html_ab8424022895aee3e366fb9a32f2883cb"><div class="ttname"><a href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a></div><div class="ttdeci">void swap(llvm::BitVector &amp;LHS, llvm::BitVector &amp;RHS)</div><div class="ttdoc">Implement std::swap in terms of BitVector swap.</div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00853">BitVector.h:853</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a9a167f91db810097d281b1ed627f4575"><div class="ttname"><a href="classllvm_1_1Instruction.html#a9a167f91db810097d281b1ed627f4575">llvm::Instruction::getFastMathFlags</a></div><div class="ttdeci">FastMathFlags getFastMathFlags() const LLVM_READONLY</div><div class="ttdoc">Convenience function for getting all the fast-math flags, which must be an operator which supports th...</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00339">Instruction.cpp:339</a></div></div>
<div class="ttc" id="aclassllvm_1_1SelectInst_html"><div class="ttname"><a href="classllvm_1_1SelectInst.html">llvm::SelectInst</a></div><div class="ttdoc">This class represents the LLVM 'select' instruction.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01746">Instructions.h:1746</a></div></div>
<div class="ttc" id="astructllvm_1_1SimplifyQuery_html_aaf05c1194f5c7869a00434c13c46c228"><div class="ttname"><a href="structllvm_1_1SimplifyQuery.html#aaf05c1194f5c7869a00434c13c46c228">llvm::SimplifyQuery::getWithInstruction</a></div><div class="ttdeci">SimplifyQuery getWithInstruction(Instruction *I) const</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8h_source.html#l00120">InstructionSimplify.h:120</a></div></div>
<div class="ttc" id="anamespacellvm_1_1WinEH_html_a1c8d8103d6b914c2ade85873cb97f6d9a7a86131338bf955e0a56311f264aa6aa"><div class="ttname"><a href="namespacellvm_1_1WinEH.html#a1c8d8103d6b914c2ade85873cb97f6d9a7a86131338bf955e0a56311f264aa6aa">llvm::WinEH::EncodingType::CE</a></div><div class="ttdeci">@ CE</div><div class="ttdoc">Windows NT (Windows on ARM)</div></div>
<div class="ttc" id="anamespacellvm_html_a5e0af1b16cab9e0efc63a6ce9de2b9cc"><div class="ttname"><a href="namespacellvm.html#a5e0af1b16cab9e0efc63a6ce9de2b9cc">llvm::simplifyAddInst</a></div><div class="ttdeci">Value * simplifyAddInst(Value *LHS, Value *RHS, bool IsNSW, bool IsNUW, const SimplifyQuery &amp;Q)</div><div class="ttdoc">Given operands for an Add, fold the result or return null.</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8cpp_source.html#l00698">InstructionSimplify.cpp:698</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_aadd209ba7e1bfa8113a609e09a7fe62f"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#aadd209ba7e1bfa8113a609e09a7fe62f">llvm::PatternMatch::m_Constant</a></div><div class="ttdeci">class_match&lt; Constant &gt; m_Constant()</div><div class="ttdoc">Match an arbitrary Constant and ignore it.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00144">PatternMatch.h:144</a></div></div>
<div class="ttc" id="aclassllvm_1_1GEPOperator_html"><div class="ttname"><a href="classllvm_1_1GEPOperator.html">llvm::GEPOperator</a></div><div class="ttdef"><b>Definition:</b> <a href="Operator_8h_source.html#l00378">Operator.h:378</a></div></div>
<div class="ttc" id="aAssumeBundleBuilder_8cpp_html_afb136e0532bcaed86521b462e6538d62"><div class="ttname"><a href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a></div><div class="ttdeci">assume Assume Builder</div><div class="ttdef"><b>Definition:</b> <a href="AssumeBundleBuilder_8cpp_source.html#l00651">AssumeBundleBuilder.cpp:651</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a24bca8838396aa81b87de8e7ac774b19"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">llvm::PatternMatch::m_Value</a></div><div class="ttdeci">class_match&lt; Value &gt; m_Value()</div><div class="ttdoc">Match an arbitrary value and ignore it.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00076">PatternMatch.h:76</a></div></div>
<div class="ttc" id="aclassllvm_1_1ZExtInst_html"><div class="ttname"><a href="classllvm_1_1ZExtInst.html">llvm::ZExtInst</a></div><div class="ttdoc">This class represents zero extension of integer types.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l04852">Instructions.h:4852</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html"><div class="ttname"><a href="classllvm_1_1APInt.html">llvm::APInt</a></div><div class="ttdoc">Class for arbitrary precision integers.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00075">APInt.h:75</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_aaab494a433fbb23bc68393ee8bcfc5ac"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#aaab494a433fbb23bc68393ee8bcfc5ac">llvm::PatternMatch::m_SExt</a></div><div class="ttdeci">CastClass_match&lt; OpTy, Instruction::SExt &gt; m_SExt(const OpTy &amp;Op)</div><div class="ttdoc">Matches SExt.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01623">PatternMatch.h:1623</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a3acbd0be97863e3e03e3b85641254018"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a3acbd0be97863e3e03e3b85641254018">llvm::PatternMatch::m_SpecificInt</a></div><div class="ttdeci">specific_intval&lt; false &gt; m_SpecificInt(APInt V)</div><div class="ttdoc">Match a specific integer value or vector with all elements equal to the value.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00854">PatternMatch.h:854</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a575c2299c6f145ba3a12efa20829db43"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a575c2299c6f145ba3a12efa20829db43">llvm::PatternMatch::m_CombineAnd</a></div><div class="ttdeci">match_combine_and&lt; LTy, RTy &gt; m_CombineAnd(const LTy &amp;L, const RTy &amp;R)</div><div class="ttdoc">Combine two pattern matchers matching L &amp;&amp; R.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00224">PatternMatch.h:224</a></div></div>
<div class="ttc" id="aInstCombineAddSub_8cpp_html_a679b779589e14def262bdfa4f3f6c5d9"><div class="ttname"><a href="InstCombineAddSub_8cpp.html#a679b779589e14def262bdfa4f3f6c5d9">foldBoxMultiply</a></div><div class="ttdeci">static Instruction * foldBoxMultiply(BinaryOperator &amp;I)</div><div class="ttdoc">Reduce a sequence of masked half-width multiplies to a single multiply.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAddSub_8cpp_source.html#l01311">InstCombineAddSub.cpp:1311</a></div></div>
<div class="ttc" id="aclassllvm_1_1BinaryOperator_html"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html">llvm::BinaryOperator</a></div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00187">InstrTypes.h:187</a></div></div>
<div class="ttc" id="aX86PartialReduction_8cpp_html_ae0f503db91504a3f3440ab81260e4134"><div class="ttname"><a href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Mul</a></div><div class="ttdeci">BinaryOperator * Mul</div><div class="ttdef"><b>Definition:</b> <a href="X86PartialReduction_8cpp_source.html#l00070">X86PartialReduction.cpp:70</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_abb22519fa3bf66d9e0bc6d1a733a5821"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#abb22519fa3bf66d9e0bc6d1a733a5821">llvm::PatternMatch::m_SpecificInt_ICMP</a></div><div class="ttdeci">cst_pred_ty&lt; icmp_pred_with_threshold &gt; m_SpecificInt_ICMP(ICmpInst::Predicate Predicate, const APInt &amp;Threshold)</div><div class="ttdoc">Match an integer or vector with every element comparing 'pred' (eg/ne/...) to Threshold.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00598">PatternMatch.h:598</a></div></div>
<div class="ttc" id="aBasicBlockSections_8cpp_html_a5fd0741d696f28faf65b33f6c6af8fda"><div class="ttname"><a href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a></div><div class="ttdeci">SmallVector&lt; MachineOperand, 4 &gt; Cond</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlockSections_8cpp_source.html#l00137">BasicBlockSections.cpp:137</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a6393a2d4fe7e10b28a0dcc35f881567b"><div class="ttname"><a href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const</div><div class="ttdoc">All values are typed, get the type of this value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00255">Value.h:255</a></div></div>
<div class="ttc" id="astructllvm_1_1MinMax_html"><div class="ttname"><a href="structllvm_1_1MinMax.html">llvm::MinMax</a></div><div class="ttdef"><b>Definition:</b> <a href="AssumeBundleQueries_8h_source.html#l00071">AssumeBundleQueries.h:71</a></div></div>
<div class="ttc" id="aAArch64SLSHardening_8cpp_html_ad467c4ab9119043f9b7750ab986be61a"><div class="ttname"><a href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a></div><div class="ttdeci">MachineBasicBlock MachineBasicBlock::iterator DebugLoc DL</div><div class="ttdef"><b>Definition:</b> <a href="AArch64SLSHardening_8cpp_source.html#l00076">AArch64SLSHardening.cpp:76</a></div></div>
<div class="ttc" id="aInstCombineAddSub_8cpp_html_a4b7936703dea8c68a74e4e155a02d50b"><div class="ttname"><a href="InstCombineAddSub_8cpp.html#a4b7936703dea8c68a74e4e155a02d50b">foldFNegIntoConstant</a></div><div class="ttdeci">static Instruction * foldFNegIntoConstant(Instruction &amp;I, const DataLayout &amp;DL)</div><div class="ttdoc">This eliminates floating-point negation in either 'fneg(X)' or 'fsub(-0.0, X)' form by combining into...</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAddSub_8cpp_source.html#l02406">InstCombineAddSub.cpp:2406</a></div></div>
<div class="ttc" id="aInstCombineAddSub_8cpp_html_a4dc5d808051c69f75bd70c56f13100ae"><div class="ttname"><a href="InstCombineAddSub_8cpp.html#a4dc5d808051c69f75bd70c56f13100ae">foldNoWrapAdd</a></div><div class="ttdeci">static Instruction * foldNoWrapAdd(BinaryOperator &amp;Add, InstCombiner::BuilderTy &amp;Builder)</div><div class="ttdoc">Wrapping flags may allow combining constants separated by an extend.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAddSub_8cpp_source.html#l00809">InstCombineAddSub.cpp:809</a></div></div>
<div class="ttc" id="alib_2Target_2ARM_2README_8txt_html_a1b45f45820a60c09244a87eb59824aec"><div class="ttname"><a href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a></div><div class="ttdeci">add sub stmia L5 ldr r0 bl L_printf $stub Instead of a and a wouldn t it be better to do three moves *Return an aggregate type is even return S</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2ARM_2README_8txt_source.html#l00210">README.txt:210</a></div></div>
<div class="ttc" id="aInstCombineAddSub_8cpp_html_a0a1310e81cd1bccba5e81fe929fb7c87"><div class="ttname"><a href="InstCombineAddSub_8cpp.html#a0a1310e81cd1bccba5e81fe929fb7c87">MatchMul</a></div><div class="ttdeci">static bool MatchMul(Value *E, Value *&amp;Op, APInt &amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAddSub_8cpp_source.html#l00994">InstCombineAddSub.cpp:994</a></div></div>
<div class="ttc" id="aInstCombineAddSub_8cpp_html_aa93d4c077fefadc17387144a62fa3a4a"><div class="ttname"><a href="InstCombineAddSub_8cpp.html#aa93d4c077fefadc17387144a62fa3a4a">factorizeMathWithShlOps</a></div><div class="ttdeci">static Instruction * factorizeMathWithShlOps(BinaryOperator &amp;I, InstCombiner::BuilderTy &amp;Builder)</div><div class="ttdoc">This is a specialization of a more general transform from foldUsingDistributiveLaws.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAddSub_8cpp_source.html#l01275">InstCombineAddSub.cpp:1275</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_adb5c319f5905c1d3ca9eb5df546388c5"><div class="ttname"><a href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">llvm::Value::getName</a></div><div class="ttdeci">StringRef getName() const</div><div class="ttdoc">Return a constant reference to the value's name.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00308">Value.cpp:308</a></div></div>
<div class="ttc" id="anamespacellvm_1_1Intrinsic_html_aefa39f6b622360ce4e947feb9f671b73"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#aefa39f6b622360ce4e947feb9f671b73">llvm::Intrinsic::getDeclaration</a></div><div class="ttdeci">Function * getDeclaration(Module *M, ID id, ArrayRef&lt; Type * &gt; Tys=std::nullopt)</div><div class="ttdoc">Create or insert an LLVM Function declaration for an intrinsic, and return it.</div><div class="ttdef"><b>Definition:</b> <a href="Function_8cpp_source.html#l01502">Function.cpp:1502</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_a884253dce055eb76863ec81c061aef33"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#a884253dce055eb76863ec81c061aef33">llvm::InstCombinerImpl::OptimizePointerDifference</a></div><div class="ttdeci">Value * OptimizePointerDifference(Value *LHS, Value *RHS, Type *Ty, bool isNUW)</div><div class="ttdoc">Optimize pointer differences into the same array into a size.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAddSub_8cpp_source.html#l01805">InstCombineAddSub.cpp:1805</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a966eb231e7d4e572874d2cb49b18faea"><div class="ttname"><a href="classllvm_1_1Value.html#a966eb231e7d4e572874d2cb49b18faea">llvm::Value::stripPointerCasts</a></div><div class="ttdeci">const Value * stripPointerCasts() const</div><div class="ttdoc">Strip off pointer casts, all-zero GEPs and address space casts.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00685">Value.cpp:685</a></div></div>
<div class="ttc" id="anamespacellvm_html_a6e06e93488a2f32aeb56f86797a78c33"><div class="ttname"><a href="namespacellvm.html#a6e06e93488a2f32aeb56f86797a78c33">llvm::simplifyFNegInst</a></div><div class="ttdeci">Value * simplifyFNegInst(Value *Op, FastMathFlags FMF, const SimplifyQuery &amp;Q)</div><div class="ttdoc">Given operand for an FNeg, fold the result or return null.</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8cpp_source.html#l05307">InstructionSimplify.cpp:5307</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a2997340992a508357b480467a6901c70"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a2997340992a508357b480467a6901c70">llvm::PatternMatch::m_FPExt</a></div><div class="ttdeci">CastClass_match&lt; OpTy, Instruction::FPExt &gt; m_FPExt(const OpTy &amp;Op)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01687">PatternMatch.h:1687</a></div></div>
<div class="ttc" id="anamespacellvm_1_1tgtok_html_abbc5259d649363016626e2529fabe0c5a3a7597ca475c0fcf10856ef36351d1ac"><div class="ttname"><a href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a3a7597ca475c0fcf10856ef36351d1ac">llvm::tgtok::IntVal</a></div><div class="ttdeci">@ IntVal</div><div class="ttdef"><b>Definition:</b> <a href="TGLexer_8h_source.html#l00065">TGLexer.h:65</a></div></div>
<div class="ttc" id="anamespacellvm_1_1APIntOps_html_a071b3581888d9e3b0b05cec58f152a91"><div class="ttname"><a href="namespacellvm_1_1APIntOps.html#a071b3581888d9e3b0b05cec58f152a91">llvm::APIntOps::umax</a></div><div class="ttdeci">const APInt &amp; umax(const APInt &amp;A, const APInt &amp;B)</div><div class="ttdoc">Determine the larger of two APInts considered to be unsigned.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l02190">APInt.h:2190</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a5ca8aa62fa8b3fe5bc0e8fbe5d8b8b7a"><div class="ttname"><a href="classllvm_1_1Instruction.html#a5ca8aa62fa8b3fe5bc0e8fbe5d8b8b7a">llvm::Instruction::setFastMathFlags</a></div><div class="ttdeci">void setFastMathFlags(FastMathFlags FMF)</div><div class="ttdoc">Convenience function for setting multiple fast-math flags on this instruction, which must be an opera...</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00289">Instruction.cpp:289</a></div></div>
<div class="ttc" id="aConstant_8h_html"><div class="ttname"><a href="Constant_8h.html">Constant.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a0702b4620c670aea616d41c7871dcec6"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a0702b4620c670aea616d41c7871dcec6">llvm::PatternMatch::m_SExtOrSelf</a></div><div class="ttdeci">match_combine_or&lt; CastClass_match&lt; OpTy, Instruction::SExt &gt;, OpTy &gt; m_SExtOrSelf(const OpTy &amp;Op)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01641">PatternMatch.h:1641</a></div></div>
<div class="ttc" id="aclassllvm_1_1Constant_html_aa6574d526b3e38a28f688a7bb4325c2c"><div class="ttname"><a href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">llvm::Constant::getNullValue</a></div><div class="ttdeci">static Constant * getNullValue(Type *Ty)</div><div class="ttdoc">Constructor to create a '0' constant of arbitrary type.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00356">Constants.cpp:356</a></div></div>
<div class="ttc" id="astructllvm_1_1KnownBits_html"><div class="ttname"><a href="structllvm_1_1KnownBits.html">llvm::KnownBits</a></div><div class="ttdef"><b>Definition:</b> <a href="KnownBits_8h_source.html#l00023">KnownBits.h:23</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_abd9323a37d0beb24f9975b4d36994b24"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#abd9323a37d0beb24f9975b4d36994b24">llvm::PatternMatch::m_UDiv</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::UDiv &gt; m_UDiv(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01057">PatternMatch.h:1057</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a1f04e382556a817950fd0390aeaf9b0e"><div class="ttname"><a href="classllvm_1_1APInt.html#a1f04e382556a817950fd0390aeaf9b0e">llvm::APInt::isMinSignedValue</a></div><div class="ttdeci">bool isMinSignedValue() const</div><div class="ttdoc">Determine if this is the smallest signed value.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00415">APInt.h:415</a></div></div>
<div class="ttc" id="aclassllvm_1_1BinaryOperator_html_a6e018768c6bc2ac78b69e88436de5cc4"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html#a6e018768c6bc2ac78b69e88436de5cc4">llvm::BinaryOperator::CreateFAddFMF</a></div><div class="ttdeci">static BinaryOperator * CreateFAddFMF(Value *V1, Value *V2, Instruction *FMFSource, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00256">InstrTypes.h:256</a></div></div>
<div class="ttc" id="astructllvm_1_1SimplifyQuery_html_a30647c42c8c40890c577ba5b4ab16468"><div class="ttname"><a href="structllvm_1_1SimplifyQuery.html#a30647c42c8c40890c577ba5b4ab16468">llvm::SimplifyQuery::CxtI</a></div><div class="ttdeci">const Instruction * CxtI</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8h_source.html#l00098">InstructionSimplify.h:98</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_1_1SendMsg_html_a8594419a4ddfad2c9a79279c490e466d"><div class="ttname"><a href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">llvm::AMDGPU::SendMsg::Op</a></div><div class="ttdeci">Op</div><div class="ttdef"><b>Definition:</b> <a href="SIDefines_8h_source.html#l00357">SIDefines.h:357</a></div></div>
<div class="ttc" id="aclassllvm_1_1Negator_html_a3b8b2ad75675790e85bd1c2a28545457"><div class="ttname"><a href="classllvm_1_1Negator.html#a3b8b2ad75675790e85bd1c2a28545457">llvm::Negator::Negate</a></div><div class="ttdeci">static Value * Negate(bool LHSIsZero, Value *Root, InstCombinerImpl &amp;IC)</div><div class="ttdoc">Attempt to negate Root.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineNegator_8cpp_source.html#l00528">InstCombineNegator.cpp:528</a></div></div>
<div class="ttc" id="aclassllvm_1_1GEPOperator_html_a3783a9756e9b9a1fe124622d27522713"><div class="ttname"><a href="classllvm_1_1GEPOperator.html#a3783a9756e9b9a1fe124622d27522713">llvm::GEPOperator::isInBounds</a></div><div class="ttdeci">bool isInBounds() const</div><div class="ttdoc">Test whether this is an inbounds GEP, as defined by LangRef.html.</div><div class="ttdef"><b>Definition:</b> <a href="Operator_8h_source.html#l00395">Operator.h:395</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_ae6f1c15034bc5515033874630a8ecce6"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#ae6f1c15034bc5515033874630a8ecce6">llvm::ConstantExpr::getAdd</a></div><div class="ttdeci">static Constant * getAdd(Constant *C1, Constant *C2, bool HasNUW=false, bool HasNSW=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02657">Constants.cpp:2657</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a34ee40bb2f4f5ece47ef19e5f1f57e3c"><div class="ttname"><a href="classllvm_1_1Type.html#a34ee40bb2f4f5ece47ef19e5f1f57e3c">llvm::Type::isIntOrIntVectorTy</a></div><div class="ttdeci">bool isIntOrIntVectorTy() const</div><div class="ttdoc">Return true if this is an integer type or a vector of integer types.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00228">Type.h:228</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantFP_html_a5eb8f7a5d3cfdd127ad9db2e425e14eb"><div class="ttname"><a href="classllvm_1_1ConstantFP.html#a5eb8f7a5d3cfdd127ad9db2e425e14eb">llvm::ConstantFP::get</a></div><div class="ttdeci">static Constant * get(Type *Ty, double V)</div><div class="ttdoc">This returns a ConstantFP, or a vector containing a splat of a ConstantFP, for the specified value in...</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00934">Constants.cpp:934</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a1b6b4785fa27be394cf040e543d9fe7c"><div class="ttname"><a href="classllvm_1_1APInt.html#a1b6b4785fa27be394cf040e543d9fe7c">llvm::APInt::isNegatedPowerOf2</a></div><div class="ttdeci">bool isNegatedPowerOf2() const</div><div class="ttdoc">Check if this APInt's negated value is a power of two greater than zero.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00441">APInt.h:441</a></div></div>
<div class="ttc" id="aCasting_8h_html"><div class="ttname"><a href="Casting_8h.html">Casting.h</a></div></div>
<div class="ttc" id="astructllvm_1_1fltSemantics_html"><div class="ttname"><a href="structllvm_1_1fltSemantics.html">llvm::fltSemantics</a></div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8cpp_source.html#l00097">APFloat.cpp:97</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a8c0f3bd24cad8bf9994d62b2d8cff6a0"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a8c0f3bd24cad8bf9994d62b2d8cff6a0">llvm::PatternMatch::m_SignMask</a></div><div class="ttdeci">cst_pred_ty&lt; is_sign_mask &gt; m_SignMask()</div><div class="ttdoc">Match an integer or vector with only the sign bit(s) set.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00576">PatternMatch.h:576</a></div></div>
<div class="ttc" id="anamespacellvm_html_abee0df5f7f703bb4462aba260ba0a60f"><div class="ttname"><a href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">llvm::BitWidth</a></div><div class="ttdeci">constexpr unsigned BitWidth</div><div class="ttdef"><b>Definition:</b> <a href="BitmaskEnum_8h_source.html#l00147">BitmaskEnum.h:147</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_ac155d7c568fc1aba25723e77b6888908"><div class="ttname"><a href="classllvm_1_1APInt.html#ac155d7c568fc1aba25723e77b6888908">llvm::APInt::smul_ov</a></div><div class="ttdeci">APInt smul_ov(const APInt &amp;RHS, bool &amp;Overflow) const</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8cpp_source.html#l01958">APInt.cpp:1958</a></div></div>
<div class="ttc" id="aInstCombineAddSub_8cpp_html_a8b1f18c3a2433393b6a48cffa8651773"><div class="ttname"><a href="InstCombineAddSub_8cpp.html#a8b1f18c3a2433393b6a48cffa8651773">MulWillOverflow</a></div><div class="ttdeci">static bool MulWillOverflow(APInt &amp;C0, APInt &amp;C1, bool IsSigned)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAddSub_8cpp_source.html#l01055">InstCombineAddSub.cpp:1055</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a6f1d5427c61a0f0159f6e85f41944c5c"><div class="ttname"><a href="classllvm_1_1APInt.html#a6f1d5427c61a0f0159f6e85f41944c5c">llvm::APInt::exactLogBase2</a></div><div class="ttdeci">int32_t exactLogBase2() const</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01722">APInt.h:1722</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ARCCC_html_a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4"><div class="ttname"><a href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">llvm::ARCCC::Z</a></div><div class="ttdeci">@ Z</div><div class="ttdef"><b>Definition:</b> <a href="ARCInfo_8h_source.html#l00041">ARCInfo.h:41</a></div></div>
<div class="ttc" id="anamespacellvm_html_af14335020a68db7b9f722810e4a05180a421c6b20238e6e6585270538188f15b9"><div class="ttname"><a href="namespacellvm.html#af14335020a68db7b9f722810e4a05180a421c6b20238e6e6585270538188f15b9">llvm::fltNanEncoding::AllOnes</a></div><div class="ttdeci">@ AllOnes</div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a8f3259c7db0ce698876fe79f45b80a32"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a8f3259c7db0ce698876fe79f45b80a32">llvm::PatternMatch::m_c_Mul</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::Mul, true &gt; m_c_Mul(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdoc">Matches a Mul with LHS and RHS in either order.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l02255">PatternMatch.h:2255</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a874d53817a4923de8e58af6b278c09b0"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a874d53817a4923de8e58af6b278c09b0">llvm::PatternMatch::m_ZeroInt</a></div><div class="ttdeci">cst_pred_ty&lt; is_zero_int &gt; m_ZeroInt()</div><div class="ttdoc">Match an integer 0 or a vector with all elements equal to 0.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00524">PatternMatch.h:524</a></div></div>
<div class="ttc" id="anamespacellvm_html_a0434306df3aa5ec48fcf19d0958d7c01"><div class="ttname"><a href="namespacellvm.html#a0434306df3aa5ec48fcf19d0958d7c01">llvm::getInverseMinMaxIntrinsic</a></div><div class="ttdeci">Intrinsic::ID getInverseMinMaxIntrinsic(Intrinsic::ID MinMaxID)</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l06614">ValueTracking.cpp:6614</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a3ffbacd388121d5e3ba1c4360b7449d0"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a3ffbacd388121d5e3ba1c4360b7449d0">llvm::PatternMatch::m_PtrToInt</a></div><div class="ttdeci">CastClass_match&lt; OpTy, Instruction::PtrToInt &gt; m_PtrToInt(const OpTy &amp;Op)</div><div class="ttdoc">Matches PtrToInt.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01599">PatternMatch.h:1599</a></div></div>
<div class="ttc" id="anamespacellvm_1_1MCID_html_ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec"><div class="ttname"><a href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec">llvm::MCID::Add</a></div><div class="ttdeci">@ Add</div><div class="ttdef"><b>Definition:</b> <a href="MCInstrDesc_8h_source.html#l00186">MCInstrDesc.h:186</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_a606601489498c1ba41f25e77eb2dd0cf"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#a606601489498c1ba41f25e77eb2dd0cf">llvm::InstCombinerImpl::visitSub</a></div><div class="ttdeci">Instruction * visitSub(BinaryOperator &amp;I)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAddSub_8cpp_source.html#l01927">InstCombineAddSub.cpp:1927</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a8f877403433892e14ff0c692cbe9efdf"><div class="ttname"><a href="classllvm_1_1APInt.html#a8f877403433892e14ff0c692cbe9efdf">llvm::APInt::getSignedMinValue</a></div><div class="ttdeci">static APInt getSignedMinValue(unsigned numBits)</div><div class="ttdoc">Gets minimum signed value of APInt for a specific bit width.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00199">APInt.h:199</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a5cd1934b6c8ddec3a2d161ce710d59bc"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a5cd1934b6c8ddec3a2d161ce710d59bc">llvm::PatternMatch::m_c_Xor</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::Xor, true &gt; m_c_Xor(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdoc">Matches an Xor with LHS and RHS in either order.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l02276">PatternMatch.h:2276</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_aca8fce65eb69a82aa10a635e2e79877a"><div class="ttname"><a href="classllvm_1_1APInt.html#aca8fce65eb69a82aa10a635e2e79877a">llvm::APInt::sext</a></div><div class="ttdeci">APInt sext(unsigned width) const</div><div class="ttdoc">Sign extend to a new width.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8cpp_source.html#l00946">APInt.cpp:946</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_ab9370b798ae530641518075b0832723a"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#ab9370b798ae530641518075b0832723a">llvm::PatternMatch::m_AnyZeroFP</a></div><div class="ttdeci">cstfp_pred_ty&lt; is_any_zero_fp &gt; m_AnyZeroFP()</div><div class="ttdoc">Match a floating-point negative zero or positive zero.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00664">PatternMatch.h:664</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_abd40223a6569b56992c2ab4f2ffc0c2e"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#abd40223a6569b56992c2ab4f2ffc0c2e">llvm::PatternMatch::m_NUWSub</a></div><div class="ttdeci">OverflowingBinaryOp_match&lt; LHS, RHS, Instruction::Sub, OverflowingBinaryOperator::NoUnsignedWrap &gt; m_NUWSub(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01197">PatternMatch.h:1197</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a2ff0f084844b189a858647d637d47eba"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">llvm::PatternMatch::m_Not</a></div><div class="ttdeci">BinaryOp_match&lt; cst_pred_ty&lt; is_all_ones &gt;, ValTy, Instruction::Xor, true &gt; m_Not(const ValTy &amp;V)</div><div class="ttdoc">Matches a 'Not' as 'xor V, -1' or 'xor -1, V'.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l02302">PatternMatch.h:2302</a></div></div>
<div class="ttc" id="anamespacellvm_html_ae23e16c67aeaf23c68bf86fe04df42ee"><div class="ttname"><a href="namespacellvm.html#ae23e16c67aeaf23c68bf86fe04df42ee">llvm::CannotBeNegativeZero</a></div><div class="ttdeci">bool CannotBeNegativeZero(const Value *V, const TargetLibraryInfo *TLI, unsigned Depth=0)</div><div class="ttdoc">Return true if we can prove that the specified FP value is never equal to -0.0.</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l03518">ValueTracking.cpp:3518</a></div></div>
<div class="ttc" id="astructllvm_1_1APFloatBase_html_a22ed74f1ed33c4d33f524a650ea536a6"><div class="ttname"><a href="structllvm_1_1APFloatBase.html#a22ed74f1ed33c4d33f524a650ea536a6">llvm::APFloatBase::rmNearestTiesToEven</a></div><div class="ttdeci">static constexpr roundingMode rmNearestTiesToEven</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00217">APFloat.h:217</a></div></div>
<div class="ttc" id="anamespacellvm_html_aac36edd0f1ce976f0025c98e88d3830eaf552e181879ad14956985859308d77d9"><div class="ttname"><a href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eaf552e181879ad14956985859308d77d9">llvm::RecurKind::FAdd</a></div><div class="ttdeci">@ FAdd</div><div class="ttdoc">Sum of floats.</div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a90b5c9b20258ae16d2be00374f116551"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a90b5c9b20258ae16d2be00374f116551">llvm::PatternMatch::m_c_FMul</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::FMul, true &gt; m_c_FMul(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdoc">Matches FMul with LHS and RHS in either order.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l02377">PatternMatch.h:2377</a></div></div>
<div class="ttc" id="aInstructions_8h_html"><div class="ttname"><a href="Instructions_8h.html">Instructions.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_ada1025d503576216884e36b2fddc22e7"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#ada1025d503576216884e36b2fddc22e7">llvm::PatternMatch::m_c_FAdd</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::FAdd, true &gt; m_c_FAdd(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdoc">Matches FAdd with LHS and RHS in either order.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l02370">PatternMatch.h:2370</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a94eaf07edb6829da0be0e8681375ac4e"><div class="ttname"><a href="classllvm_1_1Instruction.html#a94eaf07edb6829da0be0e8681375ac4e">llvm::Instruction::setHasNoInfs</a></div><div class="ttdeci">void setHasNoInfs(bool B)</div><div class="ttdoc">Set or clear the no-infs flag on this instruction, which must be an operator which supports this flag...</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00264">Instruction.cpp:264</a></div></div>
<div class="ttc" id="aSmallVector_8h_html"><div class="ttname"><a href="SmallVector_8h.html">SmallVector.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a2d9861feadd3a09792967a012559e7b2"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">llvm::PatternMatch::m_Specific</a></div><div class="ttdeci">specificval_ty m_Specific(const Value *V)</div><div class="ttdoc">Match if we have a specific specified value.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00772">PatternMatch.h:772</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a27d07a2504f0f592823ee21311099249"><div class="ttname"><a href="classllvm_1_1Instruction.html#a27d07a2504f0f592823ee21311099249">llvm::Instruction::setHasNoSignedZeros</a></div><div class="ttdeci">void setHasNoSignedZeros(bool B)</div><div class="ttdoc">Set or clear the no-signed-zeros flag on this instruction, which must be an operator which supports t...</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00269">Instruction.cpp:269</a></div></div>
<div class="ttc" id="aclassllvm_1_1SIToFPInst_html"><div class="ttname"><a href="classllvm_1_1SIToFPInst.html">llvm::SIToFPInst</a></div><div class="ttdoc">This class represents a cast from signed integer to floating point.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l05047">Instructions.h:5047</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a3fe9b3ddb71b9fb53d9fc74b3a0710bf"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a3fe9b3ddb71b9fb53d9fc74b3a0710bf">llvm::PatternMatch::m_ICmp</a></div><div class="ttdeci">CmpClass_match&lt; LHS, RHS, ICmpInst, ICmpInst::Predicate &gt; m_ICmp(ICmpInst::Predicate &amp;Pred, const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01394">PatternMatch.h:1394</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">llvm::CmpInst::ICMP_UGT</a></div><div class="ttdeci">@ ICMP_UGT</div><div class="ttdoc">unsigned greater than</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00741">InstrTypes.h:741</a></div></div>
<div class="ttc" id="aReassociate_8cpp_html_abe860e1e952cdc501c96210be5e00805"><div class="ttname"><a href="Reassociate_8cpp.html#abe860e1e952cdc501c96210be5e00805">CreateMul</a></div><div class="ttdeci">static BinaryOperator * CreateMul(Value *S1, Value *S2, const Twine &amp;Name, Instruction *InsertBefore, Value *FlagsOp)</div><div class="ttdef"><b>Definition:</b> <a href="Reassociate_8cpp_source.html#l00253">Reassociate.cpp:253</a></div></div>
<div class="ttc" id="aInstCombineAddSub_8cpp_html_af25a30acf5336afad465652f62291a33"><div class="ttname"><a href="InstCombineAddSub_8cpp.html#af25a30acf5336afad465652f62291a33">MatchRem</a></div><div class="ttdeci">static bool MatchRem(Value *E, Value *&amp;Op, APInt &amp;C, bool &amp;IsSigned)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAddSub_8cpp_source.html#l01012">InstCombineAddSub.cpp:1012</a></div></div>
<div class="ttc" id="aInstructionSimplify_8h_html"><div class="ttname"><a href="InstructionSimplify_8h.html">InstructionSimplify.h</a></div></div>
<div class="ttc" id="astructllvm_1_1APFloatBase_html_a6530cd829b7e8d4df2c29d950039961e"><div class="ttname"><a href="structllvm_1_1APFloatBase.html#a6530cd829b7e8d4df2c29d950039961e">llvm::APFloatBase::semanticsPrecision</a></div><div class="ttdeci">static unsigned int semanticsPrecision(const fltSemantics &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8cpp_source.html#l00289">APFloat.cpp:289</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html"><div class="ttname"><a href="classllvm_1_1PHINode.html">llvm::PHINode</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02708">Instructions.h:2708</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a2fed53ed2b3225752bd9e4fce4967361"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a2fed53ed2b3225752bd9e4fce4967361">llvm::PatternMatch::m_Neg</a></div><div class="ttdeci">BinaryOp_match&lt; cst_pred_ty&lt; is_zero_int &gt;, ValTy, Instruction::Sub &gt; m_Neg(const ValTy &amp;V)</div><div class="ttdoc">Matches a 'Neg' as 'sub 0, V'.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l02284">PatternMatch.h:2284</a></div></div>
<div class="ttc" id="aReassociate_8cpp_html_a680ae08c1b9b93cebdd6cbb726fe8f3d"><div class="ttname"><a href="Reassociate_8cpp.html#a680ae08c1b9b93cebdd6cbb726fe8f3d">CreateAdd</a></div><div class="ttdeci">static BinaryOperator * CreateAdd(Value *S1, Value *S2, const Twine &amp;Name, Instruction *InsertBefore, Value *FlagsOp)</div><div class="ttdef"><b>Definition:</b> <a href="Reassociate_8cpp_source.html#l00241">Reassociate.cpp:241</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a5b844aada27c4c6fdb87146ac458c0d8"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a5b844aada27c4c6fdb87146ac458c0d8">llvm::PatternMatch::m_Trunc</a></div><div class="ttdeci">CastClass_match&lt; OpTy, Instruction::Trunc &gt; m_Trunc(const OpTy &amp;Op)</div><div class="ttdoc">Matches Trunc.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01611">PatternMatch.h:1611</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a7aff89f4f22502c8ad9118bed59ce21c"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a7aff89f4f22502c8ad9118bed59ce21c">llvm::PatternMatch::m_FMul</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::FMul &gt; m_FMul(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01051">PatternMatch.h:1051</a></div></div>
<div class="ttc" id="anamespacellvm_1_1tgtok_html_abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7"><div class="ttname"><a href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">llvm::tgtok::TrueVal</a></div><div class="ttdeci">@ TrueVal</div><div class="ttdef"><b>Definition:</b> <a href="TGLexer_8h_source.html#l00062">TGLexer.h:62</a></div></div>
<div class="ttc" id="aValue_8h_html"><div class="ttname"><a href="Value_8h.html">Value.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_ab7af0c09900daed62bbdb01dba180f7ca44467144e3b6bdac3e85ef6f90e7d832"><div class="ttname"><a href="namespacellvm.html#ab7af0c09900daed62bbdb01dba180f7ca44467144e3b6bdac3e85ef6f90e7d832">llvm::RoundingMode::NearestTiesToEven</a></div><div class="ttdeci">@ NearestTiesToEven</div><div class="ttdoc">roundTiesToEven.</div></div>
<div class="ttc" id="aclassllvm_1_1Value_html"><div class="ttname"><a href="classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00074">Value.h:74</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a37668d9884c78ac77254cf9fb8a4276a"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a37668d9884c78ac77254cf9fb8a4276a">llvm::PatternMatch::m_Shl</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::Shl &gt; m_Shl(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01111">PatternMatch.h:1111</a></div></div>
<div class="ttc" id="aclassllvm_1_1BinaryOperator_html_adfdc28604ad16e04025b71bc46f2ef39"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html#adfdc28604ad16e04025b71bc46f2ef39">llvm::BinaryOperator::CreateFSubFMF</a></div><div class="ttdeci">static BinaryOperator * CreateFSubFMF(Value *V1, Value *V2, Instruction *FMFSource, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00261">InstrTypes.h:261</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a858f42cd002d944befe9675788d94ba7"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a858f42cd002d944befe9675788d94ba7">llvm::PatternMatch::m_c_UMin</a></div><div class="ttdeci">MaxMin_match&lt; ICmpInst, LHS, RHS, umin_pred_ty, true &gt; m_c_UMin(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdoc">Matches a UMin with LHS and RHS in either order.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l02346">PatternMatch.h:2346</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a971522b36bf432ad69a0083581ab4108"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a971522b36bf432ad69a0083581ab4108">llvm::PatternMatch::m_Mul</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::Mul &gt; m_Mul(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01045">PatternMatch.h:1045</a></div></div>
<div class="ttc" id="anamespacellvm_1_1Intrinsic_html_a80add6b3b1cdaec560907995127adc16"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a80add6b3b1cdaec560907995127adc16">llvm::Intrinsic::ID</a></div><div class="ttdeci">unsigned ID</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00039">TargetTransformInfo.h:39</a></div></div>
<div class="ttc" id="anamespacellvm_html_a5942ddc4393a8ef081555f9a938c86e9"><div class="ttname"><a href="namespacellvm.html#a5942ddc4393a8ef081555f9a938c86e9">llvm::simplifySubInst</a></div><div class="ttdeci">Value * simplifySubInst(Value *LHS, Value *RHS, bool IsNSW, bool IsNUW, const SimplifyQuery &amp;Q)</div><div class="ttdoc">Given operands for a Sub, fold the result or return null.</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8cpp_source.html#l00918">InstructionSimplify.cpp:918</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Aug 7 2023 10:23:40 for LLVM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>

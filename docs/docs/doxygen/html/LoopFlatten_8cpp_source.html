<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: lib/Transforms/Scalar/LoopFlatten.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LLVM
   &#160;<span id="projectnumber">17.0.0git</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_a72932e0778af28115095468f6286ff8.html">Transforms</a></li><li class="navelem"><a class="el" href="dir_e6e1f1f37d351595fa984b942927b205.html">Scalar</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">LoopFlatten.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="LoopFlatten_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===- LoopFlatten.cpp - Loop flattening pass------------------------------===//</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// See https://llvm.org/LICENSE.txt for license information.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// This pass flattens pairs nested loops into a single loop.</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">// The intention is to optimise loop nests like this, which together access an</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">// array linearly:</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">//   for (int i = 0; i &lt; N; ++i)</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">//     for (int j = 0; j &lt; M; ++j)</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">//       f(A[i*M+j]);</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">// into one loop:</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">//   for (int i = 0; i &lt; (N*M); ++i)</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">//     f(A[i]);</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">// It can also flatten loops where the induction variables are not used in the</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">// loop. This is only worth doing if the induction variables are only used in an</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">// expression like i*M+j. If they had any other uses, we would have to insert a</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment">// div/mod to reconstruct the original values, so this wouldn&#39;t be profitable.</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">// We also need to prove that N*M will not overflow. The preferred solution is</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment">// to widen the IV, which avoids overflow checks, so that is tried first. If</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment">// the IV cannot be widened, then we try to determine that this new tripcount</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment">// expression won&#39;t overflow.</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment">// Q: Does LoopFlatten use SCEV?</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment">// Short answer: Yes and no.</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment">// Long answer:</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment">// For this transformation to be valid, we require all uses of the induction</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment">// variables to be linear expressions of the form i*M+j. The different Loop</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment">// APIs are used to get some loop components like the induction variable,</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment">// compare statement, etc. In addition, we do some pattern matching to find the</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment">// linear expressions and other loop components like the loop increment. The</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment">// latter are examples of expressions that do use the induction variable, but</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment">// are safe to ignore when we check all uses to be of the form i*M+j. We keep</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="comment">// track of all of this in bookkeeping struct FlattenInfo.</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment">// We assume the loops to be canonical, i.e. starting at 0 and increment with</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="comment">// 1. This makes RHS of the compare the loop tripcount (with the right</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment">// predicate). We use SCEV to then sanity check that this tripcount matches</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment">// with the tripcount as computed by SCEV.</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160; </div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LoopFlatten_8h.html">llvm/Transforms/Scalar/LoopFlatten.h</a>&quot;</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160; </div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Statistic_8h.html">llvm/ADT/Statistic.h</a>&quot;</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AssumptionCache_8h.html">llvm/Analysis/AssumptionCache.h</a>&quot;</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LoopInfo_8h.html">llvm/Analysis/LoopInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LoopNestAnalysis_8h.html">llvm/Analysis/LoopNestAnalysis.h</a>&quot;</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MemorySSAUpdater_8h.html">llvm/Analysis/MemorySSAUpdater.h</a>&quot;</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="OptimizationRemarkEmitter_8h.html">llvm/Analysis/OptimizationRemarkEmitter.h</a>&quot;</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ScalarEvolution_8h.html">llvm/Analysis/ScalarEvolution.h</a>&quot;</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetTransformInfo_8h.html">llvm/Analysis/TargetTransformInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ValueTracking_8h.html">llvm/Analysis/ValueTracking.h</a>&quot;</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Dominators_8h.html">llvm/IR/Dominators.h</a>&quot;</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Function_8h.html">llvm/IR/Function.h</a>&quot;</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IRBuilder_8h.html">llvm/IR/IRBuilder.h</a>&quot;</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Module_8h.html">llvm/IR/Module.h</a>&quot;</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="PatternMatch_8h.html">llvm/IR/PatternMatch.h</a>&quot;</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InitializePasses_8h.html">llvm/InitializePasses.h</a>&quot;</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Pass_8h.html">llvm/Pass.h</a>&quot;</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Debug_8h.html">llvm/Support/Debug.h</a>&quot;</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="raw__ostream_8h.html">llvm/Support/raw_ostream.h</a>&quot;</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Transforms_2Scalar_8h.html">llvm/Transforms/Scalar.h</a>&quot;</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LoopPassManager_8h.html">llvm/Transforms/Scalar/LoopPassManager.h</a>&quot;</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Transforms_2Utils_2Local_8h.html">llvm/Transforms/Utils/Local.h</a>&quot;</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LoopUtils_8h.html">llvm/Transforms/Utils/LoopUtils.h</a>&quot;</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ScalarEvolutionExpander_8h.html">llvm/Transforms/Utils/ScalarEvolutionExpander.h</a>&quot;</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SimplifyIndVar_8h.html">llvm/Transforms/Utils/SimplifyIndVar.h</a>&quot;</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="preprocessor">#include &lt;optional&gt;</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160; </div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm_1_1PatternMatch.html">llvm::PatternMatch</a>;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160; </div>
<div class="line"><a name="l00083"></a><span class="lineno"><a class="line" href="LoopFlatten_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">   83</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;loop-flatten&quot;</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160; </div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumFlattened, <span class="stringliteral">&quot;Number of loops flattened&quot;</span>);</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160; </div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;unsigned&gt;</a> <a class="code" href="LoopFlatten_8cpp.html#a2f931b2aee2a78ca4678a2a25c530584">RepeatedInstructionThreshold</a>(</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="stringliteral">&quot;loop-flatten-cost-threshold&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(2),</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Limit on the cost of instructions that can be repeated due to &quot;</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;             <span class="stringliteral">&quot;loop flattening&quot;</span>));</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160; </div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <a class="code" href="LoopFlatten_8cpp.html#a15d34f08d47ed31645bcff68d7014127">AssumeNoOverflow</a>(<span class="stringliteral">&quot;loop-flatten-assume-no-overflow&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;                     <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>),</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;                     <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Assume that the product of the two iteration &quot;</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;                              <span class="stringliteral">&quot;trip counts will never overflow&quot;</span>));</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160; </div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <a class="code" href="LoopFlatten_8cpp.html#a4aa9efb1877c0a4aa735be1395c60637">WidenIV</a>(<span class="stringliteral">&quot;loop-flatten-widen-iv&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">true</span>),</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;            <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Widen the loop induction variables, if possible, so &quot;</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;                     <span class="stringliteral">&quot;overflow checks won&#39;t reject flattening&quot;</span>));</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160; </div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="keyword">namespace </span>{</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment">// We require all uses of both induction variables to match this pattern:</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment">//   (OuterPHI * InnerTripCount) + InnerPHI</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="comment">// I.e., it needs to be a linear expression of the induction variables and the</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="comment">// inner loop trip count. We keep track of all different expressions on which</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="comment">// checks will be performed in this bookkeeping struct.</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="keyword">struct </span>FlattenInfo {</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  <a class="code" href="classllvm_1_1Loop.html">Loop</a> *OuterLoop = <span class="keyword">nullptr</span>;  <span class="comment">// The loop pair to be flattened.</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  <a class="code" href="classllvm_1_1Loop.html">Loop</a> *InnerLoop = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160; </div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *InnerInductionPHI = <span class="keyword">nullptr</span>; <span class="comment">// These PHINodes correspond to loop</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *OuterInductionPHI = <span class="keyword">nullptr</span>; <span class="comment">// induction variables, which are</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;                                        <span class="comment">// expected to start at zero and</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;                                        <span class="comment">// increment by one on each loop.</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160; </div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *InnerTripCount = <span class="keyword">nullptr</span>; <span class="comment">// The product of these two tripcounts</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *OuterTripCount = <span class="keyword">nullptr</span>; <span class="comment">// will be the new flattened loop</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;                                   <span class="comment">// tripcount. Also used to recognise a</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;                                   <span class="comment">// linear expression that will be replaced.</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160; </div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;Value *, 4&gt;</a> LinearIVUses;  <span class="comment">// Contains the linear expressions</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;                                         <span class="comment">// of the form i*M+j that will be</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;                                         <span class="comment">// replaced.</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160; </div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *InnerIncrement = <span class="keyword">nullptr</span>;  <span class="comment">// Uses of induction variables in</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *OuterIncrement = <span class="keyword">nullptr</span>;  <span class="comment">// loop control statements that</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *InnerBranch = <span class="keyword">nullptr</span>;         <span class="comment">// are safe to ignore.</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160; </div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *OuterBranch = <span class="keyword">nullptr</span>; <span class="comment">// The instruction that needs to be</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;                                     <span class="comment">// updated with new tripcount.</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160; </div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;PHINode *, 4&gt;</a> InnerPHIsToTransform;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160; </div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;  <span class="keywordtype">bool</span> Widened = <span class="keyword">false</span>; <span class="comment">// Whether this holds the flatten info before or after</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;                        <span class="comment">// widening.</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160; </div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *NarrowInnerInductionPHI = <span class="keyword">nullptr</span>; <span class="comment">// Holds the old/narrow induction</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *NarrowOuterInductionPHI = <span class="keyword">nullptr</span>; <span class="comment">// phis, i.e. the Phis before IV</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;                                              <span class="comment">// has been applied. Used to skip</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;                                              <span class="comment">// checks on phi nodes.</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160; </div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  FlattenInfo(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *OL, <a class="code" href="classllvm_1_1Loop.html">Loop</a> *IL) : OuterLoop(OL), InnerLoop(IL){};</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160; </div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  <span class="keywordtype">bool</span> isNarrowInductionPhi(<a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *Phi) {</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <span class="comment">// This can&#39;t be the narrow phi if we haven&#39;t widened the IV first.</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <span class="keywordflow">if</span> (!Widened)</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="keywordflow">return</span> NarrowInnerInductionPHI == Phi || NarrowOuterInductionPHI == Phi;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  }</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  <span class="keywordtype">bool</span> isInnerLoopIncrement(<a class="code" href="classllvm_1_1User.html">User</a> *U) {</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="keywordflow">return</span> InnerIncrement == U;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  }</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  <span class="keywordtype">bool</span> isOuterLoopIncrement(<a class="code" href="classllvm_1_1User.html">User</a> *U) {</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="keywordflow">return</span> OuterIncrement == U;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  }</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  <span class="keywordtype">bool</span> isInnerLoopTest(<a class="code" href="classllvm_1_1User.html">User</a> *U) {</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="keywordflow">return</span> InnerBranch-&gt;<a class="code" href="classllvm_1_1BranchInst.html#aac456a62894c9f0f8e9f06373bbf40f0">getCondition</a>() == U;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;  }</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160; </div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  <span class="keywordtype">bool</span> checkOuterInductionPhiUsers(<a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;Value *, 4&gt;</a> &amp;ValidOuterPHIUses) {</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1User.html">User</a> *U : OuterInductionPHI-&gt;<a class="code" href="classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">users</a>()) {</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;      <span class="keywordflow">if</span> (isOuterLoopIncrement(U))</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160; </div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;      <span class="keyword">auto</span> IsValidOuterPHIUses = [&amp;] (<a class="code" href="classllvm_1_1User.html">User</a> *U) -&gt; <span class="keywordtype">bool</span> {</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Found use of outer induction variable: &quot;</span>; U-&gt;<a class="code" href="classllvm_1_1Value.html#af7dca9a9e816ef69fd9e9467f64f72b4">dump</a>());</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        <span class="keywordflow">if</span> (!ValidOuterPHIUses.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a1f475b0df44ebd7169e720fa1bf9169e">count</a>(U)) {</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;          <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Did not match expected pattern, bailing\n&quot;</span>);</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        }</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;        <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Use is optimisable\n&quot;</span>);</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;      };</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160; </div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *V = dyn_cast&lt;TruncInst&gt;(U)) {</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">auto</span> *K : V-&gt;users()) {</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;          <span class="keywordflow">if</span> (!IsValidOuterPHIUses(K))</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        }</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;      }</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160; </div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;      <span class="keywordflow">if</span> (!IsValidOuterPHIUses(U))</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    }</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;  }</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160; </div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;  <span class="keywordtype">bool</span> matchLinearIVUser(<a class="code" href="classllvm_1_1User.html">User</a> *U, <a class="code" href="classllvm_1_1Value.html">Value</a> *InnerTripCount,</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;                         <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;Value *, 4&gt;</a> &amp;ValidOuterPHIUses) {</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Checking linear i*M+j expression for: &quot;</span>; U-&gt;<a class="code" href="classllvm_1_1Value.html#af7dca9a9e816ef69fd9e9467f64f72b4">dump</a>());</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *MatchedMul = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *MatchedItCount = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160; </div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <span class="keywordtype">bool</span> IsAdd = <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(U, <a class="code" href="namespacellvm_1_1PatternMatch.html#ad191220adaaedcfba833985509a17452">m_c_Add</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(InnerInductionPHI),</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;                                  <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(MatchedMul))) &amp;&amp;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;                 <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(MatchedMul, <a class="code" href="namespacellvm_1_1PatternMatch.html#a8f3259c7db0ce698876fe79f45b80a32">m_c_Mul</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(OuterInductionPHI),</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;                                           <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(MatchedItCount)));</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160; </div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="comment">// Matches the same pattern as above, except it also looks for truncs</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <span class="comment">// on the phi, which can be the result of widening the induction variables.</span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <span class="keywordtype">bool</span> IsAddTrunc =</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(U, <a class="code" href="namespacellvm_1_1PatternMatch.html#ad191220adaaedcfba833985509a17452">m_c_Add</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a5b844aada27c4c6fdb87146ac458c0d8">m_Trunc</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(InnerInductionPHI)),</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;                         <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(MatchedMul))) &amp;&amp;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(MatchedMul, <a class="code" href="namespacellvm_1_1PatternMatch.html#a8f3259c7db0ce698876fe79f45b80a32">m_c_Mul</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a5b844aada27c4c6fdb87146ac458c0d8">m_Trunc</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(OuterInductionPHI)),</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;                                  <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(MatchedItCount)));</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160; </div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="keywordflow">if</span> (!MatchedItCount)</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160; </div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Matched multiplication: &quot;</span>; MatchedMul-&gt;<a class="code" href="classllvm_1_1Value.html#af7dca9a9e816ef69fd9e9467f64f72b4">dump</a>());</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Matched iteration count: &quot;</span>; MatchedItCount-&gt;<a class="code" href="classllvm_1_1Value.html#af7dca9a9e816ef69fd9e9467f64f72b4">dump</a>());</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160; </div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <span class="comment">// The mul should not have any other uses. Widening may leave trivially dead</span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <span class="comment">// uses, which can be ignored.</span></div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#ac214df91cdc242f4710ea5a93939c678">count_if</a>(MatchedMul-&gt;<a class="code" href="classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">users</a>(), [](<a class="code" href="classllvm_1_1User.html">User</a> *U) {</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;          return !isInstructionTriviallyDead(cast&lt;Instruction&gt;(U));</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        }) &gt; 1) {</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Multiply has more than one use\n&quot;</span>);</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    }</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160; </div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <span class="comment">// Look through extends if the IV has been widened. Don&#39;t look through</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <span class="comment">// extends if we already looked through a trunc.</span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <span class="keywordflow">if</span> (Widened &amp;&amp; IsAdd &amp;&amp;</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        (isa&lt;SExtInst&gt;(MatchedItCount) || isa&lt;ZExtInst&gt;(MatchedItCount))) {</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(MatchedItCount-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>() == InnerInductionPHI-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>() &amp;&amp;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;             <span class="stringliteral">&quot;Unexpected type mismatch in types after widening&quot;</span>);</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;      MatchedItCount = isa&lt;SExtInst&gt;(MatchedItCount)</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;                           ? dyn_cast&lt;SExtInst&gt;(MatchedItCount)-&gt;getOperand(0)</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;                           : dyn_cast&lt;ZExtInst&gt;(MatchedItCount)-&gt;getOperand(0);</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    }</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160; </div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Looking for inner trip count: &quot;</span>;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;               InnerTripCount-&gt;<a class="code" href="classllvm_1_1Value.html#af7dca9a9e816ef69fd9e9467f64f72b4">dump</a>());</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160; </div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <span class="keywordflow">if</span> ((IsAdd || IsAddTrunc) &amp;&amp; MatchedItCount == InnerTripCount) {</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Found. This sse is optimisable\n&quot;</span>);</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;      ValidOuterPHIUses.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(MatchedMul);</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;      LinearIVUses.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(U);</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    }</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160; </div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Did not match expected pattern, bailing\n&quot;</span>);</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  }</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160; </div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  <span class="keywordtype">bool</span> checkInnerInductionPhiUsers(<a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;Value *, 4&gt;</a> &amp;ValidOuterPHIUses) {</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *SExtInnerTripCount = InnerTripCount;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <span class="keywordflow">if</span> (Widened &amp;&amp;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        (isa&lt;SExtInst&gt;(InnerTripCount) || isa&lt;ZExtInst&gt;(InnerTripCount)))</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;      SExtInnerTripCount = cast&lt;Instruction&gt;(InnerTripCount)-&gt;getOperand(0);</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160; </div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1User.html">User</a> *U : InnerInductionPHI-&gt;<a class="code" href="classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">users</a>()) {</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Checking User: &quot;</span>; U-&gt;<a class="code" href="classllvm_1_1Value.html#af7dca9a9e816ef69fd9e9467f64f72b4">dump</a>());</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;      <span class="keywordflow">if</span> (isInnerLoopIncrement(U)) {</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;        <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Use is inner loop increment, continuing\n&quot;</span>);</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;      }</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160; </div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;      <span class="comment">// After widening the IVs, a trunc instruction might have been introduced,</span></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;      <span class="comment">// so look through truncs.</span></div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;      <span class="keywordflow">if</span> (isa&lt;TruncInst&gt;(U)) {</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        <span class="keywordflow">if</span> (!U-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>())</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        U = *U-&gt;<a class="code" href="classllvm_1_1Value.html#a158da2b6d3d938aaa15b6acd00150e2c">user_begin</a>();</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;      }</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160; </div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;      <span class="comment">// If the use is in the compare (which is also the condition of the inner</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;      <span class="comment">// branch) then the compare has been altered by another transformation e.g</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;      <span class="comment">// icmp ult %inc, tripcount -&gt; icmp ult %j, tripcount-1, where tripcount is</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;      <span class="comment">// a constant. Ignore this use as the compare gets removed later anyway.</span></div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;      <span class="keywordflow">if</span> (isInnerLoopTest(U)) {</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Use is the inner loop test, continuing\n&quot;</span>);</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;      }</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160; </div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;      <span class="keywordflow">if</span> (!matchLinearIVUser(U, SExtInnerTripCount, ValidOuterPHIUses)) {</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Not a linear IV user\n&quot;</span>);</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;      }</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Linear IV users found!\n&quot;</span>);</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    }</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;  }</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;};</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;} <span class="comment">// namespace</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160; </div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span></div>
<div class="line"><a name="l00295"></a><span class="lineno"><a class="line" href="LoopFlatten_8cpp.html#a58b2a7b6438666f763752c35da604195">  295</a></span>&#160;<a class="code" href="LoopFlatten_8cpp.html#a58b2a7b6438666f763752c35da604195">setLoopComponents</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *&amp;TC, <a class="code" href="classllvm_1_1Value.html">Value</a> *&amp;TripCount, <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *&amp;Increment,</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;                  <a class="code" href="classllvm_1_1SmallPtrSetImpl.html">SmallPtrSetImpl&lt;Instruction *&gt;</a> &amp;IterationInstructions) {</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;  TripCount = TC;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  IterationInstructions.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(Increment);</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Found Increment: &quot;</span>; Increment-&gt;dump());</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Found trip count: &quot;</span>; TripCount-&gt;<a class="code" href="classllvm_1_1Value.html#af7dca9a9e816ef69fd9e9467f64f72b4">dump</a>());</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Successfully found all loop components\n&quot;</span>);</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;}</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160; </div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;<span class="comment">// Given the RHS of the loop latch compare instruction, verify with SCEV</span></div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;<span class="comment">// that this is indeed the loop tripcount.</span></div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;<span class="comment">// TODO: This used to be a straightforward check but has grown to be quite</span></div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;<span class="comment">// complicated now. It is therefore worth revisiting what the additional</span></div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;<span class="comment">// benefits are of this (compared to relying on canonical loops and pattern</span></div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;<span class="comment">// matching).</span></div>
<div class="line"><a name="l00311"></a><span class="lineno"><a class="line" href="LoopFlatten_8cpp.html#a11a65ce1550eac260dca320a7028328e">  311</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="LoopFlatten_8cpp.html#a11a65ce1550eac260dca320a7028328e">verifyTripCount</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L,</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;     <a class="code" href="classllvm_1_1SmallPtrSetImpl.html">SmallPtrSetImpl&lt;Instruction *&gt;</a> &amp;IterationInstructions,</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *&amp;InductionPHI, <a class="code" href="classllvm_1_1Value.html">Value</a> *&amp;TripCount, <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *&amp;Increment,</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *&amp;BackBranch, <a class="code" href="classllvm_1_1ScalarEvolution.html">ScalarEvolution</a> *SE, <span class="keywordtype">bool</span> IsWidened) {</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *BackedgeTakenCount = SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#a22d9bcbd44563106d7217f3bd9a4039e">getBackedgeTakenCount</a>(L);</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;  <span class="keywordflow">if</span> (isa&lt;SCEVCouldNotCompute&gt;(BackedgeTakenCount)) {</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Backedge-taken count is not predictable\n&quot;</span>);</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;  }</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160; </div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;  <span class="comment">// The Extend=false flag is used for getTripCountFromExitCount as we want</span></div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;  <span class="comment">// to verify and match it with the pattern matched tripcount. Please note</span></div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;  <span class="comment">// that overflow checks are performed in checkOverflow, but are first tried</span></div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;  <span class="comment">// to avoid by widening the IV.</span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *SCEVTripCount =</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;      SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#a5bb94ae7a535ff5335b731270969c6d3">getTripCountFromExitCount</a>(BackedgeTakenCount, <span class="comment">/*Extend=*/</span><span class="keyword">false</span>);</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160; </div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *SCEVRHS = SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#a30bd18ac905eacf3601bc6a553a9ff49">getSCEV</a>(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;  <span class="keywordflow">if</span> (SCEVRHS == SCEVTripCount)</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="LoopFlatten_8cpp.html#a58b2a7b6438666f763752c35da604195">setLoopComponents</a>(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, TripCount, Increment, IterationInstructions);</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;  <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *ConstantRHS = dyn_cast&lt;ConstantInt&gt;(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;  <span class="keywordflow">if</span> (ConstantRHS) {</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *BackedgeTCExt = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    <span class="keywordflow">if</span> (IsWidened) {</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *SCEVTripCountExt;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;      <span class="comment">// Find the extended backedge taken count and extended trip count using</span></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;      <span class="comment">// SCEV. One of these should now match the RHS of the compare.</span></div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;      BackedgeTCExt = SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#a6d745b25efdc69435508f1e936919f8b">getZeroExtendExpr</a>(BackedgeTakenCount, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>());</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;      SCEVTripCountExt = SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#a5bb94ae7a535ff5335b731270969c6d3">getTripCountFromExitCount</a>(BackedgeTCExt, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;      <span class="keywordflow">if</span> (SCEVRHS != BackedgeTCExt &amp;&amp; SCEVRHS != SCEVTripCountExt) {</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;        <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Could not find valid trip count\n&quot;</span>);</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;      }</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    }</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <span class="comment">// If the RHS of the compare is equal to the backedge taken count we need</span></div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <span class="comment">// to add one to get the trip count.</span></div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    <span class="keywordflow">if</span> (SCEVRHS == BackedgeTCExt || SCEVRHS == BackedgeTakenCount) {</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;      <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *One = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(ConstantRHS-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#afe3ce7fc89f36474eb0369cbb792c05a">getType</a>(), 1);</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *NewRHS = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;          ConstantRHS-&gt;<a class="code" href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">getContext</a>(), ConstantRHS-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a4b001d9b458035fbbfc154d52d354ee9">getValue</a>() + One-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a4b001d9b458035fbbfc154d52d354ee9">getValue</a>());</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="LoopFlatten_8cpp.html#a58b2a7b6438666f763752c35da604195">setLoopComponents</a>(NewRHS, TripCount, Increment,</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;                               IterationInstructions);</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    }</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="LoopFlatten_8cpp.html#a58b2a7b6438666f763752c35da604195">setLoopComponents</a>(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, TripCount, Increment, IterationInstructions);</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  }</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;  <span class="comment">// If the RHS isn&#39;t a constant then check that the reason it doesn&#39;t match</span></div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;  <span class="comment">// the SCEV trip count is because the RHS is a ZExt or SExt instruction</span></div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;  <span class="comment">// (and take the trip count to be the RHS).</span></div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;  <span class="keywordflow">if</span> (!IsWidened) {</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Could not find valid trip count\n&quot;</span>);</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;  }</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;  <span class="keyword">auto</span> *TripCountInst = dyn_cast&lt;Instruction&gt;(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;  <span class="keywordflow">if</span> (!TripCountInst) {</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Could not find valid trip count\n&quot;</span>);</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;  }</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;  <span class="keywordflow">if</span> ((!isa&lt;ZExtInst&gt;(TripCountInst) &amp;&amp; !isa&lt;SExtInst&gt;(TripCountInst)) ||</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;      SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#a30bd18ac905eacf3601bc6a553a9ff49">getSCEV</a>(TripCountInst-&gt;getOperand(0)) != SCEVTripCount) {</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Could not find valid extended trip count\n&quot;</span>);</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;  }</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="LoopFlatten_8cpp.html#a58b2a7b6438666f763752c35da604195">setLoopComponents</a>(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, TripCount, Increment, IterationInstructions);</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;}</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160; </div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;<span class="comment">// Finds the induction variable, increment and trip count for a simple loop that</span></div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;<span class="comment">// we can flatten.</span></div>
<div class="line"><a name="l00378"></a><span class="lineno"><a class="line" href="LoopFlatten_8cpp.html#a9bbea577bf401c708dc854d2dad600af">  378</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="LoopFlatten_8cpp.html#a9bbea577bf401c708dc854d2dad600af">findLoopComponents</a>(</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <a class="code" href="classllvm_1_1SmallPtrSetImpl.html">SmallPtrSetImpl&lt;Instruction *&gt;</a> &amp;IterationInstructions,</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *&amp;InductionPHI, <a class="code" href="classllvm_1_1Value.html">Value</a> *&amp;TripCount, <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *&amp;Increment,</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *&amp;BackBranch, <a class="code" href="classllvm_1_1ScalarEvolution.html">ScalarEvolution</a> *SE, <span class="keywordtype">bool</span> IsWidened) {</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Finding components of loop: &quot;</span> &lt;&lt; L-&gt;<a class="code" href="classllvm_1_1Loop.html#a917a64b00c1745fd0c78c2b2320cd4ad">getName</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160; </div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;  <span class="keywordflow">if</span> (!L-&gt;<a class="code" href="classllvm_1_1Loop.html#ac233a2693163ed58305215ca2f6921e3">isLoopSimplifyForm</a>()) {</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Loop is not in normal form\n&quot;</span>);</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;  }</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160; </div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;  <span class="comment">// Currently, to simplify the implementation, the Loop induction variable must</span></div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  <span class="comment">// start at zero and increment with a step size of one.</span></div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;  <span class="keywordflow">if</span> (!L-&gt;<a class="code" href="classllvm_1_1Loop.html#a01f94a30e706065eb238b74f57c497ee">isCanonical</a>(*SE)) {</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Loop is not canonical\n&quot;</span>);</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;  }</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160; </div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  <span class="comment">// There must be exactly one exiting block, and it must be the same at the</span></div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;  <span class="comment">// latch.</span></div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Latch = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a1230fd674d2609b96527fe65eaf40b1b">getLoopLatch</a>();</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;  <span class="keywordflow">if</span> (L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#adf6f53d7652b471c995b7d10f3dd2729">getExitingBlock</a>() != Latch) {</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Exiting and latch block are different\n&quot;</span>);</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;  }</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160; </div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;  <span class="comment">// Find the induction PHI. If there is no induction PHI, we can&#39;t do the</span></div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;  <span class="comment">// transformation. TODO: could other variables trigger this? Do we have to</span></div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;  <span class="comment">// search for the best one?</span></div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;  InductionPHI = L-&gt;<a class="code" href="classllvm_1_1Loop.html#ab05e97728516fbeeaa9426496257c800">getInductionVariable</a>(*SE);</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;  <span class="keywordflow">if</span> (!InductionPHI) {</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Could not find induction PHI\n&quot;</span>);</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;  }</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Found induction PHI: &quot;</span>; InductionPHI-&gt;<a class="code" href="classllvm_1_1Value.html#af7dca9a9e816ef69fd9e9467f64f72b4">dump</a>());</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160; </div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;  <span class="keywordtype">bool</span> ContinueOnTrue = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a04337b572d34ea413c35dbac5d75530b">contains</a>(Latch-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>()-&gt;<a class="code" href="classllvm_1_1Instruction.html#a6e5d2e18c81baaeec7dadc81a0dea993">getSuccessor</a>(0));</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;  <span class="keyword">auto</span> IsValidPredicate = [&amp;](<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> Pred) {</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    <span class="keywordflow">if</span> (ContinueOnTrue)</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;      <span class="keywordflow">return</span> Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">CmpInst::ICMP_NE</a> || Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">CmpInst::ICMP_ULT</a>;</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;      <span class="keywordflow">return</span> Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">CmpInst::ICMP_EQ</a>;</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;  };</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160; </div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;  <span class="comment">// Find Compare and make sure it is valid. getLatchCmpInst checks that the</span></div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;  <span class="comment">// back branch of the latch is conditional.</span></div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;  <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *<a class="code" href="README__P9_8txt.html#a42a82adf8d40243d6a0a28972c9f7df1">Compare</a> = L-&gt;<a class="code" href="classllvm_1_1Loop.html#a7d7349c6beeae9b9ac526c9f74f4efdb">getLatchCmpInst</a>();</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="README__P9_8txt.html#a42a82adf8d40243d6a0a28972c9f7df1">Compare</a> || !IsValidPredicate(<a class="code" href="README__P9_8txt.html#a42a82adf8d40243d6a0a28972c9f7df1">Compare</a>-&gt;getUnsignedPredicate()) ||</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;      <a class="code" href="README__P9_8txt.html#a42a82adf8d40243d6a0a28972c9f7df1">Compare</a>-&gt;hasNUsesOrMore(2)) {</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Could not find valid comparison\n&quot;</span>);</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;  }</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;  BackBranch = cast&lt;BranchInst&gt;(Latch-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>());</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;  IterationInstructions.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(BackBranch);</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Found back branch: &quot;</span>; BackBranch-&gt;<a class="code" href="classllvm_1_1Value.html#af7dca9a9e816ef69fd9e9467f64f72b4">dump</a>());</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;  IterationInstructions.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(<a class="code" href="README__P9_8txt.html#a42a82adf8d40243d6a0a28972c9f7df1">Compare</a>);</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Found comparison: &quot;</span>; <a class="code" href="README__P9_8txt.html#a42a82adf8d40243d6a0a28972c9f7df1">Compare</a>-&gt;dump());</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160; </div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;  <span class="comment">// Find increment and trip count.</span></div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;  <span class="comment">// There are exactly 2 incoming values to the induction phi; one from the</span></div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;  <span class="comment">// pre-header and one from the latch. The incoming latch value is the</span></div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;  <span class="comment">// increment variable.</span></div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;  Increment =</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;      cast&lt;BinaryOperator&gt;(InductionPHI-&gt;<a class="code" href="classllvm_1_1PHINode.html#adfb61ffe25c950c75c86310245b3ef39">getIncomingValueForBlock</a>(Latch));</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;  <span class="keywordflow">if</span> ((<a class="code" href="README__P9_8txt.html#a42a82adf8d40243d6a0a28972c9f7df1">Compare</a>-&gt;getOperand(0) != Increment || !Increment-&gt;hasNUses(2)) &amp;&amp;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;      !Increment-&gt;hasNUses(1)) {</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Could not find valid increment\n&quot;</span>);</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;  }</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;  <span class="comment">// The trip count is the RHS of the compare. If this doesn&#39;t match the trip</span></div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;  <span class="comment">// count computed by SCEV then this is because the trip count variable</span></div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;  <span class="comment">// has been widened so the types don&#39;t match, or because it is a constant and</span></div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;  <span class="comment">// another transformation has changed the compare (e.g. icmp ult %inc,</span></div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;  <span class="comment">// tripcount -&gt; icmp ult %j, tripcount-1), or both.</span></div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = <a class="code" href="README__P9_8txt.html#a42a82adf8d40243d6a0a28972c9f7df1">Compare</a>-&gt;getOperand(1);</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160; </div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="LoopFlatten_8cpp.html#a11a65ce1550eac260dca320a7028328e">verifyTripCount</a>(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, L, IterationInstructions, InductionPHI, TripCount,</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;                         Increment, BackBranch, SE, IsWidened);</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;}</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160; </div>
<div class="line"><a name="l00458"></a><span class="lineno"><a class="line" href="LoopFlatten_8cpp.html#aadc8ada3f35f60d30e774a6daf23d02f">  458</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="LoopFlatten_8cpp.html#aadc8ada3f35f60d30e774a6daf23d02f">checkPHIs</a>(FlattenInfo &amp;FI, <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a> *<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>) {</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;  <span class="comment">// All PHIs in the inner and outer headers must either be:</span></div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;  <span class="comment">// - The induction PHI, which we are going to rewrite as one induction in</span></div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;  <span class="comment">//   the new loop. This is already checked by findLoopComponents.</span></div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;  <span class="comment">// - An outer header PHI with all incoming values from outside the loop.</span></div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;  <span class="comment">//   LoopSimplify guarantees we have a pre-header, so we don&#39;t need to</span></div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;  <span class="comment">//   worry about that here.</span></div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;  <span class="comment">// - Pairs of PHIs in the inner and outer headers, which implement a</span></div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;  <span class="comment">//   loop-carried dependency that will still be valid in the new loop. To</span></div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;  <span class="comment">//   be valid, this variable must be modified only in the inner loop.</span></div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160; </div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;  <span class="comment">// The set of PHI nodes in the outer loop header that we know will still be</span></div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;  <span class="comment">// valid after the transformation. These will not need to be modified (with</span></div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;  <span class="comment">// the exception of the induction variable), but we do need to check that</span></div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;  <span class="comment">// there are no unsafe PHI nodes.</span></div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;PHINode *, 4&gt;</a> SafeOuterPHIs;</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;  SafeOuterPHIs.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(FI.OuterInductionPHI);</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160; </div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;  <span class="comment">// Check that all PHI nodes in the inner loop header match one of the valid</span></div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;  <span class="comment">// patterns.</span></div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1PHINode.html">PHINode</a> &amp;InnerPHI : FI.InnerLoop-&gt;getHeader()-&gt;phis()) {</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    <span class="comment">// The induction PHIs break these rules, and that&#39;s OK because we treat</span></div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    <span class="comment">// them specially when doing the transformation.</span></div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    <span class="keywordflow">if</span> (&amp;InnerPHI == FI.InnerInductionPHI)</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    <span class="keywordflow">if</span> (FI.isNarrowInductionPhi(&amp;InnerPHI))</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160; </div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    <span class="comment">// Each inner loop PHI node must have two incoming values/blocks - one</span></div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    <span class="comment">// from the pre-header, and one from the latch.</span></div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(InnerPHI.getNumIncomingValues() == 2);</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *PreHeaderValue =</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;        InnerPHI.getIncomingValueForBlock(FI.InnerLoop-&gt;getLoopPreheader());</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *LatchValue =</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;        InnerPHI.getIncomingValueForBlock(FI.InnerLoop-&gt;getLoopLatch());</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160; </div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    <span class="comment">// The incoming value from the outer loop must be the PHI node in the</span></div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    <span class="comment">// outer loop header, with no modifications made in the top of the outer</span></div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    <span class="comment">// loop.</span></div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *OuterPHI = dyn_cast&lt;PHINode&gt;(PreHeaderValue);</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    <span class="keywordflow">if</span> (!OuterPHI || OuterPHI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>() != FI.OuterLoop-&gt;getHeader()) {</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;value modified in top of outer loop\n&quot;</span>);</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    }</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160; </div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    <span class="comment">// The other incoming value must come from the inner loop, without any</span></div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    <span class="comment">// modifications in the tail end of the outer loop. We are in LCSSA form,</span></div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    <span class="comment">// so this will actually be a PHI in the inner loop&#39;s exit block, which</span></div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    <span class="comment">// only uses values from inside the inner loop.</span></div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *LCSSAPHI = dyn_cast&lt;PHINode&gt;(</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;        OuterPHI-&gt;<a class="code" href="classllvm_1_1PHINode.html#adfb61ffe25c950c75c86310245b3ef39">getIncomingValueForBlock</a>(FI.OuterLoop-&gt;getLoopLatch()));</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    <span class="keywordflow">if</span> (!LCSSAPHI) {</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;could not find LCSSA PHI\n&quot;</span>);</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    }</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160; </div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    <span class="comment">// The value used by the LCSSA PHI must be the same one that the inner</span></div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    <span class="comment">// loop&#39;s PHI uses.</span></div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    <span class="keywordflow">if</span> (LCSSAPHI-&gt;<a class="code" href="classllvm_1_1PHINode.html#ace87755a2044122196774c1cb0368fde">hasConstantValue</a>() != LatchValue) {</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;          <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LCSSA PHI incoming value does not match latch value\n&quot;</span>);</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    }</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160; </div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;PHI pair is safe:\n&quot;</span>);</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  Inner: &quot;</span>; InnerPHI.dump());</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  Outer: &quot;</span>; OuterPHI-&gt;<a class="code" href="classllvm_1_1Value.html#af7dca9a9e816ef69fd9e9467f64f72b4">dump</a>());</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    SafeOuterPHIs.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(OuterPHI);</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    FI.InnerPHIsToTransform.insert(&amp;InnerPHI);</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;  }</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160; </div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1PHINode.html">PHINode</a> &amp;OuterPHI : FI.OuterLoop-&gt;getHeader()-&gt;phis()) {</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    <span class="keywordflow">if</span> (FI.isNarrowInductionPhi(&amp;OuterPHI))</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    <span class="keywordflow">if</span> (!SafeOuterPHIs.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a1f475b0df44ebd7169e720fa1bf9169e">count</a>(&amp;OuterPHI)) {</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;found unsafe PHI in outer loop: &quot;</span>; OuterPHI.dump());</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    }</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;  }</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160; </div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;checkPHIs: OK\n&quot;</span>);</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;}</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160; </div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span></div>
<div class="line"><a name="l00543"></a><span class="lineno"><a class="line" href="LoopFlatten_8cpp.html#af4f43e9c3f0bc709f58c5c9a2d92eed5">  543</a></span>&#160;<a class="code" href="LoopFlatten_8cpp.html#af4f43e9c3f0bc709f58c5c9a2d92eed5">checkOuterLoopInsts</a>(FlattenInfo &amp;FI,</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;                    <a class="code" href="classllvm_1_1SmallPtrSetImpl.html">SmallPtrSetImpl&lt;Instruction *&gt;</a> &amp;IterationInstructions,</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;                    <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a> *<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>) {</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;  <span class="comment">// Check for instructions in the outer but not inner loop. If any of these</span></div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;  <span class="comment">// have side-effects then this transformation is not legal, and if there is</span></div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;  <span class="comment">// a significant amount of code here which can&#39;t be optimised out that it&#39;s</span></div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;  <span class="comment">// not profitable (as these instructions would get executed for each</span></div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;  <span class="comment">// iteration of the inner loop).</span></div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;  <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> RepeatedInstrCost = 0;</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> : FI.OuterLoop-&gt;getBlocks()) {</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    <span class="keywordflow">if</span> (FI.InnerLoop-&gt;contains(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160; </div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>) {</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;      <span class="keywordflow">if</span> (!isa&lt;PHINode&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &amp;&amp; !<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.isTerminator() &amp;&amp;</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;          !<a class="code" href="namespacellvm.html#abe76d72cda6b2b4562c72accb510040b">isSafeToSpeculativelyExecute</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;        <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Cannot flatten because instruction may have &quot;</span></div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;                             <span class="stringliteral">&quot;side effects: &quot;</span>;</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;                   <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.dump());</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;      }</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;      <span class="comment">// The execution count of the outer loop&#39;s iteration instructions</span></div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;      <span class="comment">// (increment, compare and branch) will be increased, but the</span></div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;      <span class="comment">// equivalent instructions will be removed from the inner loop, so</span></div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;      <span class="comment">// they make a net difference of zero.</span></div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;      <span class="keywordflow">if</span> (IterationInstructions.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a1f475b0df44ebd7169e720fa1bf9169e">count</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;      <span class="comment">// The unconditional branch to the inner loop&#39;s header will turn into</span></div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;      <span class="comment">// a fall-through, so adds no cost.</span></div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;      <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *Br = dyn_cast&lt;BranchInst&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;      <span class="keywordflow">if</span> (Br &amp;&amp; Br-&gt;<a class="code" href="classllvm_1_1BranchInst.html#ad56f6a9b5cd05940017c4544df48bc30">isUnconditional</a>() &amp;&amp;</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;          Br-&gt;<a class="code" href="classllvm_1_1BranchInst.html#ad97f2e60cf22f15e0cf617af52309031">getSuccessor</a>(0) == FI.InnerLoop-&gt;getHeader())</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;      <span class="comment">// Multiplies of the outer iteration variable and inner iteration</span></div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;      <span class="comment">// count will be optimised out.</span></div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a8f3259c7db0ce698876fe79f45b80a32">m_c_Mul</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(FI.OuterInductionPHI),</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;                            <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(FI.InnerTripCount))))</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;      <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> <a class="code" href="InlineOrder_8cpp.html#a7ee6f0cb51c3b9056199e9a0001fe8c3a20b4f77bd00b4f63a49ec8e08f3bf6a6">Cost</a> =</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;          <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>-&gt;<a class="code" href="classllvm_1_1TargetTransformInfo.html#ac77dbedcfd916a5c9b58e753b2678a98">getInstructionCost</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1TargetTransformInfo.html#a706f223f760b55668fbae74202b816bba7f80055e1969cb850739546467460ad8">TargetTransformInfo::TCK_SizeAndLatency</a>);</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Cost &quot;</span> &lt;&lt; <a class="code" href="InlineOrder_8cpp.html#a7ee6f0cb51c3b9056199e9a0001fe8c3a20b4f77bd00b4f63a49ec8e08f3bf6a6">Cost</a> &lt;&lt; <span class="stringliteral">&quot;: &quot;</span>; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.dump());</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;      RepeatedInstrCost += <a class="code" href="InlineOrder_8cpp.html#a7ee6f0cb51c3b9056199e9a0001fe8c3a20b4f77bd00b4f63a49ec8e08f3bf6a6">Cost</a>;</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    }</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;  }</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160; </div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Cost of instructions that will be repeated: &quot;</span></div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;                    &lt;&lt; RepeatedInstrCost &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;  <span class="comment">// Bail out if flattening the loops would cause instructions in the outer</span></div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;  <span class="comment">// loop but not in the inner loop to be executed extra times.</span></div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;  <span class="keywordflow">if</span> (RepeatedInstrCost &gt; <a class="code" href="LoopFlatten_8cpp.html#a2f931b2aee2a78ca4678a2a25c530584">RepeatedInstructionThreshold</a>) {</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;checkOuterLoopInsts: not profitable, bailing.\n&quot;</span>);</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;  }</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160; </div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;checkOuterLoopInsts: OK\n&quot;</span>);</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;}</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160; </div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160; </div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160; </div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;<span class="comment">// We require all uses of both induction variables to match this pattern:</span></div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;<span class="comment">//   (OuterPHI * InnerTripCount) + InnerPHI</span></div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;<span class="comment">// Any uses of the induction variables not matching that pattern would</span></div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;<span class="comment">// require a div/mod to reconstruct in the flattened loop, so the</span></div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;<span class="comment">// transformation wouldn&#39;t be profitable.</span></div>
<div class="line"><a name="l00610"></a><span class="lineno"><a class="line" href="LoopFlatten_8cpp.html#a7498ddf1751f24dcc9fdbe84faf93375">  610</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="LoopFlatten_8cpp.html#a7498ddf1751f24dcc9fdbe84faf93375">checkIVUsers</a>(FlattenInfo &amp;FI) {</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;  <span class="comment">// Check that all uses of the inner loop&#39;s induction variable match the</span></div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;  <span class="comment">// expected pattern, recording the uses of the outer IV.</span></div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;Value *, 4&gt;</a> ValidOuterPHIUses;</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;  <span class="keywordflow">if</span> (!FI.checkInnerInductionPhiUsers(ValidOuterPHIUses))</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160; </div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;  <span class="comment">// Check that there are no uses of the outer IV other than the ones found</span></div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;  <span class="comment">// as part of the pattern above.</span></div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;  <span class="keywordflow">if</span> (!FI.checkOuterInductionPhiUsers(ValidOuterPHIUses))</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160; </div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;checkIVUsers: OK\n&quot;</span>;</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;             <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Found &quot;</span> &lt;&lt; FI.LinearIVUses.size()</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot; value(s) that can be replaced:\n&quot;</span>;</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;             <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V : FI.LinearIVUses) {</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;               <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  &quot;</span>;</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;               V-&gt;<a class="code" href="classllvm_1_1Value.html#af7dca9a9e816ef69fd9e9467f64f72b4">dump</a>();</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;             });</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;}</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160; </div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;<span class="comment">// Return an OverflowResult dependant on if overflow of the multiplication of</span></div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;<span class="comment">// InnerTripCount and OuterTripCount can be assumed not to happen.</span></div>
<div class="line"><a name="l00634"></a><span class="lineno"><a class="line" href="LoopFlatten_8cpp.html#aa89462fcd72ee43d1b3f2df0a61a698e">  634</a></span>&#160;<span class="keyword">static</span> <a class="code" href="namespacellvm.html#a06c60fef11885eadbda4026c83ae9a13">OverflowResult</a> <a class="code" href="LoopFlatten_8cpp.html#aa89462fcd72ee43d1b3f2df0a61a698e">checkOverflow</a>(FlattenInfo &amp;FI, <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *DT,</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;                                    <a class="code" href="classllvm_1_1AssumptionCache.html">AssumptionCache</a> *AC) {</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = FI.OuterLoop-&gt;getHeader()-&gt;getParent();</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;getParent()-&gt;getDataLayout();</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160; </div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;  <span class="comment">// For debugging/testing.</span></div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="LoopFlatten_8cpp.html#a15d34f08d47ed31645bcff68d7014127">AssumeNoOverflow</a>)</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a06c60fef11885eadbda4026c83ae9a13a56624a95592b438e05ab500a6a200a03">OverflowResult::NeverOverflows</a>;</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160; </div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;  <span class="comment">// Check if the multiply could not overflow due to known ranges of the</span></div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;  <span class="comment">// input values.</span></div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;  <a class="code" href="namespacellvm.html#a06c60fef11885eadbda4026c83ae9a13">OverflowResult</a> <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">OR</a> = <a class="code" href="namespacellvm.html#a24b63d7ba7f620e5f036b2d188393245">computeOverflowForUnsignedMul</a>(</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;      FI.InnerTripCount, FI.OuterTripCount, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, AC,</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;      FI.OuterLoop-&gt;getLoopPreheader()-&gt;getTerminator(), DT);</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">OR</a> != <a class="code" href="namespacellvm.html#a06c60fef11885eadbda4026c83ae9a13ad4d9862eafa015a05101d9f662bb153a">OverflowResult::MayOverflow</a>)</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">OR</a>;</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160; </div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V : FI.LinearIVUses) {</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *U : V-&gt;<a class="code" href="classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">users</a>()) {</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a> = dyn_cast&lt;GetElementPtrInst&gt;(U)) {</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *GEPUser : U-&gt;<a class="code" href="classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">users</a>()) {</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;          <span class="keyword">auto</span> *GEPUserInst = cast&lt;Instruction&gt;(GEPUser);</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;          <span class="keywordflow">if</span> (!isa&lt;LoadInst&gt;(GEPUserInst) &amp;&amp;</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;              !(isa&lt;StoreInst&gt;(GEPUserInst) &amp;&amp;</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;                <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a> == GEPUserInst-&gt;getOperand(1)))</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;          <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm.html#a38c5c77cf4a7ffed6a6576ebebd1929a">isGuaranteedToExecuteForEveryIteration</a>(GEPUserInst,</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;                                                      FI.InnerLoop))</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;          <span class="comment">// The IV is used as the operand of a GEP which dominates the loop</span></div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;          <span class="comment">// latch, and the IV is at least as wide as the address space of the</span></div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;          <span class="comment">// GEP. In this case, the GEP would wrap around the address space</span></div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;          <span class="comment">// before the IV increment wraps, which would be UB.</span></div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>-&gt;isInBounds() &amp;&amp;</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;              V-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a13e877ef779ba7a0688081079f4f9b03">getIntegerBitWidth</a>() &gt;=</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;                  <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getPointerTypeSizeInBits(<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>-&gt;getType())) {</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;            <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;                <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;use of linear IV would be UB if overflow occurred: &quot;</span>;</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;                <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>-&gt;dump());</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a06c60fef11885eadbda4026c83ae9a13a56624a95592b438e05ab500a6a200a03">OverflowResult::NeverOverflows</a>;</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;          }</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;        }</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;      }</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    }</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;  }</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160; </div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a06c60fef11885eadbda4026c83ae9a13ad4d9862eafa015a05101d9f662bb153a">OverflowResult::MayOverflow</a>;</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;}</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160; </div>
<div class="line"><a name="l00683"></a><span class="lineno"><a class="line" href="LoopFlatten_8cpp.html#a7fb79db9841b2f85cc3686661675c41a">  683</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="LoopFlatten_8cpp.html#a7fb79db9841b2f85cc3686661675c41a">CanFlattenLoopPair</a>(FlattenInfo &amp;FI, <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *DT, <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> *LI,</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;                               <a class="code" href="classllvm_1_1ScalarEvolution.html">ScalarEvolution</a> *SE, <a class="code" href="classllvm_1_1AssumptionCache.html">AssumptionCache</a> *AC,</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;                               <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a> *<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>) {</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;Instruction *, 8&gt;</a> IterationInstructions;</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="LoopFlatten_8cpp.html#a9bbea577bf401c708dc854d2dad600af">findLoopComponents</a>(FI.InnerLoop, IterationInstructions,</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;                          FI.InnerInductionPHI, FI.InnerTripCount,</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;                          FI.InnerIncrement, FI.InnerBranch, SE, FI.Widened))</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="LoopFlatten_8cpp.html#a9bbea577bf401c708dc854d2dad600af">findLoopComponents</a>(FI.OuterLoop, IterationInstructions,</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;                          FI.OuterInductionPHI, FI.OuterTripCount,</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;                          FI.OuterIncrement, FI.OuterBranch, SE, FI.Widened))</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160; </div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;  <span class="comment">// Both of the loop trip count values must be invariant in the outer loop</span></div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;  <span class="comment">// (non-instructions are all inherently invariant).</span></div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;  <span class="keywordflow">if</span> (!FI.OuterLoop-&gt;isLoopInvariant(FI.InnerTripCount)) {</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;inner loop trip count not invariant\n&quot;</span>);</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;  }</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;  <span class="keywordflow">if</span> (!FI.OuterLoop-&gt;isLoopInvariant(FI.OuterTripCount)) {</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;outer loop trip count not invariant\n&quot;</span>);</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;  }</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160; </div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="LoopFlatten_8cpp.html#aadc8ada3f35f60d30e774a6daf23d02f">checkPHIs</a>(FI, <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>))</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160; </div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;  <span class="comment">// FIXME: it should be possible to handle different types correctly.</span></div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;  <span class="keywordflow">if</span> (FI.InnerInductionPHI-&gt;getType() != FI.OuterInductionPHI-&gt;getType())</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160; </div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="LoopFlatten_8cpp.html#af4f43e9c3f0bc709f58c5c9a2d92eed5">checkOuterLoopInsts</a>(FI, IterationInstructions, <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>))</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160; </div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;  <span class="comment">// Find the values in the loop that can be replaced with the linearized</span></div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;  <span class="comment">// induction variable, and check that there are no other uses of the inner</span></div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;  <span class="comment">// or outer induction variable. If there were, we could still do this</span></div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;  <span class="comment">// transformation, but we&#39;d have to insert a div/mod to calculate the</span></div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;  <span class="comment">// original IVs, so it wouldn&#39;t be profitable.</span></div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="LoopFlatten_8cpp.html#a7498ddf1751f24dcc9fdbe84faf93375">checkIVUsers</a>(FI))</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160; </div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;CanFlattenLoopPair: OK\n&quot;</span>);</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;}</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160; </div>
<div class="line"><a name="l00729"></a><span class="lineno"><a class="line" href="LoopFlatten_8cpp.html#a5e53eb62d81882a5586764e2a9378a49">  729</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="LoopFlatten_8cpp.html#a5e53eb62d81882a5586764e2a9378a49">DoFlattenLoopPair</a>(FlattenInfo &amp;FI, <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *DT, <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> *LI,</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;                              <a class="code" href="classllvm_1_1ScalarEvolution.html">ScalarEvolution</a> *SE, <a class="code" href="classllvm_1_1AssumptionCache.html">AssumptionCache</a> *AC,</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;                              <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a> *<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>, <a class="code" href="classllvm_1_1LPMUpdater.html">LPMUpdater</a> *U,</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;                              <a class="code" href="classllvm_1_1MemorySSAUpdater.html">MemorySSAUpdater</a> *MSSAU) {</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = FI.OuterLoop-&gt;getHeader()-&gt;getParent();</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Checks all passed, doing the transformation\n&quot;</span>);</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;  {</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;    <span class="keyword">using namespace </span>ore;</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;    <a class="code" href="classllvm_1_1OptimizationRemark.html">OptimizationRemark</a> <a class="code" href="namespacellvm.html#ac226f3d2b9ca090171a8e0a8cb92c343a91921ada405fd6ba65dff028df047cb6">Remark</a>(<a class="code" href="LoopFlatten_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a>, <span class="stringliteral">&quot;Flattened&quot;</span>, FI.InnerLoop-&gt;getStartLoc(),</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;                              FI.InnerLoop-&gt;getHeader());</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;    <a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html">OptimizationRemarkEmitter</a> ORE(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    <a class="code" href="namespacellvm.html#ac226f3d2b9ca090171a8e0a8cb92c343a91921ada405fd6ba65dff028df047cb6">Remark</a> &lt;&lt; <span class="stringliteral">&quot;Flattened into outer loop&quot;</span>;</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;    ORE.<a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html#aae6a98aea85aa3af87357cc5448db499">emit</a>(<a class="code" href="namespacellvm.html#ac226f3d2b9ca090171a8e0a8cb92c343a91921ada405fd6ba65dff028df047cb6">Remark</a>);</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;  }</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160; </div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *NewTripCount = <a class="code" href="Reassociate_8cpp.html#abe860e1e952cdc501c96210be5e00805">BinaryOperator::CreateMul</a>(</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;      FI.InnerTripCount, FI.OuterTripCount, <span class="stringliteral">&quot;flatten.tripcount&quot;</span>,</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;      FI.OuterLoop-&gt;getLoopPreheader()-&gt;getTerminator());</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Created new trip count in preheader: &quot;</span>;</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;             NewTripCount-&gt;<a class="code" href="classllvm_1_1Value.html#af7dca9a9e816ef69fd9e9467f64f72b4">dump</a>());</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160; </div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;  <span class="comment">// Fix up PHI nodes that take values from the inner loop back-edge, which</span></div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;  <span class="comment">// we are about to remove.</span></div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;  FI.InnerInductionPHI-&gt;removeIncomingValue(FI.InnerLoop-&gt;getLoopLatch());</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160; </div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;  <span class="comment">// The old Phi will be optimised away later, but for now we can&#39;t leave</span></div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;  <span class="comment">// leave it in an invalid state, so are updating them too.</span></div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *<a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a> : FI.InnerPHIsToTransform)</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;    <a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a>-&gt;removeIncomingValue(FI.InnerLoop-&gt;getLoopLatch());</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160; </div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;  <span class="comment">// Modify the trip count of the outer loop to be the product of the two</span></div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;  <span class="comment">// trip counts.</span></div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;  cast&lt;User&gt;(FI.OuterBranch-&gt;getCondition())-&gt;setOperand(1, NewTripCount);</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160; </div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;  <span class="comment">// Replace the inner loop backedge with an unconditional branch to the exit.</span></div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *InnerExitBlock = FI.InnerLoop-&gt;getExitBlock();</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *InnerExitingBlock = FI.InnerLoop-&gt;getExitingBlock();</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;  InnerExitingBlock-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>()-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae6b978645b8ac72d1a35e1298ffdd4f0">eraseFromParent</a>();</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;  <a class="code" href="classllvm_1_1BranchInst.html#a38df51256d4b415b6a817b5e1c6d4d36">BranchInst::Create</a>(InnerExitBlock, InnerExitingBlock);</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160; </div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;  <span class="comment">// Update the DomTree and MemorySSA.</span></div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;  DT-&gt;<a class="code" href="classllvm_1_1DominatorTreeBase.html#ab0f09aefdf088f84a0bff7cba86454b4">deleteEdge</a>(InnerExitingBlock, FI.InnerLoop-&gt;getHeader());</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;  <span class="keywordflow">if</span> (MSSAU)</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;    MSSAU-&gt;<a class="code" href="classllvm_1_1MemorySSAUpdater.html#a4953231268ee21e95c3740e51ab37a96">removeEdge</a>(InnerExitingBlock, FI.InnerLoop-&gt;getHeader());</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160; </div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;  <span class="comment">// Replace all uses of the polynomial calculated from the two induction</span></div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;  <span class="comment">// variables with the one new one.</span></div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;  <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>(FI.OuterInductionPHI-&gt;getParent()-&gt;getTerminator());</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V : FI.LinearIVUses) {</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *OuterValue = FI.OuterInductionPHI;</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;    <span class="keywordflow">if</span> (FI.Widened)</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;      OuterValue = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateTrunc(FI.OuterInductionPHI, V-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(),</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;                                       <span class="stringliteral">&quot;flatten.trunciv&quot;</span>);</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160; </div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Replacing: &quot;</span>; V-&gt;<a class="code" href="classllvm_1_1Value.html#af7dca9a9e816ef69fd9e9467f64f72b4">dump</a>(); <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;with:      &quot;</span>;</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;               OuterValue-&gt;<a class="code" href="classllvm_1_1Value.html#af7dca9a9e816ef69fd9e9467f64f72b4">dump</a>());</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;    V-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(OuterValue);</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;  }</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160; </div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;  <span class="comment">// Tell LoopInfo, SCEV and the pass manager that the inner loop has been</span></div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;  <span class="comment">// deleted, and invalidate any outer loop information.</span></div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;  SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#a592bdd7731b14ff4ff5d646f6f399900">forgetLoop</a>(FI.OuterLoop);</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;  SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#a830ba09d5969cd66878b05c17fdf66b6">forgetBlockAndLoopDispositions</a>();</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;  <span class="keywordflow">if</span> (U)</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;    U-&gt;<a class="code" href="classllvm_1_1LPMUpdater.html#ad898592a9fdc638d33b6b5cf0eba2bbe">markLoopAsDeleted</a>(*FI.InnerLoop, FI.InnerLoop-&gt;getName());</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;  LI-&gt;<a class="code" href="classllvm_1_1LoopInfo.html#ab508a6297bcb823ca9d561facc241470">erase</a>(FI.InnerLoop);</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160; </div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;  <span class="comment">// Increment statistic value.</span></div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;  NumFlattened++;</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160; </div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;}</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160; </div>
<div class="line"><a name="l00802"></a><span class="lineno"><a class="line" href="LoopFlatten_8cpp.html#a0fa90c2a513cc9801d885d999ddac777">  802</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="LoopFlatten_8cpp.html#a0fa90c2a513cc9801d885d999ddac777">CanWidenIV</a>(FlattenInfo &amp;FI, <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *DT, <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> *LI,</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;                       <a class="code" href="classllvm_1_1ScalarEvolution.html">ScalarEvolution</a> *SE, <a class="code" href="classllvm_1_1AssumptionCache.html">AssumptionCache</a> *AC,</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;                       <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a> *<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>) {</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="LoopFlatten_8cpp.html#a4aa9efb1877c0a4aa735be1395c60637">WidenIV</a>) {</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Widening the IVs is disabled\n&quot;</span>);</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;  }</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160; </div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Try widening the IVs\n&quot;</span>);</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;  <a class="code" href="classllvm_1_1Module.html">Module</a> *<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a> = FI.InnerLoop-&gt;getHeader()-&gt;getParent()-&gt;getParent();</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;  <span class="keyword">auto</span> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>-&gt;getDataLayout();</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;  <span class="keyword">auto</span> *InnerType = FI.InnerInductionPHI-&gt;getType();</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;  <span class="keyword">auto</span> *OuterType = FI.OuterInductionPHI-&gt;getType();</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;  <span class="keywordtype">unsigned</span> MaxLegalSize = <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getLargestLegalIntTypeSizeInBits();</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;  <span class="keyword">auto</span> *MaxLegalType = <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getLargestLegalIntType(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>-&gt;getContext());</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160; </div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;  <span class="comment">// If both induction types are less than the maximum legal integer width,</span></div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;  <span class="comment">// promote both to the widest type available so we know calculating</span></div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;  <span class="comment">// (OuterTripCount * InnerTripCount) as the new trip count is safe.</span></div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;  <span class="keywordflow">if</span> (InnerType != OuterType ||</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;      InnerType-&gt;getScalarSizeInBits() &gt;= MaxLegalSize ||</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;      MaxLegalType-&gt;getScalarSizeInBits() &lt;</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;          InnerType-&gt;getScalarSizeInBits() * 2) {</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Can&#39;t widen the IV\n&quot;</span>);</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;  }</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160; </div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;  <a class="code" href="classllvm_1_1SCEVExpander.html">SCEVExpander</a> <a class="code" href="VirtRegMap_8cpp.html#a1ad52109a2ff430460c8776286b97b2e">Rewriter</a>(*SE, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <span class="stringliteral">&quot;loopflatten&quot;</span>);</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;WeakTrackingVH, 4&gt;</a> DeadInsts;</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;  <span class="keywordtype">unsigned</span> ElimExt = 0;</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;  <span class="keywordtype">unsigned</span> Widened = 0;</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160; </div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;  <span class="keyword">auto</span> CreateWideIV = [&amp;](<a class="code" href="structllvm_1_1WideIVInfo.html">WideIVInfo</a> WideIV, <span class="keywordtype">bool</span> &amp;<a class="code" href="LoopDeletion_8cpp.html#a0f1c83c3d08d80b12c424962a5e94ce8a5fe6005bf6e415c950c011fb65f12b8f">Deleted</a>) -&gt; <span class="keywordtype">bool</span> {</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;    <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *WidePhi =</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;        <a class="code" href="namespacellvm.html#a35edc71a3e9b62bcfa5b80ae369515d9">createWideIV</a>(WideIV, LI, SE, <a class="code" href="VirtRegMap_8cpp.html#a1ad52109a2ff430460c8776286b97b2e">Rewriter</a>, DT, DeadInsts, ElimExt, Widened,</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;                     <span class="keyword">true</span> <span class="comment">/* HasGuards */</span>, <span class="keyword">true</span> <span class="comment">/* UsePostIncrementRanges */</span>);</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;    <span class="keywordflow">if</span> (!WidePhi)</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Created wide phi: &quot;</span>; WidePhi-&gt;<a class="code" href="classllvm_1_1Value.html#af7dca9a9e816ef69fd9e9467f64f72b4">dump</a>());</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Deleting old phi: &quot;</span>; WideIV.<a class="code" href="structllvm_1_1WideIVInfo.html#a882fc540d5e5234ddf6a9f880e3f5a9b">NarrowIV</a>-&gt;<a class="code" href="classllvm_1_1Value.html#af7dca9a9e816ef69fd9e9467f64f72b4">dump</a>());</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;    <a class="code" href="LoopDeletion_8cpp.html#a0f1c83c3d08d80b12c424962a5e94ce8a5fe6005bf6e415c950c011fb65f12b8f">Deleted</a> = <a class="code" href="namespacellvm.html#ad3cf19784335900227e275fd488e4727">RecursivelyDeleteDeadPHINode</a>(WideIV.<a class="code" href="structllvm_1_1WideIVInfo.html#a882fc540d5e5234ddf6a9f880e3f5a9b">NarrowIV</a>);</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;  };</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160; </div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="LoopDeletion_8cpp.html#a0f1c83c3d08d80b12c424962a5e94ce8a5fe6005bf6e415c950c011fb65f12b8f">Deleted</a>;</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;  <span class="keywordflow">if</span> (!CreateWideIV({FI.InnerInductionPHI, MaxLegalType, <span class="keyword">false</span>}, <a class="code" href="LoopDeletion_8cpp.html#a0f1c83c3d08d80b12c424962a5e94ce8a5fe6005bf6e415c950c011fb65f12b8f">Deleted</a>))</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;  <span class="comment">// Add the narrow phi to list, so that it will be adjusted later when the</span></div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;  <span class="comment">// the transformation is performed.</span></div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="LoopDeletion_8cpp.html#a0f1c83c3d08d80b12c424962a5e94ce8a5fe6005bf6e415c950c011fb65f12b8f">Deleted</a>)</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;    FI.InnerPHIsToTransform.insert(FI.InnerInductionPHI);</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160; </div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;  <span class="keywordflow">if</span> (!CreateWideIV({FI.OuterInductionPHI, MaxLegalType, <span class="keyword">false</span>}, <a class="code" href="LoopDeletion_8cpp.html#a0f1c83c3d08d80b12c424962a5e94ce8a5fe6005bf6e415c950c011fb65f12b8f">Deleted</a>))</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160; </div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Widened &amp;&amp; <span class="stringliteral">&quot;Widened IV expected&quot;</span>);</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;  FI.Widened = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160; </div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;  <span class="comment">// Save the old/narrow induction phis, which we need to ignore in CheckPHIs.</span></div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;  FI.NarrowInnerInductionPHI = FI.InnerInductionPHI;</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;  FI.NarrowOuterInductionPHI = FI.OuterInductionPHI;</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160; </div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;  <span class="comment">// After widening, rediscover all the loop components.</span></div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="LoopFlatten_8cpp.html#a7fb79db9841b2f85cc3686661675c41a">CanFlattenLoopPair</a>(FI, DT, LI, SE, AC, <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>);</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;}</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160; </div>
<div class="line"><a name="l00868"></a><span class="lineno"><a class="line" href="LoopFlatten_8cpp.html#a23ea92a71424abe65c34183fd062d0fb">  868</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="LoopFlatten_8cpp.html#a23ea92a71424abe65c34183fd062d0fb">FlattenLoopPair</a>(FlattenInfo &amp;FI, <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *DT, <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> *LI,</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;                            <a class="code" href="classllvm_1_1ScalarEvolution.html">ScalarEvolution</a> *SE, <a class="code" href="classllvm_1_1AssumptionCache.html">AssumptionCache</a> *AC,</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;                            <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a> *<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>, <a class="code" href="classllvm_1_1LPMUpdater.html">LPMUpdater</a> *U,</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;                            <a class="code" href="classllvm_1_1MemorySSAUpdater.html">MemorySSAUpdater</a> *MSSAU) {</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;      <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Loop flattening running on outer loop &quot;</span></div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;             &lt;&lt; FI.OuterLoop-&gt;getHeader()-&gt;getName() &lt;&lt; <span class="stringliteral">&quot; and inner loop &quot;</span></div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;             &lt;&lt; FI.InnerLoop-&gt;getHeader()-&gt;getName() &lt;&lt; <span class="stringliteral">&quot; in &quot;</span></div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;             &lt;&lt; FI.OuterLoop-&gt;getHeader()-&gt;getParent()-&gt;getName() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160; </div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="LoopFlatten_8cpp.html#a7fb79db9841b2f85cc3686661675c41a">CanFlattenLoopPair</a>(FI, DT, LI, SE, AC, <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>))</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160; </div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;  <span class="comment">// Check if we can widen the induction variables to avoid overflow checks.</span></div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;  <span class="keywordtype">bool</span> CanFlatten = <a class="code" href="LoopFlatten_8cpp.html#a0fa90c2a513cc9801d885d999ddac777">CanWidenIV</a>(FI, DT, LI, SE, AC, <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>);</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160; </div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;  <span class="comment">// It can happen that after widening of the IV, flattening may not be</span></div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;  <span class="comment">// possible/happening, e.g. when it is deemed unprofitable. So bail here if</span></div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;  <span class="comment">// that is the case.</span></div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;  <span class="comment">// TODO: IV widening without performing the actual flattening transformation</span></div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;  <span class="comment">// is not ideal. While this codegen change should not matter much, it is an</span></div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;  <span class="comment">// unnecessary change which is better to avoid. It&#39;s unlikely this happens</span></div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;  <span class="comment">// often, because if it&#39;s unprofitibale after widening, it should be</span></div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;  <span class="comment">// unprofitabe before widening as checked in the first round of checks. But</span></div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;  <span class="comment">// &#39;RepeatedInstructionThreshold&#39; is set to only 2, which can probably be</span></div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;  <span class="comment">// relaxed. Because this is making a code change (the IV widening, but not</span></div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;  <span class="comment">// the flattening), we return true here.</span></div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;  <span class="keywordflow">if</span> (FI.Widened &amp;&amp; !CanFlatten)</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160; </div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;  <span class="comment">// If we have widened and can perform the transformation, do that here.</span></div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;  <span class="keywordflow">if</span> (CanFlatten)</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="LoopFlatten_8cpp.html#a5e53eb62d81882a5586764e2a9378a49">DoFlattenLoopPair</a>(FI, DT, LI, SE, AC, <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>, U, MSSAU);</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160; </div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;  <span class="comment">// Otherwise, if we haven&#39;t widened the IV, check if the new iteration</span></div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;  <span class="comment">// variable might overflow. In this case, we need to version the loop, and</span></div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;  <span class="comment">// select the original version at runtime if the iteration space is too</span></div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;  <span class="comment">// large.</span></div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;  <span class="comment">// TODO: We currently don&#39;t version the loop.</span></div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;  <a class="code" href="namespacellvm.html#a06c60fef11885eadbda4026c83ae9a13">OverflowResult</a> <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">OR</a> = <a class="code" href="LoopFlatten_8cpp.html#aa89462fcd72ee43d1b3f2df0a61a698e">checkOverflow</a>(FI, DT, AC);</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">OR</a> == <a class="code" href="namespacellvm.html#a06c60fef11885eadbda4026c83ae9a13a9ac50ff0c308dad407db9f09e418363e">OverflowResult::AlwaysOverflowsHigh</a> ||</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;      <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">OR</a> == <a class="code" href="namespacellvm.html#a06c60fef11885eadbda4026c83ae9a13ac8cc76d76703c81c16e939be370683c1">OverflowResult::AlwaysOverflowsLow</a>) {</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Multiply would always overflow, so not profitable\n&quot;</span>);</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">OR</a> == <a class="code" href="namespacellvm.html#a06c60fef11885eadbda4026c83ae9a13ad4d9862eafa015a05101d9f662bb153a">OverflowResult::MayOverflow</a>) {</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Multiply might overflow, not flattening\n&quot;</span>);</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;  }</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160; </div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Multiply cannot overflow, modifying loop in-place\n&quot;</span>);</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="LoopFlatten_8cpp.html#a5e53eb62d81882a5586764e2a9378a49">DoFlattenLoopPair</a>(FI, DT, LI, SE, AC, <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>, U, MSSAU);</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;}</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160; </div>
<div class="line"><a name="l00921"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopFlattenPass.html#af1670b8924fecfd8a7f0c4dc140bf603">  921</a></span>&#160;<a class="code" href="classllvm_1_1PreservedAnalyses.html">PreservedAnalyses</a> <a class="code" href="classllvm_1_1LoopFlattenPass.html#af1670b8924fecfd8a7f0c4dc140bf603">LoopFlattenPass::run</a>(<a class="code" href="classllvm_1_1LoopNest.html">LoopNest</a> &amp;LN, <a class="code" href="classllvm_1_1AnalysisManager.html">LoopAnalysisManager</a> &amp;<a class="code" href="PassBuilderBindings_8cpp.html#a7cfe61417446ebb812e81293bde22a29">LAM</a>,</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;                                       <a class="code" href="structllvm_1_1LoopStandardAnalysisResults.html">LoopStandardAnalysisResults</a> &amp;AR,</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;                                       <a class="code" href="classllvm_1_1LPMUpdater.html">LPMUpdater</a> &amp;U) {</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160; </div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160; </div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;  std::optional&lt;MemorySSAUpdater&gt; MSSAU;</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;  <span class="keywordflow">if</span> (AR.<a class="code" href="structllvm_1_1LoopStandardAnalysisResults.html#a1cfb392c267da10531478c2f42baa603">MSSA</a>) {</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;    MSSAU = <a class="code" href="classllvm_1_1MemorySSAUpdater.html">MemorySSAUpdater</a>(AR.<a class="code" href="structllvm_1_1LoopStandardAnalysisResults.html#a1cfb392c267da10531478c2f42baa603">MSSA</a>);</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#aa29fe161c408879ada30c90ebbf55dcf">VerifyMemorySSA</a>)</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;      AR.<a class="code" href="structllvm_1_1LoopStandardAnalysisResults.html#a1cfb392c267da10531478c2f42baa603">MSSA</a>-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#a88b10d37f671e58cf138ac84a8257c17">verifyMemorySSA</a>();</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;  }</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160; </div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;  <span class="comment">// The loop flattening pass requires loops to be</span></div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;  <span class="comment">// in simplified form, and also needs LCSSA. Running</span></div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;  <span class="comment">// this pass will simplify all loops that contain inner loops,</span></div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;  <span class="comment">// regardless of whether anything ends up being flattened.</span></div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Loop.html">Loop</a> *InnerLoop : LN.<a class="code" href="classllvm_1_1LoopNest.html#a76910b27c22c1ec00680bc5362806678">getLoops</a>()) {</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;    <span class="keyword">auto</span> *OuterLoop = InnerLoop-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a62733c3335a87750623dbfc5b3ae4f6c">getParentLoop</a>();</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;    <span class="keywordflow">if</span> (!OuterLoop)</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;    FlattenInfo FI(OuterLoop, InnerLoop);</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;    Changed |= <a class="code" href="LoopFlatten_8cpp.html#a23ea92a71424abe65c34183fd062d0fb">FlattenLoopPair</a>(FI, &amp;AR.<a class="code" href="structllvm_1_1LoopStandardAnalysisResults.html#aaa96df870a1b3d7ffc56bec3eb0b0cff">DT</a>, &amp;AR.<a class="code" href="structllvm_1_1LoopStandardAnalysisResults.html#aa09379aa4435be95eb717dd9b5d8b4c5">LI</a>, &amp;AR.<a class="code" href="structllvm_1_1LoopStandardAnalysisResults.html#a124376878e24aef4252795ba9fea420f">SE</a>, &amp;AR.<a class="code" href="structllvm_1_1LoopStandardAnalysisResults.html#a902b4712394a3b3450893634b3302893">AC</a>, &amp;AR.<a class="code" href="structllvm_1_1LoopStandardAnalysisResults.html#a3444a9359f5f17f1694f82c41d5fd574">TTI</a>, &amp;U,</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;                               MSSAU ? &amp;*MSSAU : <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;  }</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160; </div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;  <span class="keywordflow">if</span> (!Changed)</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1PreservedAnalyses.html#a1258a1ff55557c27684010ebd7283712">PreservedAnalyses::all</a>();</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160; </div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;  <span class="keywordflow">if</span> (AR.<a class="code" href="structllvm_1_1LoopStandardAnalysisResults.html#a1cfb392c267da10531478c2f42baa603">MSSA</a> &amp;&amp; <a class="code" href="namespacellvm.html#aa29fe161c408879ada30c90ebbf55dcf">VerifyMemorySSA</a>)</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;    AR.<a class="code" href="structllvm_1_1LoopStandardAnalysisResults.html#a1cfb392c267da10531478c2f42baa603">MSSA</a>-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#a88b10d37f671e58cf138ac84a8257c17">verifyMemorySSA</a>();</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160; </div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;  <span class="keyword">auto</span> PA = <a class="code" href="namespacellvm.html#ac7294ba4e105807674fe3a394437fcc1">getLoopPassPreservedAnalyses</a>();</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;  <span class="keywordflow">if</span> (AR.<a class="code" href="structllvm_1_1LoopStandardAnalysisResults.html#a1cfb392c267da10531478c2f42baa603">MSSA</a>)</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;    PA.preserve&lt;<a class="code" href="classllvm_1_1MemorySSAAnalysis.html">MemorySSAAnalysis</a>&gt;();</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;  <span class="keywordflow">return</span> PA;</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="aLoopFlatten_8cpp_html_af4f43e9c3f0bc709f58c5c9a2d92eed5"><div class="ttname"><a href="LoopFlatten_8cpp.html#af4f43e9c3f0bc709f58c5c9a2d92eed5">checkOuterLoopInsts</a></div><div class="ttdeci">static bool checkOuterLoopInsts(FlattenInfo &amp;FI, SmallPtrSetImpl&lt; Instruction * &gt; &amp;IterationInstructions, const TargetTransformInfo *TTI)</div><div class="ttdef"><b>Definition:</b> <a href="LoopFlatten_8cpp_source.html#l00543">LoopFlatten.cpp:543</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstructionCost_html"><div class="ttname"><a href="classllvm_1_1InstructionCost.html">llvm::InstructionCost</a></div><div class="ttdef"><b>Definition:</b> <a href="InstructionCost_8h_source.html#l00029">InstructionCost.h:29</a></div></div>
<div class="ttc" id="aclassllvm_1_1PreservedAnalyses_html"><div class="ttname"><a href="classllvm_1_1PreservedAnalyses.html">llvm::PreservedAnalyses</a></div><div class="ttdoc">A set of analyses that are preserved following a run of a transformation pass.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00152">PassManager.h:152</a></div></div>
<div class="ttc" id="aAssumptionCache_8h_html"><div class="ttname"><a href="AssumptionCache_8h.html">AssumptionCache.h</a></div></div>
<div class="ttc" id="aLoopFlatten_8cpp_html_a23ea92a71424abe65c34183fd062d0fb"><div class="ttname"><a href="LoopFlatten_8cpp.html#a23ea92a71424abe65c34183fd062d0fb">FlattenLoopPair</a></div><div class="ttdeci">static bool FlattenLoopPair(FlattenInfo &amp;FI, DominatorTree *DT, LoopInfo *LI, ScalarEvolution *SE, AssumptionCache *AC, const TargetTransformInfo *TTI, LPMUpdater *U, MemorySSAUpdater *MSSAU)</div><div class="ttdef"><b>Definition:</b> <a href="LoopFlatten_8cpp_source.html#l00868">LoopFlatten.cpp:868</a></div></div>
<div class="ttc" id="anamespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">This is an optimization pass for GlobalISel generic memory operations.</div><div class="ttdef"><b>Definition:</b> <a href="AddressRanges_8h_source.html#l00018">AddressRanges.h:18</a></div></div>
<div class="ttc" id="anamespacellvm_html_a35edc71a3e9b62bcfa5b80ae369515d9"><div class="ttname"><a href="namespacellvm.html#a35edc71a3e9b62bcfa5b80ae369515d9">llvm::createWideIV</a></div><div class="ttdeci">PHINode * createWideIV(const WideIVInfo &amp;WI, LoopInfo *LI, ScalarEvolution *SE, SCEVExpander &amp;Rewriter, DominatorTree *DT, SmallVectorImpl&lt; WeakTrackingVH &gt; &amp;DeadInsts, unsigned &amp;NumElimExt, unsigned &amp;NumWidened, bool HasGuards, bool UsePostIncrementRanges)</div><div class="ttdoc">Widen Induction Variables - Extend the width of an IV to cover its widest uses.</div><div class="ttdef"><b>Definition:</b> <a href="SimplifyIndVar_8cpp_source.html#l02085">SimplifyIndVar.cpp:2085</a></div></div>
<div class="ttc" id="aclassllvm_1_1Loop_html_a7d7349c6beeae9b9ac526c9f74f4efdb"><div class="ttname"><a href="classllvm_1_1Loop.html#a7d7349c6beeae9b9ac526c9f74f4efdb">llvm::Loop::getLatchCmpInst</a></div><div class="ttdeci">ICmpInst * getLatchCmpInst() const</div><div class="ttdoc">Get the latch condition instruction.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8cpp_source.html#l00174">LoopInfo.cpp:174</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemorySSA_html_a88b10d37f671e58cf138ac84a8257c17"><div class="ttname"><a href="classllvm_1_1MemorySSA.html#a88b10d37f671e58cf138ac84a8257c17">llvm::MemorySSA::verifyMemorySSA</a></div><div class="ttdeci">void verifyMemorySSA(VerificationLevel=VerificationLevel::Fast) const</div><div class="ttdoc">Verify that MemorySSA is self consistent (IE definitions dominate all uses, uses appear in the right ...</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8cpp_source.html#l01863">MemorySSA.cpp:1863</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_ac77dbedcfd916a5c9b58e753b2678a98"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#ac77dbedcfd916a5c9b58e753b2678a98">llvm::TargetTransformInfo::getInstructionCost</a></div><div class="ttdeci">InstructionCost getInstructionCost(const User *U, ArrayRef&lt; const Value * &gt; Operands, TargetCostKind CostKind) const</div><div class="ttdoc">Estimate the cost of a given IR user when lowered.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l00230">TargetTransformInfo.cpp:230</a></div></div>
<div class="ttc" id="alib_2Target_2X86_2README_8txt_html_ac88fe1d3a61b056a4f64fbbb156a62ff"><div class="ttname"><a href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a></div><div class="ttdeci">We currently emits eax Perhaps this is what we really should generate is Is imull three or four cycles eax eax The current instruction priority is based on pattern complexity The former is more complex because it folds a load so the latter will not be emitted Perhaps we should use AddedComplexity to give LEA32r a higher priority We should always try to match LEA first since the LEA matching code does some estimate to determine whether the match is profitable if we care more about code then imull is better It s two bytes shorter than movl leal On a Pentium M</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2X86_2README_8txt_source.html#l00252">README.txt:252</a></div></div>
<div class="ttc" id="astructllvm_1_1LoopStandardAnalysisResults_html_a902b4712394a3b3450893634b3302893"><div class="ttname"><a href="structllvm_1_1LoopStandardAnalysisResults.html#a902b4712394a3b3450893634b3302893">llvm::LoopStandardAnalysisResults::AC</a></div><div class="ttdeci">AssumptionCache &amp; AC</div><div class="ttdef"><b>Definition:</b> <a href="LoopAnalysisManager_8h_source.html#l00053">LoopAnalysisManager.h:53</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">llvm::CmpInst::ICMP_EQ</a></div><div class="ttdeci">@ ICMP_EQ</div><div class="ttdoc">equal</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00739">InstrTypes.h:739</a></div></div>
<div class="ttc" id="anamespacellvm_html_a06c60fef11885eadbda4026c83ae9a13a56624a95592b438e05ab500a6a200a03"><div class="ttname"><a href="namespacellvm.html#a06c60fef11885eadbda4026c83ae9a13a56624a95592b438e05ab500a6a200a03">llvm::OverflowResult::NeverOverflows</a></div><div class="ttdeci">@ NeverOverflows</div><div class="ttdoc">Never overflows.</div></div>
<div class="ttc" id="aclassllvm_1_1DataLayout_html"><div class="ttname"><a href="classllvm_1_1DataLayout.html">llvm::DataLayout</a></div><div class="ttdoc">A parsed version of the target data layout string in and methods for querying it.</div><div class="ttdef"><b>Definition:</b> <a href="DataLayout_8h_source.html#l00110">DataLayout.h:110</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ISD_html_a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4"><div class="ttname"><a href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">llvm::ISD::OR</a></div><div class="ttdeci">@ OR</div><div class="ttdef"><b>Definition:</b> <a href="ISDOpcodes_8h_source.html#l00667">ISDOpcodes.h:667</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a3a402430a1bbe70a9282dcb0e0b6a2cd"><div class="ttname"><a href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">llvm::Value::hasOneUse</a></div><div class="ttdeci">bool hasOneUse() const</div><div class="ttdoc">Return true if there is exactly one use of this value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00434">Value.h:434</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78b"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">llvm::CmpInst::Predicate</a></div><div class="ttdeci">Predicate</div><div class="ttdoc">This enumeration lists the possible predicates for CmpInst subclasses.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00718">InstrTypes.h:718</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_afe3ce7fc89f36474eb0369cbb792c05a"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#afe3ce7fc89f36474eb0369cbb792c05a">llvm::ConstantInt::getType</a></div><div class="ttdeci">IntegerType * getType() const</div><div class="ttdoc">getType - Specialize the getType() method to always return an IntegerType, which reduces the amount o...</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00172">Constants.h:172</a></div></div>
<div class="ttc" id="aAMDGPURewriteUndefForPHI_8cpp_html_a2e83cb1bc3f5e8986cbd14575755a134"><div class="ttname"><a href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a></div><div class="ttdeci">Rewrite undef for PHI</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPURewriteUndefForPHI_8cpp_source.html#l00101">AMDGPURewriteUndefForPHI.cpp:101</a></div></div>
<div class="ttc" id="anamespacellvm_html_a24b63d7ba7f620e5f036b2d188393245"><div class="ttname"><a href="namespacellvm.html#a24b63d7ba7f620e5f036b2d188393245">llvm::computeOverflowForUnsignedMul</a></div><div class="ttdeci">OverflowResult computeOverflowForUnsignedMul(const Value *LHS, const Value *RHS, const DataLayout &amp;DL, AssumptionCache *AC, const Instruction *CxtI, const DominatorTree *DT, bool UseInstrInfo=true)</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l04953">ValueTracking.cpp:4953</a></div></div>
<div class="ttc" id="aScalarEvolutionExpander_8h_html"><div class="ttname"><a href="ScalarEvolutionExpander_8h.html">ScalarEvolutionExpander.h</a></div></div>
<div class="ttc" id="aTransforms_2Scalar_8h_html"><div class="ttname"><a href="Transforms_2Scalar_8h.html">Scalar.h</a></div></div>
<div class="ttc" id="aMemorySSAUpdater_8h_html"><div class="ttname"><a href="MemorySSAUpdater_8h.html">MemorySSAUpdater.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html"><div class="ttname"><a href="classllvm_1_1Function.html">llvm::Function</a></div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00059">Function.h:59</a></div></div>
<div class="ttc" id="aclassllvm_1_1Loop_html"><div class="ttname"><a href="classllvm_1_1Loop.html">llvm::Loop</a></div><div class="ttdoc">Represents a single loop in the control flow graph.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00547">LoopInfo.h:547</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_af7dca9a9e816ef69fd9e9467f64f72b4"><div class="ttname"><a href="classllvm_1_1Value.html#af7dca9a9e816ef69fd9e9467f64f72b4">llvm::Value::dump</a></div><div class="ttdeci">void dump() const</div><div class="ttdoc">Support for debugging, callable in GDB: V-&gt;dump()</div><div class="ttdef"><b>Definition:</b> <a href="AsmWriter_8cpp_source.html#l04942">AsmWriter.cpp:4942</a></div></div>
<div class="ttc" id="aPass_8h_html"><div class="ttname"><a href="Pass_8h.html">Pass.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_a04337b572d34ea413c35dbac5d75530b"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a04337b572d34ea413c35dbac5d75530b">llvm::LoopBase::contains</a></div><div class="ttdeci">bool contains(const LoopT *L) const</div><div class="ttdoc">Return true if the specified loop is contained within in this loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00139">LoopInfo.h:139</a></div></div>
<div class="ttc" id="aclassllvm_1_1SCEVExpander_html"><div class="ttname"><a href="classllvm_1_1SCEVExpander.html">llvm::SCEVExpander</a></div><div class="ttdoc">This class uses information about analyze scalars to rewrite expressions in canonical form.</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolutionExpander_8h_source.html#l00050">ScalarEvolutionExpander.h:50</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_a4b001d9b458035fbbfc154d52d354ee9"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a4b001d9b458035fbbfc154d52d354ee9">llvm::ConstantInt::getValue</a></div><div class="ttdeci">const APInt &amp; getValue() const</div><div class="ttdoc">Return the constant as an APInt value reference.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00132">Constants.h:132</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdoc">This is a 'vector' (really, a variable-sized array), optimized for the case when the array is small.</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l01199">SmallVector.h:1199</a></div></div>
<div class="ttc" id="aStatistic_8h_html"><div class="ttname"><a href="Statistic_8h.html">Statistic.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html">llvm::TargetTransformInfo</a></div><div class="ttdoc">This pass provides access to the codegen interfaces that are needed for IR-level transformations.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00196">TargetTransformInfo.h:196</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilder_html"><div class="ttname"><a href="classllvm_1_1IRBuilder.html">llvm::IRBuilder&lt;&gt;</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScalarEvolution_html"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html">llvm::ScalarEvolution</a></div><div class="ttdoc">The main scalar evolution driver.</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8h_source.html#l00452">ScalarEvolution.h:452</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">llvm::CmpInst::ICMP_NE</a></div><div class="ttdeci">@ ICMP_NE</div><div class="ttdoc">not equal</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00740">InstrTypes.h:740</a></div></div>
<div class="ttc" id="aValueTracking_8h_html"><div class="ttname"><a href="ValueTracking_8h.html">ValueTracking.h</a></div></div>
<div class="ttc" id="aTransforms_2Utils_2Local_8h_html"><div class="ttname"><a href="Transforms_2Utils_2Local_8h.html">Local.h</a></div></div>
<div class="ttc" id="aOptimizationRemarkEmitter_8h_html"><div class="ttname"><a href="OptimizationRemarkEmitter_8h.html">OptimizationRemarkEmitter.h</a></div></div>
<div class="ttc" id="aLoopFlatten_8cpp_html_aadc8ada3f35f60d30e774a6daf23d02f"><div class="ttname"><a href="LoopFlatten_8cpp.html#aadc8ada3f35f60d30e774a6daf23d02f">checkPHIs</a></div><div class="ttdeci">static bool checkPHIs(FlattenInfo &amp;FI, const TargetTransformInfo *TTI)</div><div class="ttdef"><b>Definition:</b> <a href="LoopFlatten_8cpp_source.html#l00458">LoopFlatten.cpp:458</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTree_html"><div class="ttname"><a href="classllvm_1_1DominatorTree.html">llvm::DominatorTree</a></div><div class="ttdoc">Concrete subclass of DominatorTreeBase that is used to compute a normal dominator tree.</div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8h_source.html#l00166">Dominators.h:166</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6"><div class="ttname"><a href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">llvm::cl::Hidden</a></div><div class="ttdeci">@ Hidden</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00138">CommandLine.h:138</a></div></div>
<div class="ttc" id="aLoopFlatten_8h_html"><div class="ttname"><a href="LoopFlatten_8h.html">LoopFlatten.h</a></div></div>
<div class="ttc" id="aScalarEvolution_8h_html"><div class="ttname"><a href="ScalarEvolution_8h.html">ScalarEvolution.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_a06c60fef11885eadbda4026c83ae9a13ac8cc76d76703c81c16e939be370683c1"><div class="ttname"><a href="namespacellvm.html#a06c60fef11885eadbda4026c83ae9a13ac8cc76d76703c81c16e939be370683c1">llvm::OverflowResult::AlwaysOverflowsLow</a></div><div class="ttdeci">@ AlwaysOverflowsLow</div><div class="ttdoc">Always overflows in the direction of signed/unsigned min value.</div></div>
<div class="ttc" id="aModule_8h_html"><div class="ttname"><a href="Module_8h.html">Module.h</a></div></div>
<div class="ttc" id="aLoopFlatten_8cpp_html_a9bbea577bf401c708dc854d2dad600af"><div class="ttname"><a href="LoopFlatten_8cpp.html#a9bbea577bf401c708dc854d2dad600af">findLoopComponents</a></div><div class="ttdeci">static bool findLoopComponents(Loop *L, SmallPtrSetImpl&lt; Instruction * &gt; &amp;IterationInstructions, PHINode *&amp;InductionPHI, Value *&amp;TripCount, BinaryOperator *&amp;Increment, BranchInst *&amp;BackBranch, ScalarEvolution *SE, bool IsWidened)</div><div class="ttdef"><b>Definition:</b> <a href="LoopFlatten_8cpp_source.html#l00378">LoopFlatten.cpp:378</a></div></div>
<div class="ttc" id="astructllvm_1_1LoopStandardAnalysisResults_html"><div class="ttname"><a href="structllvm_1_1LoopStandardAnalysisResults.html">llvm::LoopStandardAnalysisResults</a></div><div class="ttdoc">The adaptor from a function pass to a loop pass computes these analyses and makes them available to t...</div><div class="ttdef"><b>Definition:</b> <a href="LoopAnalysisManager_8h_source.html#l00051">LoopAnalysisManager.h:51</a></div></div>
<div class="ttc" id="aclassllvm_1_1Loop_html_a01f94a30e706065eb238b74f57c497ee"><div class="ttname"><a href="classllvm_1_1Loop.html#a01f94a30e706065eb238b74f57c497ee">llvm::Loop::isCanonical</a></div><div class="ttdeci">bool isCanonical(ScalarEvolution &amp;SE) const</div><div class="ttdoc">Return true if the loop induction variable starts at zero and increments by one each time through the...</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8cpp_source.html#l00411">LoopInfo.cpp:411</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSet_html"><div class="ttname"><a href="classllvm_1_1SmallPtrSet.html">llvm::SmallPtrSet</a></div><div class="ttdoc">SmallPtrSet - This class implements a set which is optimized for holding SmallSize or less elements.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00450">SmallPtrSet.h:450</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a158da2b6d3d938aaa15b6acd00150e2c"><div class="ttname"><a href="classllvm_1_1Value.html#a158da2b6d3d938aaa15b6acd00150e2c">llvm::Value::user_begin</a></div><div class="ttdeci">user_iterator user_begin()</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00397">Value.h:397</a></div></div>
<div class="ttc" id="aLoopFlatten_8cpp_html_ad78e062f62e0d6e453941fb4ca843e4d"><div class="ttname"><a href="LoopFlatten_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a></div><div class="ttdeci">#define DEBUG_TYPE</div><div class="ttdef"><b>Definition:</b> <a href="LoopFlatten_8cpp_source.html#l00083">LoopFlatten.cpp:83</a></div></div>
<div class="ttc" id="aX86PartialReduction_8cpp_html_a87b8bfbbe9d8f7146d7f20a5fb42efd0"><div class="ttname"><a href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a></div><div class="ttdeci">Value * RHS</div><div class="ttdef"><b>Definition:</b> <a href="X86PartialReduction_8cpp_source.html#l00076">X86PartialReduction.cpp:76</a></div></div>
<div class="ttc" id="astructllvm_1_1LoopStandardAnalysisResults_html_aaa96df870a1b3d7ffc56bec3eb0b0cff"><div class="ttname"><a href="structllvm_1_1LoopStandardAnalysisResults.html#aaa96df870a1b3d7ffc56bec3eb0b0cff">llvm::LoopStandardAnalysisResults::DT</a></div><div class="ttdeci">DominatorTree &amp; DT</div><div class="ttdef"><b>Definition:</b> <a href="LoopAnalysisManager_8h_source.html#l00054">LoopAnalysisManager.h:54</a></div></div>
<div class="ttc" id="anamespacellvm_html_ac214df91cdc242f4710ea5a93939c678"><div class="ttname"><a href="namespacellvm.html#ac214df91cdc242f4710ea5a93939c678">llvm::count_if</a></div><div class="ttdeci">auto count_if(R &amp;&amp;Range, UnaryPredicate P)</div><div class="ttdoc">Wrapper function around std::count_if to count the number of times an element satisfying a given pred...</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01903">STLExtras.h:1903</a></div></div>
<div class="ttc" id="aDebug_8h_html_a08efc68d15935eb8889400a46c3749ba"><div class="ttname"><a href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a></div><div class="ttdeci">#define LLVM_DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8h_source.html#l00101">Debug.h:101</a></div></div>
<div class="ttc" id="astructllvm_1_1WideIVInfo_html"><div class="ttname"><a href="structllvm_1_1WideIVInfo.html">llvm::WideIVInfo</a></div><div class="ttdoc">Collect information about induction variables that are used by sign/zero extend operations.</div><div class="ttdef"><b>Definition:</b> <a href="SimplifyIndVar_8h_source.html#l00064">SimplifyIndVar.h:64</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_a96d73bbd7af15cb1fc38c3f4a3bd82e9"><div class="ttname"><a href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a></div><div class="ttdeci">#define F(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00055">MD5.cpp:55</a></div></div>
<div class="ttc" id="anamespacellvm_html_ad3cf19784335900227e275fd488e4727"><div class="ttname"><a href="namespacellvm.html#ad3cf19784335900227e275fd488e4727">llvm::RecursivelyDeleteDeadPHINode</a></div><div class="ttdeci">bool RecursivelyDeleteDeadPHINode(PHINode *PN, const TargetLibraryInfo *TLI=nullptr, MemorySSAUpdater *MSSAU=nullptr)</div><div class="ttdoc">If the specified value is an effectively dead PHI node, due to being a def-use chain of single-use no...</div><div class="ttdef"><b>Definition:</b> <a href="Transforms_2Utils_2Local_8cpp_source.html#l00645">Local.cpp:645</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html"><div class="ttname"><a href="classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00055">BasicBlock.h:55</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs() - This returns a reference to a raw_ostream for debugging messages.</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8cpp_source.html#l00163">Debug.cpp:163</a></div></div>
<div class="ttc" id="aLoopDeletion_8cpp_html_a0f1c83c3d08d80b12c424962a5e94ce8a5fe6005bf6e415c950c011fb65f12b8f"><div class="ttname"><a href="LoopDeletion_8cpp.html#a0f1c83c3d08d80b12c424962a5e94ce8a5fe6005bf6e415c950c011fb65f12b8f">LoopDeletionResult::Deleted</a></div><div class="ttdeci">@ Deleted</div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html"><div class="ttname"><a href="classllvm_1_1ConstantInt.html">llvm::ConstantInt</a></div><div class="ttdoc">This is the shared class of boolean and integer constants.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00078">Constants.h:78</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_a62733c3335a87750623dbfc5b3ae4f6c"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a62733c3335a87750623dbfc5b3ae4f6c">llvm::LoopBase::getParentLoop</a></div><div class="ttdeci">LoopT * getParentLoop() const</div><div class="ttdoc">Return the parent loop if it exists or nullptr for top level loops.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00114">LoopInfo.h:114</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScalarEvolution_html_a5bb94ae7a535ff5335b731270969c6d3"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html#a5bb94ae7a535ff5335b731270969c6d3">llvm::ScalarEvolution::getTripCountFromExitCount</a></div><div class="ttdeci">const SCEV * getTripCountFromExitCount(const SCEV *ExitCount, bool Extend=true)</div><div class="ttdoc">Convert from an &quot;exit count&quot; (i.e.</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l08074">ScalarEvolution.cpp:8074</a></div></div>
<div class="ttc" id="aVirtRegMap_8cpp_html_a1ad52109a2ff430460c8776286b97b2e"><div class="ttname"><a href="VirtRegMap_8cpp.html#a1ad52109a2ff430460c8776286b97b2e">Rewriter</a></div><div class="ttdeci">Virtual Register Rewriter</div><div class="ttdef"><b>Definition:</b> <a href="VirtRegMap_8cpp_source.html#l00237">VirtRegMap.cpp:237</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a25d956d9e0beadd47ce4bc255dfa811d"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">llvm::PatternMatch::match</a></div><div class="ttdeci">bool match(Val *V, const Pattern &amp;P)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00049">PatternMatch.h:49</a></div></div>
<div class="ttc" id="anamespacellvm_html_a06c60fef11885eadbda4026c83ae9a13ad4d9862eafa015a05101d9f662bb153a"><div class="ttname"><a href="namespacellvm.html#a06c60fef11885eadbda4026c83ae9a13ad4d9862eafa015a05101d9f662bb153a">llvm::OverflowResult::MayOverflow</a></div><div class="ttdeci">@ MayOverflow</div><div class="ttdoc">May or may not overflow.</div></div>
<div class="ttc" id="aInlineOrder_8cpp_html_a7ee6f0cb51c3b9056199e9a0001fe8c3a20b4f77bd00b4f63a49ec8e08f3bf6a6"><div class="ttname"><a href="InlineOrder_8cpp.html#a7ee6f0cb51c3b9056199e9a0001fe8c3a20b4f77bd00b4f63a49ec8e08f3bf6a6">InlinePriorityMode::Cost</a></div><div class="ttdeci">@ Cost</div></div>
<div class="ttc" id="aclassllvm_1_1User_html"><div class="ttname"><a href="classllvm_1_1User.html">llvm::User</a></div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00044">User.h:44</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_ad191220adaaedcfba833985509a17452"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#ad191220adaaedcfba833985509a17452">llvm::PatternMatch::m_c_Add</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::Add, true &gt; m_c_Add(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdoc">Matches a Add with LHS and RHS in either order.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l02248">PatternMatch.h:2248</a></div></div>
<div class="ttc" id="aBuiltinGCs_8cpp_html_a7abf5fb4071cb25dbce06dfb5ee3c937"><div class="ttname"><a href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a></div><div class="ttdeci">static GCRegistry::Add&lt; OcamlGC &gt; B(&quot;ocaml&quot;, &quot;ocaml 3.10-compatible GC&quot;)</div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html_adfb61ffe25c950c75c86310245b3ef39"><div class="ttname"><a href="classllvm_1_1PHINode.html#adfb61ffe25c950c75c86310245b3ef39">llvm::PHINode::getIncomingValueForBlock</a></div><div class="ttdeci">Value * getIncomingValueForBlock(const BasicBlock *BB) const</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02889">Instructions.h:2889</a></div></div>
<div class="ttc" id="anamespacellvm_html_a0bf75467957937ad23ad7be19f489934"><div class="ttname"><a href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">llvm::STATISTIC</a></div><div class="ttdeci">STATISTIC(NumFunctions, &quot;Total number of functions&quot;)</div></div>
<div class="ttc" id="astructllvm_1_1WideIVInfo_html_a882fc540d5e5234ddf6a9f880e3f5a9b"><div class="ttname"><a href="structllvm_1_1WideIVInfo.html#a882fc540d5e5234ddf6a9f880e3f5a9b">llvm::WideIVInfo::NarrowIV</a></div><div class="ttdeci">PHINode * NarrowIV</div><div class="ttdef"><b>Definition:</b> <a href="SimplifyIndVar_8h_source.html#l00065">SimplifyIndVar.h:65</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_a969709dd49c28865a482d8b870f87c46"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">llvm::ConstantInt::get</a></div><div class="ttdeci">static Constant * get(Type *Ty, uint64_t V, bool IsSigned=false)</div><div class="ttdoc">If Ty is a vector type, return a Constant with a splat of the given value.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00887">Constants.cpp:887</a></div></div>
<div class="ttc" id="aLoopUtils_8h_html"><div class="ttname"><a href="LoopUtils_8h.html">LoopUtils.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_adf6f53d7652b471c995b7d10f3dd2729"><div class="ttname"><a href="classllvm_1_1LoopBase.html#adf6f53d7652b471c995b7d10f3dd2729">llvm::LoopBase::getExitingBlock</a></div><div class="ttdeci">BlockT * getExitingBlock() const</div><div class="ttdoc">If getExitingBlocks would return exactly one block, return that block.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfoImpl_8h_source.html#l00048">LoopInfoImpl.h:48</a></div></div>
<div class="ttc" id="aPatternMatch_8h_html"><div class="ttname"><a href="PatternMatch_8h.html">PatternMatch.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Loop_html_a917a64b00c1745fd0c78c2b2320cd4ad"><div class="ttname"><a href="classllvm_1_1Loop.html#a917a64b00c1745fd0c78c2b2320cd4ad">llvm::Loop::getName</a></div><div class="ttdeci">StringRef getName() const</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00891">LoopInfo.h:891</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a13e877ef779ba7a0688081079f4f9b03"><div class="ttname"><a href="classllvm_1_1Type.html#a13e877ef779ba7a0688081079f4f9b03">llvm::Type::getIntegerBitWidth</a></div><div class="ttdeci">unsigned getIntegerBitWidth() const</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00097">DerivedTypes.h:97</a></div></div>
<div class="ttc" id="anamespacellvm_html_a06c60fef11885eadbda4026c83ae9a13"><div class="ttname"><a href="namespacellvm.html#a06c60fef11885eadbda4026c83ae9a13">llvm::OverflowResult</a></div><div class="ttdeci">OverflowResult</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8h_source.html#l00500">ValueTracking.h:500</a></div></div>
<div class="ttc" id="aLoopInfo_8h_html"><div class="ttname"><a href="LoopInfo_8h.html">LoopInfo.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchInst_html_aac456a62894c9f0f8e9f06373bbf40f0"><div class="ttname"><a href="classllvm_1_1BranchInst.html#aac456a62894c9f0f8e9f06373bbf40f0">llvm::BranchInst::getCondition</a></div><div class="ttdeci">Value * getCondition() const</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03220">Instructions.h:3220</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScalarEvolution_html_a30bd18ac905eacf3601bc6a553a9ff49"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html#a30bd18ac905eacf3601bc6a553a9ff49">llvm::ScalarEvolution::getSCEV</a></div><div class="ttdeci">const SCEV * getSCEV(Value *V)</div><div class="ttdoc">Return a SCEV expression for the full generality of the specified expression.</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l04534">ScalarEvolution.cpp:4534</a></div></div>
<div class="ttc" id="anamespacellvm_html_ac7294ba4e105807674fe3a394437fcc1"><div class="ttname"><a href="namespacellvm.html#ac7294ba4e105807674fe3a394437fcc1">llvm::getLoopPassPreservedAnalyses</a></div><div class="ttdeci">PreservedAnalyses getLoopPassPreservedAnalyses()</div><div class="ttdoc">Returns the minimum set of Analyses that all loop passes must preserve.</div><div class="ttdef"><b>Definition:</b> <a href="LoopAnalysisManager_8cpp_source.html#l00138">LoopAnalysisManager.cpp:138</a></div></div>
<div class="ttc" id="anamespacellvm_html_ac226f3d2b9ca090171a8e0a8cb92c343a91921ada405fd6ba65dff028df047cb6"><div class="ttname"><a href="namespacellvm.html#ac226f3d2b9ca090171a8e0a8cb92c343a91921ada405fd6ba65dff028df047cb6">llvm::HighlightColor::Remark</a></div><div class="ttdeci">@ Remark</div></div>
<div class="ttc" id="aclassllvm_1_1Loop_html_ac233a2693163ed58305215ca2f6921e3"><div class="ttname"><a href="classllvm_1_1Loop.html#ac233a2693163ed58305215ca2f6921e3">llvm::Loop::isLoopSimplifyForm</a></div><div class="ttdeci">bool isLoopSimplifyForm() const</div><div class="ttdoc">Return true if the Loop is in the form that the LoopSimplify form transforms loops to,...</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8cpp_source.html#l00479">LoopInfo.cpp:479</a></div></div>
<div class="ttc" id="aclassllvm_1_1cl_1_1opt_html"><div class="ttname"><a href="classllvm_1_1cl_1_1opt.html">llvm::cl::opt</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l01410">CommandLine.h:1410</a></div></div>
<div class="ttc" id="aclassllvm_1_1SCEV_html"><div class="ttname"><a href="classllvm_1_1SCEV.html">llvm::SCEV</a></div><div class="ttdoc">This class represents an analyzed expression in the program.</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8h_source.html#l00075">ScalarEvolution.h:75</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScalarEvolution_html_a830ba09d5969cd66878b05c17fdf66b6"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html#a830ba09d5969cd66878b05c17fdf66b6">llvm::ScalarEvolution::forgetBlockAndLoopDispositions</a></div><div class="ttdeci">void forgetBlockAndLoopDispositions(Value *V=nullptr)</div><div class="ttdoc">Called when the client has changed the disposition of values in a loop or block.</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l08552">ScalarEvolution.cpp:8552</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a6e5d2e18c81baaeec7dadc81a0dea993"><div class="ttname"><a href="classllvm_1_1Instruction.html#a6e5d2e18c81baaeec7dadc81a0dea993">llvm::Instruction::getSuccessor</a></div><div class="ttdeci">BasicBlock * getSuccessor(unsigned Idx) const LLVM_READONLY</div><div class="ttdoc">Return the specified successor. This instruction must be a terminator.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00835">Instruction.cpp:835</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_ae6b978645b8ac72d1a35e1298ffdd4f0"><div class="ttname"><a href="classllvm_1_1Instruction.html#ae6b978645b8ac72d1a35e1298ffdd4f0">llvm::Instruction::eraseFromParent</a></div><div class="ttdeci">SymbolTableList&lt; Instruction &gt;::iterator eraseFromParent()</div><div class="ttdoc">This method unlinks 'this' from the containing basic block and deletes it.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00082">Instruction.cpp:82</a></div></div>
<div class="ttc" id="aLoopFlatten_8cpp_html_a58b2a7b6438666f763752c35da604195"><div class="ttname"><a href="LoopFlatten_8cpp.html#a58b2a7b6438666f763752c35da604195">setLoopComponents</a></div><div class="ttdeci">static bool setLoopComponents(Value *&amp;TC, Value *&amp;TripCount, BinaryOperator *&amp;Increment, SmallPtrSetImpl&lt; Instruction * &gt; &amp;IterationInstructions)</div><div class="ttdef"><b>Definition:</b> <a href="LoopFlatten_8cpp_source.html#l00295">LoopFlatten.cpp:295</a></div></div>
<div class="ttc" id="anamespacellvm_html_a38c5c77cf4a7ffed6a6576ebebd1929a"><div class="ttname"><a href="namespacellvm.html#a38c5c77cf4a7ffed6a6576ebebd1929a">llvm::isGuaranteedToExecuteForEveryIteration</a></div><div class="ttdeci">bool isGuaranteedToExecuteForEveryIteration(const Instruction *I, const Loop *L)</div><div class="ttdoc">Return true if this function can prove that the instruction I is executed for every iteration of the ...</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l05674">ValueTracking.cpp:5674</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html_ace87755a2044122196774c1cb0368fde"><div class="ttname"><a href="classllvm_1_1PHINode.html#ace87755a2044122196774c1cb0368fde">llvm::PHINode::hasConstantValue</a></div><div class="ttdeci">Value * hasConstantValue() const</div><div class="ttdoc">If the specified PHI node always merges together the same value, return the value,...</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l00163">Instructions.cpp:163</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemorySSAUpdater_html_a4953231268ee21e95c3740e51ab37a96"><div class="ttname"><a href="classllvm_1_1MemorySSAUpdater.html#a4953231268ee21e95c3740e51ab37a96">llvm::MemorySSAUpdater::removeEdge</a></div><div class="ttdeci">void removeEdge(BasicBlock *From, BasicBlock *To)</div><div class="ttdoc">Update the MemoryPhi in To following an edge deletion between From and To.</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSAUpdater_8cpp_source.html#l00531">MemorySSAUpdater.cpp:531</a></div></div>
<div class="ttc" id="aclassllvm_1_1ICmpInst_html"><div class="ttname"><a href="classllvm_1_1ICmpInst.html">llvm::ICmpInst</a></div><div class="ttdoc">This instruction compares its operands according to the predicate given to the constructor.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01197">Instructions.h:1197</a></div></div>
<div class="ttc" id="aLoopFlatten_8cpp_html_a0fa90c2a513cc9801d885d999ddac777"><div class="ttname"><a href="LoopFlatten_8cpp.html#a0fa90c2a513cc9801d885d999ddac777">CanWidenIV</a></div><div class="ttdeci">static bool CanWidenIV(FlattenInfo &amp;FI, DominatorTree *DT, LoopInfo *LI, ScalarEvolution *SE, AssumptionCache *AC, const TargetTransformInfo *TTI)</div><div class="ttdef"><b>Definition:</b> <a href="LoopFlatten_8cpp_source.html#l00802">LoopFlatten.cpp:802</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemorySSAUpdater_html"><div class="ttname"><a href="classllvm_1_1MemorySSAUpdater.html">llvm::MemorySSAUpdater</a></div><div class="ttdef"><b>Definition:</b> <a href="MemorySSAUpdater_8h_source.html#l00054">MemorySSAUpdater.h:54</a></div></div>
<div class="ttc" id="aclassllvm_1_1LPMUpdater_html"><div class="ttname"><a href="classllvm_1_1LPMUpdater.html">llvm::LPMUpdater</a></div><div class="ttdoc">This class provides an interface for updating the loop pass manager based on mutations to the loop ne...</div><div class="ttdef"><b>Definition:</b> <a href="LoopPassManager_8h_source.html#l00262">LoopPassManager.h:262</a></div></div>
<div class="ttc" id="aLoopFlatten_8cpp_html_a15d34f08d47ed31645bcff68d7014127"><div class="ttname"><a href="LoopFlatten_8cpp.html#a15d34f08d47ed31645bcff68d7014127">AssumeNoOverflow</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; AssumeNoOverflow(&quot;loop-flatten-assume-no-overflow&quot;, cl::Hidden, cl::init(false), cl::desc(&quot;Assume that the product of the two iteration &quot; &quot;trip counts will never overflow&quot;))</div></div>
<div class="ttc" id="aLoopFlatten_8cpp_html_a2f931b2aee2a78ca4678a2a25c530584"><div class="ttname"><a href="LoopFlatten_8cpp.html#a2f931b2aee2a78ca4678a2a25c530584">RepeatedInstructionThreshold</a></div><div class="ttdeci">static cl::opt&lt; unsigned &gt; RepeatedInstructionThreshold(&quot;loop-flatten-cost-threshold&quot;, cl::Hidden, cl::init(2), cl::desc(&quot;Limit on the cost of instructions that can be repeated due to &quot; &quot;loop flattening&quot;))</div></div>
<div class="ttc" id="aclassllvm_1_1BranchInst_html_a38df51256d4b415b6a817b5e1c6d4d36"><div class="ttname"><a href="classllvm_1_1BranchInst.html#a38df51256d4b415b6a817b5e1c6d4d36">llvm::BranchInst::Create</a></div><div class="ttdeci">static BranchInst * Create(BasicBlock *IfTrue, Instruction *InsertBefore=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03195">Instructions.h:3195</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00058">MD5.cpp:58</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a10a041239ae1870cfcc064bfaa79fb65"><div class="ttname"><a href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">llvm::cl::init</a></div><div class="ttdeci">initializer&lt; Ty &gt; init(const Ty &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00445">CommandLine.h:445</a></div></div>
<div class="ttc" id="aLoopFlatten_8cpp_html_a7498ddf1751f24dcc9fdbe84faf93375"><div class="ttname"><a href="LoopFlatten_8cpp.html#a7498ddf1751f24dcc9fdbe84faf93375">checkIVUsers</a></div><div class="ttdeci">static bool checkIVUsers(FlattenInfo &amp;FI)</div><div class="ttdef"><b>Definition:</b> <a href="LoopFlatten_8cpp_source.html#l00610">LoopFlatten.cpp:610</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_a1230fd674d2609b96527fe65eaf40b1b"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a1230fd674d2609b96527fe65eaf40b1b">llvm::LoopBase::getLoopLatch</a></div><div class="ttdeci">BlockT * getLoopLatch() const</div><div class="ttdoc">If there is a single latch block for this loop, return it.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfoImpl_8h_source.html#l00232">LoopInfoImpl.h:232</a></div></div>
<div class="ttc" id="aIRBuilder_8h_html"><div class="ttname"><a href="IRBuilder_8h.html">IRBuilder.h</a></div></div>
<div class="ttc" id="aSILowerControlFlow_8cpp_html_a4868c5d81c5ccc98c47aeab6244346a0"><div class="ttname"><a href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a></div><div class="ttdeci">assert(ImpDefSCC.getReg()==AMDGPU::SCC &amp;&amp;ImpDefSCC.isDef())</div></div>
<div class="ttc" id="aclassllvm_1_1OptimizationRemarkEmitter_html_aae6a98aea85aa3af87357cc5448db499"><div class="ttname"><a href="classllvm_1_1OptimizationRemarkEmitter.html#aae6a98aea85aa3af87357cc5448db499">llvm::OptimizationRemarkEmitter::emit</a></div><div class="ttdeci">void emit(DiagnosticInfoOptimizationBase &amp;OptDiag)</div><div class="ttdoc">Output the remark via the diagnostic handler and to the optimization record file.</div><div class="ttdef"><b>Definition:</b> <a href="OptimizationRemarkEmitter_8cpp_source.html#l00079">OptimizationRemarkEmitter.cpp:79</a></div></div>
<div class="ttc" id="aLoopNestAnalysis_8h_html"><div class="ttname"><a href="LoopNestAnalysis_8h.html">LoopNestAnalysis.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopInfo_html_ab508a6297bcb823ca9d561facc241470"><div class="ttname"><a href="classllvm_1_1LoopInfo.html#ab508a6297bcb823ca9d561facc241470">llvm::LoopInfo::erase</a></div><div class="ttdeci">void erase(Loop *L)</div><div class="ttdoc">Update LoopInfo after removing the last backedge from a loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8cpp_source.html#l00876">LoopInfo.cpp:876</a></div></div>
<div class="ttc" id="aLoopFlatten_8cpp_html_a5e53eb62d81882a5586764e2a9378a49"><div class="ttname"><a href="LoopFlatten_8cpp.html#a5e53eb62d81882a5586764e2a9378a49">DoFlattenLoopPair</a></div><div class="ttdeci">static bool DoFlattenLoopPair(FlattenInfo &amp;FI, DominatorTree *DT, LoopInfo *LI, ScalarEvolution *SE, AssumptionCache *AC, const TargetTransformInfo *TTI, LPMUpdater *U, MemorySSAUpdater *MSSAU)</div><div class="ttdef"><b>Definition:</b> <a href="LoopFlatten_8cpp_source.html#l00729">LoopFlatten.cpp:729</a></div></div>
<div class="ttc" id="aclassllvm_1_1LPMUpdater_html_ad898592a9fdc638d33b6b5cf0eba2bbe"><div class="ttname"><a href="classllvm_1_1LPMUpdater.html#ad898592a9fdc638d33b6b5cf0eba2bbe">llvm::LPMUpdater::markLoopAsDeleted</a></div><div class="ttdeci">void markLoopAsDeleted(Loop &amp;L, llvm::StringRef Name)</div><div class="ttdoc">Loop passes should use this method to indicate they have deleted a loop from the nest.</div><div class="ttdef"><b>Definition:</b> <a href="LoopPassManager_8h_source.html#l00282">LoopPassManager.h:282</a></div></div>
<div class="ttc" id="aclassllvm_1_1Module_html"><div class="ttname"><a href="classllvm_1_1Module.html">llvm::Module</a></div><div class="ttdoc">A Module instance is used to store all the information related to an LLVM module.</div><div class="ttdef"><b>Definition:</b> <a href="Module_8h_source.html#l00065">Module.h:65</a></div></div>
<div class="ttc" id="aLoopPassManager_8h_html"><div class="ttname"><a href="LoopPassManager_8h.html">LoopPassManager.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemorySSAAnalysis_html"><div class="ttname"><a href="classllvm_1_1MemorySSAAnalysis.html">llvm::MemorySSAAnalysis</a></div><div class="ttdoc">An analysis that produces MemorySSA for a function.</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l00936">MemorySSA.h:936</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html_a1f475b0df44ebd7169e720fa1bf9169e"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#a1f475b0df44ebd7169e720fa1bf9169e">llvm::SmallPtrSetImpl::count</a></div><div class="ttdeci">size_type count(ConstPtrType Ptr) const</div><div class="ttdoc">count - Return 1 if the specified pointer is in the set, 0 otherwise.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00383">SmallPtrSet.h:383</a></div></div>
<div class="ttc" id="aAssumeBundleBuilder_8cpp_html_afb136e0532bcaed86521b462e6538d62"><div class="ttname"><a href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a></div><div class="ttdeci">assume Assume Builder</div><div class="ttdef"><b>Definition:</b> <a href="AssumeBundleBuilder_8cpp_source.html#l00651">AssumeBundleBuilder.cpp:651</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchInst_html_ad56f6a9b5cd05940017c4544df48bc30"><div class="ttname"><a href="classllvm_1_1BranchInst.html#ad56f6a9b5cd05940017c4544df48bc30">llvm::BranchInst::isUnconditional</a></div><div class="ttdeci">bool isUnconditional() const</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03217">Instructions.h:3217</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a24bca8838396aa81b87de8e7ac774b19"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">llvm::PatternMatch::m_Value</a></div><div class="ttdeci">class_match&lt; Value &gt; m_Value()</div><div class="ttdoc">Match an arbitrary value and ignore it.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00076">PatternMatch.h:76</a></div></div>
<div class="ttc" id="aREADME__P9_8txt_html_a42a82adf8d40243d6a0a28972c9f7df1"><div class="ttname"><a href="README__P9_8txt.html#a42a82adf8d40243d6a0a28972c9f7df1">Compare</a></div><div class="ttdeci">QP Compare Ordered outs ins xscmpudp No builtin are required Or llvm fcmp order unorder compare DP QP Compare builtin are required DP Compare</div><div class="ttdef"><b>Definition:</b> <a href="README__P9_8txt_source.html#l00309">README_P9.txt:309</a></div></div>
<div class="ttc" id="aLoopFlatten_8cpp_html_aa89462fcd72ee43d1b3f2df0a61a698e"><div class="ttname"><a href="LoopFlatten_8cpp.html#aa89462fcd72ee43d1b3f2df0a61a698e">checkOverflow</a></div><div class="ttdeci">static OverflowResult checkOverflow(FlattenInfo &amp;FI, DominatorTree *DT, AssumptionCache *AC)</div><div class="ttdef"><b>Definition:</b> <a href="LoopFlatten_8cpp_source.html#l00634">LoopFlatten.cpp:634</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopInfo_html"><div class="ttname"><a href="classllvm_1_1LoopInfo.html">llvm::LoopInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l01108">LoopInfo.h:1108</a></div></div>
<div class="ttc" id="aclassllvm_1_1BinaryOperator_html"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html">llvm::BinaryOperator</a></div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00187">InstrTypes.h:187</a></div></div>
<div class="ttc" id="aclassllvm_1_1OptimizationRemarkEmitter_html"><div class="ttname"><a href="classllvm_1_1OptimizationRemarkEmitter.html">llvm::OptimizationRemarkEmitter</a></div><div class="ttdoc">The optimization diagnostic interface.</div><div class="ttdef"><b>Definition:</b> <a href="OptimizationRemarkEmitter_8h_source.html#l00033">OptimizationRemarkEmitter.h:33</a></div></div>
<div class="ttc" id="aclassllvm_1_1AssumptionCache_html"><div class="ttname"><a href="classllvm_1_1AssumptionCache.html">llvm::AssumptionCache</a></div><div class="ttdoc">A cache of @llvm.assume calls within a function.</div><div class="ttdef"><b>Definition:</b> <a href="AssumptionCache_8h_source.html#l00042">AssumptionCache.h:42</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_a706f223f760b55668fbae74202b816bba7f80055e1969cb850739546467460ad8"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#a706f223f760b55668fbae74202b816bba7f80055e1969cb850739546467460ad8">llvm::TargetTransformInfo::TCK_SizeAndLatency</a></div><div class="ttdeci">@ TCK_SizeAndLatency</div><div class="ttdoc">The weighted sum of size and latency.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00245">TargetTransformInfo.h:245</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">llvm::CmpInst::ICMP_ULT</a></div><div class="ttdeci">@ ICMP_ULT</div><div class="ttdoc">unsigned less than</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00743">InstrTypes.h:743</a></div></div>
<div class="ttc" id="aLoopFlatten_8cpp_html_a11a65ce1550eac260dca320a7028328e"><div class="ttname"><a href="LoopFlatten_8cpp.html#a11a65ce1550eac260dca320a7028328e">verifyTripCount</a></div><div class="ttdeci">static bool verifyTripCount(Value *RHS, Loop *L, SmallPtrSetImpl&lt; Instruction * &gt; &amp;IterationInstructions, PHINode *&amp;InductionPHI, Value *&amp;TripCount, BinaryOperator *&amp;Increment, BranchInst *&amp;BackBranch, ScalarEvolution *SE, bool IsWidened)</div><div class="ttdef"><b>Definition:</b> <a href="LoopFlatten_8cpp_source.html#l00311">LoopFlatten.cpp:311</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a6393a2d4fe7e10b28a0dcc35f881567b"><div class="ttname"><a href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const</div><div class="ttdoc">All values are typed, get the type of this value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00255">Value.h:255</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a3ab5fc45117b450e8bb04e564cb6e5f2"><div class="ttname"><a href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">llvm::Value::replaceAllUsesWith</a></div><div class="ttdeci">void replaceAllUsesWith(Value *V)</div><div class="ttdoc">Change all uses of this to point to a new Value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00532">Value.cpp:532</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_ab3fc0225d8aaf8434026c3573f961f2c"><div class="ttname"><a href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">llvm::Value::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const</div><div class="ttdoc">All values hold a context through their type.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00994">Value.cpp:994</a></div></div>
<div class="ttc" id="aAArch64SLSHardening_8cpp_html_ad467c4ab9119043f9b7750ab986be61a"><div class="ttname"><a href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a></div><div class="ttdeci">MachineBasicBlock MachineBasicBlock::iterator DebugLoc DL</div><div class="ttdef"><b>Definition:</b> <a href="AArch64SLSHardening_8cpp_source.html#l00076">AArch64SLSHardening.cpp:76</a></div></div>
<div class="ttc" id="astructllvm_1_1LoopStandardAnalysisResults_html_aa09379aa4435be95eb717dd9b5d8b4c5"><div class="ttname"><a href="structllvm_1_1LoopStandardAnalysisResults.html#aa09379aa4435be95eb717dd9b5d8b4c5">llvm::LoopStandardAnalysisResults::LI</a></div><div class="ttdeci">LoopInfo &amp; LI</div><div class="ttdef"><b>Definition:</b> <a href="LoopAnalysisManager_8h_source.html#l00055">LoopAnalysisManager.h:55</a></div></div>
<div class="ttc" id="aLoopFlatten_8cpp_html_a4aa9efb1877c0a4aa735be1395c60637"><div class="ttname"><a href="LoopFlatten_8cpp.html#a4aa9efb1877c0a4aa735be1395c60637">WidenIV</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; WidenIV(&quot;loop-flatten-widen-iv&quot;, cl::Hidden, cl::init(true), cl::desc(&quot;Widen the loop induction variables, if possible, so &quot; &quot;overflow checks won't reject flattening&quot;))</div><div class="ttdef"><b>Definition:</b> <a href="SimplifyIndVar_8cpp_source.html#l01172">SimplifyIndVar.cpp:1172</a></div></div>
<div class="ttc" id="aPassBuilderBindings_8cpp_html_a7cfe61417446ebb812e81293bde22a29"><div class="ttname"><a href="PassBuilderBindings_8cpp.html#a7cfe61417446ebb812e81293bde22a29">LAM</a></div><div class="ttdeci">LoopAnalysisManager LAM</div><div class="ttdef"><b>Definition:</b> <a href="PassBuilderBindings_8cpp_source.html#l00058">PassBuilderBindings.cpp:58</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScalarEvolution_html_a592bdd7731b14ff4ff5d646f6f399900"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html#a592bdd7731b14ff4ff5d646f6f399900">llvm::ScalarEvolution::forgetLoop</a></div><div class="ttdeci">void forgetLoop(const Loop *L)</div><div class="ttdoc">This method should be called by the client when it has changed a loop in a way that may effect Scalar...</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l08463">ScalarEvolution.cpp:8463</a></div></div>
<div class="ttc" id="astructllvm_1_1LoopStandardAnalysisResults_html_a3444a9359f5f17f1694f82c41d5fd574"><div class="ttname"><a href="structllvm_1_1LoopStandardAnalysisResults.html#a3444a9359f5f17f1694f82c41d5fd574">llvm::LoopStandardAnalysisResults::TTI</a></div><div class="ttdeci">TargetTransformInfo &amp; TTI</div><div class="ttdef"><b>Definition:</b> <a href="LoopAnalysisManager_8h_source.html#l00058">LoopAnalysisManager.h:58</a></div></div>
<div class="ttc" id="aclassllvm_1_1PreservedAnalyses_html_a1258a1ff55557c27684010ebd7283712"><div class="ttname"><a href="classllvm_1_1PreservedAnalyses.html#a1258a1ff55557c27684010ebd7283712">llvm::PreservedAnalyses::all</a></div><div class="ttdeci">static PreservedAnalyses all()</div><div class="ttdoc">Construct a special preserved set that preserves all passes.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00158">PassManager.h:158</a></div></div>
<div class="ttc" id="aFunction_8h_html"><div class="ttname"><a href="Function_8h.html">Function.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_a06c60fef11885eadbda4026c83ae9a13a9ac50ff0c308dad407db9f09e418363e"><div class="ttname"><a href="namespacellvm.html#a06c60fef11885eadbda4026c83ae9a13a9ac50ff0c308dad407db9f09e418363e">llvm::OverflowResult::AlwaysOverflowsHigh</a></div><div class="ttdeci">@ AlwaysOverflowsHigh</div><div class="ttdoc">Always overflows in the direction of signed/unsigned max value.</div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a8f3259c7db0ce698876fe79f45b80a32"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a8f3259c7db0ce698876fe79f45b80a32">llvm::PatternMatch::m_c_Mul</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::Mul, true &gt; m_c_Mul(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdoc">Matches a Mul with LHS and RHS in either order.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l02255">PatternMatch.h:2255</a></div></div>
<div class="ttc" id="astructllvm_1_1LoopStandardAnalysisResults_html_a124376878e24aef4252795ba9fea420f"><div class="ttname"><a href="structllvm_1_1LoopStandardAnalysisResults.html#a124376878e24aef4252795ba9fea420f">llvm::LoopStandardAnalysisResults::SE</a></div><div class="ttdeci">ScalarEvolution &amp; SE</div><div class="ttdef"><b>Definition:</b> <a href="LoopAnalysisManager_8h_source.html#l00056">LoopAnalysisManager.h:56</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopNest_html_a76910b27c22c1ec00680bc5362806678"><div class="ttname"><a href="classllvm_1_1LoopNest.html#a76910b27c22c1ec00680bc5362806678">llvm::LoopNest::getLoops</a></div><div class="ttdeci">ArrayRef&lt; Loop * &gt; getLoops() const</div><div class="ttdoc">Get the loops in the nest.</div><div class="ttdef"><b>Definition:</b> <a href="LoopNestAnalysis_8h_source.html#l00117">LoopNestAnalysis.h:117</a></div></div>
<div class="ttc" id="aLoopFlatten_8cpp_html_a7fb79db9841b2f85cc3686661675c41a"><div class="ttname"><a href="LoopFlatten_8cpp.html#a7fb79db9841b2f85cc3686661675c41a">CanFlattenLoopPair</a></div><div class="ttdeci">static bool CanFlattenLoopPair(FlattenInfo &amp;FI, DominatorTree *DT, LoopInfo *LI, ScalarEvolution *SE, AssumptionCache *AC, const TargetTransformInfo *TTI)</div><div class="ttdef"><b>Definition:</b> <a href="LoopFlatten_8cpp_source.html#l00683">LoopFlatten.cpp:683</a></div></div>
<div class="ttc" id="aclassllvm_1_1OptimizationRemark_html"><div class="ttname"><a href="classllvm_1_1OptimizationRemark.html">llvm::OptimizationRemark</a></div><div class="ttdoc">Diagnostic information for applied optimization remarks.</div><div class="ttdef"><b>Definition:</b> <a href="DiagnosticInfo_8h_source.html#l00689">DiagnosticInfo.h:689</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScalarEvolution_html_a6d745b25efdc69435508f1e936919f8b"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html#a6d745b25efdc69435508f1e936919f8b">llvm::ScalarEvolution::getZeroExtendExpr</a></div><div class="ttdeci">const SCEV * getZeroExtendExpr(const SCEV *Op, Type *Ty, unsigned Depth=0)</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l01609">ScalarEvolution.cpp:1609</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a2d9861feadd3a09792967a012559e7b2"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">llvm::PatternMatch::m_Specific</a></div><div class="ttdeci">specificval_ty m_Specific(const Value *V)</div><div class="ttdoc">Match if we have a specific specified value.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00772">PatternMatch.h:772</a></div></div>
<div class="ttc" id="aDominators_8h_html"><div class="ttname"><a href="Dominators_8h.html">Dominators.h</a></div></div>
<div class="ttc" id="aReassociate_8cpp_html_abe860e1e952cdc501c96210be5e00805"><div class="ttname"><a href="Reassociate_8cpp.html#abe860e1e952cdc501c96210be5e00805">CreateMul</a></div><div class="ttdeci">static BinaryOperator * CreateMul(Value *S1, Value *S2, const Twine &amp;Name, Instruction *InsertBefore, Value *FlagsOp)</div><div class="ttdef"><b>Definition:</b> <a href="Reassociate_8cpp_source.html#l00253">Reassociate.cpp:253</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a1a7f07aaef6a3bee130bf0e0f0536802"><div class="ttname"><a href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">llvm::Instruction::getParent</a></div><div class="ttdeci">const BasicBlock * getParent() const</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00090">Instruction.h:90</a></div></div>
<div class="ttc" id="aTargetTransformInfo_8h_html"><div class="ttname"><a href="TargetTransformInfo_8h.html">TargetTransformInfo.h</a></div></div>
<div class="ttc" id="astructllvm_1_1LoopStandardAnalysisResults_html_a1cfb392c267da10531478c2f42baa603"><div class="ttname"><a href="structllvm_1_1LoopStandardAnalysisResults.html#a1cfb392c267da10531478c2f42baa603">llvm::LoopStandardAnalysisResults::MSSA</a></div><div class="ttdeci">MemorySSA * MSSA</div><div class="ttdef"><b>Definition:</b> <a href="LoopAnalysisManager_8h_source.html#l00061">LoopAnalysisManager.h:61</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html"><div class="ttname"><a href="classllvm_1_1PHINode.html">llvm::PHINode</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02708">Instructions.h:2708</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a8de021e28a3c04c9216ad8decf104f02"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">llvm::BasicBlock::getTerminator</a></div><div class="ttdeci">const Instruction * getTerminator() const LLVM_READONLY</div><div class="ttdoc">Returns the terminator instruction if the block is well formed or null if the block is not well forme...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00127">BasicBlock.h:127</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html">llvm::PatternMatch</a></div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00047">PatternMatch.h:47</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html">llvm::SmallPtrSetImpl&lt; Instruction * &gt;</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisManager_html"><div class="ttname"><a href="classllvm_1_1AnalysisManager.html">llvm::AnalysisManager</a></div><div class="ttdoc">A container for analyses that lazily runs them and caches their results.</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8h_source.html#l00042">InstructionSimplify.h:42</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopFlattenPass_html_af1670b8924fecfd8a7f0c4dc140bf603"><div class="ttname"><a href="classllvm_1_1LoopFlattenPass.html#af1670b8924fecfd8a7f0c4dc140bf603">llvm::LoopFlattenPass::run</a></div><div class="ttdeci">PreservedAnalyses run(LoopNest &amp;LN, LoopAnalysisManager &amp;LAM, LoopStandardAnalysisResults &amp;AR, LPMUpdater &amp;U)</div><div class="ttdef"><b>Definition:</b> <a href="LoopFlatten_8cpp_source.html#l00921">LoopFlatten.cpp:921</a></div></div>
<div class="ttc" id="aHexagonCommonGEP_8cpp_html_ad532e8710e50302e0a376b61c91fa91d"><div class="ttname"><a href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a></div><div class="ttdeci">Hexagon Common GEP</div><div class="ttdef"><b>Definition:</b> <a href="HexagonCommonGEP_8cpp_source.html#l00171">HexagonCommonGEP.cpp:171</a></div></div>
<div class="ttc" id="anamespacellvm_html_aa29fe161c408879ada30c90ebbf55dcf"><div class="ttname"><a href="namespacellvm.html#aa29fe161c408879ada30c90ebbf55dcf">llvm::VerifyMemorySSA</a></div><div class="ttdeci">bool VerifyMemorySSA</div><div class="ttdoc">Enables verification of MemorySSA.</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8cpp_source.html#l00089">MemorySSA.cpp:89</a></div></div>
<div class="ttc" id="aclassllvm_1_1Loop_html_ab05e97728516fbeeaa9426496257c800"><div class="ttname"><a href="classllvm_1_1Loop.html#ab05e97728516fbeeaa9426496257c800">llvm::Loop::getInductionVariable</a></div><div class="ttdeci">PHINode * getInductionVariable(ScalarEvolution &amp;SE) const</div><div class="ttdoc">Return the loop induction variable if found, else return nullptr.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8cpp_source.html#l00294">LoopInfo.cpp:294</a></div></div>
<div class="ttc" id="astructllvm_1_1cl_1_1desc_html"><div class="ttname"><a href="structllvm_1_1cl_1_1desc.html">llvm::cl::desc</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00411">CommandLine.h:411</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchInst_html"><div class="ttname"><a href="classllvm_1_1BranchInst.html">llvm::BranchInst</a></div><div class="ttdoc">Conditional or Unconditional Branch instruction.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03139">Instructions.h:3139</a></div></div>
<div class="ttc" id="araw__ostream_8h_html"><div class="ttname"><a href="raw__ostream_8h.html">raw_ostream.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a5b844aada27c4c6fdb87146ac458c0d8"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a5b844aada27c4c6fdb87146ac458c0d8">llvm::PatternMatch::m_Trunc</a></div><div class="ttdeci">CastClass_match&lt; OpTy, Instruction::Trunc &gt; m_Trunc(const OpTy &amp;Op)</div><div class="ttdoc">Matches Trunc.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01611">PatternMatch.h:1611</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScalarEvolution_html_a22d9bcbd44563106d7217f3bd9a4039e"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html#a22d9bcbd44563106d7217f3bd9a4039e">llvm::ScalarEvolution::getBackedgeTakenCount</a></div><div class="ttdeci">const SCEV * getBackedgeTakenCount(const Loop *L, ExitCountKind Kind=Exact)</div><div class="ttdoc">If the specified loop has a predictable backedge-taken count, return it, otherwise return a SCEVCould...</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l08331">ScalarEvolution.cpp:8331</a></div></div>
<div class="ttc" id="aInitializePasses_8h_html"><div class="ttname"><a href="InitializePasses_8h.html">InitializePasses.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopNest_html"><div class="ttname"><a href="classllvm_1_1LoopNest.html">llvm::LoopNest</a></div><div class="ttdoc">This class represents a loop nest and can be used to query its properties.</div><div class="ttdef"><b>Definition:</b> <a href="LoopNestAnalysis_8h_source.html#l00028">LoopNestAnalysis.h:28</a></div></div>
<div class="ttc" id="anamespacellvm_html_abe76d72cda6b2b4562c72accb510040b"><div class="ttname"><a href="namespacellvm.html#abe76d72cda6b2b4562c72accb510040b">llvm::isSafeToSpeculativelyExecute</a></div><div class="ttdeci">bool isSafeToSpeculativelyExecute(const Instruction *I, const Instruction *CtxI=nullptr, AssumptionCache *AC=nullptr, const DominatorTree *DT=nullptr, const TargetLibraryInfo *TLI=nullptr)</div><div class="ttdoc">Return true if the instruction does not have any effects besides calculating the result and does not ...</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l04799">ValueTracking.cpp:4799</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html"><div class="ttname"><a href="classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00074">Value.h:74</a></div></div>
<div class="ttc" id="aDebug_8h_html"><div class="ttname"><a href="Debug_8h.html">Debug.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_ab4e0512c7e1c7adaa56677e3155685f1"><div class="ttname"><a href="classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">llvm::Value::users</a></div><div class="ttdeci">iterator_range&lt; user_iterator &gt; users()</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00421">Value.h:421</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTreeBase_html_ab0f09aefdf088f84a0bff7cba86454b4"><div class="ttname"><a href="classllvm_1_1DominatorTreeBase.html#ab0f09aefdf088f84a0bff7cba86454b4">llvm::DominatorTreeBase::deleteEdge</a></div><div class="ttdeci">void deleteEdge(NodeT *From, NodeT *To)</div><div class="ttdoc">Inform the dominator tree about a CFG edge deletion and update the tree.</div><div class="ttdef"><b>Definition:</b> <a href="GenericDomTree_8h_source.html#l00619">GenericDomTree.h:619</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchInst_html_ad97f2e60cf22f15e0cf617af52309031"><div class="ttname"><a href="classllvm_1_1BranchInst.html#ad97f2e60cf22f15e0cf617af52309031">llvm::BranchInst::getSuccessor</a></div><div class="ttdeci">BasicBlock * getSuccessor(unsigned i) const</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03232">Instructions.h:3232</a></div></div>
<div class="ttc" id="aSimplifyIndVar_8h_html"><div class="ttname"><a href="SimplifyIndVar_8h.html">SimplifyIndVar.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html_a6bc6fb89fe2e91c25559a8631f56e27e"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">llvm::SmallPtrSetImpl::insert</a></div><div class="ttdeci">std::pair&lt; iterator, bool &gt; insert(PtrType Ptr)</div><div class="ttdoc">Inserts Ptr if and only if there is no element in the container equal to Ptr.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00365">SmallPtrSet.h:365</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Aug 7 2023 10:31:44 for LLVM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>

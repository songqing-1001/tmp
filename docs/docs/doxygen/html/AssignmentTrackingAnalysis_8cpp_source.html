<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: lib/CodeGen/AssignmentTrackingAnalysis.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LLVM
   &#160;<span id="projectnumber">17.0.0git</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_1e8ad0574bd6e387992681ee57691a07.html">CodeGen</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">AssignmentTrackingAnalysis.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="AssignmentTrackingAnalysis_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AssignmentTrackingAnalysis_8h.html">llvm/CodeGen/AssignmentTrackingAnalysis.h</a>&quot;</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DenseMapInfo_8h.html">llvm/ADT/DenseMapInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IntervalMap_8h.html">llvm/ADT/IntervalMap.h</a>&quot;</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="PostOrderIterator_8h.html">llvm/ADT/PostOrderIterator.h</a>&quot;</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="STLExtras_8h.html">llvm/ADT/STLExtras.h</a>&quot;</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallSet_8h.html">llvm/ADT/SmallSet.h</a>&quot;</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Statistic_8h.html">llvm/ADT/Statistic.h</a>&quot;</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="UniqueVector_8h.html">llvm/ADT/UniqueVector.h</a>&quot;</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Interval_8h.html">llvm/Analysis/Interval.h</a>&quot;</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Dwarf_8h.html">llvm/BinaryFormat/Dwarf.h</a>&quot;</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BasicBlock_8h.html">llvm/IR/BasicBlock.h</a>&quot;</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DataLayout_8h.html">llvm/IR/DataLayout.h</a>&quot;</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IR_2DebugInfo_8h.html">llvm/IR/DebugInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Function_8h.html">llvm/IR/Function.h</a>&quot;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IR_2Instruction_8h.html">llvm/IR/Instruction.h</a>&quot;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IntrinsicInst_8h.html">llvm/IR/IntrinsicInst.h</a>&quot;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="PassManager_8h.html">llvm/IR/PassManager.h</a>&quot;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="PrintPasses_8h.html">llvm/IR/PrintPasses.h</a>&quot;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InitializePasses_8h.html">llvm/InitializePasses.h</a>&quot;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CommandLine_8h.html">llvm/Support/CommandLine.h</a>&quot;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Support_2ErrorHandling_8h.html">llvm/Support/ErrorHandling.h</a>&quot;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="raw__ostream_8h.html">llvm/Support/raw_ostream.h</a>&quot;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BasicBlockUtils_8h.html">llvm/Transforms/Utils/BasicBlockUtils.h</a>&quot;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &lt;assert.h&gt;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &lt;cstdint&gt;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &lt;optional&gt;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &lt;sstream&gt;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &lt;unordered_map&gt;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160; </div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div>
<div class="line"><a name="l00031"></a><span class="lineno"><a class="line" href="AssignmentTrackingAnalysis_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">   31</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;debug-ata&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160; </div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumDefsScanned, <span class="stringliteral">&quot;Number of dbg locs that get scanned for removal&quot;</span>);</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumDefsRemoved, <span class="stringliteral">&quot;Number of dbg locs removed&quot;</span>);</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumWedgesScanned, <span class="stringliteral">&quot;Number of dbg wedges scanned&quot;</span>);</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumWedgesChanged, <span class="stringliteral">&quot;Number of dbg wedges changed&quot;</span>);</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160; </div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;unsigned&gt;</a></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    <a class="code" href="AssignmentTrackingAnalysis_8cpp.html#a5dacd5924df31c782e0fd0fdada03e8b">MaxNumBlocks</a>(<span class="stringliteral">&quot;debug-ata-max-blocks&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(10000),</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;                 <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Maximum num basic blocks before debug info dropped&quot;</span>),</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;                 <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>);<span class="comment"></span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment">/// Option for debugging the pass, determines if the memory location fragment</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment">/// filling happens after generating the variable locations.</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="AssignmentTrackingAnalysis_8cpp.html#a8e62395f81dafe62a18dfd8e9be1ad81">EnableMemLocFragFill</a>(<span class="stringliteral">&quot;mem-loc-frag-fill&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">true</span>),</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;                                          <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>);<span class="comment"></span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="comment">/// Print the results of the analysis. Respects -filter-print-funcs.</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="AssignmentTrackingAnalysis_8cpp.html#af45091a37a806964b16ad7e69e1b78bf">PrintResults</a>(<span class="stringliteral">&quot;print-debug-ata&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>),</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;                                  <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>);</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160; </div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="comment">// Implicit conversions are disabled for enum class types, so unfortunately we</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment">// need to create a DenseMapInfo wrapper around the specified underlying type.</span></div>
<div class="line"><a name="l00052"></a><span class="lineno"><a class="line" href="structllvm_1_1DenseMapInfo_3_01VariableID_01_4.html">   52</a></span>&#160;<span class="keyword">template</span> &lt;&gt; <span class="keyword">struct </span><a class="code" href="structllvm_1_1DenseMapInfo.html">llvm::DenseMapInfo</a>&lt;<a class="code" href="namespacellvm.html#a8c9d5a3046b96979a032c218e858cd15">VariableID</a>&gt; {</div>
<div class="line"><a name="l00053"></a><span class="lineno"><a class="line" href="structllvm_1_1DenseMapInfo_3_01VariableID_01_4.html#afe773428c697afce29eb0228d69f0657">   53</a></span>&#160;  <span class="keyword">using</span> <a class="code" href="structllvm_1_1DenseMapInfo_3_01unsigned_01_4.html">Wrapped</a> = <a class="code" href="structllvm_1_1DenseMapInfo_3_01unsigned_01_4.html">DenseMapInfo&lt;unsigned&gt;</a>;</div>
<div class="line"><a name="l00054"></a><span class="lineno"><a class="line" href="structllvm_1_1DenseMapInfo_3_01VariableID_01_4.html#ada75facb72606ba383b05705f381c56d">   54</a></span>&#160;  <span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="namespacellvm.html#a8c9d5a3046b96979a032c218e858cd15">VariableID</a> <a class="code" href="structllvm_1_1DenseMapInfo_3_01VariableID_01_4.html#ada75facb72606ba383b05705f381c56d">getEmptyKey</a>() {</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><a class="code" href="namespacellvm.html#a8c9d5a3046b96979a032c218e858cd15">VariableID</a><span class="keyword">&gt;</span>(Wrapped::getEmptyKey());</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  }</div>
<div class="line"><a name="l00057"></a><span class="lineno"><a class="line" href="structllvm_1_1DenseMapInfo_3_01VariableID_01_4.html#a25d6b69cf7b38628393d6294d936f3a1">   57</a></span>&#160;  <span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="namespacellvm.html#a8c9d5a3046b96979a032c218e858cd15">VariableID</a> <a class="code" href="structllvm_1_1DenseMapInfo_3_01VariableID_01_4.html#a25d6b69cf7b38628393d6294d936f3a1">getTombstoneKey</a>() {</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><a class="code" href="namespacellvm.html#a8c9d5a3046b96979a032c218e858cd15">VariableID</a><span class="keyword">&gt;</span>(Wrapped::getTombstoneKey());</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  }</div>
<div class="line"><a name="l00060"></a><span class="lineno"><a class="line" href="structllvm_1_1DenseMapInfo_3_01VariableID_01_4.html#a60df1e4c85863eb72c6954b153c0ee0c">   60</a></span>&#160;  <span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code" href="structllvm_1_1DenseMapInfo_3_01VariableID_01_4.html#a60df1e4c85863eb72c6954b153c0ee0c">getHashValue</a>(<span class="keyword">const</span> <a class="code" href="namespacellvm.html#a8c9d5a3046b96979a032c218e858cd15">VariableID</a> &amp;Val) {</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <span class="keywordflow">return</span> Wrapped::getHashValue(<span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span><span class="keyword">&gt;</span>(Val));</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  }</div>
<div class="line"><a name="l00063"></a><span class="lineno"><a class="line" href="structllvm_1_1DenseMapInfo_3_01VariableID_01_4.html#a315cd274d6cf300d0c3d4fbb6b48c009">   63</a></span>&#160;  <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="structllvm_1_1DenseMapInfo_3_01VariableID_01_4.html#a315cd274d6cf300d0c3d4fbb6b48c009">isEqual</a>(<span class="keyword">const</span> <a class="code" href="namespacellvm.html#a8c9d5a3046b96979a032c218e858cd15">VariableID</a> &amp;<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <span class="keyword">const</span> <a class="code" href="namespacellvm.html#a8c9d5a3046b96979a032c218e858cd15">VariableID</a> &amp;<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>) {</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> == <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  }</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;};</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment">/// Helper class to build FunctionVarLocs, since that class isn&#39;t easy to</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment">/// modify. TODO: There&#39;s not a great deal of value in the split, it could be</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment">/// worth merging the two classes.</span></div>
<div class="line"><a name="l00071"></a><span class="lineno"><a class="line" href="classFunctionVarLocsBuilder.html">   71</a></span>&#160;<span class="comment"></span><span class="keyword">class </span><a class="code" href="classFunctionVarLocsBuilder.html">FunctionVarLocsBuilder</a> {</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  <span class="keyword">friend</span> <a class="code" href="classllvm_1_1FunctionVarLocs.html">FunctionVarLocs</a>;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  <a class="code" href="classllvm_1_1UniqueVector.html">UniqueVector&lt;DebugVariable&gt;</a> Variables;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  <span class="comment">// Use an unordered_map so we don&#39;t invalidate iterators after</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  <span class="comment">// insert/modifications.</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  std::unordered_map&lt;const Instruction *, SmallVector&lt;VarLocInfo&gt;&gt;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;      VarLocsBeforeInst;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160; </div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;VarLocInfo&gt;</a> SingleLocVars;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160; </div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="keyword">public</span>:<span class="comment"></span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment">  /// Find or insert \p V and return the ID.</span></div>
<div class="line"><a name="l00083"></a><span class="lineno"><a class="line" href="classFunctionVarLocsBuilder.html#aec2bf0c2cd1ac41ee26614348afeeb8c">   83</a></span>&#160;<span class="comment"></span>  <a class="code" href="namespacellvm.html#a8c9d5a3046b96979a032c218e858cd15">VariableID</a> <a class="code" href="classFunctionVarLocsBuilder.html#aec2bf0c2cd1ac41ee26614348afeeb8c">insertVariable</a>(<a class="code" href="classllvm_1_1DebugVariable.html">DebugVariable</a> V) {</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><a class="code" href="namespacellvm.html#a8c9d5a3046b96979a032c218e858cd15">VariableID</a><span class="keyword">&gt;</span>(Variables.<a class="code" href="classllvm_1_1UniqueVector.html#a03442009de901bb89b2cdb6b22cd9690">insert</a>(V));</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  }</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="comment">  /// Get a variable from its \p ID.</span></div>
<div class="line"><a name="l00088"></a><span class="lineno"><a class="line" href="classFunctionVarLocsBuilder.html#a7015ad4444cf34e6d69326f60268671a">   88</a></span>&#160;<span class="comment"></span>  <span class="keyword">const</span> <a class="code" href="classllvm_1_1DebugVariable.html">DebugVariable</a> &amp;<a class="code" href="classFunctionVarLocsBuilder.html#a7015ad4444cf34e6d69326f60268671a">getVariable</a>(<a class="code" href="namespacellvm.html#a8c9d5a3046b96979a032c218e858cd15">VariableID</a> <a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <span class="keywordflow">return</span> Variables[<span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span><span class="keyword">&gt;</span>(<a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a>)];</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  }</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="comment">  /// Return ptr to wedge of defs or nullptr if no defs come just before /p</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="comment">  /// Before.</span></div>
<div class="line"><a name="l00094"></a><span class="lineno"><a class="line" href="classFunctionVarLocsBuilder.html#a79fb13e417678df16ca53e1bbfd5bc42">   94</a></span>&#160;<span class="comment"></span>  <span class="keyword">const</span> <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;VarLocInfo&gt;</a> *<a class="code" href="classFunctionVarLocsBuilder.html#a79fb13e417678df16ca53e1bbfd5bc42">getWedge</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Before)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <span class="keyword">auto</span> R = VarLocsBeforeInst.find(Before);</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="keywordflow">if</span> (R == VarLocsBeforeInst.end())</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <span class="keywordflow">return</span> &amp;R-&gt;second;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  }</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="comment">  /// Replace the defs that come just before /p Before with /p Wedge.</span></div>
<div class="line"><a name="l00102"></a><span class="lineno"><a class="line" href="classFunctionVarLocsBuilder.html#a3a86f8df2c4e6293186cc140205dc52f">  102</a></span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> <a class="code" href="classFunctionVarLocsBuilder.html#a3a86f8df2c4e6293186cc140205dc52f">setWedge</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Before, <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;VarLocInfo&gt;</a> &amp;&amp;Wedge) {</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    VarLocsBeforeInst[Before] = <a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(Wedge);</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  }</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment">  /// Add a def for a variable that is valid for its lifetime.</span></div>
<div class="line"><a name="l00107"></a><span class="lineno"><a class="line" href="classFunctionVarLocsBuilder.html#a87ba28b444ca39ce2a33fab11afe1351">  107</a></span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> <a class="code" href="classFunctionVarLocsBuilder.html#a87ba28b444ca39ce2a33fab11afe1351">addSingleLocVar</a>(<a class="code" href="classllvm_1_1DebugVariable.html">DebugVariable</a> Var, <a class="code" href="classllvm_1_1DIExpression.html">DIExpression</a> *Expr, <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>,</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;                       <a class="code" href="classllvm_1_1Value.html">Value</a> *V) {</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <a class="code" href="structllvm_1_1VarLocInfo.html">VarLocInfo</a> VarLoc;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    VarLoc.<a class="code" href="structllvm_1_1VarLocInfo.html#af70494f348808c889f07f71f43cd28ec">VariableID</a> = insertVariable(Var);</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    VarLoc.<a class="code" href="structllvm_1_1VarLocInfo.html#a2db7bf8bbe7f16fcee0e9f21aa87fe03">Expr</a> = Expr;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    VarLoc.<a class="code" href="structllvm_1_1VarLocInfo.html#ad7e310409e444bad60535cf956972194">DL</a> = <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    VarLoc.<a class="code" href="structllvm_1_1VarLocInfo.html#a49f19e43b844d06ff617163dd7405c50">V</a> = V;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    SingleLocVars.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a396fcfee6914c76974b73c3d203da6a5">emplace_back</a>(VarLoc);</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  }</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="comment">  /// Add a def to the wedge of defs just before /p Before.</span></div>
<div class="line"><a name="l00118"></a><span class="lineno"><a class="line" href="classFunctionVarLocsBuilder.html#a61f032e857254b5eb3b50dbc64f66624">  118</a></span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> <a class="code" href="classFunctionVarLocsBuilder.html#a61f032e857254b5eb3b50dbc64f66624">addVarLoc</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Before, <a class="code" href="classllvm_1_1DebugVariable.html">DebugVariable</a> Var, <a class="code" href="classllvm_1_1DIExpression.html">DIExpression</a> *Expr,</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;                 <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *V) {</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <a class="code" href="structllvm_1_1VarLocInfo.html">VarLocInfo</a> VarLoc;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    VarLoc.<a class="code" href="structllvm_1_1VarLocInfo.html#af70494f348808c889f07f71f43cd28ec">VariableID</a> = insertVariable(Var);</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    VarLoc.<a class="code" href="structllvm_1_1VarLocInfo.html#a2db7bf8bbe7f16fcee0e9f21aa87fe03">Expr</a> = Expr;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    VarLoc.<a class="code" href="structllvm_1_1VarLocInfo.html#ad7e310409e444bad60535cf956972194">DL</a> = <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    VarLoc.<a class="code" href="structllvm_1_1VarLocInfo.html#a49f19e43b844d06ff617163dd7405c50">V</a> = V;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    VarLocsBeforeInst[Before].emplace_back(VarLoc);</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  }</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;};</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160; </div>
<div class="line"><a name="l00129"></a><span class="lineno"><a class="line" href="classllvm_1_1FunctionVarLocs.html#a49453c652051a3e7530ed421bf160c92">  129</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1FunctionVarLocs.html#a49453c652051a3e7530ed421bf160c92">FunctionVarLocs::print</a>(<a class="code" href="classllvm_1_1raw__ostream.html">raw_ostream</a> &amp;<a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1Function.html">Function</a> &amp;Fn)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  <span class="comment">// Print the variable table first. TODO: Sorting by variable could make the</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  <span class="comment">// output more stable?</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  <span class="keywordtype">unsigned</span> Counter = -1;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;=== Variables ===\n&quot;</span>;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1DebugVariable.html">DebugVariable</a> &amp;V : Variables) {</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    ++Counter;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <span class="comment">// Skip first entry because it is a dummy entry.</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <span class="keywordflow">if</span> (Counter == 0) {</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    }</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;[&quot;</span> &lt;&lt; Counter &lt;&lt; <span class="stringliteral">&quot;] &quot;</span> &lt;&lt; V.getVariable()-&gt;getName();</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = V.getFragment())</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;      <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot; bits [&quot;</span> &lt;&lt; <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;OffsetInBits &lt;&lt; <span class="stringliteral">&quot;, &quot;</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;         &lt;&lt; <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;OffsetInBits + <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;SizeInBits &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">const</span> <span class="keyword">auto</span> *<a class="code" href="namespacellvm_1_1AArch64PACKey.html#abf4394f452bde3f544999858d71e4b46aaf2ff1a10f3f3b211d7781a33e4c1e05">IA</a> = V.getInlinedAt())</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;      <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot; inlined-at &quot;</span> &lt;&lt; *<a class="code" href="namespacellvm_1_1AArch64PACKey.html#abf4394f452bde3f544999858d71e4b46aaf2ff1a10f3f3b211d7781a33e4c1e05">IA</a>;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  }</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160; </div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  <span class="keyword">auto</span> PrintLoc = [&amp;<a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a>](<span class="keyword">const</span> <a class="code" href="structllvm_1_1VarLocInfo.html">VarLocInfo</a> &amp;Loc) {</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;DEF Var=[&quot;</span> &lt;&lt; (<a class="code" href="ADT_2tmp_8txt.html#aa10ee7493bddf2c751ca6e05451ef410">unsigned</a>)Loc.VariableID &lt;&lt; <span class="stringliteral">&quot;]&quot;</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;       &lt;&lt; <span class="stringliteral">&quot; Expr=&quot;</span> &lt;&lt; *Loc.Expr &lt;&lt; <span class="stringliteral">&quot; V=&quot;</span> &lt;&lt; *Loc.V &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  };</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160; </div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  <span class="comment">// Print the single location variables.</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;=== Single location vars ===\n&quot;</span>;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> It = <a class="code" href="classllvm_1_1FunctionVarLocs.html#a30380ad7d229bc9d071528df22aa0f5b">single_locs_begin</a>(), End = <a class="code" href="classllvm_1_1FunctionVarLocs.html#a9ea673c5d261b84069c9623995438c5a">single_locs_end</a>(); It != End;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;       ++It) {</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    PrintLoc(*It);</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  }</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160; </div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  <span class="comment">// Print the non-single-location defs in line with IR.</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;=== In-line variable defs ===&quot;</span>;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : Fn) {</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span> &lt;&lt; <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>.getName() &lt;&lt; <span class="stringliteral">&quot;:\n&quot;</span>;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> It = <a class="code" href="classllvm_1_1FunctionVarLocs.html#a8d02562350fc89b81730a63bdedaf610">locs_begin</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>), End = <a class="code" href="classllvm_1_1FunctionVarLocs.html#a4408ec4af32da89d4b979d16f24973fc">locs_end</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>); It != End; ++It) {</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        PrintLoc(*It);</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;      }</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;      <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    }</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  }</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;}</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160; </div>
<div class="line"><a name="l00174"></a><span class="lineno"><a class="line" href="classllvm_1_1FunctionVarLocs.html#af8922bc00acf83e71c7f2d47bbcfc0f6">  174</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1FunctionVarLocs.html#af8922bc00acf83e71c7f2d47bbcfc0f6">FunctionVarLocs::init</a>(<a class="code" href="classFunctionVarLocsBuilder.html">FunctionVarLocsBuilder</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>) {</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  <span class="comment">// Add the single-location variables first.</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;VarLoc : <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SingleLocVars)</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    VarLocRecords.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a396fcfee6914c76974b73c3d203da6a5">emplace_back</a>(VarLoc);</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  <span class="comment">// Mark the end of the section.</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;  SingleVarLocEnd = VarLocRecords.size();</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160; </div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  <span class="comment">// Insert a contiguous block of VarLocInfos for each instruction, mapping it</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;  <span class="comment">// to the start and end position in the vector with VarLocsBeforeInst.</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> : <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.VarLocsBeforeInst) {</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <span class="keywordtype">unsigned</span> BlockStart = VarLocRecords.size();</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="structllvm_1_1VarLocInfo.html">VarLocInfo</a> &amp;VarLoc : <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>.second)</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;      VarLocRecords.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a396fcfee6914c76974b73c3d203da6a5">emplace_back</a>(VarLoc);</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <span class="keywordtype">unsigned</span> BlockEnd = VarLocRecords.size();</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="comment">// Record the start and end indices.</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <span class="keywordflow">if</span> (BlockEnd != BlockStart)</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;      VarLocsBeforeInst[<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>.first] = {BlockStart, BlockEnd};</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  }</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160; </div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;  <span class="comment">// Copy the Variables vector from the builder&#39;s UniqueVector.</span></div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Variables.empty() &amp;&amp; <span class="stringliteral">&quot;Expect clear before init&quot;</span>);</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  <span class="comment">// UniqueVectors IDs are one-based (which means the VarLocInfo VarID values</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  <span class="comment">// are one-based) so reserve an extra and insert a dummy.</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;  Variables.reserve(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.Variables.size() + 1);</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;  Variables.push_back(<a class="code" href="classllvm_1_1DebugVariable.html">DebugVariable</a>(<span class="keyword">nullptr</span>, std::nullopt, <span class="keyword">nullptr</span>));</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;  Variables.append(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.Variables.begin(), <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.Variables.end());</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;}</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160; </div>
<div class="line"><a name="l00202"></a><span class="lineno"><a class="line" href="classllvm_1_1FunctionVarLocs.html#abe10e34cd384a2508d34c3b01c5f9866">  202</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1FunctionVarLocs.html#abe10e34cd384a2508d34c3b01c5f9866">FunctionVarLocs::clear</a>() {</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  Variables.clear();</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  VarLocRecords.<a class="code" href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  VarLocsBeforeInst.clear();</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  SingleVarLocEnd = 0;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;}</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="comment">/// Walk backwards along constant GEPs and bitcasts to the base storage from \p</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="comment">/// Start as far as possible. Prepend \Expression with the offset and append it</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="comment">/// with a DW_OP_deref that haes been implicit until now. Returns the walked-to</span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="comment">/// value and modified expression.</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;<span class="comment"></span><span class="keyword">static</span> std::pair&lt;Value *, DIExpression *&gt;</div>
<div class="line"><a name="l00214"></a><span class="lineno"><a class="line" href="AssignmentTrackingAnalysis_8cpp.html#ac976ef0dd1096fa3a40fb56ef305e6ae">  214</a></span>&#160;<a class="code" href="AssignmentTrackingAnalysis_8cpp.html#ac976ef0dd1096fa3a40fb56ef305e6ae">walkToAllocaAndPrependOffsetDeref</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *Start,</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;                                  <a class="code" href="classllvm_1_1DIExpression.html">DIExpression</a> *<a class="code" href="classllvm_1_1Expression.html">Expression</a>) {</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;  <a class="code" href="classllvm_1_1APInt.html">APInt</a> OffsetInBytes(<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeSizeInBits(Start-&gt;getType()), <span class="keyword">false</span>);</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *End =</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;      Start-&gt;stripAndAccumulateInBoundsConstantOffsets(<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, OffsetInBytes);</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;uint64_t, 3&gt;</a> Ops;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;  <span class="keywordflow">if</span> (OffsetInBytes.<a class="code" href="classllvm_1_1APInt.html#ac0e942dde4b113c4c0b1fd76333db93a">getBoolValue</a>()) {</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    Ops = {dwarf::DW_OP_plus_uconst, OffsetInBytes.<a class="code" href="classllvm_1_1APInt.html#a217e0207d9cc8e046c2dccbf0e4bb198">getZExtValue</a>()};</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <a class="code" href="classllvm_1_1Expression.html">Expression</a> = <a class="code" href="classllvm_1_1DIExpression.html#af3a48df3735933cf1621760019e5fd8c">DIExpression::prependOpcodes</a>(</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        <a class="code" href="classllvm_1_1Expression.html">Expression</a>, Ops, <span class="comment">/*StackValue=*/</span><span class="keyword">false</span>, <span class="comment">/*EntryValue=*/</span><span class="keyword">false</span>);</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  }</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  <a class="code" href="classllvm_1_1Expression.html">Expression</a> = <a class="code" href="classllvm_1_1DIExpression.html#a15f4de7989cc83855e8f65792ae94bc4">DIExpression::append</a>(<a class="code" href="classllvm_1_1Expression.html">Expression</a>, {dwarf::DW_OP_deref});</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;  <span class="keywordflow">return</span> {End, <a class="code" href="classllvm_1_1Expression.html">Expression</a>};</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;}</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="comment">/// Extract the offset used in \p DIExpr. Returns std::nullopt if the expression</span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="comment">/// doesn&#39;t explicitly describe a memory location with DW_OP_deref or if the</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="comment">/// expression is too complex to interpret.</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;<span class="comment"></span><span class="keyword">static</span> std::optional&lt;int64_t&gt;</div>
<div class="line"><a name="l00233"></a><span class="lineno"><a class="line" href="AssignmentTrackingAnalysis_8cpp.html#aa853932fefab2a5b2645c1090b393e00">  233</a></span>&#160;<a class="code" href="AssignmentTrackingAnalysis_8cpp.html#aa853932fefab2a5b2645c1090b393e00">getDerefOffsetInBytes</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1DIExpression.html">DIExpression</a> *DIExpr) {</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  int64_t <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> = 0;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> NumElements = DIExpr-&gt;<a class="code" href="classllvm_1_1DIExpression.html#a1b59c8fe81267b338774bf6c542f90ee">getNumElements</a>();</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> Elements = DIExpr-&gt;<a class="code" href="classllvm_1_1DIExpression.html#adabcdad8a235ac04d9fd2f5ca76115ad">getElements</a>();</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  <span class="keywordtype">unsigned</span> ExpectedDerefIdx = 0;</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;  <span class="comment">// Extract the offset.</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;  <span class="keywordflow">if</span> (NumElements &gt; 2 &amp;&amp; Elements[0] == dwarf::DW_OP_plus_uconst) {</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> = Elements[1];</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    ExpectedDerefIdx = 2;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (NumElements &gt; 3 &amp;&amp; Elements[0] == dwarf::DW_OP_constu) {</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    ExpectedDerefIdx = 3;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="keywordflow">if</span> (Elements[2] == dwarf::DW_OP_plus)</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;      <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> = Elements[1];</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Elements[2] == dwarf::DW_OP_minus)</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;      <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> = -Elements[1];</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;      <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  }</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160; </div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  <span class="comment">// If that&#39;s all there is it means there&#39;s no deref.</span></div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  <span class="keywordflow">if</span> (ExpectedDerefIdx &gt;= NumElements)</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160; </div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  <span class="comment">// Check the next element is DW_OP_deref - otherwise this is too complex or</span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;  <span class="comment">// isn&#39;t a deref expression.</span></div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;  <span class="keywordflow">if</span> (Elements[ExpectedDerefIdx] != dwarf::DW_OP_deref)</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160; </div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  <span class="comment">// Check the final operation is either the DW_OP_deref or is a fragment.</span></div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  <span class="keywordflow">if</span> (NumElements == ExpectedDerefIdx + 1)</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>; <span class="comment">// Ends with deref.</span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;  <span class="keywordtype">unsigned</span> ExpectedFragFirstIdx = ExpectedDerefIdx + 1;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;  <span class="keywordtype">unsigned</span> ExpectedFragFinalIdx = ExpectedFragFirstIdx + 2;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  <span class="keywordflow">if</span> (NumElements == ExpectedFragFinalIdx + 1 &amp;&amp;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;      Elements[ExpectedFragFirstIdx] == <a class="code" href="namespacellvm_1_1dwarf.html#a78e9cb1527edb3cc1d1ee577257b5f0cac09e4cb866e5aa9bc0480359be9e7953">dwarf::DW_OP_LLVM_fragment</a>)</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>; <span class="comment">// Ends with deref + fragment.</span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160; </div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;  <span class="comment">// Don&#39;t bother trying to interpret anything more complex.</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;}</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;<span class="comment">/// A whole (unfragmented) source variable.</span></div>
<div class="line"><a name="l00275"></a><span class="lineno"><a class="line" href="AssignmentTrackingAnalysis_8cpp.html#a05c5b2328f38cb1affebb8ad4ab6fe40">  275</a></span>&#160;<span class="comment"></span><span class="keyword">using</span> <a class="code" href="AssignmentTrackingAnalysis_8cpp.html#a05c5b2328f38cb1affebb8ad4ab6fe40">DebugAggregate</a> = std::pair&lt;const DILocalVariable *, const DILocation *&gt;;</div>
<div class="line"><a name="l00276"></a><span class="lineno"><a class="line" href="AssignmentTrackingAnalysis_8cpp.html#a4514f516df040b468e552a28163b3747">  276</a></span>&#160;<span class="keyword">static</span> <a class="code" href="AssignmentTrackingAnalysis_8cpp.html#a05c5b2328f38cb1affebb8ad4ab6fe40">DebugAggregate</a> <a class="code" href="AssignmentTrackingAnalysis_8cpp.html#a4514f516df040b468e552a28163b3747">getAggregate</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1DbgVariableIntrinsic.html">DbgVariableIntrinsic</a> *DII) {</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="AssignmentTrackingAnalysis_8cpp.html#a05c5b2328f38cb1affebb8ad4ab6fe40">DebugAggregate</a>(DII-&gt;<a class="code" href="classllvm_1_1DbgVariableIntrinsic.html#ac161deb2a31f78c85f94fbe0f3ba97b4">getVariable</a>(), DII-&gt;<a class="code" href="classllvm_1_1Instruction.html#ab4f3bf98b5054831b608852e33427814">getDebugLoc</a>().<a class="code" href="classllvm_1_1DebugLoc.html#ada0b6f3c53a53b7274e7aeb23eeab5a8">getInlinedAt</a>());</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;}</div>
<div class="line"><a name="l00279"></a><span class="lineno"><a class="line" href="AssignmentTrackingAnalysis_8cpp.html#aa891f18ca7f9e534d145c8ff7dfd6b69">  279</a></span>&#160;<span class="keyword">static</span> <a class="code" href="AssignmentTrackingAnalysis_8cpp.html#a05c5b2328f38cb1affebb8ad4ab6fe40">DebugAggregate</a> <a class="code" href="AssignmentTrackingAnalysis_8cpp.html#a4514f516df040b468e552a28163b3747">getAggregate</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1DebugVariable.html">DebugVariable</a> &amp;Var) {</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="AssignmentTrackingAnalysis_8cpp.html#a05c5b2328f38cb1affebb8ad4ab6fe40">DebugAggregate</a>(Var.<a class="code" href="classllvm_1_1DebugVariable.html#ae5969d48a72e8641cb15bc81a3bb1af8">getVariable</a>(), Var.<a class="code" href="classllvm_1_1DebugVariable.html#a90b7ea85a03be15ace66f601bf299322">getInlinedAt</a>());</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;}</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160; </div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="keyword">namespace </span>{<span class="comment"></span></div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="comment">/// In dwarf emission, the following sequence</span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;<span class="comment">///    1. dbg.value ... Fragment(0, 64)</span></div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;<span class="comment">///    2. dbg.value ... Fragment(0, 32)</span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;<span class="comment">/// effectively sets Fragment(32, 32) to undef (each def sets all bits not in</span></div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;<span class="comment">/// the intersection of the fragments to having &quot;no location&quot;). This makes</span></div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;<span class="comment">/// sense for implicit location values because splitting the computed values</span></div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;<span class="comment">/// could be troublesome, and is probably quite uncommon.  When we convert</span></div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;<span class="comment">/// dbg.assigns to dbg.value+deref this kind of thing is common, and describing</span></div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;<span class="comment">/// a location (memory) rather than a value means we don&#39;t need to worry about</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;<span class="comment">/// splitting any values, so we try to recover the rest of the fragment</span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;<span class="comment">/// location here.</span></div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;<span class="comment">/// This class performs a(nother) dataflow analysis over the function, adding</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;<span class="comment">/// variable locations so that any bits of a variable with a memory location</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;<span class="comment">/// have that location explicitly reinstated at each subsequent variable</span></div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;<span class="comment">/// location definition that that doesn&#39;t overwrite those bits. i.e. after a</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;<span class="comment">/// variable location def, insert new defs for the memory location with</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="comment">/// fragments for the difference of &quot;all bits currently in memory&quot; and &quot;the</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<span class="comment">/// fragment of the second def&quot;.</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="comment"></span><span class="keyword">class </span>MemLocFragmentFill {</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> &amp;Fn;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;  <a class="code" href="classFunctionVarLocsBuilder.html">FunctionVarLocsBuilder</a> *FnVarLocs;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;DebugAggregate&gt;</a> *VarsWithStackSlot;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160; </div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;  <span class="comment">// 0 = no memory location.</span></div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;  <span class="keyword">using</span> BaseAddress = <a class="code" href="ADT_2tmp_8txt.html#aa10ee7493bddf2c751ca6e05451ef410">unsigned</a>;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  <span class="keyword">using</span> OffsetInBitsTy = <a class="code" href="ADT_2tmp_8txt.html#aa10ee7493bddf2c751ca6e05451ef410">unsigned</a>;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;  <span class="keyword">using</span> FragTraits = <a class="code" href="structllvm_1_1IntervalMapHalfOpenInfo.html">IntervalMapHalfOpenInfo&lt;OffsetInBitsTy&gt;</a>;</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;  <span class="keyword">using</span> FragsInMemMap = <a class="code" href="classllvm_1_1IntervalMap.html">IntervalMap</a>&lt;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;      OffsetInBitsTy, BaseAddress,</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;      <a class="code" href="structllvm_1_1IntervalMapImpl_1_1NodeSizer.html">IntervalMapImpl::NodeSizer&lt;OffsetInBitsTy, BaseAddress&gt;::LeafSize</a>,</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;      FragTraits&gt;;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;  <a class="code" href="RegAllocBasic_8cpp.html#ad5d00e1d77644d95847b9bf8da12b759">FragsInMemMap::Allocator</a> IntervalMapAlloc;</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;  <span class="keyword">using</span> VarFragMap = <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;unsigned, FragsInMemMap&gt;</a>;</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;<span class="comment">  /// IDs for memory location base addresses in maps. Use 0 to indicate that</span></div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;<span class="comment">  /// there&#39;s no memory location.</span></div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1UniqueVector.html">UniqueVector&lt;Value *&gt;</a> Bases;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;  <a class="code" href="classllvm_1_1UniqueVector.html">UniqueVector&lt;DebugAggregate&gt;</a> <a class="code" href="SROA_8cpp.html#a5b3f8e5f6c512fe6a5059dd0c51aec95">Aggregates</a>;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;const BasicBlock *, VarFragMap&gt;</a> LiveIn;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;const BasicBlock *, VarFragMap&gt;</a> LiveOut;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160; </div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;  <span class="keyword">struct </span>FragMemLoc {</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    <span class="keywordtype">unsigned</span> Var;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1sampleprof.html#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a>;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    <span class="keywordtype">unsigned</span> OffsetInBits;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    <span class="keywordtype">unsigned</span> SizeInBits;</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;  };</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;  <span class="keyword">using</span> InsertMap = <a class="code" href="classllvm_1_1MapVector.html">MapVector&lt;Instruction *, SmallVector&lt;FragMemLoc&gt;</a>&gt;;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;<span class="comment">  /// BBInsertBeforeMap holds a description for the set of location defs to be</span></div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;<span class="comment">  /// inserted after the analysis is complete. It is updated during the dataflow</span></div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;<span class="comment">  /// and the entry for a block is CLEARED each time it is (re-)visited. After</span></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;<span class="comment">  /// the dataflow is complete, each block entry will contain the set of defs</span></div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;<span class="comment">  /// calculated during the final (fixed-point) iteration.</span></div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;const BasicBlock *, InsertMap&gt;</a> BBInsertBeforeMap;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160; </div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">bool</span> intervalMapsAreEqual(<span class="keyword">const</span> FragsInMemMap &amp;A,</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;                                   <span class="keyword">const</span> FragsInMemMap &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>) {</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <span class="keyword">auto</span> AIt = <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>.begin(), AEnd = <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>.end();</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    <span class="keyword">auto</span> BIt = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.begin(), BEnd = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.end();</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <span class="keywordflow">for</span> (; AIt != AEnd; ++AIt, ++BIt) {</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;      <span class="keywordflow">if</span> (BIt == BEnd)</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// B has fewer elements than A.</span></div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;      <span class="keywordflow">if</span> (AIt.start() != BIt.start() || AIt.stop() != BIt.stop())</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// Interval is different.</span></div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;      <span class="keywordflow">if</span> (*AIt != *BIt)</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// Value at interval is different.</span></div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    }</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <span class="comment">// AIt == AEnd. Check BIt is also now at end.</span></div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    <span class="keywordflow">return</span> BIt == BEnd;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  }</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160; </div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">bool</span> varFragMapsAreEqual(<span class="keyword">const</span> VarFragMap &amp;A, <span class="keyword">const</span> VarFragMap &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>) {</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>.size() != <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.size())</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;APair : A) {</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;      <span class="keyword">auto</span> BIt = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.find(APair.first);</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;      <span class="keywordflow">if</span> (BIt == <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.end())</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;      <span class="keywordflow">if</span> (!intervalMapsAreEqual(APair.second, BIt-&gt;second))</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    }</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;  }</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;<span class="comment">  /// Return a string for the value that \p BaseID represents.</span></div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;<span class="comment"></span>  std::string <a class="code" href="namespacellvm.html#a63540526d092e2f4bbc70590b6034f4e">toString</a>(<span class="keywordtype">unsigned</span> BaseID) {</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    <span class="keywordflow">if</span> (BaseID)</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;      <span class="keywordflow">return</span> Bases[BaseID]-&gt;getName().str();</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;None&quot;</span>;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;  }</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;<span class="comment">  /// Format string describing an FragsInMemMap (IntervalMap) interval.</span></div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;<span class="comment"></span>  std::string <a class="code" href="namespacellvm.html#a63540526d092e2f4bbc70590b6034f4e">toString</a>(FragsInMemMap::const_iterator It, <span class="keywordtype">bool</span> Newline = <span class="keyword">true</span>) {</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    std::string <a class="code" href="namespacellvm_1_1pdb.html#a434cfa04e4ed34b7a901378557d4ca9ea4501cbae351ca0ef6f162f946ba58d0e">String</a>;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    std::stringstream <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>(String);</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    <span class="keywordflow">if</span> (It.valid()) {</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;      <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a> &lt;&lt; <span class="stringliteral">&quot;[&quot;</span> &lt;&lt; It.start() &lt;&lt; <span class="stringliteral">&quot;, &quot;</span> &lt;&lt; It.stop()</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;        &lt;&lt; <span class="stringliteral">&quot;): &quot;</span> &lt;&lt; <a class="code" href="namespacellvm.html#a63540526d092e2f4bbc70590b6034f4e">toString</a>(It.value());</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;      <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a> &lt;&lt; <span class="stringliteral">&quot;invalid iterator (end)&quot;</span>;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    }</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    <span class="keywordflow">if</span> (Newline)</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;      <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>.str();</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;  };</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160; </div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;  FragsInMemMap meetFragments(<span class="keyword">const</span> FragsInMemMap &amp;A, <span class="keyword">const</span> FragsInMemMap &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>) {</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    FragsInMemMap <a class="code" href="namespacellvm_1_1ms__demangle.html#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>(IntervalMapAlloc);</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> AIt = <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>.begin(), AEnd = <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>.end(); AIt != AEnd; ++AIt) {</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;a &quot;</span> &lt;&lt; <a class="code" href="namespacellvm.html#a63540526d092e2f4bbc70590b6034f4e">toString</a>(AIt));</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;      <span class="comment">// This is basically copied from process() and inverted (process is</span></div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;      <span class="comment">// performing something like a union whereas this is more of an</span></div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;      <span class="comment">// intersect).</span></div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160; </div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;      <span class="comment">// There&#39;s no work to do if interval `a` overlaps no fragments in map `B`.</span></div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.overlaps(AIt.start(), AIt.stop()))</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160; </div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;      <span class="comment">// Does StartBit intersect an existing fragment?</span></div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;      <span class="keyword">auto</span> FirstOverlap = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.find(AIt.start());</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(FirstOverlap != <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.end());</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;      <span class="keywordtype">bool</span> IntersectStart = FirstOverlap.start() &lt; AIt.start();</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;- FirstOverlap &quot;</span> &lt;&lt; <a class="code" href="namespacellvm.html#a63540526d092e2f4bbc70590b6034f4e">toString</a>(FirstOverlap, <span class="keyword">false</span>)</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;                        &lt;&lt; <span class="stringliteral">&quot;, IntersectStart: &quot;</span> &lt;&lt; IntersectStart &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160; </div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;      <span class="comment">// Does EndBit intersect an existing fragment?</span></div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;      <span class="keyword">auto</span> LastOverlap = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.find(AIt.stop());</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;      <span class="keywordtype">bool</span> IntersectEnd =</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;          LastOverlap != <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.end() &amp;&amp; LastOverlap.start() &lt; AIt.stop();</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;- LastOverlap &quot;</span> &lt;&lt; <a class="code" href="namespacellvm.html#a63540526d092e2f4bbc70590b6034f4e">toString</a>(LastOverlap, <span class="keyword">false</span>)</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;                        &lt;&lt; <span class="stringliteral">&quot;, IntersectEnd: &quot;</span> &lt;&lt; IntersectEnd &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160; </div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;      <span class="comment">// Check if both ends of `a` intersect the same interval `b`.</span></div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;      <span class="keywordflow">if</span> (IntersectStart &amp;&amp; IntersectEnd &amp;&amp; FirstOverlap == LastOverlap) {</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;        <span class="comment">// Insert `a` (`a` is contained in `b`) if the values match.</span></div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;        <span class="comment">// [ a ]</span></div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;        <span class="comment">// [ - b - ]</span></div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;        <span class="comment">// -</span></div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;        <span class="comment">// [ r ]</span></div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;        <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;- a is contained within &quot;</span></div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;                          &lt;&lt; <a class="code" href="namespacellvm.html#a63540526d092e2f4bbc70590b6034f4e">toString</a>(FirstOverlap));</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;        <span class="keywordflow">if</span> (*AIt &amp;&amp; *AIt == *FirstOverlap)</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;          <a class="code" href="namespacellvm_1_1ms__demangle.html#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>.insert(AIt.start(), AIt.stop(), *AIt);</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;        <span class="comment">// There&#39;s an overlap but `a` is not fully contained within</span></div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;        <span class="comment">// `b`. Shorten any end-point intersections.</span></div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;        <span class="comment">//     [ - a - ]</span></div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;        <span class="comment">// [ - b - ]</span></div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;        <span class="comment">// -</span></div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;        <span class="comment">//     [ r ]</span></div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;        <span class="keyword">auto</span> Next = FirstOverlap;</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;        <span class="keywordflow">if</span> (IntersectStart) {</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;          <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;- insert intersection of a and &quot;</span></div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;                            &lt;&lt; <a class="code" href="namespacellvm.html#a63540526d092e2f4bbc70590b6034f4e">toString</a>(FirstOverlap));</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;          <span class="keywordflow">if</span> (*AIt &amp;&amp; *AIt == *FirstOverlap)</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;            <a class="code" href="namespacellvm_1_1ms__demangle.html#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>.insert(AIt.start(), FirstOverlap.stop(), *AIt);</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;          ++Next;</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;        }</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;        <span class="comment">// [ - a - ]</span></div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;        <span class="comment">//     [ - b - ]</span></div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;        <span class="comment">// -</span></div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;        <span class="comment">//     [ r ]</span></div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        <span class="keywordflow">if</span> (IntersectEnd) {</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;          <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;- insert intersection of a and &quot;</span></div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;                            &lt;&lt; <a class="code" href="namespacellvm.html#a63540526d092e2f4bbc70590b6034f4e">toString</a>(LastOverlap));</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;          <span class="keywordflow">if</span> (*AIt &amp;&amp; *AIt == *LastOverlap)</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;            <a class="code" href="namespacellvm_1_1ms__demangle.html#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>.insert(LastOverlap.start(), AIt.stop(), *AIt);</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;        }</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160; </div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;        <span class="comment">// Insert all intervals in map `B` that are contained within interval</span></div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;        <span class="comment">// `a` where the values match.</span></div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;        <span class="comment">// [ -  - a -  - ]</span></div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;        <span class="comment">// [ b1 ]   [ b2 ]</span></div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;        <span class="comment">// -</span></div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;        <span class="comment">// [ r1 ]   [ r2 ]</span></div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;        <span class="keywordflow">while</span> (Next != <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.end() &amp;&amp; Next.start() &lt; AIt.stop() &amp;&amp;</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;               Next.stop() &lt;= AIt.stop()) {</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;          <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>()</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;                     &lt;&lt; <span class="stringliteral">&quot;- insert intersection of a and &quot;</span> &lt;&lt; <a class="code" href="namespacellvm.html#a63540526d092e2f4bbc70590b6034f4e">toString</a>(Next));</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;          <span class="keywordflow">if</span> (*AIt &amp;&amp; *AIt == *Next)</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;            <a class="code" href="namespacellvm_1_1ms__demangle.html#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>.insert(Next.start(), Next.stop(), *Next);</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;          ++Next;</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;        }</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;      }</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    }</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1ms__demangle.html#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>;</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;  }</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;<span class="comment">  /// Meet \p A and \p B, storing the result in \p A.</span></div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> meetVars(VarFragMap &amp;A, <span class="keyword">const</span> VarFragMap &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>) {</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    <span class="comment">// Meet A and B.</span></div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    <span class="comment">// Result = meet(a, b) for a in A, b in B where Var(a) == Var(b)</span></div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> It = <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>.begin(), End = <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>.end(); It != End; ++It) {</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;      <span class="keywordtype">unsigned</span> AVar = It-&gt;first;</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;      FragsInMemMap &amp;AFrags = It-&gt;second;</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;      <span class="keyword">auto</span> BIt = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.find(AVar);</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;      <span class="keywordflow">if</span> (BIt == <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.end()) {</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;        <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>.erase(It);</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;        <span class="keywordflow">continue</span>; <span class="comment">// Var has no bits defined in B.</span></div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;      }</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;meet fragment maps for &quot;</span></div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;                        &lt;&lt; <a class="code" href="SROA_8cpp.html#a5b3f8e5f6c512fe6a5059dd0c51aec95">Aggregates</a>[AVar].first-&gt;getName() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;      AFrags = meetFragments(AFrags, BIt-&gt;second);</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    }</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;  }</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160; </div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;  <span class="keywordtype">bool</span> meet(<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>,</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;            <span class="keyword">const</span> <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;BasicBlock *, 16&gt;</a> &amp;Visited) {</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;meet block info from preds of &quot;</span> &lt;&lt; <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>.getName()</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160; </div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    VarFragMap BBLiveIn;</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    <span class="keywordtype">bool</span> FirstMeet = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    <span class="comment">// LiveIn locs for BB is the meet of the already-processed preds&#39; LiveOut</span></div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    <span class="comment">// locs.</span></div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code" href="namespacellvm.html#a7e108932dc3da5294aed99a353aac9c4">pred_begin</a>(&amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>), <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = <a class="code" href="namespacellvm.html#a5eeaf08e96168c2cac8960f87f0ef360">pred_end</a>(&amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>++) {</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;      <span class="comment">// Ignore preds that haven&#39;t been processed yet. This is essentially the</span></div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;      <span class="comment">// same as initialising all variables to implicit top value () which is</span></div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;      <span class="comment">// the identity value for the meet operation.</span></div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Pred = *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;      <span class="keywordflow">if</span> (!Visited.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a1f475b0df44ebd7169e720fa1bf9169e">count</a>(Pred))</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160; </div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;      <span class="keyword">auto</span> PredLiveOut = LiveOut.<a class="code" href="classllvm_1_1DenseMapBase.html#a0c047f127ed4380a6f383d70bec4eb94">find</a>(Pred);</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(PredLiveOut != LiveOut.<a class="code" href="classllvm_1_1DenseMapBase.html#a65520b9c67759099e313d0f4e7b5ff9e">end</a>());</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160; </div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;      <span class="keywordflow">if</span> (FirstMeet) {</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;        <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;BBLiveIn = &quot;</span> &lt;&lt; Pred-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;        BBLiveIn = PredLiveOut-&gt;second;</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;        FirstMeet = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;        <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;BBLiveIn = meet BBLiveIn, &quot;</span> &lt;&lt; Pred-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>()</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;                          &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;        meetVars(BBLiveIn, PredLiveOut-&gt;second);</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;      }</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160; </div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;      <span class="comment">// An empty set is  for the intersect-like meet operation. If we&#39;ve</span></div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;      <span class="comment">// already got  there&#39;s no need to run the code - we know the result is</span></div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;      <span class="comment">//  since `meet(a, ) = `.</span></div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;      <span class="keywordflow">if</span> (BBLiveIn.size() == 0)</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    }</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160; </div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    <span class="keyword">auto</span> CurrentLiveInEntry = LiveIn.<a class="code" href="classllvm_1_1DenseMapBase.html#a0c047f127ed4380a6f383d70bec4eb94">find</a>(&amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    <span class="comment">// If there&#39;s no LiveIn entry for the block yet, add it.</span></div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    <span class="keywordflow">if</span> (CurrentLiveInEntry == LiveIn.<a class="code" href="classllvm_1_1DenseMapBase.html#a65520b9c67759099e313d0f4e7b5ff9e">end</a>()) {</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;change=true (first) on meet on &quot;</span> &lt;&lt; <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>.getName()</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;                        &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;      LiveIn[&amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>] = <a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(BBLiveIn);</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;      <span class="keywordflow">return</span> <span class="comment">/*Changed=*/</span><span class="keyword">true</span>;</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    }</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160; </div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    <span class="comment">// If the LiveIn set has changed (expensive check) update it and return</span></div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    <span class="comment">// true.</span></div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    <span class="keywordflow">if</span> (!varFragMapsAreEqual(BBLiveIn, CurrentLiveInEntry-&gt;second)) {</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;change=true on meet on &quot;</span> &lt;&lt; <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>.getName() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;      CurrentLiveInEntry-&gt;second = <a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(BBLiveIn);</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;      <span class="keywordflow">return</span> <span class="comment">/*Changed=*/</span><span class="keyword">true</span>;</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    }</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160; </div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;change=false on meet on &quot;</span> &lt;&lt; <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>.getName() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    <span class="keywordflow">return</span> <span class="comment">/*Changed=*/</span><span class="keyword">false</span>;</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;  }</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160; </div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;  <span class="keywordtype">void</span> insertMemLoc(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;Before, <span class="keywordtype">unsigned</span> Var,</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;                    <span class="keywordtype">unsigned</span> StartBit, <span class="keywordtype">unsigned</span> EndBit, <span class="keywordtype">unsigned</span> Base,</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;                    <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>) {</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(StartBit &lt; EndBit &amp;&amp; <span class="stringliteral">&quot;Cannot create fragment of size &lt;= 0&quot;</span>);</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    <span class="keywordflow">if</span> (!Base)</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    FragMemLoc Loc;</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    Loc.Var = Var;</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    Loc.OffsetInBits = StartBit;</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    Loc.SizeInBits = EndBit - StartBit;</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Base &amp;&amp; <span class="stringliteral">&quot;Expected a non-zero ID for Base address&quot;</span>);</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    Loc.Base = <a class="code" href="namespacellvm_1_1sampleprof.html#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a>;</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    Loc.DL = <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>;</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    BBInsertBeforeMap[&amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>][&amp;Before].push_back(Loc);</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Add mem def for &quot;</span> &lt;&lt; <a class="code" href="SROA_8cpp.html#a5b3f8e5f6c512fe6a5059dd0c51aec95">Aggregates</a>[Var].first-&gt;getName()</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot; bits [&quot;</span> &lt;&lt; StartBit &lt;&lt; <span class="stringliteral">&quot;, &quot;</span> &lt;&lt; EndBit &lt;&lt; <span class="stringliteral">&quot;)\n&quot;</span>);</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;  }</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160; </div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;  <span class="keywordtype">void</span> addDef(<span class="keyword">const</span> <a class="code" href="structllvm_1_1VarLocInfo.html">VarLocInfo</a> &amp;VarLoc, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;Before, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>,</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;              VarFragMap &amp;LiveSet) {</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    <a class="code" href="classllvm_1_1DebugVariable.html">DebugVariable</a> DbgVar = FnVarLocs-&gt;<a class="code" href="classFunctionVarLocsBuilder.html#a7015ad4444cf34e6d69326f60268671a">getVariable</a>(VarLoc.<a class="code" href="structllvm_1_1VarLocInfo.html#af70494f348808c889f07f71f43cd28ec">VariableID</a>);</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    <span class="keywordflow">if</span> (skipVariable(DbgVar.<a class="code" href="classllvm_1_1DebugVariable.html#ae5969d48a72e8641cb15bc81a3bb1af8">getVariable</a>()))</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    <span class="comment">// Don&#39;t bother doing anything for this variables if we know it&#39;s fully</span></div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    <span class="comment">// promoted. We&#39;re only interested in variables that (sometimes) live on</span></div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    <span class="comment">// the stack here.</span></div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    <span class="keywordflow">if</span> (!VarsWithStackSlot-&gt;<a class="code" href="classllvm_1_1detail_1_1DenseSetImpl.html#afe504aa31a6a354cec13f5b32d0b1d9d">count</a>(<a class="code" href="AssignmentTrackingAnalysis_8cpp.html#a4514f516df040b468e552a28163b3747">getAggregate</a>(DbgVar)))</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    <span class="keywordtype">unsigned</span> Var = <a class="code" href="SROA_8cpp.html#a5b3f8e5f6c512fe6a5059dd0c51aec95">Aggregates</a>.insert(</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;        <a class="code" href="AssignmentTrackingAnalysis_8cpp.html#a05c5b2328f38cb1affebb8ad4ab6fe40">DebugAggregate</a>(DbgVar.<a class="code" href="classllvm_1_1DebugVariable.html#ae5969d48a72e8641cb15bc81a3bb1af8">getVariable</a>(), VarLoc.<a class="code" href="structllvm_1_1VarLocInfo.html#ad7e310409e444bad60535cf956972194">DL</a>.<a class="code" href="classllvm_1_1DebugLoc.html#ada0b6f3c53a53b7274e7aeb23eeab5a8">getInlinedAt</a>()));</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160; </div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    <span class="comment">// [StartBit: EndBit) are the bits affected by this def.</span></div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1DIExpression.html">DIExpression</a> *DIExpr = VarLoc.<a class="code" href="structllvm_1_1VarLocInfo.html#a2db7bf8bbe7f16fcee0e9f21aa87fe03">Expr</a>;</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    <span class="keywordtype">unsigned</span> StartBit;</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    <span class="keywordtype">unsigned</span> EndBit;</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> Frag = DIExpr-&gt;<a class="code" href="classllvm_1_1DIExpression.html#a7cc5f1632a4c520497898439c17dc026">getFragmentInfo</a>()) {</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;      StartBit = Frag-&gt;OffsetInBits;</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;      EndBit = StartBit + Frag-&gt;SizeInBits;</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<span class="keyword">static_cast&lt;</span><span class="keywordtype">bool</span><span class="keyword">&gt;</span>(DbgVar.<a class="code" href="classllvm_1_1DebugVariable.html#ae5969d48a72e8641cb15bc81a3bb1af8">getVariable</a>()-&gt;<a class="code" href="classllvm_1_1DIVariable.html#a6b5977deeb9f99e156685e190de78403">getSizeInBits</a>()));</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;      StartBit = 0;</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;      EndBit = *DbgVar.<a class="code" href="classllvm_1_1DebugVariable.html#ae5969d48a72e8641cb15bc81a3bb1af8">getVariable</a>()-&gt;<a class="code" href="classllvm_1_1DIVariable.html#a6b5977deeb9f99e156685e190de78403">getSizeInBits</a>();</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    }</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160; </div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    <span class="comment">// We will only fill fragments for simple memory-describing dbg.value</span></div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    <span class="comment">// intrinsics. If the fragment offset is the same as the offset from the</span></div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;    <span class="comment">// base pointer, do The Thing, otherwise fall back to normal dbg.value</span></div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    <span class="comment">// behaviour. AssignmentTrackingLowering has generated DIExpressions</span></div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    <span class="comment">// written in terms of the base pointer.</span></div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    <span class="comment">// TODO: Remove this condition since the fragment offset doesn&#39;t always</span></div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    <span class="comment">// equal the offset from base pointer (e.g. for a SROA-split variable).</span></div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> DerefOffsetInBytes = <a class="code" href="AssignmentTrackingAnalysis_8cpp.html#aa853932fefab2a5b2645c1090b393e00">getDerefOffsetInBytes</a>(DIExpr);</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1sampleprof.html#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a> =</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;        DerefOffsetInBytes &amp;&amp; *DerefOffsetInBytes * 8 == StartBit</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;            ? Bases.<a class="code" href="classllvm_1_1UniqueVector.html#a03442009de901bb89b2cdb6b22cd9690">insert</a>(VarLoc.<a class="code" href="structllvm_1_1VarLocInfo.html#a49f19e43b844d06ff617163dd7405c50">V</a>)</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;            : 0;</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;DEF &quot;</span> &lt;&lt; DbgVar.<a class="code" href="classllvm_1_1DebugVariable.html#ae5969d48a72e8641cb15bc81a3bb1af8">getVariable</a>()-&gt;<a class="code" href="classllvm_1_1DIVariable.html#af44724cae4bcd562972facee1cf035a5">getName</a>() &lt;&lt; <span class="stringliteral">&quot; [&quot;</span></div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;                      &lt;&lt; StartBit &lt;&lt; <span class="stringliteral">&quot;, &quot;</span> &lt;&lt; EndBit &lt;&lt; <span class="stringliteral">&quot;): &quot;</span> &lt;&lt; <a class="code" href="namespacellvm.html#a63540526d092e2f4bbc70590b6034f4e">toString</a>(Base)</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160; </div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    <span class="comment">// First of all, any locs that use mem that are disrupted need reinstating.</span></div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    <span class="comment">// Unfortunately, IntervalMap doesn&#39;t let us insert intervals that overlap</span></div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;    <span class="comment">// with existing intervals so this code involves a lot of fiddling around</span></div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;    <span class="comment">// with intervals to do that manually.</span></div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    <span class="keyword">auto</span> FragIt = LiveSet.find(Var);</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160; </div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    <span class="comment">// Check if the variable does not exist in the map.</span></div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    <span class="keywordflow">if</span> (FragIt == LiveSet.end()) {</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;      <span class="comment">// Add this variable to the BB map.</span></div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;      <span class="keyword">auto</span> <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> = LiveSet.try_emplace(Var, FragsInMemMap(IntervalMapAlloc));</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>.second &amp;&amp; <span class="stringliteral">&quot;Var already in map?&quot;</span>);</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;      <span class="comment">// Add the interval to the fragment map.</span></div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;      <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>.first-&gt;second.insert(StartBit, EndBit, Base);</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    }</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    <span class="comment">// The variable has an entry in the map.</span></div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160; </div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    FragsInMemMap &amp;FragMap = FragIt-&gt;second;</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    <span class="comment">// First check the easy case: the new fragment `f` doesn&#39;t overlap with any</span></div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    <span class="comment">// intervals.</span></div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    <span class="keywordflow">if</span> (!FragMap.overlaps(StartBit, EndBit)) {</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;- No overlaps\n&quot;</span>);</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;      FragMap.insert(StartBit, EndBit, Base);</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    }</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    <span class="comment">// There is at least one overlap.</span></div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160; </div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    <span class="comment">// Does StartBit intersect an existing fragment?</span></div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    <span class="keyword">auto</span> FirstOverlap = FragMap.find(StartBit);</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(FirstOverlap != FragMap.end());</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    <span class="keywordtype">bool</span> IntersectStart = FirstOverlap.start() &lt; StartBit;</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160; </div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    <span class="comment">// Does EndBit intersect an existing fragment?</span></div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    <span class="keyword">auto</span> LastOverlap = FragMap.find(EndBit);</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    <span class="keywordtype">bool</span> IntersectEnd = LastOverlap.valid() &amp;&amp; LastOverlap.start() &lt; EndBit;</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160; </div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;    <span class="comment">// Check if both ends of `f` intersect the same interval `i`.</span></div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    <span class="keywordflow">if</span> (IntersectStart &amp;&amp; IntersectEnd &amp;&amp; FirstOverlap == LastOverlap) {</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;- Intersect single interval @ both ends\n&quot;</span>);</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;      <span class="comment">// Shorten `i` so that there&#39;s space to insert `f`.</span></div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;      <span class="comment">//      [ f ]</span></div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;      <span class="comment">// [  -   i   -  ]</span></div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;      <span class="comment">// +</span></div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;      <span class="comment">// [ i ][ f ][ i ]</span></div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160; </div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;      <span class="comment">// Save values for use after inserting a new interval.</span></div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;      <span class="keyword">auto</span> EndBitOfOverlap = FirstOverlap.stop();</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;      <span class="keywordtype">unsigned</span> OverlapValue = FirstOverlap.value();</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160; </div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;      <span class="comment">// Shorten the overlapping interval.</span></div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;      FirstOverlap.setStop(StartBit);</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;      insertMemLoc(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, Before, Var, FirstOverlap.start(), StartBit,</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;                   OverlapValue, VarLoc.<a class="code" href="structllvm_1_1VarLocInfo.html#ad7e310409e444bad60535cf956972194">DL</a>);</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160; </div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;      <span class="comment">// Insert a new interval to represent the end part.</span></div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;      FragMap.insert(EndBit, EndBitOfOverlap, OverlapValue);</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;      insertMemLoc(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, Before, Var, EndBit, EndBitOfOverlap, OverlapValue,</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;                   VarLoc.<a class="code" href="structllvm_1_1VarLocInfo.html#ad7e310409e444bad60535cf956972194">DL</a>);</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160; </div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;      <span class="comment">// Insert the new (middle) fragment now there is space.</span></div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;      FragMap.insert(StartBit, EndBit, Base);</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;      <span class="comment">// There&#39;s an overlap but `f` may not be fully contained within</span></div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;      <span class="comment">// `i`. Shorten any end-point intersections so that we can then</span></div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;      <span class="comment">// insert `f`.</span></div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;      <span class="comment">//      [ - f - ]</span></div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;      <span class="comment">// [ - i - ]</span></div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;      <span class="comment">// |   |</span></div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;      <span class="comment">// [ i ]</span></div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;      <span class="comment">// Shorten any end-point intersections.</span></div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;      <span class="keywordflow">if</span> (IntersectStart) {</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;        <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;- Intersect interval at start\n&quot;</span>);</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;        <span class="comment">// Split off at the intersection.</span></div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;        FirstOverlap.setStop(StartBit);</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;        insertMemLoc(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, Before, Var, FirstOverlap.start(), StartBit,</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;                     *FirstOverlap, VarLoc.<a class="code" href="structllvm_1_1VarLocInfo.html#ad7e310409e444bad60535cf956972194">DL</a>);</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;      }</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;      <span class="comment">// [ - f - ]</span></div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;      <span class="comment">//      [ - i - ]</span></div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;      <span class="comment">//          |   |</span></div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;      <span class="comment">//          [ i ]</span></div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;      <span class="keywordflow">if</span> (IntersectEnd) {</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;        <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;- Intersect interval at end\n&quot;</span>);</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;        <span class="comment">// Split off at the intersection.</span></div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;        LastOverlap.setStart(EndBit);</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;        insertMemLoc(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, Before, Var, EndBit, LastOverlap.stop(), *LastOverlap,</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;                     VarLoc.<a class="code" href="structllvm_1_1VarLocInfo.html#ad7e310409e444bad60535cf956972194">DL</a>);</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;      }</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160; </div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;- Erase intervals contained within\n&quot;</span>);</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;      <span class="comment">// FirstOverlap and LastOverlap have been shortened such that they&#39;re</span></div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;      <span class="comment">// no longer overlapping with [StartBit, EndBit). Delete any overlaps</span></div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;      <span class="comment">// that remain (these will be fully contained within `f`).</span></div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;      <span class="comment">// [ - f - ]       }</span></div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;      <span class="comment">//      [ - i - ]  } Intersection shortening that has happened above.</span></div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;      <span class="comment">//          |   |  }</span></div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;      <span class="comment">//          [ i ]  }</span></div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;      <span class="comment">// -----------------</span></div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;      <span class="comment">// [i2 ]           } Intervals fully contained within `f` get erased.</span></div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;      <span class="comment">// -----------------</span></div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;      <span class="comment">// [ - f - ][ i ]  } Completed insertion.</span></div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;      <span class="keyword">auto</span> It = FirstOverlap;</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;      <span class="keywordflow">if</span> (IntersectStart)</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;        ++It; <span class="comment">// IntersectStart: first overlap has been shortened.</span></div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;      <span class="keywordflow">while</span> (It.valid() &amp;&amp; It.start() &gt;= StartBit &amp;&amp; It.stop() &lt;= EndBit) {</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;        <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;- Erase &quot;</span> &lt;&lt; <a class="code" href="namespacellvm.html#a63540526d092e2f4bbc70590b6034f4e">toString</a>(It));</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;        It.erase(); <span class="comment">// This increments It after removing the interval.</span></div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;      }</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;      <span class="comment">// We&#39;ve dealt with all the overlaps now!</span></div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!FragMap.overlaps(StartBit, EndBit));</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;- Insert DEF into now-empty space\n&quot;</span>);</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;      FragMap.insert(StartBit, EndBit, Base);</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;    }</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;  }</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160; </div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;  <span class="keywordtype">bool</span> skipVariable(<span class="keyword">const</span> <a class="code" href="classllvm_1_1DILocalVariable.html">DILocalVariable</a> *V) { <span class="keywordflow">return</span> !V-&gt;<a class="code" href="classllvm_1_1DIVariable.html#a6b5977deeb9f99e156685e190de78403">getSizeInBits</a>(); }</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160; </div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;  <span class="keywordtype">void</span> process(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, VarFragMap &amp;LiveSet) {</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;    BBInsertBeforeMap[&amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>].<a class="code" href="classllvm_1_1DenseMapBase.html#adf4e7878fc0b3b8dcde545178564190d">clear</a>();</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">const</span> <span class="keyword">auto</span> *Locs = FnVarLocs-&gt;<a class="code" href="classFunctionVarLocsBuilder.html#a79fb13e417678df16ca53e1bbfd5bc42">getWedge</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="structllvm_1_1VarLocInfo.html">VarLocInfo</a> &amp;Loc : *Locs) {</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;          addDef(Loc, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getParent(), LiveSet);</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;        }</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;      }</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;    }</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;  }</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160; </div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;  MemLocFragmentFill(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;Fn,</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;                     <span class="keyword">const</span> <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;DebugAggregate&gt;</a> *VarsWithStackSlot)</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;      : Fn(Fn), VarsWithStackSlot(VarsWithStackSlot) {}</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;<span class="comment">  /// Add variable locations to \p FnVarLocs so that any bits of a variable</span></div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;<span class="comment">  /// with a memory location have that location explicitly reinstated at each</span></div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;<span class="comment">  /// subsequent variable location definition that that doesn&#39;t overwrite those</span></div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;<span class="comment">  /// bits. i.e. after a variable location def, insert new defs for the memory</span></div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;<span class="comment">  /// location with fragments for the difference of &quot;all bits currently in</span></div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;<span class="comment">  /// memory&quot; and &quot;the fragment of the second def&quot;. e.g.</span></div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;<span class="comment">  ///</span></div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;<span class="comment">  ///     Before:</span></div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;<span class="comment">  ///</span></div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;<span class="comment">  ///     var x bits 0 to 63:  value in memory</span></div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;<span class="comment">  ///     more instructions</span></div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;<span class="comment">  ///     var x bits 0 to 31:  value is %0</span></div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;<span class="comment">  ///</span></div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;<span class="comment">  ///     After:</span></div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;<span class="comment">  ///</span></div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;<span class="comment">  ///     var x bits 0 to 63:  value in memory</span></div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;<span class="comment">  ///     more instructions</span></div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;<span class="comment">  ///     var x bits 0 to 31:  value is %0</span></div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;<span class="comment">  ///     var x bits 32 to 61: value in memory ; &lt;-- new loc def</span></div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;<span class="comment">  ///</span></div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> <a class="code" href="namespacellvm_1_1dxil_1_1PointerTypeAnalysis.html#ae574a4c1d84b9e67bc94489f356805b4">run</a>(<a class="code" href="classFunctionVarLocsBuilder.html">FunctionVarLocsBuilder</a> *FnVarLocs) {</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="AssignmentTrackingAnalysis_8cpp.html#a8e62395f81dafe62a18dfd8e9be1ad81">EnableMemLocFragFill</a>)</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160; </div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;    this-&gt;FnVarLocs = FnVarLocs;</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160; </div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;    <span class="comment">// Prepare for traversal.</span></div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;    <a class="code" href="classllvm_1_1ReversePostOrderTraversal.html">ReversePostOrderTraversal&lt;Function *&gt;</a> RPOT(&amp;Fn);</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;    std::priority_queue&lt;unsigned int, std::vector&lt;unsigned int&gt;,</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;                        std::greater&lt;unsigned int&gt;&gt;</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;        Worklist;</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;    std::priority_queue&lt;unsigned int, std::vector&lt;unsigned int&gt;,</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;                        std::greater&lt;unsigned int&gt;&gt;</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;        Pending;</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;    <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;unsigned int, BasicBlock *&gt;</a> OrderToBB;</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;    <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;BasicBlock *, unsigned int&gt;</a> BBToOrder;</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;    { <span class="comment">// Init OrderToBB and BBToOrder.</span></div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> RPONumber = 0;</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> RI = RPOT.begin(), RE = RPOT.end(); RI != RE; ++RI) {</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;        OrderToBB[RPONumber] = *RI;</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;        BBToOrder[*RI] = RPONumber;</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;        Worklist.push(RPONumber);</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;        ++RPONumber;</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;      }</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;      LiveIn.<a class="code" href="classllvm_1_1DenseMap.html#a9aa45d9e5a7ff6a3f3c01934d1e1ada6">init</a>(RPONumber);</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;      LiveOut.<a class="code" href="classllvm_1_1DenseMap.html#a9aa45d9e5a7ff6a3f3c01934d1e1ada6">init</a>(RPONumber);</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;    }</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160; </div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;    <span class="comment">// Perform the traversal.</span></div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;    <span class="comment">// This is a standard &quot;intersect of predecessor outs&quot; dataflow problem. To</span></div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;    <span class="comment">// solve it, we perform meet() and process() using the two worklist method</span></div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;    <span class="comment">// until the LiveIn data for each block becomes unchanging.</span></div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;    <span class="comment">// This dataflow is essentially working on maps of sets and at each meet we</span></div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;    <span class="comment">// intersect the maps and the mapped sets. So, initialized live-in maps</span></div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;    <span class="comment">// monotonically decrease in value throughout the dataflow.</span></div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;    <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;BasicBlock *, 16&gt;</a> Visited;</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;    <span class="keywordflow">while</span> (!Worklist.empty() || !Pending.empty()) {</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;      <span class="comment">// We track what is on the pending worklist to avoid inserting the same</span></div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;      <span class="comment">// thing twice.  We could avoid this with a custom priority queue, but</span></div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;      <span class="comment">// this is probably not worth it.</span></div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;      <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;BasicBlock *, 16&gt;</a> OnPending;</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Processing Worklist\n&quot;</span>);</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;      <span class="keywordflow">while</span> (!Worklist.empty()) {</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;        <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = OrderToBB[Worklist.top()];</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;        <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\nPop BB &quot;</span> &lt;&lt; <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getName() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;        Worklist.pop();</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;        <span class="keywordtype">bool</span> InChanged = meet(*<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, Visited);</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;        <span class="comment">// Always consider LiveIn changed on the first visit.</span></div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;        InChanged |= Visited.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>).second;</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;        <span class="keywordflow">if</span> (InChanged) {</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;          <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>()</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;                     &lt;&lt; <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getName() &lt;&lt; <span class="stringliteral">&quot; has new InLocs, process it\n&quot;</span>);</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;          <span class="comment">//  Mutate a copy of LiveIn while processing BB. Once we&#39;ve processed</span></div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;          <span class="comment">//  the terminator LiveSet is the LiveOut set for BB.</span></div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;          <span class="comment">//  This is an expensive copy!</span></div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;          VarFragMap LiveSet = LiveIn[<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>];</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160; </div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;          <span class="comment">// Process the instructions in the block.</span></div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;          process(*<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, LiveSet);</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160; </div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;          <span class="comment">// Relatively expensive check: has anything changed in LiveOut for BB?</span></div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;          <span class="keywordflow">if</span> (!varFragMapsAreEqual(LiveOut[<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>], LiveSet)) {</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;            <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getName()</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;                              &lt;&lt; <span class="stringliteral">&quot; has new OutLocs, add succs to worklist: [ &quot;</span>);</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;            LiveOut[<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>] = <a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(LiveSet);</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;            <span class="keywordflow">for</span> (<span class="keyword">auto</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code" href="namespacellvm.html#a3720211f6e6389ab53734b989bfb6fce">succ_begin</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>), <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = <a class="code" href="namespacellvm.html#a069c4ae2290101bde0f8d6a5074dc72b">succ_end</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>++) {</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;              <span class="keywordflow">if</span> (OnPending.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(*I).second) {</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;                <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getName() &lt;&lt; <span class="stringliteral">&quot; &quot;</span>);</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;                Pending.push(BBToOrder[*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>]);</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;              }</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;            }</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;            <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;]\n&quot;</span>);</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;          }</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;        }</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;      }</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;      Worklist.swap(Pending);</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;      <span class="comment">// At this point, pending must be empty, since it was just the empty</span></div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;      <span class="comment">// worklist</span></div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Pending.empty() &amp;&amp; <span class="stringliteral">&quot;Pending should be empty&quot;</span>);</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;    }</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160; </div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;    <span class="comment">// Insert new location defs.</span></div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> Pair : BBInsertBeforeMap) {</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;      InsertMap &amp;<a class="code" href="namespacellvm_1_1msgpack.html#afdae9da66bac09f4b2bfc0fd9f0559e6a46f3ea056caa3126b91f3f70beea068c">Map</a> = Pair.second;</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> Pair : Map) {</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;        <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *InsertBefore = Pair.first;</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(InsertBefore &amp;&amp; <span class="stringliteral">&quot;should never be null&quot;</span>);</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;        <span class="keyword">auto</span> FragMemLocs = Pair.second;</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;        <span class="keyword">auto</span> &amp;Ctx = Fn.<a class="code" href="classllvm_1_1Function.html#a9fffac2512fe651f0d5e37e27f5bd51c">getContext</a>();</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160; </div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">auto</span> FragMemLoc : FragMemLocs) {</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;          <a class="code" href="classllvm_1_1DIExpression.html">DIExpression</a> *Expr = <a class="code" href="classllvm_1_1MDNode.html#a7d10a7b9b7f40b04d27ed97c38ea1950">DIExpression::get</a>(Ctx, std::nullopt);</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;          Expr = *<a class="code" href="classllvm_1_1DIExpression.html#ab2fc167f75191e1d22e12e8e382605bb">DIExpression::createFragmentExpression</a>(</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;              Expr, FragMemLoc.OffsetInBits, FragMemLoc.SizeInBits);</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;          Expr = <a class="code" href="classllvm_1_1DIExpression.html#ab804b15bb92ff685d7c1464b2816d608">DIExpression::prepend</a>(Expr, <a class="code" href="classllvm_1_1DIExpression.html#a6472489551b8960cc115a93d95eef9f6a9778207fdbedcd56192301c38b5ffe4c">DIExpression::DerefAfter</a>,</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;                                       FragMemLoc.OffsetInBits / 8);</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;          <a class="code" href="classllvm_1_1DebugVariable.html">DebugVariable</a> Var(<a class="code" href="SROA_8cpp.html#a5b3f8e5f6c512fe6a5059dd0c51aec95">Aggregates</a>[FragMemLoc.Var].first, Expr,</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;                            FragMemLoc.DL.getInlinedAt());</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;          FnVarLocs-&gt;<a class="code" href="classFunctionVarLocsBuilder.html#a61f032e857254b5eb3b50dbc64f66624">addVarLoc</a>(InsertBefore, Var, Expr, FragMemLoc.DL,</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;                               Bases[FragMemLoc.Base]);</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;        }</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;      }</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;    }</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;  }</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;};</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;<span class="comment">/// AssignmentTrackingLowering encapsulates a dataflow analysis over a function</span></div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;<span class="comment">/// that interprets assignment tracking debug info metadata and stores in IR to</span></div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;<span class="comment">/// create a map of variable locations.</span></div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;<span class="comment"></span><span class="keyword">class </span>AssignmentTrackingLowering {</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;<span class="keyword">public</span>:<span class="comment"></span></div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;<span class="comment">  /// The kind of location in use for a variable, where Mem is the stack home,</span></div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;<span class="comment">  /// Val is an SSA value or const, and None means that there is not one single</span></div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;<span class="comment">  /// kind (either because there are multiple or because there is none; it may</span></div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;<span class="comment">  /// prove useful to split this into two values in the future).</span></div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;<span class="comment">  ///</span></div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;<span class="comment">  /// LocKind is a join-semilattice with the partial order:</span></div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;<span class="comment">  /// None &gt; Mem, Val</span></div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;<span class="comment">  ///</span></div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;<span class="comment">  /// i.e.</span></div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;<span class="comment">  /// join(Mem, Mem)   = Mem</span></div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;<span class="comment">  /// join(Val, Val)   = Val</span></div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;<span class="comment">  /// join(Mem, Val)   = None</span></div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;<span class="comment">  /// join(None, Mem)  = None</span></div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;<span class="comment">  /// join(None, Val)  = None</span></div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;<span class="comment">  /// join(None, None) = None</span></div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;<span class="comment">  ///</span></div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;<span class="comment">  /// Note: the order is not `None &gt; Val &gt; Mem` because we&#39;re using DIAssignID</span></div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;<span class="comment">  /// to name assignments and are not tracking the actual stored values.</span></div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;<span class="comment">  /// Therefore currently there&#39;s no way to ensure that Mem values and Val</span></div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;<span class="comment">  /// values are the same. This could be a future extension, though it&#39;s not</span></div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;<span class="comment">  /// clear that many additional locations would be recovered that way in</span></div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;<span class="comment">  /// practice as the likelihood of this sitation arising naturally seems</span></div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;<span class="comment">  /// incredibly low.</span></div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;<span class="comment"></span>  <span class="keyword">enum class</span> LocKind { Mem, Val, <a class="code" href="namespacellvm.html#aebf1ed936ad0e792e159d7a4ae1b7f07">None</a> };</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;<span class="comment">  /// An abstraction of the assignment of a value to a variable or memory</span></div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;<span class="comment">  /// location.</span></div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;<span class="comment">  ///</span></div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;<span class="comment">  /// An Assignment is Known or NoneOrPhi. A Known Assignment means we have a</span></div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;<span class="comment">  /// DIAssignID ptr that represents it. NoneOrPhi means that we don&#39;t (or</span></div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;<span class="comment">  /// can&#39;t) know the ID of the last assignment that took place.</span></div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;<span class="comment">  ///</span></div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;<span class="comment">  /// The Status of the Assignment (Known or NoneOrPhi) is another</span></div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;<span class="comment">  /// join-semilattice. The partial order is:</span></div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;<span class="comment">  /// NoneOrPhi &gt; Known {id_0, id_1, ...id_N}</span></div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;<span class="comment">  ///</span></div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;<span class="comment">  /// i.e. for all values x and y where x != y:</span></div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;<span class="comment">  /// join(x, x) = x</span></div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;<span class="comment">  /// join(x, y) = NoneOrPhi</span></div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;<span class="comment"></span>  <span class="keyword">struct </span>Assignment {</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;    <span class="keyword">enum</span> <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a> { Known, NoneOrPhi } <a class="code" href="structStatus.html">Status</a>;<span class="comment"></span></div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;<span class="comment">    /// ID of the assignment. nullptr if Status is not Known.</span></div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;<span class="comment"></span>    <a class="code" href="classllvm_1_1DIAssignID.html">DIAssignID</a> *<a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a>;<span class="comment"></span></div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;<span class="comment">    /// The dbg.assign that marks this dbg-def. Mem-defs don&#39;t use this field.</span></div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;<span class="comment">    /// May be nullptr.</span></div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;<span class="comment"></span>    <a class="code" href="classllvm_1_1DbgAssignIntrinsic.html">DbgAssignIntrinsic</a> *<a class="code" href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309eac13545a6345c7d5b3c9cc8932ad3b0e9">Source</a>;</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160; </div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;    <span class="keywordtype">bool</span> isSameSourceAssignment(<span class="keyword">const</span> Assignment &amp;Other)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;      <span class="comment">// Don&#39;t include Source in the equality check. Assignments are</span></div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;      <span class="comment">// defined by their ID, not debug intrinsic(s).</span></div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;      <span class="keywordflow">return</span> std::tie(<a class="code" href="structStatus.html">Status</a>, <a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a>) == std::tie(<a class="code" href="ELFYAML_8cpp.html#a941c34da9850676ce3380813c636cff2">Other</a>.Status, <a class="code" href="ELFYAML_8cpp.html#a941c34da9850676ce3380813c636cff2">Other</a>.ID);</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;    }</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="namespacellvm.html#a03503773241005f01b090b9862aad304">dump</a>(<a class="code" href="classllvm_1_1raw__ostream.html">raw_ostream</a> &amp;<a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a>) {</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;      <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *LUT[] = {<span class="stringliteral">&quot;Known&quot;</span>, <span class="stringliteral">&quot;NoneOrPhi&quot;</span>};</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;      <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; LUT[<a class="code" href="structStatus.html">Status</a>] &lt;&lt; <span class="stringliteral">&quot;(id=&quot;</span>;</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a>)</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;        <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a>;</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;        <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;null&quot;</span>;</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;      <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;, s=&quot;</span>;</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309eac13545a6345c7d5b3c9cc8932ad3b0e9">Source</a>)</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;        <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; *<a class="code" href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309eac13545a6345c7d5b3c9cc8932ad3b0e9">Source</a>;</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;        <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;null&quot;</span>;</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;      <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>;</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;    }</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160; </div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;    <span class="keyword">static</span> Assignment <a class="code" href="namespacellvm_1_1ilist__detail.html#ac7551955242d0b1649a6962fc449df5c">make</a>(<a class="code" href="classllvm_1_1DIAssignID.html">DIAssignID</a> *<a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a>, <a class="code" href="classllvm_1_1DbgAssignIntrinsic.html">DbgAssignIntrinsic</a> *<a class="code" href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309eac13545a6345c7d5b3c9cc8932ad3b0e9">Source</a>) {</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;      <span class="keywordflow">return</span> Assignment(Known, <a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a>, <a class="code" href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309eac13545a6345c7d5b3c9cc8932ad3b0e9">Source</a>);</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;    }</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;    <span class="keyword">static</span> Assignment makeFromMemDef(<a class="code" href="classllvm_1_1DIAssignID.html">DIAssignID</a> *<a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a>) {</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;      <span class="keywordflow">return</span> Assignment(Known, <a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a>, <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;    }</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;    <span class="keyword">static</span> Assignment makeNoneOrPhi() {</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;      <span class="keywordflow">return</span> Assignment(NoneOrPhi, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;    }</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;    <span class="comment">// Again, need a Top value?</span></div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;    Assignment()</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;        : <a class="code" href="structStatus.html">Status</a>(NoneOrPhi), <a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a>(nullptr), <a class="code" href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309eac13545a6345c7d5b3c9cc8932ad3b0e9">Source</a>(nullptr) {</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;    } <span class="comment">// Can we delete this?</span></div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;    Assignment(<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a> <a class="code" href="structStatus.html">Status</a>, <a class="code" href="classllvm_1_1DIAssignID.html">DIAssignID</a> *<a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a>, <a class="code" href="classllvm_1_1DbgAssignIntrinsic.html">DbgAssignIntrinsic</a> *<a class="code" href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309eac13545a6345c7d5b3c9cc8932ad3b0e9">Source</a>)</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;        : <a class="code" href="structStatus.html">Status</a>(<a class="code" href="structStatus.html">Status</a>), <a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a>(<a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a>), <a class="code" href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309eac13545a6345c7d5b3c9cc8932ad3b0e9">Source</a>(<a class="code" href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309eac13545a6345c7d5b3c9cc8932ad3b0e9">Source</a>) {</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;      <span class="comment">// If the Status is Known then we expect there to be an assignment ID.</span></div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="structStatus.html">Status</a> == NoneOrPhi || <a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a>);</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;    }</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;  };</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160; </div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;  <span class="keyword">using</span> AssignmentMap = <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;VariableID, Assignment&gt;</a>;</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;  <span class="keyword">using</span> <a class="code" href="classllvm_1_1IntervalMap.html">LocMap</a> = <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;VariableID, LocKind&gt;</a>;</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;  <span class="keyword">using</span> <a class="code" href="classllvm_1_1DenseMap.html">OverlapMap</a> = <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;VariableID, SmallVector&lt;VariableID, 4&gt;</a>&gt;;</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;  <span class="keyword">using</span> UntaggedStoreAssignmentMap =</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;      <a class="code" href="classllvm_1_1DenseMap.html">DenseMap</a>&lt;<span class="keyword">const</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *,</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;               <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;std::pair&lt;VariableID, at::AssignmentInfo&gt;</a>&gt;&gt;;</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160; </div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;<span class="keyword">private</span>:<span class="comment"></span></div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;<span class="comment">  /// Map a variable to the set of variables that it fully contains.</span></div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1DenseMap.html">OverlapMap</a> VarContains;<span class="comment"></span></div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;<span class="comment">  /// Map untagged stores to the variable fragments they assign to. Used by</span></div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;<span class="comment">  /// processUntaggedInstruction.</span></div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;<span class="comment"></span>  UntaggedStoreAssignmentMap UntaggedStoreVars;</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160; </div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;  <span class="comment">// Machinery to defer inserting dbg.values.</span></div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;  <span class="keyword">using</span> InsertMap = <a class="code" href="classllvm_1_1MapVector.html">MapVector&lt;Instruction *, SmallVector&lt;VarLocInfo&gt;</a>&gt;;</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;  InsertMap InsertBeforeMap;<span class="comment"></span></div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;<span class="comment">  /// Clear the location definitions currently cached for insertion after /p</span></div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;<span class="comment">  /// After.</span></div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> resetInsertionPoint(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;After);</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;  <span class="keywordtype">void</span> emitDbgValue(LocKind Kind, <span class="keyword">const</span> <a class="code" href="classllvm_1_1DbgVariableIntrinsic.html">DbgVariableIntrinsic</a> *<a class="code" href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309eac13545a6345c7d5b3c9cc8932ad3b0e9">Source</a>,</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;                    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *After);</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160; </div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">bool</span> mapsAreEqual(<span class="keyword">const</span> AssignmentMap &amp;A, <span class="keyword">const</span> AssignmentMap &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>) {</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>.size() != <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.size())</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;Pair : A) {</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;      <a class="code" href="namespacellvm.html#a8c9d5a3046b96979a032c218e858cd15">VariableID</a> Var = Pair.first;</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;      <span class="keyword">const</span> Assignment &amp;AV = Pair.second;</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;      <span class="keyword">auto</span> <a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a> = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.find(Var);</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;      <span class="comment">// Check if this entry exists in B, otherwise ret false.</span></div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;      <span class="keywordflow">if</span> (R == <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.end())</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;      <span class="comment">// Check that the assignment value is the same.</span></div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;      <span class="keywordflow">if</span> (!AV.isSameSourceAssignment(<a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>-&gt;second))</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;    }</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;  }</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;<span class="comment">  /// Represents the stack and debug assignments in a block. Used to describe</span></div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;<span class="comment">  /// the live-in and live-out values for blocks, as well as the &quot;current&quot;</span></div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;<span class="comment">  /// value as we process each instruction in a block.</span></div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;<span class="comment"></span>  <span class="keyword">struct </span>BlockInfo {<span class="comment"></span></div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;<span class="comment">    /// Dominating assignment to memory for each variable.</span></div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;<span class="comment"></span>    AssignmentMap StackHomeValue;<span class="comment"></span></div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;<span class="comment">    /// Dominating assignemnt to each variable.</span></div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;<span class="comment"></span>    AssignmentMap DebugValue;<span class="comment"></span></div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;<span class="comment">    /// Location kind for each variable. LiveLoc indicates whether the</span></div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;<span class="comment">    /// dominating assignment in StackHomeValue (LocKind::Mem), DebugValue</span></div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;<span class="comment">    /// (LocKind::Val), or neither (LocKind::None) is valid, in that order of</span></div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;<span class="comment">    /// preference. This cannot be derived by inspecting DebugValue and</span></div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;<span class="comment">    /// StackHomeValue due to the fact that there&#39;s no distinction in</span></div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;<span class="comment">    /// Assignment (the class) between whether an assignment is unknown or a</span></div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;<span class="comment">    /// merge of multiple assignments (both are Status::NoneOrPhi). In other</span></div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;<span class="comment">    /// words, the memory location may well be valid while both DebugValue and</span></div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;<span class="comment">    /// StackHomeValue contain Assignments that have a Status of NoneOrPhi.</span></div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;<span class="comment"></span>    <a class="code" href="classllvm_1_1IntervalMap.html">LocMap</a> LiveLoc;</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;<span class="comment">    /// Compare every element in each map to determine structural equality</span></div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;<span class="comment">    /// (slow).</span></div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;<span class="comment"></span>    <span class="keywordtype">bool</span> <a class="code" href="namespacellvm.html#a4d812a2dd18aa186c164447e20e348e7">operator==</a>(<span class="keyword">const</span> BlockInfo &amp;Other)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;      <span class="keywordflow">return</span> LiveLoc == <a class="code" href="ELFYAML_8cpp.html#a941c34da9850676ce3380813c636cff2">Other</a>.LiveLoc &amp;&amp;</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;             mapsAreEqual(StackHomeValue, <a class="code" href="ELFYAML_8cpp.html#a941c34da9850676ce3380813c636cff2">Other</a>.StackHomeValue) &amp;&amp;</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;             mapsAreEqual(DebugValue, <a class="code" href="ELFYAML_8cpp.html#a941c34da9850676ce3380813c636cff2">Other</a>.DebugValue);</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;    }</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="namespacellvm.html#a2f883c895f4d244f4ed56ed8a8c160c1">operator!=</a>(<span class="keyword">const</span> BlockInfo &amp;Other)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> !(*<span class="keyword">this</span> == <a class="code" href="ELFYAML_8cpp.html#a941c34da9850676ce3380813c636cff2">Other</a>); }</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="RustDemangle_8cpp.html#a103d8cfe62c1651cd70e181746f8a840">isValid</a>() {</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;      <span class="keywordflow">return</span> LiveLoc.size() == DebugValue.size() &amp;&amp;</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;             LiveLoc.size() == StackHomeValue.size();</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;    }</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;  };</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160; </div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> &amp;Fn;</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;Layout;</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;DebugAggregate&gt;</a> *VarsWithStackSlot;</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;  <a class="code" href="classFunctionVarLocsBuilder.html">FunctionVarLocsBuilder</a> *FnVarLocs;</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;const BasicBlock *, BlockInfo&gt;</a> LiveIn;</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;const BasicBlock *, BlockInfo&gt;</a> LiveOut;</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;<span class="comment">  /// Helper for process methods to track variables touched each frame.</span></div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;VariableID&gt;</a> VarsTouchedThisFrame;</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;<span class="comment">  /// The set of variables that sometimes are not located in their stack home.</span></div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;DebugAggregate&gt;</a> NotAlwaysStackHomed;</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160; </div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;  <a class="code" href="namespacellvm.html#a8c9d5a3046b96979a032c218e858cd15">VariableID</a> getVariableID(<span class="keyword">const</span> <a class="code" href="classllvm_1_1DebugVariable.html">DebugVariable</a> &amp;Var) {</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><a class="code" href="namespacellvm.html#a8c9d5a3046b96979a032c218e858cd15">VariableID</a><span class="keyword">&gt;</span>(FnVarLocs-&gt;<a class="code" href="classFunctionVarLocsBuilder.html#aec2bf0c2cd1ac41ee26614348afeeb8c">insertVariable</a>(Var));</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;  }</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;<span class="comment">  /// Join the LiveOut values of preds that are contained in \p Visited into</span></div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;<span class="comment">  /// LiveIn[BB]. Return True if LiveIn[BB] has changed as a result. LiveIn[BB]</span></div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;<span class="comment">  /// values monotonically increase. See the @link joinMethods join methods</span></div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;<span class="comment">  /// @endlink documentation for more info.</span></div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> join(<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;BasicBlock *, 16&gt;</a> &amp;Visited);<span class="comment"></span></div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;<span class="comment">  ///@name joinMethods</span></div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;<span class="comment">  /// Functions that implement `join` (the least upper bound) for the</span></div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;<span class="comment">  /// join-semilattice types used in the dataflow. There is an explicit bottom</span></div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;<span class="comment">  /// value () for some types and and explicit top value () for all types.</span></div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;<span class="comment">  /// By definition:</span></div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;<span class="comment">  ///</span></div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;<span class="comment">  ///     Join(A, B) &gt;= A &amp;&amp; Join(A, B) &gt;= B</span></div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;<span class="comment">  ///     Join(A, ) = A</span></div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;<span class="comment">  ///     Join(A, ) = </span></div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;<span class="comment">  ///</span></div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;<span class="comment">  /// These invariants are important for monotonicity.</span></div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;<span class="comment">  ///</span></div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;<span class="comment">  /// For the map-type functions, all unmapped keys in an empty map are</span></div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;<span class="comment">  /// associated with a bottom value (). This represents their values being</span></div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;<span class="comment">  /// unknown. Unmapped keys in non-empty maps (joining two maps with a key</span></div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;<span class="comment">  /// only present in one) represents either a variable going out of scope or</span></div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;<span class="comment">  /// dropped debug info. It is assumed the key is associated with a top value</span></div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;<span class="comment">  /// () in this case (unknown location / assignment).</span></div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;<span class="comment">  ///@{</span></div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;<span class="comment"></span>  <span class="keyword">static</span> LocKind joinKind(LocKind A, LocKind <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;  <span class="keyword">static</span> <a class="code" href="classllvm_1_1IntervalMap.html">LocMap</a> joinLocMap(<span class="keyword">const</span> <a class="code" href="classllvm_1_1IntervalMap.html">LocMap</a> &amp;A, <span class="keyword">const</span> <a class="code" href="classllvm_1_1IntervalMap.html">LocMap</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;  <span class="keyword">static</span> Assignment joinAssignment(<span class="keyword">const</span> Assignment &amp;A, <span class="keyword">const</span> Assignment &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;  <span class="keyword">static</span> AssignmentMap joinAssignmentMap(<span class="keyword">const</span> AssignmentMap &amp;A,</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;                                         <span class="keyword">const</span> AssignmentMap &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;  <span class="keyword">static</span> BlockInfo joinBlockInfo(<span class="keyword">const</span> BlockInfo &amp;A, <span class="keyword">const</span> BlockInfo &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);<span class="comment"></span></div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;<span class="comment">  ///@}</span></div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;<span class="comment"></span><span class="comment"></span> </div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;<span class="comment">  /// Process the instructions in \p BB updating \p LiveSet along the way. \p</span></div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;<span class="comment">  /// LiveSet must be initialized with the current live-in locations before</span></div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;<span class="comment">  /// calling this.</span></div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> process(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, BlockInfo *LiveSet);<span class="comment"></span></div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;<span class="comment">  ///@name processMethods</span></div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;<span class="comment">  /// Methods to process instructions in order to update the LiveSet (current</span></div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;<span class="comment">  /// location information).</span></div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;<span class="comment">  ///@{</span></div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> processNonDbgInstruction(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, BlockInfo *LiveSet);</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;  <span class="keywordtype">void</span> processDbgInstruction(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, BlockInfo *LiveSet);<span class="comment"></span></div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;<span class="comment">  /// Update \p LiveSet after encountering an instruction with a DIAssignID</span></div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;<span class="comment">  /// attachment, \p I.</span></div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> processTaggedInstruction(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, BlockInfo *LiveSet);<span class="comment"></span></div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;<span class="comment">  /// Update \p LiveSet after encountering an instruciton without a DIAssignID</span></div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;<span class="comment">  /// attachment, \p I.</span></div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> processUntaggedInstruction(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, BlockInfo *LiveSet);</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;  <span class="keywordtype">void</span> processDbgAssign(<a class="code" href="classllvm_1_1DbgAssignIntrinsic.html">DbgAssignIntrinsic</a> &amp;DAI, BlockInfo *LiveSet);</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;  <span class="keywordtype">void</span> processDbgValue(<a class="code" href="classllvm_1_1DbgValueInst.html">DbgValueInst</a> &amp;DVI, BlockInfo *LiveSet);<span class="comment"></span></div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;<span class="comment">  /// Add an assignment to memory for the variable /p Var.</span></div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> addMemDef(BlockInfo *LiveSet, <a class="code" href="namespacellvm.html#a8c9d5a3046b96979a032c218e858cd15">VariableID</a> Var, <span class="keyword">const</span> Assignment &amp;AV);<span class="comment"></span></div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;<span class="comment">  /// Add an assignment to the variable /p Var.</span></div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> addDbgDef(BlockInfo *LiveSet, <a class="code" href="namespacellvm.html#a8c9d5a3046b96979a032c218e858cd15">VariableID</a> Var, <span class="keyword">const</span> Assignment &amp;AV);<span class="comment"></span></div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;<span class="comment">  ///@}</span></div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;<span class="comment"></span><span class="comment"></span> </div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;<span class="comment">  /// Set the LocKind for \p Var.</span></div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> setLocKind(BlockInfo *LiveSet, <a class="code" href="namespacellvm.html#a8c9d5a3046b96979a032c218e858cd15">VariableID</a> Var, LocKind K);<span class="comment"></span></div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;<span class="comment">  /// Get the live LocKind for a \p Var. Requires addMemDef or addDbgDef to</span></div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;<span class="comment">  /// have been called for \p Var first.</span></div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;<span class="comment"></span>  LocKind getLocKind(BlockInfo *LiveSet, <a class="code" href="namespacellvm.html#a8c9d5a3046b96979a032c218e858cd15">VariableID</a> Var);<span class="comment"></span></div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;<span class="comment">  /// Return true if \p Var has an assignment in \p M matching \p AV.</span></div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> hasVarWithAssignment(<a class="code" href="namespacellvm.html#a8c9d5a3046b96979a032c218e858cd15">VariableID</a> Var, <span class="keyword">const</span> Assignment &amp;AV,</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;                            <span class="keyword">const</span> AssignmentMap &amp;M);</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;<span class="comment">  /// Emit info for variables that are fully promoted.</span></div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> emitPromotedVarLocs(<a class="code" href="classFunctionVarLocsBuilder.html">FunctionVarLocsBuilder</a> *FnVarLocs);</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160; </div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;  AssignmentTrackingLowering(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;Fn, <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;Layout,</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;                             <span class="keyword">const</span> <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;DebugAggregate&gt;</a> *VarsWithStackSlot)</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;      : Fn(Fn), Layout(Layout), VarsWithStackSlot(VarsWithStackSlot) {}<span class="comment"></span></div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;<span class="comment">  /// Run the analysis, adding variable location info to \p FnVarLocs. Returns</span></div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;<span class="comment">  /// true if any variable locations have been added to FnVarLocs.</span></div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> <a class="code" href="namespacellvm_1_1dxil_1_1PointerTypeAnalysis.html#ae574a4c1d84b9e67bc94489f356805b4">run</a>(<a class="code" href="classFunctionVarLocsBuilder.html">FunctionVarLocsBuilder</a> *FnVarLocs);</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;};</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;} <span class="comment">// namespace</span></div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160; </div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;<span class="keywordtype">void</span> AssignmentTrackingLowering::setLocKind(BlockInfo *LiveSet, <a class="code" href="namespacellvm.html#a8c9d5a3046b96979a032c218e858cd15">VariableID</a> Var,</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;                                            LocKind K) {</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;  <span class="keyword">auto</span> SetKind = [<span class="keyword">this</span>](BlockInfo *LiveSet, <a class="code" href="namespacellvm.html#a8c9d5a3046b96979a032c218e858cd15">VariableID</a> Var, LocKind K) {</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;    VarsTouchedThisFrame.insert(Var);</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;    LiveSet-&gt;LiveLoc[Var] = K;</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;  };</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;  SetKind(LiveSet, Var, K);</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160; </div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;  <span class="comment">// Update the LocKind for all fragments contained within Var.</span></div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="namespacellvm.html#a8c9d5a3046b96979a032c218e858cd15">VariableID</a> Frag : VarContains[Var])</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;    SetKind(LiveSet, Frag, K);</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;}</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160; </div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;AssignmentTrackingLowering::LocKind</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;AssignmentTrackingLowering::getLocKind(BlockInfo *LiveSet, <a class="code" href="namespacellvm.html#a8c9d5a3046b96979a032c218e858cd15">VariableID</a> Var) {</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;  <span class="keyword">auto</span> Pair = LiveSet-&gt;LiveLoc.find(Var);</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Pair != LiveSet-&gt;LiveLoc.end());</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;  <span class="keywordflow">return</span> Pair-&gt;second;</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;}</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160; </div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;<span class="keywordtype">void</span> AssignmentTrackingLowering::addMemDef(BlockInfo *LiveSet, <a class="code" href="namespacellvm.html#a8c9d5a3046b96979a032c218e858cd15">VariableID</a> Var,</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;                                           <span class="keyword">const</span> Assignment &amp;AV) {</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;  <span class="keyword">auto</span> AddDef = [](BlockInfo *LiveSet, <a class="code" href="namespacellvm.html#a8c9d5a3046b96979a032c218e858cd15">VariableID</a> Var, Assignment AV) {</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;    LiveSet-&gt;StackHomeValue[Var] = AV;</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;    <span class="comment">// Add default (Var -&gt; ) to DebugValue if Var isn&#39;t in DebugValue yet.</span></div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;    LiveSet-&gt;DebugValue.insert({Var, Assignment::makeNoneOrPhi()});</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;    <span class="comment">// Add default (Var -&gt; ) to LiveLocs if Var isn&#39;t in LiveLocs yet. Callers</span></div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;    <span class="comment">// of addMemDef will call setLocKind to override.</span></div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;    LiveSet-&gt;LiveLoc.insert({Var, <a class="code" href="namespacellvm.html#aebf1ed936ad0e792e159d7a4ae1b7f07">LocKind::None</a>});</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;  };</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;  AddDef(LiveSet, Var, AV);</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160; </div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;  <span class="comment">// Use this assigment for all fragments contained within Var, but do not</span></div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;  <span class="comment">// provide a Source because we cannot convert Var&#39;s value to a value for the</span></div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;  <span class="comment">// fragment.</span></div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;  Assignment FragAV = AV;</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;  FragAV.Source = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="namespacellvm.html#a8c9d5a3046b96979a032c218e858cd15">VariableID</a> Frag : VarContains[Var])</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;    AddDef(LiveSet, Frag, FragAV);</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;}</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160; </div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;<span class="keywordtype">void</span> AssignmentTrackingLowering::addDbgDef(BlockInfo *LiveSet, <a class="code" href="namespacellvm.html#a8c9d5a3046b96979a032c218e858cd15">VariableID</a> Var,</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;                                           <span class="keyword">const</span> Assignment &amp;AV) {</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;  <span class="keyword">auto</span> AddDef = [](BlockInfo *LiveSet, <a class="code" href="namespacellvm.html#a8c9d5a3046b96979a032c218e858cd15">VariableID</a> Var, Assignment AV) {</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;    LiveSet-&gt;DebugValue[Var] = AV;</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;    <span class="comment">// Add default (Var -&gt; ) to StackHome if Var isn&#39;t in StackHome yet.</span></div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;    LiveSet-&gt;StackHomeValue.insert({Var, Assignment::makeNoneOrPhi()});</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;    <span class="comment">// Add default (Var -&gt; ) to LiveLocs if Var isn&#39;t in LiveLocs yet. Callers</span></div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;    <span class="comment">// of addDbgDef will call setLocKind to override.</span></div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;    LiveSet-&gt;LiveLoc.insert({Var, <a class="code" href="namespacellvm.html#aebf1ed936ad0e792e159d7a4ae1b7f07">LocKind::None</a>});</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;  };</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;  AddDef(LiveSet, Var, AV);</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160; </div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;  <span class="comment">// Use this assigment for all fragments contained within Var, but do not</span></div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;  <span class="comment">// provide a Source because we cannot convert Var&#39;s value to a value for the</span></div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;  <span class="comment">// fragment.</span></div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;  Assignment FragAV = AV;</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;  FragAV.Source = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="namespacellvm.html#a8c9d5a3046b96979a032c218e858cd15">VariableID</a> Frag : VarContains[Var])</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;    AddDef(LiveSet, Frag, FragAV);</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;}</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160; </div>
<div class="line"><a name="l01196"></a><span class="lineno"><a class="line" href="AssignmentTrackingAnalysis_8cpp.html#a64692dbeb9f965f271eac86b9c11d3f6"> 1196</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1DIAssignID.html">DIAssignID</a> *<a class="code" href="AssignmentTrackingAnalysis_8cpp.html#a64692dbeb9f965f271eac86b9c11d3f6">getIDFromInst</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;  <span class="keywordflow">return</span> cast&lt;DIAssignID&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getMetadata(LLVMContext::MD_DIAssignID));</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;}</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160; </div>
<div class="line"><a name="l01200"></a><span class="lineno"><a class="line" href="AssignmentTrackingAnalysis_8cpp.html#a31145777330b0b81a66f4c701d4e3505"> 1200</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1DIAssignID.html">DIAssignID</a> *<a class="code" href="AssignmentTrackingAnalysis_8cpp.html#a31145777330b0b81a66f4c701d4e3505">getIDFromMarker</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1DbgAssignIntrinsic.html">DbgAssignIntrinsic</a> &amp;DAI) {</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;  <span class="keywordflow">return</span> cast&lt;DIAssignID&gt;(DAI.<a class="code" href="classllvm_1_1DbgAssignIntrinsic.html#a266ca2c5cadcdcad3a3ba12a4425863f">getAssignID</a>());</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;}</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;<span class="comment">/// Return true if \p Var has an assignment in \p M matching \p AV.</span></div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> AssignmentTrackingLowering::hasVarWithAssignment(<a class="code" href="namespacellvm.html#a8c9d5a3046b96979a032c218e858cd15">VariableID</a> Var,</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;                                                      <span class="keyword">const</span> Assignment &amp;AV,</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;                                                      <span class="keyword">const</span> AssignmentMap &amp;M) {</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;  <span class="keyword">auto</span> AssignmentIsMapped = [](<a class="code" href="namespacellvm.html#a8c9d5a3046b96979a032c218e858cd15">VariableID</a> Var, <span class="keyword">const</span> Assignment &amp;AV,</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;                               <span class="keyword">const</span> AssignmentMap &amp;<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>) {</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;    <span class="keyword">auto</span> <a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a> = <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.find(Var);</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;    <span class="keywordflow">if</span> (R == <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.end())</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;    <span class="keywordflow">return</span> AV.isSameSourceAssignment(<a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>-&gt;second);</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;  };</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160; </div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;  <span class="keywordflow">if</span> (!AssignmentIsMapped(Var, AV, M))</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160; </div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;  <span class="comment">// Check all the frags contained within Var as these will have all been</span></div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;  <span class="comment">// mapped to AV at the last store to Var.</span></div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="namespacellvm.html#a8c9d5a3046b96979a032c218e858cd15">VariableID</a> Frag : VarContains[Var])</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;    <span class="keywordflow">if</span> (!AssignmentIsMapped(Frag, AV, M))</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;}</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160; </div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l01228"></a><span class="lineno"><a class="line" href="AssignmentTrackingAnalysis_8cpp.html#aa334bbcd58a25801d8d10ecfa73af14a"> 1228</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="AssignmentTrackingAnalysis_8cpp.html#aa334bbcd58a25801d8d10ecfa73af14a">locStr</a>(AssignmentTrackingLowering::LocKind Loc) {</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;  <span class="keyword">using</span> LocKind = AssignmentTrackingLowering::LocKind;</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;  <span class="keywordflow">switch</span> (Loc) {</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;  <span class="keywordflow">case</span> LocKind::Val:</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&quot;Val&quot;</span>;</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;  <span class="keywordflow">case</span> LocKind::Mem:</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&quot;Mem&quot;</span>;</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#aebf1ed936ad0e792e159d7a4ae1b7f07">LocKind::None</a>:</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&quot;None&quot;</span>;</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;  };</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;  <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;unknown LocKind&quot;</span>);</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;}</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160; </div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;<span class="keywordtype">void</span> AssignmentTrackingLowering::emitDbgValue(</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;    AssignmentTrackingLowering::LocKind Kind,</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1DbgVariableIntrinsic.html">DbgVariableIntrinsic</a> *<a class="code" href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309eac13545a6345c7d5b3c9cc8932ad3b0e9">Source</a>, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *After) {</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160; </div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;  <a class="code" href="classllvm_1_1DILocation.html">DILocation</a> *<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = <a class="code" href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309eac13545a6345c7d5b3c9cc8932ad3b0e9">Source</a>-&gt;getDebugLoc();</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;  <span class="keyword">auto</span> <a class="code" href="DXILTranslateMetadata_8cpp.html#abd738f0052b7243a148afd74274996b7">Emit</a> = [<span class="keyword">this</span>, <a class="code" href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309eac13545a6345c7d5b3c9cc8932ad3b0e9">Source</a>, After, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>](<a class="code" href="classllvm_1_1Value.html">Value</a> *Val, <a class="code" href="classllvm_1_1DIExpression.html">DIExpression</a> *Expr) {</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Expr);</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;    <span class="keywordflow">if</span> (!Val)</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;      Val = <a class="code" href="classllvm_1_1PoisonValue.html#a1bf08613fb664a2e377a9a72c59a6b66">PoisonValue::get</a>(<a class="code" href="classllvm_1_1Type.html#aa75984a442f2379de0c66018201fa628">Type::getInt1Ty</a>(<a class="code" href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309eac13545a6345c7d5b3c9cc8932ad3b0e9">Source</a>-&gt;getContext()));</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160; </div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;    <span class="comment">// Find a suitable insert point.</span></div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *InsertBefore = After-&gt;<a class="code" href="classllvm_1_1ilist__node__with__parent.html#a26708685cc8b94fe3d7092ee080dbb34">getNextNode</a>();</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(InsertBefore &amp;&amp; <span class="stringliteral">&quot;Shouldn&#39;t be inserting after a terminator&quot;</span>);</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160; </div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;    <a class="code" href="namespacellvm.html#a8c9d5a3046b96979a032c218e858cd15">VariableID</a> Var = getVariableID(<a class="code" href="classllvm_1_1DebugVariable.html">DebugVariable</a>(<a class="code" href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309eac13545a6345c7d5b3c9cc8932ad3b0e9">Source</a>));</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;    <a class="code" href="structllvm_1_1VarLocInfo.html">VarLocInfo</a> VarLoc;</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;    VarLoc.<a class="code" href="structllvm_1_1VarLocInfo.html#af70494f348808c889f07f71f43cd28ec">VariableID</a> = <span class="keyword">static_cast&lt;</span><a class="code" href="namespacellvm.html#a8c9d5a3046b96979a032c218e858cd15">VariableID</a><span class="keyword">&gt;</span>(Var);</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;    VarLoc.<a class="code" href="structllvm_1_1VarLocInfo.html#a2db7bf8bbe7f16fcee0e9f21aa87fe03">Expr</a> = Expr;</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;    VarLoc.<a class="code" href="structllvm_1_1VarLocInfo.html#a49f19e43b844d06ff617163dd7405c50">V</a> = Val;</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;    VarLoc.<a class="code" href="structllvm_1_1VarLocInfo.html#ad7e310409e444bad60535cf956972194">DL</a> = <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>;</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;    <span class="comment">// Insert it into the map for later.</span></div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;    InsertBeforeMap[InsertBefore].<a class="code" href="classllvm_1_1MachineBasicBlock.html#a3b1dce1f3354a357fb9061bb7568a84e">push_back</a>(VarLoc);</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;  };</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160; </div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;  <span class="comment">// NOTE: This block can mutate Kind.</span></div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;  <span class="keywordflow">if</span> (Kind == LocKind::Mem) {</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> *DAI = cast&lt;DbgAssignIntrinsic&gt;(<a class="code" href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309eac13545a6345c7d5b3c9cc8932ad3b0e9">Source</a>);</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;    <span class="comment">// Check the address hasn&#39;t been dropped (e.g. the debug uses may not have</span></div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;    <span class="comment">// been replaced before deleting a Value).</span></div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;    <span class="keywordflow">if</span> (DAI-&gt;isKillAddress()) {</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;      <span class="comment">// The address isn&#39;t valid so treat this as a non-memory def.</span></div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;      <a class="code" href="namespacellvm_1_1lltok.html#af353621f14cb4b4b3af5ffaff84076b1">Kind</a> = LocKind::Val;</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Val = DAI-&gt;getAddress();</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;      <a class="code" href="classllvm_1_1DIExpression.html">DIExpression</a> *Expr = DAI-&gt;getAddressExpression();</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!Expr-&gt;<a class="code" href="classllvm_1_1DIExpression.html#a7cc5f1632a4c520497898439c17dc026">getFragmentInfo</a>() &amp;&amp;</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;             <span class="stringliteral">&quot;fragment info should be stored in value-expression only&quot;</span>);</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;      <span class="comment">// Copy the fragment info over from the value-expression to the new</span></div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;      <span class="comment">// DIExpression.</span></div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> OptFragInfo = <a class="code" href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309eac13545a6345c7d5b3c9cc8932ad3b0e9">Source</a>-&gt;getExpression()-&gt;getFragmentInfo()) {</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;        <span class="keyword">auto</span> FragInfo = *OptFragInfo;</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;        Expr = *<a class="code" href="classllvm_1_1DIExpression.html#ab2fc167f75191e1d22e12e8e382605bb">DIExpression::createFragmentExpression</a>(</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;            Expr, FragInfo.OffsetInBits, FragInfo.SizeInBits);</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;      }</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;      <span class="comment">// The address-expression has an implicit deref, add it now.</span></div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;      std::tie(Val, Expr) =</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;          <a class="code" href="AssignmentTrackingAnalysis_8cpp.html#ac976ef0dd1096fa3a40fb56ef305e6ae">walkToAllocaAndPrependOffsetDeref</a>(Layout, Val, Expr);</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;      <a class="code" href="DXILTranslateMetadata_8cpp.html#abd738f0052b7243a148afd74274996b7">Emit</a>(Val, Expr);</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;    }</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;  }</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160; </div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;  <span class="keywordflow">if</span> (Kind == LocKind::Val) {<span class="comment"></span></div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;<span class="comment">    /// Get the value component, converting to Undef if it is variadic.</span></div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;<span class="comment"></span>    <a class="code" href="classllvm_1_1Value.html">Value</a> *Val =</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;        <a class="code" href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309eac13545a6345c7d5b3c9cc8932ad3b0e9">Source</a>-&gt;hasArgList() ? nullptr : <a class="code" href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309eac13545a6345c7d5b3c9cc8932ad3b0e9">Source</a>-&gt;getVariableLocationOp(0);</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;    <a class="code" href="DXILTranslateMetadata_8cpp.html#abd738f0052b7243a148afd74274996b7">Emit</a>(Val, <a class="code" href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309eac13545a6345c7d5b3c9cc8932ad3b0e9">Source</a>-&gt;getExpression());</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;  }</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160; </div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;  <span class="keywordflow">if</span> (Kind == <a class="code" href="namespacellvm.html#aebf1ed936ad0e792e159d7a4ae1b7f07">LocKind::None</a>) {</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;    <a class="code" href="DXILTranslateMetadata_8cpp.html#abd738f0052b7243a148afd74274996b7">Emit</a>(<span class="keyword">nullptr</span>, <a class="code" href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309eac13545a6345c7d5b3c9cc8932ad3b0e9">Source</a>-&gt;getExpression());</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;  }</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;}</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160; </div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;<span class="keywordtype">void</span> AssignmentTrackingLowering::processNonDbgInstruction(</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, AssignmentTrackingLowering::BlockInfo *LiveSet) {</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.hasMetadata(LLVMContext::MD_DIAssignID))</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;    processTaggedInstruction(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, LiveSet);</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;    processUntaggedInstruction(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, LiveSet);</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;}</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160; </div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;<span class="keywordtype">void</span> AssignmentTrackingLowering::processUntaggedInstruction(</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, AssignmentTrackingLowering::BlockInfo *LiveSet) {</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;  <span class="comment">// Interpret stack stores that are not tagged as an assignment in memory for</span></div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;  <span class="comment">// the variables associated with that address. These stores may not be tagged</span></div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;  <span class="comment">// because a) the store cannot be represented using dbg.assigns (non-const</span></div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;  <span class="comment">// length or offset) or b) the tag was accidentally dropped during</span></div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;  <span class="comment">// optimisations. For these stores we fall back to assuming that the stack</span></div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;  <span class="comment">// home is a valid location for the variables. The benefit is that this</span></div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;  <span class="comment">// prevents us missing an assignment and therefore incorrectly maintaining</span></div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;  <span class="comment">// earlier location definitions, and in many cases it should be a reasonable</span></div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;  <span class="comment">// assumption. However, this will occasionally lead to slight</span></div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;  <span class="comment">// inaccuracies. The value of a hoisted untagged store will be visible</span></div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;  <span class="comment">// &quot;early&quot;, for example.</span></div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.hasMetadata(LLVMContext::MD_DIAssignID));</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;  <span class="keyword">auto</span> It = UntaggedStoreVars.find(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;  <span class="keywordflow">if</span> (It == UntaggedStoreVars.end())</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;    <span class="keywordflow">return</span>; <span class="comment">// No variables associated with the store destination.</span></div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160; </div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;processUntaggedInstruction on UNTAGGED INST &quot;</span> &lt;&lt; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;  <span class="comment">// Iterate over the variables that this store affects, add a NoneOrPhi dbg</span></div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;  <span class="comment">// and mem def, set lockind to Mem, and emit a location def for each.</span></div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> [Var, <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>] : It-&gt;second) {</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;    <span class="comment">// This instruction is treated as both a debug and memory assignment,</span></div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;    <span class="comment">// meaning the memory location should be used. We don&#39;t have an assignment</span></div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;    <span class="comment">// ID though so use Assignment::makeNoneOrPhi() to create an imaginary one.</span></div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;    addMemDef(LiveSet, Var, Assignment::makeNoneOrPhi());</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;    addDbgDef(LiveSet, Var, Assignment::makeNoneOrPhi());</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;    setLocKind(LiveSet, Var, LocKind::Mem);</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  setting Stack LocKind to: &quot;</span> &lt;&lt; <a class="code" href="AssignmentTrackingAnalysis_8cpp.html#aa334bbcd58a25801d8d10ecfa73af14a">locStr</a>(LocKind::Mem)</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;    <span class="comment">// Build the dbg location def to insert.</span></div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;    <span class="comment">// DIExpression: Add fragment and offset.</span></div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;    <a class="code" href="classllvm_1_1DebugVariable.html">DebugVariable</a> V = FnVarLocs-&gt;<a class="code" href="classFunctionVarLocsBuilder.html#a7015ad4444cf34e6d69326f60268671a">getVariable</a>(Var);</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;    <a class="code" href="classllvm_1_1DIExpression.html">DIExpression</a> *<a class="code" href="classllvm_1_1DIE.html">DIE</a> = <a class="code" href="classllvm_1_1MDNode.html#a7d10a7b9b7f40b04d27ed97c38ea1950">DIExpression::get</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getContext(), std::nullopt);</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> Frag = V.<a class="code" href="classllvm_1_1DebugVariable.html#a6bd8dc4b5ad70efa8152ae80ab392b2a">getFragment</a>()) {</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;      <span class="keyword">auto</span> <a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a> = <a class="code" href="classllvm_1_1DIExpression.html#ab2fc167f75191e1d22e12e8e382605bb">DIExpression::createFragmentExpression</a>(<a class="code" href="classllvm_1_1DIE.html">DIE</a>, Frag-&gt;OffsetInBits,</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;                                                      Frag-&gt;SizeInBits);</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(R &amp;&amp; <span class="stringliteral">&quot;unexpected createFragmentExpression failure&quot;</span>);</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;      <a class="code" href="classllvm_1_1DIE.html">DIE</a> = *<a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>;</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;    }</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;uint64_t, 3&gt;</a> Ops;</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.OffsetInBits)</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;      Ops = {dwarf::DW_OP_plus_uconst, <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.OffsetInBits / 8};</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;    Ops.push_back(dwarf::DW_OP_deref);</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;    <a class="code" href="classllvm_1_1DIE.html">DIE</a> = <a class="code" href="classllvm_1_1DIExpression.html#af3a48df3735933cf1621760019e5fd8c">DIExpression::prependOpcodes</a>(<a class="code" href="classllvm_1_1DIE.html">DIE</a>, Ops, <span class="comment">/*StackValue=*/</span><span class="keyword">false</span>,</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;                                       <span class="comment">/*EntryValue=*/</span><span class="keyword">false</span>);</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;    <span class="comment">// Find a suitable insert point.</span></div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *InsertBefore = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getNextNode();</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(InsertBefore &amp;&amp; <span class="stringliteral">&quot;Shouldn&#39;t be inserting after a terminator&quot;</span>);</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160; </div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;    <span class="comment">// Get DILocation for this unrecorded assignment.</span></div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;    <a class="code" href="classllvm_1_1DILocation.html">DILocation</a> *InlinedAt = <span class="keyword">const_cast&lt;</span><a class="code" href="classllvm_1_1DILocation.html">DILocation</a> *<span class="keyword">&gt;</span>(V.<a class="code" href="classllvm_1_1DebugVariable.html#a90b7ea85a03be15ace66f601bf299322">getInlinedAt</a>());</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1DILocation.html">DILocation</a> *DILoc = <a class="code" href="classllvm_1_1MDNode.html#a7d10a7b9b7f40b04d27ed97c38ea1950">DILocation::get</a>(</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;        Fn.<a class="code" href="classllvm_1_1Function.html#a9fffac2512fe651f0d5e37e27f5bd51c">getContext</a>(), 0, 0, V.<a class="code" href="classllvm_1_1DebugVariable.html#ae5969d48a72e8641cb15bc81a3bb1af8">getVariable</a>()-&gt;<a class="code" href="classllvm_1_1DILocalVariable.html#accfecccb150b316edf9b05e2d1fe117f">getScope</a>(), InlinedAt);</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160; </div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;    <a class="code" href="structllvm_1_1VarLocInfo.html">VarLocInfo</a> VarLoc;</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;    VarLoc.<a class="code" href="structllvm_1_1VarLocInfo.html#af70494f348808c889f07f71f43cd28ec">VariableID</a> = <span class="keyword">static_cast&lt;</span><a class="code" href="namespacellvm.html#a8c9d5a3046b96979a032c218e858cd15">VariableID</a><span class="keyword">&gt;</span>(Var);</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;    VarLoc.<a class="code" href="structllvm_1_1VarLocInfo.html#a2db7bf8bbe7f16fcee0e9f21aa87fe03">Expr</a> = <a class="code" href="classllvm_1_1DIE.html">DIE</a>;</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;    VarLoc.<a class="code" href="structllvm_1_1VarLocInfo.html#a49f19e43b844d06ff617163dd7405c50">V</a> = <span class="keyword">const_cast&lt;</span><a class="code" href="classllvm_1_1AllocaInst.html">AllocaInst</a> *<span class="keyword">&gt;</span>(<a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.Base);</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;    VarLoc.<a class="code" href="structllvm_1_1VarLocInfo.html#ad7e310409e444bad60535cf956972194">DL</a> = DILoc;</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;    <span class="comment">// 3. Insert it into the map for later.</span></div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;    InsertBeforeMap[InsertBefore].push_back(VarLoc);</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;  }</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;}</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160; </div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;<span class="keywordtype">void</span> AssignmentTrackingLowering::processTaggedInstruction(</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, AssignmentTrackingLowering::BlockInfo *LiveSet) {</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;  <span class="keyword">auto</span> Linked = <a class="code" href="namespacellvm_1_1at.html#a3c90899e8f022656e511630de42b916c">at::getAssignmentMarkers</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;  <span class="comment">// No dbg.assign intrinsics linked.</span></div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;  <span class="comment">// FIXME: All vars that have a stack slot this store modifies that don&#39;t have</span></div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;  <span class="comment">// a dbg.assign linked to it should probably treat this like an untagged</span></div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;  <span class="comment">// store.</span></div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;  <span class="keywordflow">if</span> (Linked.empty())</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160; </div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;processTaggedInstruction on &quot;</span> &lt;&lt; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1DbgAssignIntrinsic.html">DbgAssignIntrinsic</a> *DAI : Linked) {</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;    <a class="code" href="namespacellvm.html#a8c9d5a3046b96979a032c218e858cd15">VariableID</a> Var = getVariableID(<a class="code" href="classllvm_1_1DebugVariable.html">DebugVariable</a>(DAI));</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;    <span class="comment">// Something has gone wrong if VarsWithStackSlot doesn&#39;t contain a variable</span></div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;    <span class="comment">// that is linked to a store.</span></div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(VarsWithStackSlot-&gt;<a class="code" href="classllvm_1_1detail_1_1DenseSetImpl.html#afe504aa31a6a354cec13f5b32d0b1d9d">count</a>(<a class="code" href="AssignmentTrackingAnalysis_8cpp.html#a4514f516df040b468e552a28163b3747">getAggregate</a>(DAI)) &amp;&amp;</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;           <span class="stringliteral">&quot;expected DAI&#39;s variable to have stack slot&quot;</span>);</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160; </div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;    Assignment AV = Assignment::makeFromMemDef(<a class="code" href="AssignmentTrackingAnalysis_8cpp.html#a64692dbeb9f965f271eac86b9c11d3f6">getIDFromInst</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>));</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;    addMemDef(LiveSet, Var, AV);</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160; </div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;   linked to &quot;</span> &lt;&lt; *DAI &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;   LiveLoc &quot;</span> &lt;&lt; <a class="code" href="AssignmentTrackingAnalysis_8cpp.html#aa334bbcd58a25801d8d10ecfa73af14a">locStr</a>(getLocKind(LiveSet, Var))</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot; -&gt; &quot;</span>);</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160; </div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;    <span class="comment">// The last assignment to the stack is now AV. Check if the last debug</span></div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;    <span class="comment">// assignment has a matching Assignment.</span></div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;    <span class="keywordflow">if</span> (hasVarWithAssignment(Var, AV, LiveSet-&gt;DebugValue)) {</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;      <span class="comment">// The StackHomeValue and DebugValue for this variable match so we can</span></div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;      <span class="comment">// emit a stack home location here.</span></div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Mem, Stack matches Debug program\n&quot;</span>;);</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;   Stack val: &quot;</span>; AV.dump(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>()); <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;   Debug val: &quot;</span>;</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;                 LiveSet-&gt;DebugValue[Var].dump(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>()); <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;      setLocKind(LiveSet, Var, LocKind::Mem);</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;      emitDbgValue(LocKind::Mem, DAI, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;    }</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160; </div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;    <span class="comment">// The StackHomeValue and DebugValue for this variable do not match. I.e.</span></div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;    <span class="comment">// The value currently stored in the stack is not what we&#39;d expect to</span></div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;    <span class="comment">// see, so we cannot use emit a stack home location here. Now we will</span></div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;    <span class="comment">// look at the live LocKind for the variable and determine an appropriate</span></div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;    <span class="comment">// dbg.value to emit.</span></div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;    LocKind PrevLoc = getLocKind(LiveSet, Var);</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;    <span class="keywordflow">switch</span> (PrevLoc) {</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;    <span class="keywordflow">case</span> LocKind::Val: {</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;      <span class="comment">// The value in memory in memory has changed but we&#39;re not currently</span></div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;      <span class="comment">// using the memory location. Do nothing.</span></div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Val, (unchanged)\n&quot;</span>;);</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;      setLocKind(LiveSet, Var, LocKind::Val);</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;    } <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;    <span class="keywordflow">case</span> LocKind::Mem: {</div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;      <span class="comment">// There&#39;s been an assignment to memory that we were using as a</span></div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;      <span class="comment">// location for this variable, and the Assignment doesn&#39;t match what</span></div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;      <span class="comment">// we&#39;d expect to see in memory.</span></div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;      <span class="keywordflow">if</span> (LiveSet-&gt;DebugValue[Var].Status == Assignment::NoneOrPhi) {</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;        <span class="comment">// We need to terminate any previously open location now.</span></div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;        <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;None, No Debug value available\n&quot;</span>;);</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;        setLocKind(LiveSet, Var, <a class="code" href="namespacellvm.html#aebf1ed936ad0e792e159d7a4ae1b7f07">LocKind::None</a>);</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;        emitDbgValue(<a class="code" href="namespacellvm.html#aebf1ed936ad0e792e159d7a4ae1b7f07">LocKind::None</a>, DAI, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;        <span class="comment">// The previous DebugValue Value can be used here.</span></div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;        <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Val, Debug value is Known\n&quot;</span>;);</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;        setLocKind(LiveSet, Var, LocKind::Val);</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;        Assignment PrevAV = LiveSet-&gt;DebugValue.lookup(Var);</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;        <span class="keywordflow">if</span> (PrevAV.Source) {</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;          emitDbgValue(LocKind::Val, PrevAV.Source, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;          <span class="comment">// PrevAV.Source is nullptr so we must emit undef here.</span></div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;          emitDbgValue(<a class="code" href="namespacellvm.html#aebf1ed936ad0e792e159d7a4ae1b7f07">LocKind::None</a>, DAI, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;        }</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;      }</div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;    } <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#aebf1ed936ad0e792e159d7a4ae1b7f07">LocKind::None</a>: {</div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;      <span class="comment">// There&#39;s been an assignment to memory and we currently are</span></div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;      <span class="comment">// not tracking a location for the variable. Do not emit anything.</span></div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;None, (unchanged)\n&quot;</span>;);</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;      setLocKind(LiveSet, Var, <a class="code" href="namespacellvm.html#aebf1ed936ad0e792e159d7a4ae1b7f07">LocKind::None</a>);</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;    } <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;    }</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;  }</div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;}</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160; </div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;<span class="keywordtype">void</span> AssignmentTrackingLowering::processDbgAssign(<a class="code" href="classllvm_1_1DbgAssignIntrinsic.html">DbgAssignIntrinsic</a> &amp;DAI,</div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;                                                  BlockInfo *LiveSet) {</div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;  <span class="comment">// Only bother tracking variables that are at some point stack homed. Other</span></div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;  <span class="comment">// variables can be dealt with trivially later.</span></div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;  <span class="keywordflow">if</span> (!VarsWithStackSlot-&gt;<a class="code" href="classllvm_1_1detail_1_1DenseSetImpl.html#afe504aa31a6a354cec13f5b32d0b1d9d">count</a>(<a class="code" href="AssignmentTrackingAnalysis_8cpp.html#a4514f516df040b468e552a28163b3747">getAggregate</a>(&amp;DAI)))</div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160; </div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;  <a class="code" href="namespacellvm.html#a8c9d5a3046b96979a032c218e858cd15">VariableID</a> Var = getVariableID(<a class="code" href="classllvm_1_1DebugVariable.html">DebugVariable</a>(&amp;DAI));</div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;  Assignment AV = <a class="code" href="namespacellvm_1_1ilist__detail.html#ac7551955242d0b1649a6962fc449df5c">Assignment::make</a>(<a class="code" href="AssignmentTrackingAnalysis_8cpp.html#a31145777330b0b81a66f4c701d4e3505">getIDFromMarker</a>(DAI), &amp;DAI);</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;  addDbgDef(LiveSet, Var, AV);</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160; </div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;processDbgAssign on &quot;</span> &lt;&lt; DAI &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;);</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;   LiveLoc &quot;</span> &lt;&lt; <a class="code" href="AssignmentTrackingAnalysis_8cpp.html#aa334bbcd58a25801d8d10ecfa73af14a">locStr</a>(getLocKind(LiveSet, Var))</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot; -&gt; &quot;</span>);</div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160; </div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;  <span class="comment">// Check if the DebugValue and StackHomeValue both hold the same</span></div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;  <span class="comment">// Assignment.</span></div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;  <span class="keywordflow">if</span> (hasVarWithAssignment(Var, AV, LiveSet-&gt;StackHomeValue)) {</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;    <span class="comment">// They match. We can use the stack home because the debug intrinsics state</span></div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;    <span class="comment">// that an assignment happened here, and we know that specific assignment</span></div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;    <span class="comment">// was the last one to take place in memory for this variable.</span></div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;    LocKind <a class="code" href="namespacellvm_1_1lltok.html#af353621f14cb4b4b3af5ffaff84076b1">Kind</a>;</div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;    <span class="keywordflow">if</span> (DAI.<a class="code" href="classllvm_1_1DbgAssignIntrinsic.html#a948d5bb1eccf928e50384305678340e7">isKillAddress</a>()) {</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;          <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>()</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;              &lt;&lt; <span class="stringliteral">&quot;Val, Stack matches Debug program but address is killed\n&quot;</span>;);</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;      <a class="code" href="namespacellvm_1_1lltok.html#af353621f14cb4b4b3af5ffaff84076b1">Kind</a> = LocKind::Val;</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Mem, Stack matches Debug program\n&quot;</span>;);</div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;      <a class="code" href="namespacellvm_1_1lltok.html#af353621f14cb4b4b3af5ffaff84076b1">Kind</a> = LocKind::Mem;</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;    };</div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;    setLocKind(LiveSet, Var, Kind);</div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;    emitDbgValue(Kind, &amp;DAI, &amp;DAI);</div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;    <span class="comment">// The last assignment to the memory location isn&#39;t the one that we want to</span></div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;    <span class="comment">// show to the user so emit a dbg.value(Value). Value may be undef.</span></div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Val, Stack contents is unknown\n&quot;</span>;);</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;    setLocKind(LiveSet, Var, LocKind::Val);</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;    emitDbgValue(LocKind::Val, &amp;DAI, &amp;DAI);</div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;  }</div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;}</div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160; </div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;<span class="keywordtype">void</span> AssignmentTrackingLowering::processDbgValue(<a class="code" href="classllvm_1_1DbgValueInst.html">DbgValueInst</a> &amp;DVI,</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;                                                 BlockInfo *LiveSet) {</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;  <span class="comment">// Only other tracking variables that are at some point stack homed.</span></div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;  <span class="comment">// Other variables can be dealt with trivally later.</span></div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;  <span class="keywordflow">if</span> (!VarsWithStackSlot-&gt;<a class="code" href="classllvm_1_1detail_1_1DenseSetImpl.html#afe504aa31a6a354cec13f5b32d0b1d9d">count</a>(<a class="code" href="AssignmentTrackingAnalysis_8cpp.html#a4514f516df040b468e552a28163b3747">getAggregate</a>(&amp;DVI)))</div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160; </div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;  <a class="code" href="namespacellvm.html#a8c9d5a3046b96979a032c218e858cd15">VariableID</a> Var = getVariableID(<a class="code" href="classllvm_1_1DebugVariable.html">DebugVariable</a>(&amp;DVI));</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;  <span class="comment">// We have no ID to create an Assignment with so we mark this assignment as</span></div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;  <span class="comment">// NoneOrPhi. Note that the dbg.value still exists, we just cannot determine</span></div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;  <span class="comment">// the assignment responsible for setting this value.</span></div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;  <span class="comment">// This is fine; dbg.values are essentially interchangable with unlinked</span></div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;  <span class="comment">// dbg.assigns, and some passes such as mem2reg and instcombine add them to</span></div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;  <span class="comment">// PHIs for promoted variables.</span></div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;  Assignment AV = Assignment::makeNoneOrPhi();</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;  addDbgDef(LiveSet, Var, AV);</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160; </div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;processDbgValue on &quot;</span> &lt;&lt; DVI &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;);</div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;   LiveLoc &quot;</span> &lt;&lt; <a class="code" href="AssignmentTrackingAnalysis_8cpp.html#aa334bbcd58a25801d8d10ecfa73af14a">locStr</a>(getLocKind(LiveSet, Var))</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot; -&gt; Val, dbg.value override&quot;</span>);</div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160; </div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;  setLocKind(LiveSet, Var, LocKind::Val);</div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;  emitDbgValue(LocKind::Val, &amp;DVI, &amp;DVI);</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;}</div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160; </div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;<span class="keywordtype">void</span> AssignmentTrackingLowering::processDbgInstruction(</div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, AssignmentTrackingLowering::BlockInfo *LiveSet) {</div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!isa&lt;DbgAddrIntrinsic&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &amp;&amp; <span class="stringliteral">&quot;unexpected dbg.addr&quot;</span>);</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *DAI = dyn_cast&lt;DbgAssignIntrinsic&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;    processDbgAssign(*DAI, LiveSet);</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">auto</span> *DVI = dyn_cast&lt;DbgValueInst&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;    processDbgValue(*DVI, LiveSet);</div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;}</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160; </div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;<span class="keywordtype">void</span> AssignmentTrackingLowering::resetInsertionPoint(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;After) {</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!After.<a class="code" href="classllvm_1_1Instruction.html#a7653277511df1034148a37520a585bb5">isTerminator</a>() &amp;&amp; <span class="stringliteral">&quot;Can&#39;t insert after a terminator&quot;</span>);</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;  <span class="keyword">auto</span> <a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a> = InsertBeforeMap.find(After.<a class="code" href="classllvm_1_1ilist__node__with__parent.html#a26708685cc8b94fe3d7092ee080dbb34">getNextNode</a>());</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;  <span class="keywordflow">if</span> (R == InsertBeforeMap.end())</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;  <a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>-&gt;second.clear();</div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;}</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160; </div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;<span class="keywordtype">void</span> AssignmentTrackingLowering::process(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, BlockInfo *LiveSet) {</div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> II = <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>.begin(), EI = <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>.end(); II != EI;) {</div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(VarsTouchedThisFrame.empty());</div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;    <span class="comment">// Process the instructions in &quot;frames&quot;. A &quot;frame&quot; includes a single</span></div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;    <span class="comment">// non-debug instruction followed any debug instructions before the</span></div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;    <span class="comment">// next non-debug instruction.</span></div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;    <span class="keywordflow">if</span> (!isa&lt;DbgInfoIntrinsic&gt;(&amp;*II)) {</div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;      <span class="keywordflow">if</span> (II-&gt;isTerminator())</div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;      resetInsertionPoint(*II);</div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;      processNonDbgInstruction(*II, LiveSet);</div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(LiveSet-&gt;isValid());</div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;      ++II;</div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;    }</div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;    <span class="keywordflow">while</span> (II != EI) {</div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;      <span class="keywordflow">if</span> (!isa&lt;DbgInfoIntrinsic&gt;(&amp;*II))</div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;      resetInsertionPoint(*II);</div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;      processDbgInstruction(*II, LiveSet);</div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(LiveSet-&gt;isValid());</div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;      ++II;</div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;    }</div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160; </div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;    <span class="comment">// We&#39;ve processed everything in the &quot;frame&quot;. Now determine which variables</span></div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;    <span class="comment">// cannot be represented by a dbg.declare.</span></div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> Var : VarsTouchedThisFrame) {</div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;      LocKind Loc = getLocKind(LiveSet, Var);</div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;      <span class="comment">// If a variable&#39;s LocKind is anything other than LocKind::Mem then we</span></div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;      <span class="comment">// must note that it cannot be represented with a dbg.declare.</span></div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;      <span class="comment">// Note that this check is enough without having to check the result of</span></div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;      <span class="comment">// joins() because for join to produce anything other than Mem after</span></div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;      <span class="comment">// we&#39;ve already seen a Mem we&#39;d be joining None or Val with Mem. In that</span></div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;      <span class="comment">// case, we&#39;ve already hit this codepath when we set the LocKind to Val</span></div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;      <span class="comment">// or None in that block.</span></div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;      <span class="keywordflow">if</span> (Loc != LocKind::Mem) {</div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;        <a class="code" href="classllvm_1_1DebugVariable.html">DebugVariable</a> DbgVar = FnVarLocs-&gt;<a class="code" href="classFunctionVarLocsBuilder.html#a7015ad4444cf34e6d69326f60268671a">getVariable</a>(Var);</div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;        <a class="code" href="AssignmentTrackingAnalysis_8cpp.html#a05c5b2328f38cb1affebb8ad4ab6fe40">DebugAggregate</a> Aggr{DbgVar.<a class="code" href="classllvm_1_1DebugVariable.html#ae5969d48a72e8641cb15bc81a3bb1af8">getVariable</a>(), DbgVar.<a class="code" href="classllvm_1_1DebugVariable.html#a90b7ea85a03be15ace66f601bf299322">getInlinedAt</a>()};</div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;        NotAlwaysStackHomed.insert(Aggr);</div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;      }</div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;    }</div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;    VarsTouchedThisFrame.clear();</div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;  }</div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;}</div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160; </div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;AssignmentTrackingLowering::LocKind</div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;AssignmentTrackingLowering::joinKind(LocKind A, LocKind <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>) {</div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;  <span class="comment">// Partial order:</span></div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;  <span class="comment">// None &gt; Mem, Val</span></div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a> == <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> ? <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a> : <a class="code" href="namespacellvm.html#aebf1ed936ad0e792e159d7a4ae1b7f07">LocKind::None</a>;</div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;}</div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160; </div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;<a class="code" href="classllvm_1_1DenseMap.html">AssignmentTrackingLowering::LocMap</a></div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;AssignmentTrackingLowering::joinLocMap(<span class="keyword">const</span> <a class="code" href="classllvm_1_1IntervalMap.html">LocMap</a> &amp;A, <span class="keyword">const</span> <a class="code" href="classllvm_1_1IntervalMap.html">LocMap</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>) {</div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;  <span class="comment">// Join A and B.</span></div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;  <span class="comment">// U = join(a, b) for a in A, b in B where Var(a) == Var(b)</span></div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;  <span class="comment">// D = join(x, ) for x where Var(x) is in A xor B</span></div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;  <span class="comment">// Join = U  D</span></div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;  <span class="comment">// This is achieved by performing a join on elements from A and B with</span></div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;  <span class="comment">// variables common to both A and B (join elements indexed by var intersect),</span></div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;  <span class="comment">// then adding LocKind::None elements for vars in A xor B. The latter part is</span></div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;  <span class="comment">// equivalent to performing join on elements with variables in A xor B with</span></div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;  <span class="comment">// LocKind::None () since join(x, ) = .</span></div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;  <a class="code" href="classllvm_1_1IntervalMap.html">LocMap</a> Join;</div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;VariableID, 16&gt;</a> SymmetricDifference;</div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;  <span class="comment">// Insert the join of the elements with common vars into Join. Add the</span></div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;  <span class="comment">// remaining elements to into SymmetricDifference.</span></div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;[Var, Loc] : A) {</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;    <span class="comment">// If this Var doesn&#39;t exist in B then add it to the symmetric difference</span></div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;    <span class="comment">// set.</span></div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;    <span class="keyword">auto</span> <a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a> = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.find(Var);</div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;    <span class="keywordflow">if</span> (R == <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.end()) {</div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;      SymmetricDifference.push_back(Var);</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;    }</div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;    <span class="comment">// There is an entry for Var in both, join it.</span></div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;    Join[Var] = joinKind(Loc, <a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>-&gt;second);</div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;  }</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;  <span class="keywordtype">unsigned</span> IntersectSize = Join.size();</div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;  (void)IntersectSize;</div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160; </div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;  <span class="comment">// Add the elements in B with variables that are not in A into</span></div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;  <span class="comment">// SymmetricDifference.</span></div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;Pair : <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>) {</div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;    <a class="code" href="namespacellvm.html#a8c9d5a3046b96979a032c218e858cd15">VariableID</a> Var = Pair.first;</div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>.count(Var) == 0)</div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;      SymmetricDifference.push_back(Var);</div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;  }</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160; </div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;  <span class="comment">// Add SymmetricDifference elements to Join and return the result.</span></div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;Var : SymmetricDifference)</div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;    Join.<a class="code" href="classllvm_1_1IntervalMap.html#a377d82c7830c58e7034baf6a9cf38ba3">insert</a>({Var, <a class="code" href="namespacellvm.html#aebf1ed936ad0e792e159d7a4ae1b7f07">LocKind::None</a>});</div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160; </div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Join.size() == (IntersectSize + SymmetricDifference.size()));</div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Join.size() &gt;= <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>.size() &amp;&amp; Join.size() &gt;= <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.size());</div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;  <span class="keywordflow">return</span> Join;</div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;}</div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160; </div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;AssignmentTrackingLowering::Assignment</div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;AssignmentTrackingLowering::joinAssignment(<span class="keyword">const</span> Assignment &amp;A,</div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;                                           <span class="keyword">const</span> Assignment &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>) {</div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;  <span class="comment">// Partial order:</span></div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;  <span class="comment">// NoneOrPhi(null, null) &gt; Known(v, ?s)</span></div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160; </div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;  <span class="comment">// If either are NoneOrPhi the join is NoneOrPhi.</span></div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;  <span class="comment">// If either value is different then the result is</span></div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;  <span class="comment">// NoneOrPhi (joining two values is a Phi).</span></div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>.isSameSourceAssignment(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))</div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;    <span class="keywordflow">return</span> Assignment::makeNoneOrPhi();</div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>.Status == Assignment::NoneOrPhi)</div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;    <span class="keywordflow">return</span> Assignment::makeNoneOrPhi();</div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160; </div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;  <span class="comment">// Source is used to lookup the value + expression in the debug program if</span></div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;  <span class="comment">// the stack slot gets assigned a value earlier than expected. Because</span></div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;  <span class="comment">// we&#39;re only tracking the one dbg.assign, we can&#39;t capture debug PHIs.</span></div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;  <span class="comment">// It&#39;s unlikely that we&#39;re losing out on much coverage by avoiding that</span></div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;  <span class="comment">// extra work.</span></div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;  <span class="comment">// The Source may differ in this situation:</span></div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;  <span class="comment">// Pred.1:</span></div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;  <span class="comment">//   dbg.assign i32 0, ..., !1, ...</span></div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;  <span class="comment">// Pred.2:</span></div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;  <span class="comment">//   dbg.assign i32 1, ..., !1, ...</span></div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;  <span class="comment">// Here the same assignment (!1) was performed in both preds in the source,</span></div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;  <span class="comment">// but we can&#39;t use either one unless they are identical (e.g. .we don&#39;t</span></div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;  <span class="comment">// want to arbitrarily pick between constant values).</span></div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;  <span class="keyword">auto</span> JoinSource = [&amp;]() -&gt; <a class="code" href="classllvm_1_1DbgAssignIntrinsic.html">DbgAssignIntrinsic</a> * {</div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>.Source == <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.Source)</div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>.Source;</div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>.Source == <span class="keyword">nullptr</span> || <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.Source == <span class="keyword">nullptr</span>)</div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>.Source-&gt;isIdenticalTo(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.Source))</div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>.Source;</div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;  };</div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;  <a class="code" href="classllvm_1_1DbgAssignIntrinsic.html">DbgAssignIntrinsic</a> *<a class="code" href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309eac13545a6345c7d5b3c9cc8932ad3b0e9">Source</a> = JoinSource();</div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>.Status == <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.Status &amp;&amp; <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>.Status == Assignment::Known);</div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>.ID == <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.ID);</div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1ilist__detail.html#ac7551955242d0b1649a6962fc449df5c">Assignment::make</a>(<a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>.ID, <a class="code" href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309eac13545a6345c7d5b3c9cc8932ad3b0e9">Source</a>);</div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;}</div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160; </div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;<a class="code" href="classllvm_1_1DenseMap.html">AssignmentTrackingLowering::AssignmentMap</a></div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;AssignmentTrackingLowering::joinAssignmentMap(<span class="keyword">const</span> AssignmentMap &amp;A,</div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;                                              <span class="keyword">const</span> AssignmentMap &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>) {</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;  <span class="comment">// Join A and B.</span></div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;  <span class="comment">// U = join(a, b) for a in A, b in B where Var(a) == Var(b)</span></div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;  <span class="comment">// D = join(x, ) for x where Var(x) is in A xor B</span></div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;  <span class="comment">// Join = U  D</span></div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;  <span class="comment">// This is achieved by performing a join on elements from A and B with</span></div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;  <span class="comment">// variables common to both A and B (join elements indexed by var intersect),</span></div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;  <span class="comment">// then adding LocKind::None elements for vars in A xor B. The latter part is</span></div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;  <span class="comment">// equivalent to performing join on elements with variables in A xor B with</span></div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;  <span class="comment">// Status::NoneOrPhi () since join(x, ) = .</span></div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;  AssignmentMap Join;</div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;VariableID, 16&gt;</a> SymmetricDifference;</div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;  <span class="comment">// Insert the join of the elements with common vars into Join. Add the</span></div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;  <span class="comment">// remaining elements to into SymmetricDifference.</span></div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;[Var, AV] : A) {</div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;    <span class="comment">// If this Var doesn&#39;t exist in B then add it to the symmetric difference</span></div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;    <span class="comment">// set.</span></div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;    <span class="keyword">auto</span> <a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a> = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.find(Var);</div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;    <span class="keywordflow">if</span> (R == <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.end()) {</div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;      SymmetricDifference.push_back(Var);</div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;    }</div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;    <span class="comment">// There is an entry for Var in both, join it.</span></div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;    Join[Var] = joinAssignment(AV, <a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>-&gt;second);</div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;  }</div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;  <span class="keywordtype">unsigned</span> IntersectSize = Join.size();</div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;  (void)IntersectSize;</div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160; </div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;  <span class="comment">// Add the elements in B with variables that are not in A into</span></div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;  <span class="comment">// SymmetricDifference.</span></div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;Pair : <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>) {</div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;    <a class="code" href="namespacellvm.html#a8c9d5a3046b96979a032c218e858cd15">VariableID</a> Var = Pair.first;</div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>.count(Var) == 0)</div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;      SymmetricDifference.push_back(Var);</div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;  }</div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160; </div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;  <span class="comment">// Add SymmetricDifference elements to Join and return the result.</span></div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> Var : SymmetricDifference)</div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;    Join.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a94d23373106467003722f7d6c17b1528">insert</a>({Var, Assignment::makeNoneOrPhi()});</div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160; </div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Join.size() == (IntersectSize + SymmetricDifference.size()));</div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Join.size() &gt;= <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>.size() &amp;&amp; Join.size() &gt;= <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.size());</div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;  <span class="keywordflow">return</span> Join;</div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;}</div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160; </div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;AssignmentTrackingLowering::BlockInfo</div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;AssignmentTrackingLowering::joinBlockInfo(<span class="keyword">const</span> BlockInfo &amp;A,</div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;                                          <span class="keyword">const</span> BlockInfo &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>) {</div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;  BlockInfo Join;</div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;  Join.LiveLoc = joinLocMap(<a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>.LiveLoc, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.LiveLoc);</div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;  Join.StackHomeValue = joinAssignmentMap(<a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>.StackHomeValue, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.StackHomeValue);</div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;  Join.DebugValue = joinAssignmentMap(<a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>.DebugValue, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.DebugValue);</div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Join.isValid());</div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;  <span class="keywordflow">return</span> Join;</div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;}</div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160; </div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;<span class="keywordtype">bool</span> AssignmentTrackingLowering::join(</div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;BasicBlock *, 16&gt;</a> &amp;Visited) {</div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;  BlockInfo BBLiveIn;</div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;  <span class="keywordtype">bool</span> FirstJoin = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;  <span class="comment">// LiveIn locs for BB is the join of the already-processed preds&#39; LiveOut</span></div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;  <span class="comment">// locs.</span></div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code" href="namespacellvm.html#a7e108932dc3da5294aed99a353aac9c4">pred_begin</a>(&amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>), <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = <a class="code" href="namespacellvm.html#a5eeaf08e96168c2cac8960f87f0ef360">pred_end</a>(&amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>++) {</div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;    <span class="comment">// Ignore backedges if we have not visited the predecessor yet. As the</span></div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;    <span class="comment">// predecessor hasn&#39;t yet had locations propagated into it, most locations</span></div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;    <span class="comment">// will not yet be valid, so treat them as all being uninitialized and</span></div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;    <span class="comment">// potentially valid. If a location guessed to be correct here is</span></div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;    <span class="comment">// invalidated later, we will remove it when we revisit this block. This</span></div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;    <span class="comment">// is essentially the same as initialising all LocKinds and Assignments to</span></div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;    <span class="comment">// an implicit  value which is the identity value for the join operation.</span></div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Pred = *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;    <span class="keywordflow">if</span> (!Visited.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a1f475b0df44ebd7169e720fa1bf9169e">count</a>(Pred))</div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160; </div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;    <span class="keyword">auto</span> PredLiveOut = LiveOut.<a class="code" href="classllvm_1_1DenseMapBase.html#a0c047f127ed4380a6f383d70bec4eb94">find</a>(Pred);</div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;    <span class="comment">// Pred must have been processed already. See comment at start of this loop.</span></div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(PredLiveOut != LiveOut.<a class="code" href="classllvm_1_1DenseMapBase.html#a65520b9c67759099e313d0f4e7b5ff9e">end</a>());</div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160; </div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;    <span class="comment">// Perform the join of BBLiveIn (current live-in info) and PrevLiveOut.</span></div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;    <span class="keywordflow">if</span> (FirstJoin)</div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;      BBLiveIn = PredLiveOut-&gt;second;</div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;      BBLiveIn = joinBlockInfo(<a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(BBLiveIn), PredLiveOut-&gt;second);</div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;    FirstJoin = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;  }</div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160; </div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;  <span class="keyword">auto</span> CurrentLiveInEntry = LiveIn.<a class="code" href="classllvm_1_1DenseMapBase.html#a0c047f127ed4380a6f383d70bec4eb94">find</a>(&amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;  <span class="comment">// Check if there isn&#39;t an entry, or there is but the LiveIn set has changed</span></div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;  <span class="comment">// (expensive check).</span></div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;  <span class="keywordflow">if</span> (CurrentLiveInEntry == LiveIn.<a class="code" href="classllvm_1_1DenseMapBase.html#a65520b9c67759099e313d0f4e7b5ff9e">end</a>() ||</div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;      BBLiveIn != CurrentLiveInEntry-&gt;second) {</div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;    LiveIn[&amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>] = <a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(BBLiveIn);</div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;    <span class="comment">// A change has occured.</span></div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;  }</div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;  <span class="comment">// No change.</span></div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;}</div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;<span class="comment">/// Return true if A fully contains B.</span></div>
<div class="line"><a name="l01796"></a><span class="lineno"><a class="line" href="AssignmentTrackingAnalysis_8cpp.html#a42ed349a287ad53473602bc805a2fe78"> 1796</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="AssignmentTrackingAnalysis_8cpp.html#a42ed349a287ad53473602bc805a2fe78">fullyContains</a>(<a class="code" href="structllvm_1_1DIExpression_1_1FragmentInfo.html">DIExpression::FragmentInfo</a> A,</div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;                          <a class="code" href="structllvm_1_1DIExpression_1_1FragmentInfo.html">DIExpression::FragmentInfo</a> <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>) {</div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;  <span class="keyword">auto</span> ALeft = A.OffsetInBits;</div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;  <span class="keyword">auto</span> BLeft = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.OffsetInBits;</div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;  <span class="keywordflow">if</span> (BLeft &lt; ALeft)</div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160; </div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;  <span class="keyword">auto</span> ARight = ALeft + A.SizeInBits;</div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;  <span class="keyword">auto</span> BRight = BLeft + <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.SizeInBits;</div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;  <span class="keywordflow">if</span> (BRight &gt; ARight)</div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;}</div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160; </div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;<span class="keyword">static</span> std::optional&lt;at::AssignmentInfo&gt;</div>
<div class="line"><a name="l01811"></a><span class="lineno"><a class="line" href="AssignmentTrackingAnalysis_8cpp.html#ab92546698566638c36636ef95059aec8"> 1811</a></span>&#160;<a class="code" href="AssignmentTrackingAnalysis_8cpp.html#ab92546698566638c36636ef95059aec8">getUntaggedStoreAssignmentInfo</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;Layout) {</div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;  <span class="comment">// Don&#39;t bother checking if this is an AllocaInst. We know this</span></div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;  <span class="comment">// instruction has no tag which means there are no variables associated</span></div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;  <span class="comment">// with it.</span></div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">const</span> <span class="keyword">auto</span> *<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a> = dyn_cast&lt;StoreInst&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1at.html#acba9ed42400327fd80c5ec86803ca1f0">at::getAssignmentInfo</a>(Layout, <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>);</div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">const</span> <span class="keyword">auto</span> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> = dyn_cast&lt;MemIntrinsic&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1at.html#acba9ed42400327fd80c5ec86803ca1f0">at::getAssignmentInfo</a>(Layout, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;  <span class="comment">// Alloca or non-store-like inst.</span></div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;  <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;}</div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;<span class="comment">/// Build a map of {Variable x: Variables y} where all variable fragments</span></div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;<span class="comment">/// contained within the variable fragment x are in set y. This means that</span></div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;<span class="comment">/// y does not contain all overlaps because partial overlaps are excluded.</span></div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;<span class="comment">/// While we&#39;re iterating over the function, add single location defs for</span></div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;<span class="comment">/// dbg.declares to \p FnVarLocs</span></div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;<span class="comment">/// Finally, populate UntaggedStoreVars with a mapping of untagged stores to</span></div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;<span class="comment">/// the stored-to variable fragments.</span></div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;<span class="comment">/// These tasks are bundled together to reduce the number of times we need</span></div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;<span class="comment">/// to iterate over the function as they can be achieved together in one pass.</span></div>
<div class="line"><a name="l01835"></a><span class="lineno"><a class="line" href="AssignmentTrackingAnalysis_8cpp.html#ad392b116c01f323392d32484008bb62f"> 1835</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1DenseMap.html">AssignmentTrackingLowering::OverlapMap</a> <a class="code" href="AssignmentTrackingAnalysis_8cpp.html#ad392b116c01f323392d32484008bb62f">buildOverlapMapAndRecordDeclares</a>(</div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;    <a class="code" href="classllvm_1_1Function.html">Function</a> &amp;Fn, <a class="code" href="classFunctionVarLocsBuilder.html">FunctionVarLocsBuilder</a> *FnVarLocs,</div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;    <a class="code" href="classllvm_1_1DenseMap.html">AssignmentTrackingLowering::UntaggedStoreAssignmentMap</a> &amp;UntaggedStoreVars) {</div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;  <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;DebugVariable&gt;</a> Seen;</div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;  <span class="comment">// Map of Variable: [Fragments].</span></div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;DebugAggregate, SmallVector&lt;DebugVariable, 8&gt;</a>&gt; FragmentMap;</div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;  <span class="comment">// Iterate over all instructions:</span></div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;  <span class="comment">// - dbg.declare    -&gt; add single location variable record</span></div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;  <span class="comment">// - dbg.*          -&gt; Add fragments to FragmentMap</span></div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;  <span class="comment">// - untagged store -&gt; Add fragments to FragmentMap and update</span></div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;  <span class="comment">//                     UntaggedStoreVars.</span></div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;  <span class="comment">// We need to add fragments for untagged stores too so that we can correctly</span></div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;  <span class="comment">// clobber overlapped fragment locations later.</span></div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : Fn) {</div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *DDI = dyn_cast&lt;DbgDeclareInst&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;        FnVarLocs-&gt;<a class="code" href="classFunctionVarLocsBuilder.html#a87ba28b444ca39ce2a33fab11afe1351">addSingleLocVar</a>(<a class="code" href="classllvm_1_1DebugVariable.html">DebugVariable</a>(DDI), DDI-&gt;getExpression(),</div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;                                   DDI-&gt;getDebugLoc(), DDI-&gt;getAddress());</div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">auto</span> *DII = dyn_cast&lt;DbgVariableIntrinsic&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;        <a class="code" href="classllvm_1_1DebugVariable.html">DebugVariable</a> DV = <a class="code" href="classllvm_1_1DebugVariable.html">DebugVariable</a>(DII);</div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;        <a class="code" href="AssignmentTrackingAnalysis_8cpp.html#a05c5b2328f38cb1affebb8ad4ab6fe40">DebugAggregate</a> <a class="code" href="namespacellvm_1_1AArch64PACKey.html#abf4394f452bde3f544999858d71e4b46a4babe0d4b2a36f887f48dfeb4b4a7cc6">DA</a> = {DV.<a class="code" href="classllvm_1_1DebugVariable.html#ae5969d48a72e8641cb15bc81a3bb1af8">getVariable</a>(), DV.<a class="code" href="classllvm_1_1DebugVariable.html#a90b7ea85a03be15ace66f601bf299322">getInlinedAt</a>()};</div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;        <span class="keywordflow">if</span> (Seen.<a class="code" href="classllvm_1_1detail_1_1DenseSetImpl.html#a79eed48913651aeedda2eed25201ea84">insert</a>(DV).second)</div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;          FragmentMap[<a class="code" href="namespacellvm_1_1AArch64PACKey.html#abf4394f452bde3f544999858d71e4b46a4babe0d4b2a36f887f48dfeb4b4a7cc6">DA</a>].push_back(DV);</div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">auto</span> <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a> = <a class="code" href="AssignmentTrackingAnalysis_8cpp.html#ab92546698566638c36636ef95059aec8">getUntaggedStoreAssignmentInfo</a>(</div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;                     <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, Fn.getParent()-&gt;getDataLayout())) {</div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;        <span class="comment">// Find markers linked to this alloca.</span></div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1DbgAssignIntrinsic.html">DbgAssignIntrinsic</a> *DAI : <a class="code" href="namespacellvm_1_1at.html#a3c90899e8f022656e511630de42b916c">at::getAssignmentMarkers</a>(<a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>-&gt;Base)) {</div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;          <span class="comment">// Discard the fragment if it covers the entire variable.</span></div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;          std::optional&lt;DIExpression::FragmentInfo&gt; FragInfo =</div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;              [&amp;<a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>, DAI]() -&gt; std::optional&lt;DIExpression::FragmentInfo&gt; {</div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;            <a class="code" href="structllvm_1_1DIExpression_1_1FragmentInfo.html">DIExpression::FragmentInfo</a> <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>;</div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;            <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.OffsetInBits = <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>-&gt;OffsetInBits;</div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;            <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.SizeInBits = <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>-&gt;SizeInBits;</div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;            <span class="keywordflow">if</span> (<span class="keyword">auto</span> ExistingFrag = DAI-&gt;<a class="code" href="classllvm_1_1DbgVariableIntrinsic.html#a2d4581b2568be7db21e47f096ffd6df8">getExpression</a>()-&gt;<a class="code" href="classllvm_1_1DIExpression.html#a7cc5f1632a4c520497898439c17dc026">getFragmentInfo</a>())</div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;              <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.OffsetInBits += ExistingFrag-&gt;OffsetInBits;</div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;            <a class="code" href="include_2llvm_2Support_2CMakeLists_8txt.html#aef9367eb0b7430eaf70b1f2725488f2a">if</a> (<span class="keyword">auto</span> Sz = DAI-&gt;<a class="code" href="classllvm_1_1DbgVariableIntrinsic.html#ac161deb2a31f78c85f94fbe0f3ba97b4">getVariable</a>()-&gt;<a class="code" href="classllvm_1_1DIVariable.html#a6b5977deeb9f99e156685e190de78403">getSizeInBits</a>()) {</div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;              <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.OffsetInBits == 0 &amp;&amp; <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.SizeInBits == *Sz)</div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;                <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;            }</div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>;</div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;          }();</div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160; </div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;          <a class="code" href="classllvm_1_1DebugVariable.html">DebugVariable</a> DV = <a class="code" href="classllvm_1_1DebugVariable.html">DebugVariable</a>(DAI-&gt;<a class="code" href="classllvm_1_1DbgVariableIntrinsic.html#ac161deb2a31f78c85f94fbe0f3ba97b4">getVariable</a>(), FragInfo,</div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;                                           DAI-&gt;<a class="code" href="classllvm_1_1Instruction.html#ab4f3bf98b5054831b608852e33427814">getDebugLoc</a>().<a class="code" href="classllvm_1_1DebugLoc.html#ada0b6f3c53a53b7274e7aeb23eeab5a8">getInlinedAt</a>());</div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;          <a class="code" href="AssignmentTrackingAnalysis_8cpp.html#a05c5b2328f38cb1affebb8ad4ab6fe40">DebugAggregate</a> <a class="code" href="namespacellvm_1_1AArch64PACKey.html#abf4394f452bde3f544999858d71e4b46a4babe0d4b2a36f887f48dfeb4b4a7cc6">DA</a> = {DV.<a class="code" href="classllvm_1_1DebugVariable.html#ae5969d48a72e8641cb15bc81a3bb1af8">getVariable</a>(), DV.<a class="code" href="classllvm_1_1DebugVariable.html#a90b7ea85a03be15ace66f601bf299322">getInlinedAt</a>()};</div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160; </div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;          <span class="comment">// Cache this info for later.</span></div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;          UntaggedStoreVars[&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>].push_back(</div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;              {FnVarLocs-&gt;<a class="code" href="classFunctionVarLocsBuilder.html#aec2bf0c2cd1ac41ee26614348afeeb8c">insertVariable</a>(DV), *<a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>});</div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160; </div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;          <span class="keywordflow">if</span> (Seen.<a class="code" href="classllvm_1_1detail_1_1DenseSetImpl.html#a79eed48913651aeedda2eed25201ea84">insert</a>(DV).second)</div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;            FragmentMap[<a class="code" href="namespacellvm_1_1AArch64PACKey.html#abf4394f452bde3f544999858d71e4b46a4babe0d4b2a36f887f48dfeb4b4a7cc6">DA</a>].push_back(DV);</div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;        }</div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;      }</div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;    }</div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;  }</div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160; </div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;  <span class="comment">// Sort the fragment map for each DebugAggregate in non-descending</span></div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;  <span class="comment">// order of fragment size. Assert no entries are duplicates.</span></div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;Pair : FragmentMap) {</div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;DebugVariable, 8&gt;</a> &amp;Frags = Pair.second;</div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;    <a class="code" href="namespacellvm.html#a74cdbd1e4f731e7d7cd83461b8b1de0b">std::sort</a>(</div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;        Frags.begin(), Frags.end(), [](<a class="code" href="classllvm_1_1DebugVariable.html">DebugVariable</a> Next, <a class="code" href="classllvm_1_1DebugVariable.html">DebugVariable</a> Elmt) {</div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;          assert(!(Elmt.getFragmentOrDefault() == Next.getFragmentOrDefault()));</div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;          return Elmt.getFragmentOrDefault().SizeInBits &gt;</div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;                 Next.getFragmentOrDefault().SizeInBits;</div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;        });</div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;  }</div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160; </div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;  <span class="comment">// Build the map.</span></div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">AssignmentTrackingLowering::OverlapMap</a> Map;</div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> Pair : FragmentMap) {</div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;    <span class="keyword">auto</span> &amp;Frags = Pair.second;</div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> It = Frags.begin(), IEnd = Frags.end(); It != IEnd; ++It) {</div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;      <a class="code" href="structllvm_1_1DIExpression_1_1FragmentInfo.html">DIExpression::FragmentInfo</a> Frag = It-&gt;getFragmentOrDefault();</div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;      <span class="comment">// Find the frags that this is contained within.</span></div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;      <span class="comment">//</span></div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;      <span class="comment">// Because Frags is sorted by size and none have the same offset and</span></div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;      <span class="comment">// size, we know that this frag can only be contained by subsequent</span></div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;      <span class="comment">// elements.</span></div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;      <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;DebugVariable, 8&gt;::iterator</a> OtherIt = It;</div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;      ++OtherIt;</div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;      <a class="code" href="namespacellvm.html#a8c9d5a3046b96979a032c218e858cd15">VariableID</a> ThisVar = FnVarLocs-&gt;<a class="code" href="classFunctionVarLocsBuilder.html#aec2bf0c2cd1ac41ee26614348afeeb8c">insertVariable</a>(*It);</div>
<div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;      <span class="keywordflow">for</span> (; OtherIt != IEnd; ++OtherIt) {</div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;        <a class="code" href="structllvm_1_1DIExpression_1_1FragmentInfo.html">DIExpression::FragmentInfo</a> OtherFrag = OtherIt-&gt;getFragmentOrDefault();</div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;        <a class="code" href="namespacellvm.html#a8c9d5a3046b96979a032c218e858cd15">VariableID</a> OtherVar = FnVarLocs-&gt;<a class="code" href="classFunctionVarLocsBuilder.html#aec2bf0c2cd1ac41ee26614348afeeb8c">insertVariable</a>(*OtherIt);</div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="AssignmentTrackingAnalysis_8cpp.html#a42ed349a287ad53473602bc805a2fe78">fullyContains</a>(OtherFrag, Frag))</div>
<div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;          Map[OtherVar].push_back(ThisVar);</div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;      }</div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;    }</div>
<div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;  }</div>
<div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160; </div>
<div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;  <span class="keywordflow">return</span> Map;</div>
<div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;}</div>
<div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160; </div>
<div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="namespacellvm_1_1dxil_1_1PointerTypeAnalysis.html#ae574a4c1d84b9e67bc94489f356805b4">AssignmentTrackingLowering::run</a>(<a class="code" href="classFunctionVarLocsBuilder.html">FunctionVarLocsBuilder</a> *FnVarLocsBuilder) {</div>
<div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;  <span class="keywordflow">if</span> (Fn.<a class="code" href="classllvm_1_1Function.html#a969eb757b1e43b455d4a8d0f603e695b">size</a>() &gt; <a class="code" href="AssignmentTrackingAnalysis_8cpp.html#a5dacd5924df31c782e0fd0fdada03e8b">MaxNumBlocks</a>) {</div>
<div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;[AT] Dropping var locs in: &quot;</span> &lt;&lt; Fn.<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>()</div>
<div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot;: too many blocks (&quot;</span> &lt;&lt; Fn.<a class="code" href="classllvm_1_1Function.html#a969eb757b1e43b455d4a8d0f603e695b">size</a>() &lt;&lt; <span class="stringliteral">&quot;)\n&quot;</span>);</div>
<div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;    <a class="code" href="namespacellvm_1_1at.html#a11e115c0bc63e73df009e5117821d230">at::deleteAll</a>(&amp;Fn);</div>
<div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;  }</div>
<div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160; </div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;  FnVarLocs = FnVarLocsBuilder;</div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160; </div>
<div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;  <span class="comment">// The general structure here is inspired by VarLocBasedImpl.cpp</span></div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;  <span class="comment">// (LiveDebugValues).</span></div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160; </div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;  <span class="comment">// Build the variable fragment overlap map.</span></div>
<div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;  <span class="comment">// Note that this pass doesn&#39;t handle partial overlaps correctly (FWIW</span></div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;  <span class="comment">// neither does LiveDebugVariables) because that is difficult to do and</span></div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;  <span class="comment">// appears to be rare occurance.</span></div>
<div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;  VarContains =</div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;      <a class="code" href="AssignmentTrackingAnalysis_8cpp.html#ad392b116c01f323392d32484008bb62f">buildOverlapMapAndRecordDeclares</a>(Fn, FnVarLocs, UntaggedStoreVars);</div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160; </div>
<div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;  <span class="comment">// Prepare for traversal.</span></div>
<div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;  <a class="code" href="classllvm_1_1ReversePostOrderTraversal.html">ReversePostOrderTraversal&lt;Function *&gt;</a> RPOT(&amp;Fn);</div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;  std::priority_queue&lt;unsigned int, std::vector&lt;unsigned int&gt;,</div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;                      std::greater&lt;unsigned int&gt;&gt;</div>
<div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;      Worklist;</div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;  std::priority_queue&lt;unsigned int, std::vector&lt;unsigned int&gt;,</div>
<div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;                      std::greater&lt;unsigned int&gt;&gt;</div>
<div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;      Pending;</div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;unsigned int, BasicBlock *&gt;</a> OrderToBB;</div>
<div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;BasicBlock *, unsigned int&gt;</a> BBToOrder;</div>
<div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;  { <span class="comment">// Init OrderToBB and BBToOrder.</span></div>
<div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> RPONumber = 0;</div>
<div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> RI = RPOT.begin(), RE = RPOT.end(); RI != RE; ++RI) {</div>
<div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;      OrderToBB[RPONumber] = *RI;</div>
<div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;      BBToOrder[*RI] = RPONumber;</div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;      Worklist.push(RPONumber);</div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;      ++RPONumber;</div>
<div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;    }</div>
<div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;    LiveIn.<a class="code" href="classllvm_1_1DenseMap.html#a9aa45d9e5a7ff6a3f3c01934d1e1ada6">init</a>(RPONumber);</div>
<div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;    LiveOut.<a class="code" href="classllvm_1_1DenseMap.html#a9aa45d9e5a7ff6a3f3c01934d1e1ada6">init</a>(RPONumber);</div>
<div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;  }</div>
<div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160; </div>
<div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;  <span class="comment">// Perform the traversal.</span></div>
<div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;  <span class="comment">// This is a standard &quot;union of predecessor outs&quot; dataflow problem. To solve</span></div>
<div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;  <span class="comment">// it, we perform join() and process() using the two worklist method until</span></div>
<div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;  <span class="comment">// the LiveIn data for each block becomes unchanging. The &quot;proof&quot; that this</span></div>
<div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;  <span class="comment">// terminates can be put together by looking at the comments around LocKind,</span></div>
<div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;  <span class="comment">// Assignment, and the various join methods, which show that all the elements</span></div>
<div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;  <span class="comment">// involved are made up of join-semilattices; LiveIn(n) can only</span></div>
<div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;  <span class="comment">// monotonically increase in value throughout the dataflow.</span></div>
<div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;BasicBlock *, 16&gt;</a> Visited;</div>
<div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;  <span class="keywordflow">while</span> (!Worklist.empty()) {</div>
<div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;    <span class="comment">// We track what is on the pending worklist to avoid inserting the same</span></div>
<div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;    <span class="comment">// thing twice.</span></div>
<div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;    <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;BasicBlock *, 16&gt;</a> OnPending;</div>
<div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Processing Worklist\n&quot;</span>);</div>
<div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;    <span class="keywordflow">while</span> (!Worklist.empty()) {</div>
<div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = OrderToBB[Worklist.top()];</div>
<div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\nPop BB &quot;</span> &lt;&lt; <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getName() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;      Worklist.pop();</div>
<div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;      <span class="keywordtype">bool</span> InChanged = join(*<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, Visited);</div>
<div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;      <span class="comment">// Always consider LiveIn changed on the first visit.</span></div>
<div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;      InChanged |= Visited.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>).second;</div>
<div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;      <span class="keywordflow">if</span> (InChanged) {</div>
<div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;        <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getName() &lt;&lt; <span class="stringliteral">&quot; has new InLocs, process it\n&quot;</span>);</div>
<div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;        <span class="comment">// Mutate a copy of LiveIn while processing BB. After calling process</span></div>
<div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;        <span class="comment">// LiveSet is the LiveOut set for BB.</span></div>
<div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;        BlockInfo LiveSet = LiveIn[<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>];</div>
<div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160; </div>
<div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;        <span class="comment">// Process the instructions in the block.</span></div>
<div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;        process(*<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, &amp;LiveSet);</div>
<div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160; </div>
<div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;        <span class="comment">// Relatively expensive check: has anything changed in LiveOut for BB?</span></div>
<div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;        <span class="keywordflow">if</span> (LiveOut[<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>] != LiveSet) {</div>
<div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;          <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getName()</div>
<div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;                            &lt;&lt; <span class="stringliteral">&quot; has new OutLocs, add succs to worklist: [ &quot;</span>);</div>
<div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;          LiveOut[<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>] = <a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(LiveSet);</div>
<div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;          <span class="keywordflow">for</span> (<span class="keyword">auto</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code" href="namespacellvm.html#a3720211f6e6389ab53734b989bfb6fce">succ_begin</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>), <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = <a class="code" href="namespacellvm.html#a069c4ae2290101bde0f8d6a5074dc72b">succ_end</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>++) {</div>
<div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;            <span class="keywordflow">if</span> (OnPending.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(*I).second) {</div>
<div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;              <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getName() &lt;&lt; <span class="stringliteral">&quot; &quot;</span>);</div>
<div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;              Pending.push(BBToOrder[*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>]);</div>
<div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;            }</div>
<div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;          }</div>
<div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;          <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;]\n&quot;</span>);</div>
<div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;        }</div>
<div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;      }</div>
<div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;    }</div>
<div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;    Worklist.swap(Pending);</div>
<div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;    <span class="comment">// At this point, pending must be empty, since it was just the empty</span></div>
<div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;    <span class="comment">// worklist</span></div>
<div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Pending.empty() &amp;&amp; <span class="stringliteral">&quot;Pending should be empty&quot;</span>);</div>
<div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;  }</div>
<div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160; </div>
<div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;  <span class="comment">// That&#39;s the hard part over. Now we just have some admin to do.</span></div>
<div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160; </div>
<div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;  <span class="comment">// Record whether we inserted any intrinsics.</span></div>
<div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;  <span class="keywordtype">bool</span> InsertedAnyIntrinsics = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160; </div>
<div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;  <span class="comment">// Identify and add defs for single location variables.</span></div>
<div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;  <span class="comment">// Go through all of the defs that we plan to add. If the aggregate variable</span></div>
<div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;  <span class="comment">// it&#39;s a part of is not in the NotAlwaysStackHomed set we can emit a single</span></div>
<div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;  <span class="comment">// location def and omit the rest. Add an entry to AlwaysStackHomed so that</span></div>
<div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;  <span class="comment">// we can identify those uneeded defs later.</span></div>
<div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;  <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;DebugAggregate&gt;</a> AlwaysStackHomed;</div>
<div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;Pair : InsertBeforeMap) {</div>
<div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> &amp;Vec = Pair.second;</div>
<div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="structllvm_1_1VarLocInfo.html">VarLocInfo</a> VarLoc : Vec) {</div>
<div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;      <a class="code" href="classllvm_1_1DebugVariable.html">DebugVariable</a> Var = FnVarLocs-&gt;<a class="code" href="classFunctionVarLocsBuilder.html#a7015ad4444cf34e6d69326f60268671a">getVariable</a>(VarLoc.<a class="code" href="structllvm_1_1VarLocInfo.html#af70494f348808c889f07f71f43cd28ec">VariableID</a>);</div>
<div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;      <a class="code" href="AssignmentTrackingAnalysis_8cpp.html#a05c5b2328f38cb1affebb8ad4ab6fe40">DebugAggregate</a> Aggr{Var.<a class="code" href="classllvm_1_1DebugVariable.html#ae5969d48a72e8641cb15bc81a3bb1af8">getVariable</a>(), Var.<a class="code" href="classllvm_1_1DebugVariable.html#a90b7ea85a03be15ace66f601bf299322">getInlinedAt</a>()};</div>
<div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160; </div>
<div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;      <span class="comment">// Skip this Var if it&#39;s not always stack homed.</span></div>
<div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;      <span class="keywordflow">if</span> (NotAlwaysStackHomed.contains(Aggr))</div>
<div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160; </div>
<div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;      <span class="comment">// Skip complex cases such as when different fragments of a variable have</span></div>
<div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;      <span class="comment">// been split into different allocas. Skipping in this case means falling</span></div>
<div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;      <span class="comment">// back to using a list of defs (which could reduce coverage, but is no</span></div>
<div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;      <span class="comment">// less correct).</span></div>
<div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;      <span class="keywordtype">bool</span> Simple =</div>
<div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;          VarLoc.<a class="code" href="structllvm_1_1VarLocInfo.html#a2db7bf8bbe7f16fcee0e9f21aa87fe03">Expr</a>-&gt;<a class="code" href="classllvm_1_1DIExpression.html#a1b59c8fe81267b338774bf6c542f90ee">getNumElements</a>() == 1 &amp;&amp; VarLoc.<a class="code" href="structllvm_1_1VarLocInfo.html#a2db7bf8bbe7f16fcee0e9f21aa87fe03">Expr</a>-&gt;<a class="code" href="classllvm_1_1DIExpression.html#a3c6397a9b21812183d69e90c3dac17f9">startsWithDeref</a>();</div>
<div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;      <span class="keywordflow">if</span> (!Simple) {</div>
<div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;        NotAlwaysStackHomed.insert(Aggr);</div>
<div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;      }</div>
<div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160; </div>
<div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;      <span class="comment">// All source assignments to this variable remain and all stores to any</span></div>
<div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;      <span class="comment">// part of the variable store to the same address (with varying</span></div>
<div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;      <span class="comment">// offsets). We can just emit a single location for the whole variable.</span></div>
<div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;      <span class="comment">//</span></div>
<div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;      <span class="comment">// Unless we&#39;ve already done so, create the single location def now.</span></div>
<div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;      <span class="keywordflow">if</span> (AlwaysStackHomed.<a class="code" href="classllvm_1_1detail_1_1DenseSetImpl.html#a79eed48913651aeedda2eed25201ea84">insert</a>(Aggr).second) {</div>
<div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(isa&lt;AllocaInst&gt;(VarLoc.<a class="code" href="structllvm_1_1VarLocInfo.html#a49f19e43b844d06ff617163dd7405c50">V</a>));</div>
<div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;        <span class="comment">// TODO: When more complex cases are handled VarLoc.Expr should be</span></div>
<div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;        <span class="comment">// built appropriately rather than always using an empty DIExpression.</span></div>
<div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;        <span class="comment">// The assert below is a reminder.</span></div>
<div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Simple);</div>
<div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;        VarLoc.<a class="code" href="structllvm_1_1VarLocInfo.html#a2db7bf8bbe7f16fcee0e9f21aa87fe03">Expr</a> = <a class="code" href="classllvm_1_1MDNode.html#a7d10a7b9b7f40b04d27ed97c38ea1950">DIExpression::get</a>(Fn.<a class="code" href="classllvm_1_1Function.html#a9fffac2512fe651f0d5e37e27f5bd51c">getContext</a>(), std::nullopt);</div>
<div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;        <a class="code" href="classllvm_1_1DebugVariable.html">DebugVariable</a> Var = FnVarLocs-&gt;<a class="code" href="classFunctionVarLocsBuilder.html#a7015ad4444cf34e6d69326f60268671a">getVariable</a>(VarLoc.<a class="code" href="structllvm_1_1VarLocInfo.html#af70494f348808c889f07f71f43cd28ec">VariableID</a>);</div>
<div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;        FnVarLocs-&gt;<a class="code" href="classFunctionVarLocsBuilder.html#a87ba28b444ca39ce2a33fab11afe1351">addSingleLocVar</a>(Var, VarLoc.<a class="code" href="structllvm_1_1VarLocInfo.html#a2db7bf8bbe7f16fcee0e9f21aa87fe03">Expr</a>, VarLoc.<a class="code" href="structllvm_1_1VarLocInfo.html#ad7e310409e444bad60535cf956972194">DL</a>, VarLoc.<a class="code" href="structllvm_1_1VarLocInfo.html#a49f19e43b844d06ff617163dd7405c50">V</a>);</div>
<div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;        InsertedAnyIntrinsics = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;      }</div>
<div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;    }</div>
<div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;  }</div>
<div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160; </div>
<div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;  <span class="comment">// Insert the other DEFs.</span></div>
<div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;[InsertBefore, Vec] : InsertBeforeMap) {</div>
<div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;VarLocInfo&gt;</a> NewDefs;</div>
<div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="structllvm_1_1VarLocInfo.html">VarLocInfo</a> &amp;VarLoc : Vec) {</div>
<div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;      <a class="code" href="classllvm_1_1DebugVariable.html">DebugVariable</a> Var = FnVarLocs-&gt;<a class="code" href="classFunctionVarLocsBuilder.html#a7015ad4444cf34e6d69326f60268671a">getVariable</a>(VarLoc.<a class="code" href="structllvm_1_1VarLocInfo.html#af70494f348808c889f07f71f43cd28ec">VariableID</a>);</div>
<div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;      <a class="code" href="AssignmentTrackingAnalysis_8cpp.html#a05c5b2328f38cb1affebb8ad4ab6fe40">DebugAggregate</a> Aggr{Var.<a class="code" href="classllvm_1_1DebugVariable.html#ae5969d48a72e8641cb15bc81a3bb1af8">getVariable</a>(), Var.<a class="code" href="classllvm_1_1DebugVariable.html#a90b7ea85a03be15ace66f601bf299322">getInlinedAt</a>()};</div>
<div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;      <span class="comment">// If this variable is always stack homed then we have already inserted a</span></div>
<div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;      <span class="comment">// dbg.declare and deleted this dbg.value.</span></div>
<div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;      <span class="keywordflow">if</span> (AlwaysStackHomed.<a class="code" href="classllvm_1_1detail_1_1DenseSetImpl.html#ad409c2de8502b94c8a0b1193307c63b6">contains</a>(Aggr))</div>
<div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;      NewDefs.push_back(VarLoc);</div>
<div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;      InsertedAnyIntrinsics = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;    }</div>
<div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160; </div>
<div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;    FnVarLocs-&gt;<a class="code" href="classFunctionVarLocsBuilder.html#a3a86f8df2c4e6293186cc140205dc52f">setWedge</a>(InsertBefore, <a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(NewDefs));</div>
<div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;  }</div>
<div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160; </div>
<div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;  InsertedAnyIntrinsics |= emitPromotedVarLocs(FnVarLocs);</div>
<div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160; </div>
<div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;  <span class="keywordflow">return</span> InsertedAnyIntrinsics;</div>
<div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;}</div>
<div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160; </div>
<div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;<span class="keywordtype">bool</span> AssignmentTrackingLowering::emitPromotedVarLocs(</div>
<div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;    <a class="code" href="classFunctionVarLocsBuilder.html">FunctionVarLocsBuilder</a> *FnVarLocs) {</div>
<div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;  <span class="keywordtype">bool</span> InsertedAnyIntrinsics = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;  <span class="comment">// Go through every block, translating debug intrinsics for fully promoted</span></div>
<div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;  <span class="comment">// variables into FnVarLocs location defs. No analysis required for these.</span></div>
<div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : Fn) {</div>
<div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;      <span class="comment">// Skip instructions other than dbg.values and dbg.assigns.</span></div>
<div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;      <span class="keyword">auto</span> *DVI = dyn_cast&lt;DbgValueInst&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;      <span class="keywordflow">if</span> (!DVI)</div>
<div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;      <span class="comment">// Skip variables that haven&#39;t been promoted - we&#39;ve dealt with those</span></div>
<div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;      <span class="comment">// already.</span></div>
<div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;      <span class="keywordflow">if</span> (VarsWithStackSlot-&gt;<a class="code" href="classllvm_1_1detail_1_1DenseSetImpl.html#ad409c2de8502b94c8a0b1193307c63b6">contains</a>(<a class="code" href="AssignmentTrackingAnalysis_8cpp.html#a4514f516df040b468e552a28163b3747">getAggregate</a>(DVI)))</div>
<div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;      <span class="comment">// Wrapper to get a single value (or undef) from DVI.</span></div>
<div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;      <span class="keyword">auto</span> GetValue = [DVI]() -&gt; <a class="code" href="classllvm_1_1Value.html">Value</a> * {</div>
<div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;        <span class="comment">// We can&#39;t handle variadic DIExpressions yet so treat those as</span></div>
<div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;        <span class="comment">// kill locations.</span></div>
<div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;        <span class="keywordflow">if</span> (DVI-&gt;<a class="code" href="classllvm_1_1DbgVariableIntrinsic.html#af7f3b3d318132753954ca4da891245d8">isKillLocation</a>() || DVI-&gt;<a class="code" href="classllvm_1_1DbgValueInst.html#a94f4ebdcfe83c30c65c4a2def0f552d0">getValue</a>() == <span class="keyword">nullptr</span> ||</div>
<div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;            DVI-&gt;<a class="code" href="classllvm_1_1DbgVariableIntrinsic.html#acfa0ffc95fedffcb2ac3cca51872af7a">hasArgList</a>())</div>
<div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;          <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1PoisonValue.html#a1bf08613fb664a2e377a9a72c59a6b66">PoisonValue::get</a>(<a class="code" href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">Type::getInt32Ty</a>(DVI-&gt;<a class="code" href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">getContext</a>()));</div>
<div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;        <span class="keywordflow">return</span> DVI-&gt;<a class="code" href="classllvm_1_1DbgValueInst.html#a94f4ebdcfe83c30c65c4a2def0f552d0">getValue</a>();</div>
<div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;      };</div>
<div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *InsertBefore = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getNextNode();</div>
<div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(InsertBefore &amp;&amp; <span class="stringliteral">&quot;Unexpected: debug intrinsics after a terminator&quot;</span>);</div>
<div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;      FnVarLocs-&gt;<a class="code" href="classFunctionVarLocsBuilder.html#a61f032e857254b5eb3b50dbc64f66624">addVarLoc</a>(InsertBefore, <a class="code" href="classllvm_1_1DebugVariable.html">DebugVariable</a>(DVI),</div>
<div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;                           DVI-&gt;<a class="code" href="classllvm_1_1DbgVariableIntrinsic.html#a2d4581b2568be7db21e47f096ffd6df8">getExpression</a>(), DVI-&gt;<a class="code" href="classllvm_1_1Instruction.html#ab4f3bf98b5054831b608852e33427814">getDebugLoc</a>(),</div>
<div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;                           GetValue());</div>
<div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;      InsertedAnyIntrinsics = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;    }</div>
<div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;  }</div>
<div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;  <span class="keywordflow">return</span> InsertedAnyIntrinsics;</div>
<div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;}</div>
<div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;<span class="comment">/// Remove redundant definitions within sequences of consecutive location defs.</span></div>
<div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;<span class="comment">/// This is done using a backward scan to keep the last def describing a</span></div>
<div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;<span class="comment">/// specific variable/fragment.</span></div>
<div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;<span class="comment">/// This implements removeRedundantDbgInstrsUsingBackwardScan from</span></div>
<div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;<span class="comment">/// lib/Transforms/Utils/BasicBlockUtils.cpp for locations described with</span></div>
<div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;<span class="comment">/// FunctionVarLocsBuilder instead of with intrinsics.</span></div>
<div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span></div>
<div class="line"><a name="l02142"></a><span class="lineno"><a class="line" href="AssignmentTrackingAnalysis_8cpp.html#ad959466c7f8b886a2caa4967c46d48db"> 2142</a></span>&#160;<a class="code" href="AssignmentTrackingAnalysis_8cpp.html#ad959466c7f8b886a2caa4967c46d48db">removeRedundantDbgLocsUsingBackwardScan</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>,</div>
<div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;                                        <a class="code" href="classFunctionVarLocsBuilder.html">FunctionVarLocsBuilder</a> &amp;FnVarLocs) {</div>
<div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;  <a class="code" href="classllvm_1_1SmallDenseSet.html">SmallDenseSet&lt;DebugVariable&gt;</a> VariableSet;</div>
<div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160; </div>
<div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;  <span class="comment">// Scan over the entire block, not just over the instructions mapped by</span></div>
<div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;  <span class="comment">// FnVarLocs, because wedges in FnVarLocs may only be seperated by debug</span></div>
<div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;  <span class="comment">// instructions.</span></div>
<div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : <a class="code" href="namespacellvm.html#a6b0ac1fa4f05de76413c5e0ca6334035">reverse</a>(*<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)) {</div>
<div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;    <span class="keywordflow">if</span> (!isa&lt;DbgVariableIntrinsic&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;      <span class="comment">// Sequence of consecutive defs ended. Clear map for the next one.</span></div>
<div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;      VariableSet.<a class="code" href="classllvm_1_1detail_1_1DenseSetImpl.html#a1fbf4d66a9eeaa9ade03e8febee097ee">clear</a>();</div>
<div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;    }</div>
<div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160; </div>
<div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;    <span class="comment">// Get the location defs that start just before this instruction.</span></div>
<div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> *Locs = FnVarLocs.<a class="code" href="classFunctionVarLocsBuilder.html#a79fb13e417678df16ca53e1bbfd5bc42">getWedge</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;    <span class="keywordflow">if</span> (!Locs)</div>
<div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160; </div>
<div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;    NumWedgesScanned++;</div>
<div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;    <span class="keywordtype">bool</span> ChangedThisWedge = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;    <span class="comment">// The new pruned set of defs, reversed because we&#39;re scanning backwards.</span></div>
<div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;VarLocInfo&gt;</a> NewDefsReversed;</div>
<div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160; </div>
<div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;    <span class="comment">// Iterate over the existing defs in reverse.</span></div>
<div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> RIt = Locs-&gt;rbegin(), REnd = Locs-&gt;rend(); RIt != REnd; ++RIt) {</div>
<div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;      NumDefsScanned++;</div>
<div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1DebugVariable.html">DebugVariable</a> &amp;<a class="code" href="namespacellvm_1_1AMDGPU_1_1PALMD.html#af892c75285b0f64d58ca76cb73059adf">Key</a> = FnVarLocs.<a class="code" href="classFunctionVarLocsBuilder.html#a7015ad4444cf34e6d69326f60268671a">getVariable</a>(RIt-&gt;VariableID);</div>
<div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;      <span class="keywordtype">bool</span> FirstDefOfFragment = VariableSet.<a class="code" href="classllvm_1_1detail_1_1DenseSetImpl.html#a79eed48913651aeedda2eed25201ea84">insert</a>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1PALMD.html#af892c75285b0f64d58ca76cb73059adf">Key</a>).second;</div>
<div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160; </div>
<div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;      <span class="comment">// If the same variable fragment is described more than once it is enough</span></div>
<div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;      <span class="comment">// to keep the last one (i.e. the first found in this reverse iteration).</span></div>
<div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;      <span class="keywordflow">if</span> (FirstDefOfFragment) {</div>
<div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;        <span class="comment">// New def found: keep it.</span></div>
<div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;        NewDefsReversed.push_back(*RIt);</div>
<div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;        <span class="comment">// Redundant def found: throw it away. Since the wedge of defs is being</span></div>
<div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;        <span class="comment">// rebuilt, doing nothing is the same as deleting an entry.</span></div>
<div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;        ChangedThisWedge = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;        NumDefsRemoved++;</div>
<div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;      }</div>
<div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;    }</div>
<div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160; </div>
<div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;    <span class="comment">// Un-reverse the defs and replace the wedge with the pruned version.</span></div>
<div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;    <span class="keywordflow">if</span> (ChangedThisWedge) {</div>
<div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;      <a class="code" href="namespacellvm.html#a6b0ac1fa4f05de76413c5e0ca6334035">std::reverse</a>(NewDefsReversed.begin(), NewDefsReversed.end());</div>
<div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;      FnVarLocs.<a class="code" href="classFunctionVarLocsBuilder.html#a3a86f8df2c4e6293186cc140205dc52f">setWedge</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(NewDefsReversed));</div>
<div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;      NumWedgesChanged++;</div>
<div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;      Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;    }</div>
<div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;  }</div>
<div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160; </div>
<div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;  <span class="keywordflow">return</span> Changed;</div>
<div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;}</div>
<div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;<span class="comment">/// Remove redundant location defs using a forward scan. This can remove a</span></div>
<div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;<span class="comment">/// location definition that is redundant due to indicating that a variable has</span></div>
<div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;<span class="comment">/// the same value as is already being indicated by an earlier def.</span></div>
<div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;<span class="comment">/// This implements removeRedundantDbgInstrsUsingForwardScan from</span></div>
<div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;<span class="comment">/// lib/Transforms/Utils/BasicBlockUtils.cpp for locations described with</span></div>
<div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;<span class="comment">/// FunctionVarLocsBuilder instead of with intrinsics</span></div>
<div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span></div>
<div class="line"><a name="l02206"></a><span class="lineno"><a class="line" href="AssignmentTrackingAnalysis_8cpp.html#a72b4d4469e68630addc74e567526f261"> 2206</a></span>&#160;<a class="code" href="AssignmentTrackingAnalysis_8cpp.html#a72b4d4469e68630addc74e567526f261">removeRedundantDbgLocsUsingForwardScan</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>,</div>
<div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;                                       <a class="code" href="classFunctionVarLocsBuilder.html">FunctionVarLocsBuilder</a> &amp;FnVarLocs) {</div>
<div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;DebugVariable, std::pair&lt;Value *, DIExpression *&gt;</a>&gt; VariableMap;</div>
<div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160; </div>
<div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;  <span class="comment">// Scan over the entire block, not just over the instructions mapped by</span></div>
<div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;  <span class="comment">// FnVarLocs, because wedges in FnVarLocs may only be seperated by debug</span></div>
<div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;  <span class="comment">// instructions.</span></div>
<div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;    <span class="comment">// Get the defs that come just before this instruction.</span></div>
<div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> *Locs = FnVarLocs.<a class="code" href="classFunctionVarLocsBuilder.html#a79fb13e417678df16ca53e1bbfd5bc42">getWedge</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;    <span class="keywordflow">if</span> (!Locs)</div>
<div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160; </div>
<div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;    NumWedgesScanned++;</div>
<div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;    <span class="keywordtype">bool</span> ChangedThisWedge = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;    <span class="comment">// The new pruned set of defs.</span></div>
<div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;VarLocInfo&gt;</a> NewDefs;</div>
<div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160; </div>
<div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;    <span class="comment">// Iterate over the existing defs.</span></div>
<div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="structllvm_1_1VarLocInfo.html">VarLocInfo</a> &amp;Loc : *Locs) {</div>
<div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;      NumDefsScanned++;</div>
<div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;      <a class="code" href="classllvm_1_1DebugVariable.html">DebugVariable</a> <a class="code" href="namespacellvm_1_1AMDGPU_1_1PALMD.html#af892c75285b0f64d58ca76cb73059adf">Key</a>(FnVarLocs.<a class="code" href="classFunctionVarLocsBuilder.html#a7015ad4444cf34e6d69326f60268671a">getVariable</a>(Loc.VariableID).<a class="code" href="classllvm_1_1DebugVariable.html#ae5969d48a72e8641cb15bc81a3bb1af8">getVariable</a>(),</div>
<div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;                        std::nullopt, Loc.DL.getInlinedAt());</div>
<div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;      <span class="keyword">auto</span> VMI = VariableMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a0c047f127ed4380a6f383d70bec4eb94">find</a>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1PALMD.html#af892c75285b0f64d58ca76cb73059adf">Key</a>);</div>
<div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160; </div>
<div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;      <span class="comment">// Update the map if we found a new value/expression describing the</span></div>
<div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;      <span class="comment">// variable, or if the variable wasn&#39;t mapped already.</span></div>
<div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;      <span class="keywordflow">if</span> (VMI == VariableMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a65520b9c67759099e313d0f4e7b5ff9e">end</a>() || VMI-&gt;second.first != Loc.V ||</div>
<div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;          VMI-&gt;second.second != Loc.Expr) {</div>
<div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;        VariableMap[<a class="code" href="namespacellvm_1_1AMDGPU_1_1PALMD.html#af892c75285b0f64d58ca76cb73059adf">Key</a>] = {Loc.V, Loc.Expr};</div>
<div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;        NewDefs.push_back(Loc);</div>
<div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;      }</div>
<div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160; </div>
<div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;      <span class="comment">// Did not insert this Loc, which is the same as removing it.</span></div>
<div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;      ChangedThisWedge = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;      NumDefsRemoved++;</div>
<div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;    }</div>
<div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160; </div>
<div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;    <span class="comment">// Replace the existing wedge with the pruned version.</span></div>
<div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;    <span class="keywordflow">if</span> (ChangedThisWedge) {</div>
<div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;      FnVarLocs.<a class="code" href="classFunctionVarLocsBuilder.html#a3a86f8df2c4e6293186cc140205dc52f">setWedge</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(NewDefs));</div>
<div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;      NumWedgesChanged++;</div>
<div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;      Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;    }</div>
<div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;  }</div>
<div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160; </div>
<div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;  <span class="keywordflow">return</span> Changed;</div>
<div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;}</div>
<div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160; </div>
<div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span></div>
<div class="line"><a name="l02258"></a><span class="lineno"><a class="line" href="AssignmentTrackingAnalysis_8cpp.html#a4e75fd1680471e758ffbca9f8d893884"> 2258</a></span>&#160;<a class="code" href="AssignmentTrackingAnalysis_8cpp.html#a4e75fd1680471e758ffbca9f8d893884">removeUndefDbgLocsFromEntryBlock</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>,</div>
<div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;                                 <a class="code" href="classFunctionVarLocsBuilder.html">FunctionVarLocsBuilder</a> &amp;FnVarLocs) {</div>
<div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;isEntryBlock());</div>
<div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;  <span class="comment">// Do extra work to ensure that we remove semantically unimportant undefs.</span></div>
<div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;  <span class="comment">// This is to work around the fact that SelectionDAG will hoist dbg.values</span></div>
<div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;  <span class="comment">// using argument values to the top of the entry block. That can move arg</span></div>
<div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;  <span class="comment">// dbg.values before undef and constant dbg.values which they previously</span></div>
<div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;  <span class="comment">// followed. The easiest thing to do is to just try to feed SelectionDAG</span></div>
<div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;  <span class="comment">// input it&#39;s happy with.</span></div>
<div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;  <span class="comment">// Map of {Variable x: Fragments y} where the fragments y of variable x have</span></div>
<div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;  <span class="comment">// have at least one non-undef location defined already. Don&#39;t use directly,</span></div>
<div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;  <span class="comment">// instead call DefineBits and HasDefinedBits.</span></div>
<div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;  <a class="code" href="classllvm_1_1SmallDenseMap.html">SmallDenseMap&lt;DebugAggregate, SmallDenseSet&lt;DIExpression::FragmentInfo&gt;</a>&gt;</div>
<div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;      VarsWithDef;</div>
<div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;  <span class="comment">// Specify that V (a fragment of A) has a non-undef location.</span></div>
<div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;  <span class="keyword">auto</span> DefineBits = [&amp;VarsWithDef](<a class="code" href="AssignmentTrackingAnalysis_8cpp.html#a05c5b2328f38cb1affebb8ad4ab6fe40">DebugAggregate</a> A, <a class="code" href="classllvm_1_1DebugVariable.html">DebugVariable</a> V) {</div>
<div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;    VarsWithDef[A].<a class="code" href="classllvm_1_1DenseMapBase.html#a99f811d53704275b4158c62a2dd138d9">insert</a>(V.<a class="code" href="classllvm_1_1DebugVariable.html#acdbb430c0790f598aff0f9c79ea2d4c4">getFragmentOrDefault</a>());</div>
<div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;  };</div>
<div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;  <span class="comment">// Return true if a non-undef location has been defined for V (a fragment of</span></div>
<div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;  <span class="comment">// A). Doesn&#39;t imply that the location is currently non-undef, just that a</span></div>
<div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;  <span class="comment">// non-undef location has been seen previously.</span></div>
<div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;  <span class="keyword">auto</span> HasDefinedBits = [&amp;VarsWithDef](<a class="code" href="AssignmentTrackingAnalysis_8cpp.html#a05c5b2328f38cb1affebb8ad4ab6fe40">DebugAggregate</a> A, <a class="code" href="classllvm_1_1DebugVariable.html">DebugVariable</a> V) {</div>
<div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;    <span class="keyword">auto</span> FragsIt = VarsWithDef.<a class="code" href="classllvm_1_1DenseMapBase.html#a0c047f127ed4380a6f383d70bec4eb94">find</a>(A);</div>
<div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;    <span class="keywordflow">if</span> (FragsIt == VarsWithDef.<a class="code" href="classllvm_1_1DenseMapBase.html#a65520b9c67759099e313d0f4e7b5ff9e">end</a>())</div>
<div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a61d13d6824ec46c31260a4fd0997eda0">llvm::any_of</a>(FragsIt-&gt;second, [V](<span class="keyword">auto</span> Frag) {</div>
<div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;      return DIExpression::fragmentsOverlap(Frag, V.getFragmentOrDefault());</div>
<div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;    });</div>
<div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;  };</div>
<div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160; </div>
<div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;DebugVariable, std::pair&lt;Value *, DIExpression *&gt;</a>&gt; VariableMap;</div>
<div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160; </div>
<div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;  <span class="comment">// Scan over the entire block, not just over the instructions mapped by</span></div>
<div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;  <span class="comment">// FnVarLocs, because wedges in FnVarLocs may only be seperated by debug</span></div>
<div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;  <span class="comment">// instructions.</span></div>
<div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;    <span class="comment">// Get the defs that come just before this instruction.</span></div>
<div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> *Locs = FnVarLocs.<a class="code" href="classFunctionVarLocsBuilder.html#a79fb13e417678df16ca53e1bbfd5bc42">getWedge</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;    <span class="keywordflow">if</span> (!Locs)</div>
<div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160; </div>
<div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;    NumWedgesScanned++;</div>
<div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;    <span class="keywordtype">bool</span> ChangedThisWedge = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;    <span class="comment">// The new pruned set of defs.</span></div>
<div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;VarLocInfo&gt;</a> NewDefs;</div>
<div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160; </div>
<div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;    <span class="comment">// Iterate over the existing defs.</span></div>
<div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="structllvm_1_1VarLocInfo.html">VarLocInfo</a> &amp;Loc : *Locs) {</div>
<div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;      NumDefsScanned++;</div>
<div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;      <a class="code" href="AssignmentTrackingAnalysis_8cpp.html#a05c5b2328f38cb1affebb8ad4ab6fe40">DebugAggregate</a> Aggr{FnVarLocs.<a class="code" href="classFunctionVarLocsBuilder.html#a7015ad4444cf34e6d69326f60268671a">getVariable</a>(Loc.VariableID).<a class="code" href="classllvm_1_1DebugVariable.html#ae5969d48a72e8641cb15bc81a3bb1af8">getVariable</a>(),</div>
<div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;                          Loc.DL.getInlinedAt()};</div>
<div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;      <a class="code" href="classllvm_1_1DebugVariable.html">DebugVariable</a> Var = FnVarLocs.<a class="code" href="classFunctionVarLocsBuilder.html#a7015ad4444cf34e6d69326f60268671a">getVariable</a>(Loc.VariableID);</div>
<div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160; </div>
<div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;      <span class="comment">// Remove undef entries that are encountered before any non-undef</span></div>
<div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;      <span class="comment">// intrinsics from the entry block.</span></div>
<div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;      <span class="keywordflow">if</span> (isa&lt;UndefValue&gt;(Loc.V) &amp;&amp; !HasDefinedBits(Aggr, Var)) {</div>
<div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;        <span class="comment">// Did not insert this Loc, which is the same as removing it.</span></div>
<div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;        NumDefsRemoved++;</div>
<div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;        ChangedThisWedge = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;      }</div>
<div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160; </div>
<div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;      DefineBits(Aggr, Var);</div>
<div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;      NewDefs.push_back(Loc);</div>
<div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;    }</div>
<div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160; </div>
<div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;    <span class="comment">// Replace the existing wedge with the pruned version.</span></div>
<div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;    <span class="keywordflow">if</span> (ChangedThisWedge) {</div>
<div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;      FnVarLocs.<a class="code" href="classFunctionVarLocsBuilder.html#a3a86f8df2c4e6293186cc140205dc52f">setWedge</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(NewDefs));</div>
<div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;      NumWedgesChanged++;</div>
<div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;      Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;    }</div>
<div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;  }</div>
<div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160; </div>
<div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;  <span class="keywordflow">return</span> Changed;</div>
<div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;}</div>
<div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160; </div>
<div class="line"><a name="l02338"></a><span class="lineno"><a class="line" href="AssignmentTrackingAnalysis_8cpp.html#a732f2f3b2dd163037799643ce7460547"> 2338</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="AssignmentTrackingAnalysis_8cpp.html#a732f2f3b2dd163037799643ce7460547">removeRedundantDbgLocs</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>,</div>
<div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;                                   <a class="code" href="classFunctionVarLocsBuilder.html">FunctionVarLocsBuilder</a> &amp;FnVarLocs) {</div>
<div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;  <span class="keywordtype">bool</span> MadeChanges = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;  MadeChanges |= <a class="code" href="AssignmentTrackingAnalysis_8cpp.html#ad959466c7f8b886a2caa4967c46d48db">removeRedundantDbgLocsUsingBackwardScan</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, FnVarLocs);</div>
<div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;isEntryBlock())</div>
<div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;    MadeChanges |= <a class="code" href="AssignmentTrackingAnalysis_8cpp.html#a4e75fd1680471e758ffbca9f8d893884">removeUndefDbgLocsFromEntryBlock</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, FnVarLocs);</div>
<div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;  MadeChanges |= <a class="code" href="AssignmentTrackingAnalysis_8cpp.html#a72b4d4469e68630addc74e567526f261">removeRedundantDbgLocsUsingForwardScan</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, FnVarLocs);</div>
<div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160; </div>
<div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;  <span class="keywordflow">if</span> (MadeChanges)</div>
<div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Removed redundant dbg locs from: &quot;</span> &lt;&lt; <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getName()</div>
<div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;  <span class="keywordflow">return</span> MadeChanges;</div>
<div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;}</div>
<div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160; </div>
<div class="line"><a name="l02352"></a><span class="lineno"><a class="line" href="AssignmentTrackingAnalysis_8cpp.html#a96c1848842c13bf34be7370f388890f8"> 2352</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;DebugAggregate&gt;</a> <a class="code" href="AssignmentTrackingAnalysis_8cpp.html#a96c1848842c13bf34be7370f388890f8">findVarsWithStackSlot</a>(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;Fn) {</div>
<div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;  <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;DebugAggregate&gt;</a> Result;</div>
<div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : Fn) {</div>
<div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;      <span class="comment">// Any variable linked to an instruction is considered</span></div>
<div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;      <span class="comment">// interesting. Ideally we only need to check Allocas, however, a</span></div>
<div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;      <span class="comment">// DIAssignID might get dropped from an alloca but not stores. In that</span></div>
<div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;      <span class="comment">// case, we need to consider the variable interesting for NFC behaviour</span></div>
<div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;      <span class="comment">// with this change. TODO: Consider only looking at allocas.</span></div>
<div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1DbgAssignIntrinsic.html">DbgAssignIntrinsic</a> *DAI : <a class="code" href="namespacellvm_1_1at.html#a3c90899e8f022656e511630de42b916c">at::getAssignmentMarkers</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;        Result.insert({DAI-&gt;<a class="code" href="classllvm_1_1DbgVariableIntrinsic.html#ac161deb2a31f78c85f94fbe0f3ba97b4">getVariable</a>(), DAI-&gt;<a class="code" href="classllvm_1_1Instruction.html#ab4f3bf98b5054831b608852e33427814">getDebugLoc</a>().<a class="code" href="classllvm_1_1DebugLoc.html#ada0b6f3c53a53b7274e7aeb23eeab5a8">getInlinedAt</a>()});</div>
<div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;      }</div>
<div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;    }</div>
<div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;  }</div>
<div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;  <span class="keywordflow">return</span> Result;</div>
<div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;}</div>
<div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160; </div>
<div class="line"><a name="l02369"></a><span class="lineno"><a class="line" href="AssignmentTrackingAnalysis_8cpp.html#a077a52fa690effeca0a2e83caeaf5de9"> 2369</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="AssignmentTrackingAnalysis_8cpp.html#a077a52fa690effeca0a2e83caeaf5de9">analyzeFunction</a>(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;Fn, <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;Layout,</div>
<div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;                            <a class="code" href="classFunctionVarLocsBuilder.html">FunctionVarLocsBuilder</a> *FnVarLocs) {</div>
<div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;  <span class="comment">// The analysis will generate location definitions for all variables, but we</span></div>
<div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;  <span class="comment">// only need to perform a dataflow on the set of variables which have a stack</span></div>
<div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;  <span class="comment">// slot. Find those now.</span></div>
<div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;  <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;DebugAggregate&gt;</a> VarsWithStackSlot = <a class="code" href="AssignmentTrackingAnalysis_8cpp.html#a96c1848842c13bf34be7370f388890f8">findVarsWithStackSlot</a>(Fn);</div>
<div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160; </div>
<div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160; </div>
<div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;  <span class="comment">// Use a scope block to clean up AssignmentTrackingLowering before running</span></div>
<div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;  <span class="comment">// MemLocFragmentFill to reduce peak memory consumption.</span></div>
<div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;  {</div>
<div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;    AssignmentTrackingLowering <a class="code" href="LazyValueInfo_8cpp.html#a739511554e31b02d233401957fd86f44">Pass</a>(Fn, Layout, &amp;VarsWithStackSlot);</div>
<div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;    Changed = <a class="code" href="classllvm_1_1Pass.html">Pass</a>.run(FnVarLocs);</div>
<div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;  }</div>
<div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160; </div>
<div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;  <span class="keywordflow">if</span> (Changed) {</div>
<div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;    MemLocFragmentFill <a class="code" href="LazyValueInfo_8cpp.html#a739511554e31b02d233401957fd86f44">Pass</a>(Fn, &amp;VarsWithStackSlot);</div>
<div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;    <a class="code" href="classllvm_1_1Pass.html">Pass</a>.run(FnVarLocs);</div>
<div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160; </div>
<div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;    <span class="comment">// Remove redundant entries. As well as reducing memory consumption and</span></div>
<div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;    <span class="comment">// avoiding waiting cycles later by burning some now, this has another</span></div>
<div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;    <span class="comment">// important job. That is to work around some SelectionDAG quirks. See</span></div>
<div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;    <span class="comment">// removeRedundantDbgLocsUsingForwardScan comments for more info on that.</span></div>
<div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : Fn)</div>
<div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;      <a class="code" href="AssignmentTrackingAnalysis_8cpp.html#a732f2f3b2dd163037799643ce7460547">removeRedundantDbgLocs</a>(&amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, *FnVarLocs);</div>
<div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;  }</div>
<div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;}</div>
<div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160; </div>
<div class="line"><a name="l02398"></a><span class="lineno"><a class="line" href="classllvm_1_1AssignmentTrackingAnalysis.html#acd5a8c833f5f8bc83a19c0e957c076d1"> 2398</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1AssignmentTrackingAnalysis.html#acd5a8c833f5f8bc83a19c0e957c076d1">AssignmentTrackingAnalysis::runOnFunction</a>(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) {</div>
<div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm.html#aa9ef2dbd1b7ce921093f7d4a7bd4cc5c">isAssignmentTrackingEnabled</a>(*<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getParent()))</div>
<div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160; </div>
<div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;AssignmentTrackingAnalysis run on &quot;</span> &lt;&lt; <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getName()</div>
<div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;  <span class="keyword">auto</span> <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = std::make_unique&lt;DataLayout&gt;(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getParent());</div>
<div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160; </div>
<div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;  <span class="comment">// Clear previous results.</span></div>
<div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;  Results-&gt;clear();</div>
<div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160; </div>
<div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;  <a class="code" href="classFunctionVarLocsBuilder.html">FunctionVarLocsBuilder</a> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>;</div>
<div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;  <a class="code" href="AssignmentTrackingAnalysis_8cpp.html#a077a52fa690effeca0a2e83caeaf5de9">analyzeFunction</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, *<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.get(), &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>);</div>
<div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160; </div>
<div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;  <span class="comment">// Save these results.</span></div>
<div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;  Results-&gt;init(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>);</div>
<div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160; </div>
<div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="AssignmentTrackingAnalysis_8cpp.html#af45091a37a806964b16ad7e69e1b78bf">PrintResults</a> &amp;&amp; <a class="code" href="namespacellvm.html#a7d104c3a6510178d34b2d3f0ae67b4d5">isFunctionInPrintList</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getName()))</div>
<div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;    Results-&gt;print(<a class="code" href="namespacellvm.html#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>(), <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160; </div>
<div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;  <span class="comment">// Return false because this pass does not modify the function.</span></div>
<div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;}</div>
<div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160; </div>
<div class="line"><a name="l02422"></a><span class="lineno"><a class="line" href="classllvm_1_1AssignmentTrackingAnalysis.html#a70e7df83b21f618e037a1cc39a9c6882"> 2422</a></span>&#160;<a class="code" href="classllvm_1_1AssignmentTrackingAnalysis.html#a70e7df83b21f618e037a1cc39a9c6882">AssignmentTrackingAnalysis::AssignmentTrackingAnalysis</a>()</div>
<div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;    : <a class="code" href="classllvm_1_1FunctionPass.html">FunctionPass</a>(<a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a>), <a class="code" href="AliasAnalysis_8cpp.html#a7e344cff0feadf0b02223fee63cc7475">Results</a>(<a class="code" href="namespacestd.html">std</a>::make_unique&lt;<a class="code" href="classllvm_1_1FunctionVarLocs.html">FunctionVarLocs</a>&gt;()) {}</div>
<div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160; </div>
<div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;<span class="keywordtype">char</span> <a class="code" href="classllvm_1_1AssignmentTrackingAnalysis.html#aeefac5089f97137ab91a792df56e2fc1">AssignmentTrackingAnalysis::ID</a> = 0;</div>
<div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160; </div>
<div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;<a class="code" href="PassSupport_8h.html#af807c9595d50b45c0008924c4679c85c">INITIALIZE_PASS</a>(<a class="code" href="classllvm_1_1AssignmentTrackingAnalysis.html">AssignmentTrackingAnalysis</a>, <a class="code" href="AssignmentTrackingAnalysis_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a>,</div>
<div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;                <span class="stringliteral">&quot;Assignment Tracking Analysis&quot;</span>, <span class="keyword">false</span>, <span class="keyword">true</span>)</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="aclassllvm_1_1DIExpression_html_ab804b15bb92ff685d7c1464b2816d608"><div class="ttname"><a href="classllvm_1_1DIExpression.html#ab804b15bb92ff685d7c1464b2816d608">llvm::DIExpression::prepend</a></div><div class="ttdeci">static DIExpression * prepend(const DIExpression *Expr, uint8_t Flags, int64_t Offset=0)</div><div class="ttdoc">Prepend DIExpr with a deref and offset operation and optionally turn it into a stack value or/and an ...</div><div class="ttdef"><b>Definition:</b> <a href="DebugInfoMetadata_8cpp_source.html#l01635">DebugInfoMetadata.cpp:1635</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a7653277511df1034148a37520a585bb5"><div class="ttname"><a href="classllvm_1_1Instruction.html#a7653277511df1034148a37520a585bb5">llvm::Instruction::isTerminator</a></div><div class="ttdeci">bool isTerminator() const</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00171">Instruction.h:171</a></div></div>
<div class="ttc" id="aclassllvm_1_1DbgVariableIntrinsic_html_a2d4581b2568be7db21e47f096ffd6df8"><div class="ttname"><a href="classllvm_1_1DbgVariableIntrinsic.html#a2d4581b2568be7db21e47f096ffd6df8">llvm::DbgVariableIntrinsic::getExpression</a></div><div class="ttdeci">DIExpression * getExpression() const</div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l00292">IntrinsicInst.h:292</a></div></div>
<div class="ttc" id="anamespacellvm_html_a8c9d5a3046b96979a032c218e858cd15"><div class="ttname"><a href="namespacellvm.html#a8c9d5a3046b96979a032c218e858cd15">llvm::VariableID</a></div><div class="ttdeci">VariableID</div><div class="ttdoc">Type wrapper for integer ID for Variables. 0 is reserved.</div><div class="ttdef"><b>Definition:</b> <a href="AssignmentTrackingAnalysis_8h_source.html#l00018">AssignmentTrackingAnalysis.h:18</a></div></div>
<div class="ttc" id="aclassllvm_1_1DIExpression_html_ab2fc167f75191e1d22e12e8e382605bb"><div class="ttname"><a href="classllvm_1_1DIExpression.html#ab2fc167f75191e1d22e12e8e382605bb">llvm::DIExpression::createFragmentExpression</a></div><div class="ttdeci">static std::optional&lt; DIExpression * &gt; createFragmentExpression(const DIExpression *Expr, unsigned OffsetInBits, unsigned SizeInBits)</div><div class="ttdoc">Create a DIExpression to describe one part of an aggregate variable that is fragmented across multipl...</div><div class="ttdef"><b>Definition:</b> <a href="DebugInfoMetadata_8cpp_source.html#l01798">DebugInfoMetadata.cpp:1798</a></div></div>
<div class="ttc" id="aIRTranslator_8cpp_html_abe44dfdea65b4f7e11e0a608ab708b76"><div class="ttname"><a href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a></div><div class="ttdeci">IRTranslator LLVM IR MI</div><div class="ttdef"><b>Definition:</b> <a href="IRTranslator_8cpp_source.html#l00109">IRTranslator.cpp:109</a></div></div>
<div class="ttc" id="anamespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">This is an optimization pass for GlobalISel generic memory operations.</div><div class="ttdef"><b>Definition:</b> <a href="AddressRanges_8h_source.html#l00018">AddressRanges.h:18</a></div></div>
<div class="ttc" id="aclassllvm_1_1IntervalMap_html_a377d82c7830c58e7034baf6a9cf38ba3"><div class="ttname"><a href="classllvm_1_1IntervalMap.html#a377d82c7830c58e7034baf6a9cf38ba3">llvm::IntervalMap::insert</a></div><div class="ttdeci">void insert(KeyT a, KeyT b, ValT y)</div><div class="ttdoc">insert - Add a mapping of [a;b] to y, coalesce with adjacent intervals.</div><div class="ttdef"><b>Definition:</b> <a href="IntervalMap_8h_source.html#l01129">IntervalMap.h:1129</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_aa75984a442f2379de0c66018201fa628"><div class="ttname"><a href="classllvm_1_1Type.html#aa75984a442f2379de0c66018201fa628">llvm::Type::getInt1Ty</a></div><div class="ttdeci">static IntegerType * getInt1Ty(LLVMContext &amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00238">Type.cpp:238</a></div></div>
<div class="ttc" id="alib_2Target_2X86_2README_8txt_html_ac88fe1d3a61b056a4f64fbbb156a62ff"><div class="ttname"><a href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a></div><div class="ttdeci">We currently emits eax Perhaps this is what we really should generate is Is imull three or four cycles eax eax The current instruction priority is based on pattern complexity The former is more complex because it folds a load so the latter will not be emitted Perhaps we should use AddedComplexity to give LEA32r a higher priority We should always try to match LEA first since the LEA matching code does some estimate to determine whether the match is profitable if we care more about code then imull is better It s two bytes shorter than movl leal On a Pentium M</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2X86_2README_8txt_source.html#l00252">README.txt:252</a></div></div>
<div class="ttc" id="aLazyValueInfo_8cpp_html_a739511554e31b02d233401957fd86f44"><div class="ttname"><a href="LazyValueInfo_8cpp.html#a739511554e31b02d233401957fd86f44">Pass</a></div><div class="ttdeci">print lazy value Lazy Value Info Printer Pass</div><div class="ttdef"><b>Definition:</b> <a href="LazyValueInfo_8cpp_source.html#l02067">LazyValueInfo.cpp:2067</a></div></div>
<div class="ttc" id="astructllvm_1_1DenseMapInfo_3_01unsigned_01_4_html"><div class="ttname"><a href="structllvm_1_1DenseMapInfo_3_01unsigned_01_4.html">llvm::DenseMapInfo&lt; unsigned &gt;</a></div><div class="ttdef"><b>Definition:</b> <a href="DenseMapInfo_8h_source.html#l00125">DenseMapInfo.h:125</a></div></div>
<div class="ttc" id="aclassllvm_1_1DataLayout_html"><div class="ttname"><a href="classllvm_1_1DataLayout.html">llvm::DataLayout</a></div><div class="ttdoc">A parsed version of the target data layout string in and methods for querying it.</div><div class="ttdef"><b>Definition:</b> <a href="DataLayout_8h_source.html#l00110">DataLayout.h:110</a></div></div>
<div class="ttc" id="aclassllvm_1_1FunctionVarLocs_html"><div class="ttname"><a href="classllvm_1_1FunctionVarLocs.html">llvm::FunctionVarLocs</a></div><div class="ttdoc">Data structure describing the variable locations in a function.</div><div class="ttdef"><b>Definition:</b> <a href="AssignmentTrackingAnalysis_8h_source.html#l00030">AssignmentTrackingAnalysis.h:30</a></div></div>
<div class="ttc" id="aIntrinsicInst_8h_html"><div class="ttname"><a href="IntrinsicInst_8h.html">IntrinsicInst.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1AssignmentTrackingAnalysis_html"><div class="ttname"><a href="classllvm_1_1AssignmentTrackingAnalysis.html">llvm::AssignmentTrackingAnalysis</a></div><div class="ttdef"><b>Definition:</b> <a href="AssignmentTrackingAnalysis_8h_source.html#l00097">AssignmentTrackingAnalysis.h:97</a></div></div>
<div class="ttc" id="anamespacellvm_html_a069c4ae2290101bde0f8d6a5074dc72b"><div class="ttname"><a href="namespacellvm.html#a069c4ae2290101bde0f8d6a5074dc72b">llvm::succ_end</a></div><div class="ttdeci">Interval::succ_iterator succ_end(Interval *I)</div><div class="ttdef"><b>Definition:</b> <a href="Interval_8h_source.html#l00102">Interval.h:102</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html"><div class="ttname"><a href="classllvm_1_1Function.html">llvm::Function</a></div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00059">Function.h:59</a></div></div>
<div class="ttc" id="aREADME-SSE_8txt_html_a63d206a063eefcdf8c318ded97b65020"><div class="ttname"><a href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a></div><div class="ttdeci">This currently compiles esp xmm0 movsd esp eax eax esp ret We should use not the dag combiner This is because dagcombine2 needs to be able to see through the X86ISD::Wrapper which DAGCombine can t really do The code for turning x load into a single vector load is target independent and should be moved to the dag combiner The code for turning x load into a vector load can only handle a direct load from a global or a direct load from the stack It should be generalized to handle any load from P</div><div class="ttdef"><b>Definition:</b> <a href="README-SSE_8txt_source.html#l00411">README-SSE.txt:411</a></div></div>
<div class="ttc" id="aAssignmentTrackingAnalysis_8h_html"><div class="ttname"><a href="AssignmentTrackingAnalysis_8h.html">AssignmentTrackingAnalysis.h</a></div></div>
<div class="ttc" id="aAssignmentTrackingAnalysis_8cpp_html_aa334bbcd58a25801d8d10ecfa73af14a"><div class="ttname"><a href="AssignmentTrackingAnalysis_8cpp.html#aa334bbcd58a25801d8d10ecfa73af14a">locStr</a></div><div class="ttdeci">const char * locStr(AssignmentTrackingLowering::LocKind Loc)</div><div class="ttdef"><b>Definition:</b> <a href="AssignmentTrackingAnalysis_8cpp_source.html#l01228">AssignmentTrackingAnalysis.cpp:1228</a></div></div>
<div class="ttc" id="aclassllvm_1_1ilist__node__with__parent_html_a26708685cc8b94fe3d7092ee080dbb34"><div class="ttname"><a href="classllvm_1_1ilist__node__with__parent.html#a26708685cc8b94fe3d7092ee080dbb34">llvm::ilist_node_with_parent::getNextNode</a></div><div class="ttdeci">NodeTy * getNextNode()</div><div class="ttdoc">Get the next node, or nullptr for the list tail.</div><div class="ttdef"><b>Definition:</b> <a href="ilist__node_8h_source.html#l00289">ilist_node.h:289</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector&lt; VarLocInfo &gt;</a></div></div>
<div class="ttc" id="aStatistic_8h_html"><div class="ttname"><a href="Statistic_8h.html">Statistic.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_aa9ef2dbd1b7ce921093f7d4a7bd4cc5c"><div class="ttname"><a href="namespacellvm.html#aa9ef2dbd1b7ce921093f7d4a7bd4cc5c">llvm::isAssignmentTrackingEnabled</a></div><div class="ttdeci">bool isAssignmentTrackingEnabled(const Module &amp;M)</div><div class="ttdoc">Return true if assignment tracking is enabled for module M.</div><div class="ttdef"><b>Definition:</b> <a href="DebugInfo_8cpp_source.html#l02037">DebugInfo.cpp:2037</a></div></div>
<div class="ttc" id="aclassllvm_1_1FunctionVarLocs_html_a49453c652051a3e7530ed421bf160c92"><div class="ttname"><a href="classllvm_1_1FunctionVarLocs.html#a49453c652051a3e7530ed421bf160c92">llvm::FunctionVarLocs::print</a></div><div class="ttdeci">void print(raw_ostream &amp;OS, const Function &amp;Fn) const</div><div class="ttdef"><b>Definition:</b> <a href="AssignmentTrackingAnalysis_8cpp_source.html#l00129">AssignmentTrackingAnalysis.cpp:129</a></div></div>
<div class="ttc" id="aAssignmentTrackingAnalysis_8cpp_html_af45091a37a806964b16ad7e69e1b78bf"><div class="ttname"><a href="AssignmentTrackingAnalysis_8cpp.html#af45091a37a806964b16ad7e69e1b78bf">PrintResults</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; PrintResults(&quot;print-debug-ata&quot;, cl::init(false), cl::Hidden)</div><div class="ttdoc">Print the results of the analysis. Respects -filter-print-funcs.</div></div>
<div class="ttc" id="aSupport_2ErrorHandling_8h_html"><div class="ttname"><a href="Support_2ErrorHandling_8h.html">ErrorHandling.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallDenseSet_html"><div class="ttname"><a href="classllvm_1_1SmallDenseSet.html">llvm::SmallDenseSet</a></div><div class="ttdoc">Implements a dense probed hash-table based set with some number of buckets stored inline.</div><div class="ttdef"><b>Definition:</b> <a href="DenseSet_8h_source.html#l00286">DenseSet.h:286</a></div></div>
<div class="ttc" id="aclassllvm_1_1DbgAssignIntrinsic_html_a948d5bb1eccf928e50384305678340e7"><div class="ttname"><a href="classllvm_1_1DbgAssignIntrinsic.html#a948d5bb1eccf928e50384305678340e7">llvm::DbgAssignIntrinsic::isKillAddress</a></div><div class="ttdeci">bool isKillAddress() const</div><div class="ttdoc">Check whether this kills the address component.</div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8cpp_source.html#l00221">IntrinsicInst.cpp:221</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallDenseMap_html"><div class="ttname"><a href="classllvm_1_1SmallDenseMap.html">llvm::SmallDenseMap</a></div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00880">DenseMap.h:880</a></div></div>
<div class="ttc" id="aAssignmentTrackingAnalysis_8cpp_html_a72b4d4469e68630addc74e567526f261"><div class="ttname"><a href="AssignmentTrackingAnalysis_8cpp.html#a72b4d4469e68630addc74e567526f261">removeRedundantDbgLocsUsingForwardScan</a></div><div class="ttdeci">static bool removeRedundantDbgLocsUsingForwardScan(const BasicBlock *BB, FunctionVarLocsBuilder &amp;FnVarLocs)</div><div class="ttdoc">Remove redundant location defs using a forward scan.</div><div class="ttdef"><b>Definition:</b> <a href="AssignmentTrackingAnalysis_8cpp_source.html#l02206">AssignmentTrackingAnalysis.cpp:2206</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6"><div class="ttname"><a href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">llvm::cl::Hidden</a></div><div class="ttdeci">@ Hidden</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00138">CommandLine.h:138</a></div></div>
<div class="ttc" id="astructllvm_1_1DenseMapInfo_3_01VariableID_01_4_html_a315cd274d6cf300d0c3d4fbb6b48c009"><div class="ttname"><a href="structllvm_1_1DenseMapInfo_3_01VariableID_01_4.html#a315cd274d6cf300d0c3d4fbb6b48c009">llvm::DenseMapInfo&lt; VariableID &gt;::isEqual</a></div><div class="ttdeci">static bool isEqual(const VariableID &amp;LHS, const VariableID &amp;RHS)</div><div class="ttdef"><b>Definition:</b> <a href="AssignmentTrackingAnalysis_8cpp_source.html#l00063">AssignmentTrackingAnalysis.cpp:63</a></div></div>
<div class="ttc" id="aclassllvm_1_1DILocation_html"><div class="ttname"><a href="classllvm_1_1DILocation.html">llvm::DILocation</a></div><div class="ttdoc">Debug location.</div><div class="ttdef"><b>Definition:</b> <a href="DebugInfoMetadata_8h_source.html#l01605">DebugInfoMetadata.h:1605</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_a9fffac2512fe651f0d5e37e27f5bd51c"><div class="ttname"><a href="classllvm_1_1Function.html#a9fffac2512fe651f0d5e37e27f5bd51c">llvm::Function::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const</div><div class="ttdoc">getContext - Return a reference to the LLVMContext associated with this function.</div><div class="ttdef"><b>Definition:</b> <a href="Function_8cpp_source.html#l00315">Function.cpp:315</a></div></div>
<div class="ttc" id="aclassllvm_1_1DebugLoc_html_ada0b6f3c53a53b7274e7aeb23eeab5a8"><div class="ttname"><a href="classllvm_1_1DebugLoc.html#ada0b6f3c53a53b7274e7aeb23eeab5a8">llvm::DebugLoc::getInlinedAt</a></div><div class="ttdeci">DILocation * getInlinedAt() const</div><div class="ttdef"><b>Definition:</b> <a href="DebugLoc_8cpp_source.html#l00039">DebugLoc.cpp:39</a></div></div>
<div class="ttc" id="anamespacellvm_html_a2f883c895f4d244f4ed56ed8a8c160c1"><div class="ttname"><a href="namespacellvm.html#a2f883c895f4d244f4ed56ed8a8c160c1">llvm::operator!=</a></div><div class="ttdeci">bool operator!=(uint64_t V1, const APInt &amp;V2)</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l02040">APInt.h:2040</a></div></div>
<div class="ttc" id="aclassllvm_1_1DbgVariableIntrinsic_html_ac161deb2a31f78c85f94fbe0f3ba97b4"><div class="ttname"><a href="classllvm_1_1DbgVariableIntrinsic.html#ac161deb2a31f78c85f94fbe0f3ba97b4">llvm::DbgVariableIntrinsic::getVariable</a></div><div class="ttdeci">DILocalVariable * getVariable() const</div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l00288">IntrinsicInst.h:288</a></div></div>
<div class="ttc" id="aAssignmentTrackingAnalysis_8cpp_html_ad78e062f62e0d6e453941fb4ca843e4d"><div class="ttname"><a href="AssignmentTrackingAnalysis_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a></div><div class="ttdeci">#define DEBUG_TYPE</div><div class="ttdef"><b>Definition:</b> <a href="AssignmentTrackingAnalysis_8cpp_source.html#l00031">AssignmentTrackingAnalysis.cpp:31</a></div></div>
<div class="ttc" id="aclassllvm_1_1MapVector_html"><div class="ttname"><a href="classllvm_1_1MapVector.html">llvm::MapVector</a></div><div class="ttdoc">This class implements a map that also provides access to all stored values in a deterministic order.</div><div class="ttdef"><b>Definition:</b> <a href="MapVector_8h_source.html#l00037">MapVector.h:37</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSet_html"><div class="ttname"><a href="classllvm_1_1SmallPtrSet.html">llvm::SmallPtrSet</a></div><div class="ttdoc">SmallPtrSet - This class implements a set which is optimized for holding SmallSize or less elements.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00450">SmallPtrSet.h:450</a></div></div>
<div class="ttc" id="aAliasAnalysis_8cpp_html_a7e344cff0feadf0b02223fee63cc7475"><div class="ttname"><a href="AliasAnalysis_8cpp.html#a7e344cff0feadf0b02223fee63cc7475">Results</a></div><div class="ttdeci">Function Alias Analysis Results</div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8cpp_source.html#l00769">AliasAnalysis.cpp:769</a></div></div>
<div class="ttc" id="aclassllvm_1_1DIE_html"><div class="ttname"><a href="classllvm_1_1DIE.html">llvm::DIE</a></div><div class="ttdoc">A structured debug information entry.</div><div class="ttdef"><b>Definition:</b> <a href="DIE_8h_source.html#l00739">DIE.h:739</a></div></div>
<div class="ttc" id="anamespacellvm_html_a9a7b5c68c90f85baaedaa854cc5002cc"><div class="ttname"><a href="namespacellvm.html#a9a7b5c68c90f85baaedaa854cc5002cc">llvm::errs</a></div><div class="ttdeci">raw_fd_ostream &amp; errs()</div><div class="ttdoc">This returns a reference to a raw_ostream for standard error.</div><div class="ttdef"><b>Definition:</b> <a href="raw__ostream_8cpp_source.html#l00899">raw_ostream.cpp:899</a></div></div>
<div class="ttc" id="anamespacellvm_html_a03503773241005f01b090b9862aad304"><div class="ttname"><a href="namespacellvm.html#a03503773241005f01b090b9862aad304">llvm::dump</a></div><div class="ttdeci">void dump(const SparseBitVector&lt; ElementSize &gt; &amp;LHS, raw_ostream &amp;out)</div><div class="ttdef"><b>Definition:</b> <a href="SparseBitVector_8h_source.html#l00877">SparseBitVector.h:877</a></div></div>
<div class="ttc" id="aSTLExtras_8h_html"><div class="ttname"><a href="STLExtras_8h.html">STLExtras.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1DIExpression_html"><div class="ttname"><a href="classllvm_1_1DIExpression.html">llvm::DIExpression</a></div><div class="ttdoc">DWARF expression.</div><div class="ttdef"><b>Definition:</b> <a href="DebugInfoMetadata_8h_source.html#l02611">DebugInfoMetadata.h:2611</a></div></div>
<div class="ttc" id="aX86PartialReduction_8cpp_html_a87b8bfbbe9d8f7146d7f20a5fb42efd0"><div class="ttname"><a href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a></div><div class="ttdeci">Value * RHS</div><div class="ttdef"><b>Definition:</b> <a href="X86PartialReduction_8cpp_source.html#l00076">X86PartialReduction.cpp:76</a></div></div>
<div class="ttc" id="aclassllvm_1_1AssignmentTrackingAnalysis_html_a70e7df83b21f618e037a1cc39a9c6882"><div class="ttname"><a href="classllvm_1_1AssignmentTrackingAnalysis.html#a70e7df83b21f618e037a1cc39a9c6882">llvm::AssignmentTrackingAnalysis::AssignmentTrackingAnalysis</a></div><div class="ttdeci">AssignmentTrackingAnalysis()</div><div class="ttdef"><b>Definition:</b> <a href="AssignmentTrackingAnalysis_8cpp_source.html#l02422">AssignmentTrackingAnalysis.cpp:2422</a></div></div>
<div class="ttc" id="aclassllvm_1_1FunctionVarLocs_html_a4408ec4af32da89d4b979d16f24973fc"><div class="ttname"><a href="classllvm_1_1FunctionVarLocs.html#a4408ec4af32da89d4b979d16f24973fc">llvm::FunctionVarLocs::locs_end</a></div><div class="ttdeci">const VarLocInfo * locs_end(const Instruction *Before) const</div><div class="ttdoc">One past the last variable location definition that comes before Before.</div><div class="ttdef"><b>Definition:</b> <a href="AssignmentTrackingAnalysis_8h_source.html#l00079">AssignmentTrackingAnalysis.h:79</a></div></div>
<div class="ttc" id="aclassllvm_1_1detail_1_1DenseSetImpl_html_a79eed48913651aeedda2eed25201ea84"><div class="ttname"><a href="classllvm_1_1detail_1_1DenseSetImpl.html#a79eed48913651aeedda2eed25201ea84">llvm::detail::DenseSetImpl::insert</a></div><div class="ttdeci">std::pair&lt; iterator, bool &gt; insert(const ValueT &amp;V)</div><div class="ttdef"><b>Definition:</b> <a href="DenseSet_8h_source.html#l00206">DenseSet.h:206</a></div></div>
<div class="ttc" id="aclassllvm_1_1detail_1_1DenseSetImpl_html_afe504aa31a6a354cec13f5b32d0b1d9d"><div class="ttname"><a href="classllvm_1_1detail_1_1DenseSetImpl.html#afe504aa31a6a354cec13f5b32d0b1d9d">llvm::detail::DenseSetImpl&lt; ValueT, DenseMap&lt; ValueT, detail::DenseSetEmpty, DenseMapInfo&lt; ValueT &gt;, detail::DenseSetPair&lt; ValueT &gt; &gt;, DenseMapInfo&lt; ValueT &gt; &gt;::count</a></div><div class="ttdeci">size_type count(const_arg_type_t&lt; ValueT &gt; V) const</div><div class="ttdoc">Return 1 if the specified key is in the set, 0 otherwise.</div><div class="ttdef"><b>Definition:</b> <a href="DenseSet_8h_source.html#l00097">DenseSet.h:97</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a30dd396c5b40cd86c1591872e574ccdf"><div class="ttname"><a href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">llvm::Type::getInt32Ty</a></div><div class="ttdeci">static IntegerType * getInt32Ty(LLVMContext &amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00241">Type.cpp:241</a></div></div>
<div class="ttc" id="aDebug_8h_html_a08efc68d15935eb8889400a46c3749ba"><div class="ttname"><a href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a></div><div class="ttdeci">#define LLVM_DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8h_source.html#l00101">Debug.h:101</a></div></div>
<div class="ttc" id="anamespacellvm_1_1at_html_a3c90899e8f022656e511630de42b916c"><div class="ttname"><a href="namespacellvm_1_1at.html#a3c90899e8f022656e511630de42b916c">llvm::at::getAssignmentMarkers</a></div><div class="ttdeci">AssignmentMarkerRange getAssignmentMarkers(DIAssignID *ID)</div><div class="ttdoc">Return a range of dbg.assign intrinsics which use \ID as an operand.</div><div class="ttdef"><b>Definition:</b> <a href="DebugInfo_8cpp_source.html#l01754">DebugInfo.cpp:1754</a></div></div>
<div class="ttc" id="aclassllvm_1_1MDNode_html_a7d10a7b9b7f40b04d27ed97c38ea1950"><div class="ttname"><a href="classllvm_1_1MDNode.html#a7d10a7b9b7f40b04d27ed97c38ea1950">llvm::MDNode::get</a></div><div class="ttdeci">static MDTuple * get(LLVMContext &amp;Context, ArrayRef&lt; Metadata * &gt; MDs)</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l01399">Metadata.h:1399</a></div></div>
<div class="ttc" id="astructllvm_1_1DenseMapInfo_3_01VariableID_01_4_html_ada75facb72606ba383b05705f381c56d"><div class="ttname"><a href="structllvm_1_1DenseMapInfo_3_01VariableID_01_4.html#ada75facb72606ba383b05705f381c56d">llvm::DenseMapInfo&lt; VariableID &gt;::getEmptyKey</a></div><div class="ttdeci">static VariableID getEmptyKey()</div><div class="ttdef"><b>Definition:</b> <a href="AssignmentTrackingAnalysis_8cpp_source.html#l00054">AssignmentTrackingAnalysis.cpp:54</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_a96d73bbd7af15cb1fc38c3f4a3bd82e9"><div class="ttname"><a href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a></div><div class="ttdeci">#define F(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00055">MD5.cpp:55</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RISCVFenceField_html_a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731"><div class="ttname"><a href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">llvm::RISCVFenceField::R</a></div><div class="ttdeci">@ R</div><div class="ttdef"><b>Definition:</b> <a href="RISCVBaseInfo_8h_source.html#l00278">RISCVBaseInfo.h:278</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html"><div class="ttname"><a href="classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00055">BasicBlock.h:55</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs() - This returns a reference to a raw_ostream for debugging messages.</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8cpp_source.html#l00163">Debug.cpp:163</a></div></div>
<div class="ttc" id="aIR_2Instruction_8h_html"><div class="ttname"><a href="IR_2Instruction_8h.html">Instruction.h</a></div></div>
<div class="ttc" id="aCommandLine_8h_html"><div class="ttname"><a href="CommandLine_8h.html">CommandLine.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_a3b1dce1f3354a357fb9061bb7568a84e"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a3b1dce1f3354a357fb9061bb7568a84e">llvm::MachineBasicBlock::push_back</a></div><div class="ttdeci">void push_back(MachineInstr *MI)</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00930">MachineBasicBlock.h:930</a></div></div>
<div class="ttc" id="aX86PartialReduction_8cpp_html_a9e1483f7215664a2315c53c3558d9a8d"><div class="ttname"><a href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a></div><div class="ttdeci">Value * LHS</div><div class="ttdef"><b>Definition:</b> <a href="X86PartialReduction_8cpp_source.html#l00075">X86PartialReduction.cpp:75</a></div></div>
<div class="ttc" id="astructllvm_1_1DenseMapInfo_html"><div class="ttname"><a href="structllvm_1_1DenseMapInfo.html">llvm::DenseMapInfo</a></div><div class="ttdoc">An information struct used to provide DenseMap with the various necessary components for a given valu...</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00034">APInt.h:34</a></div></div>
<div class="ttc" id="astructllvm_1_1IntervalMapImpl_1_1NodeSizer_html"><div class="ttname"><a href="structllvm_1_1IntervalMapImpl_1_1NodeSizer.html">llvm::IntervalMapImpl::NodeSizer</a></div><div class="ttdef"><b>Definition:</b> <a href="IntervalMap_8h_source.html#l00439">IntervalMap.h:439</a></div></div>
<div class="ttc" id="anamespacellvm_1_1msgpack_html_afdae9da66bac09f4b2bfc0fd9f0559e6a46f3ea056caa3126b91f3f70beea068c"><div class="ttname"><a href="namespacellvm_1_1msgpack.html#afdae9da66bac09f4b2bfc0fd9f0559e6a46f3ea056caa3126b91f3f70beea068c">llvm::msgpack::Type::Map</a></div><div class="ttdeci">@ Map</div></div>
<div class="ttc" id="astructllvm_1_1DenseMapInfo_3_01VariableID_01_4_html_a60df1e4c85863eb72c6954b153c0ee0c"><div class="ttname"><a href="structllvm_1_1DenseMapInfo_3_01VariableID_01_4.html#a60df1e4c85863eb72c6954b153c0ee0c">llvm::DenseMapInfo&lt; VariableID &gt;::getHashValue</a></div><div class="ttdeci">static unsigned getHashValue(const VariableID &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="AssignmentTrackingAnalysis_8cpp_source.html#l00060">AssignmentTrackingAnalysis.cpp:60</a></div></div>
<div class="ttc" id="aclassllvm_1_1AssignmentTrackingAnalysis_html_acd5a8c833f5f8bc83a19c0e957c076d1"><div class="ttname"><a href="classllvm_1_1AssignmentTrackingAnalysis.html#acd5a8c833f5f8bc83a19c0e957c076d1">llvm::AssignmentTrackingAnalysis::runOnFunction</a></div><div class="ttdeci">bool runOnFunction(Function &amp;F) override</div><div class="ttdoc">runOnFunction - Virtual method overriden by subclasses to do the per-function processing of the pass.</div><div class="ttdef"><b>Definition:</b> <a href="AssignmentTrackingAnalysis_8cpp_source.html#l02398">AssignmentTrackingAnalysis.cpp:2398</a></div></div>
<div class="ttc" id="aclassllvm_1_1DbgValueInst_html"><div class="ttname"><a href="classllvm_1_1DbgValueInst.html">llvm::DbgValueInst</a></div><div class="ttdoc">This represents the llvm.dbg.value instruction.</div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l00388">IntrinsicInst.h:388</a></div></div>
<div class="ttc" id="aclassllvm_1_1DILocalVariable_html"><div class="ttname"><a href="classllvm_1_1DILocalVariable.html">llvm::DILocalVariable</a></div><div class="ttdoc">Local variable.</div><div class="ttdef"><b>Definition:</b> <a href="DebugInfoMetadata_8h_source.html#l03170">DebugInfoMetadata.h:3170</a></div></div>
<div class="ttc" id="aBuiltinGCs_8cpp_html_a6742d2e0a668baf1196ec69e158d5f15"><div class="ttname"><a href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a></div><div class="ttdeci">static GCRegistry::Add&lt; CoreCLRGC &gt; E(&quot;coreclr&quot;, &quot;CoreCLR-compatible GC&quot;)</div></div>
<div class="ttc" id="anamespacellvm_1_1ARM__PROC_html_aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5"><div class="ttname"><a href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">llvm::ARM_PROC::A</a></div><div class="ttdeci">@ A</div><div class="ttdef"><b>Definition:</b> <a href="MCTargetDesc_2ARMBaseInfo_8h_source.html#l00034">ARMBaseInfo.h:34</a></div></div>
<div class="ttc" id="aclassllvm_1_1DbgAssignIntrinsic_html_a266ca2c5cadcdcad3a3ba12a4425863f"><div class="ttname"><a href="classllvm_1_1DbgAssignIntrinsic.html#a266ca2c5cadcdcad3a3ba12a4425863f">llvm::DbgAssignIntrinsic::getAssignID</a></div><div class="ttdeci">DIAssignID * getAssignID() const</div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l00430">IntrinsicInst.h:430</a></div></div>
<div class="ttc" id="aclassllvm_1_1DebugVariable_html_acdbb430c0790f598aff0f9c79ea2d4c4"><div class="ttname"><a href="classllvm_1_1DebugVariable.html#acdbb430c0790f598aff0f9c79ea2d4c4">llvm::DebugVariable::getFragmentOrDefault</a></div><div class="ttdeci">FragmentInfo getFragmentOrDefault() const</div><div class="ttdef"><b>Definition:</b> <a href="DebugInfoMetadata_8h_source.html#l03762">DebugInfoMetadata.h:3762</a></div></div>
<div class="ttc" id="aPassSupport_8h_html_af807c9595d50b45c0008924c4679c85c"><div class="ttname"><a href="PassSupport_8h.html#af807c9595d50b45c0008924c4679c85c">INITIALIZE_PASS</a></div><div class="ttdeci">#define INITIALIZE_PASS(passName, arg, name, cfg, analysis)</div><div class="ttdef"><b>Definition:</b> <a href="PassSupport_8h_source.html#l00038">PassSupport.h:38</a></div></div>
<div class="ttc" id="aDXILTranslateMetadata_8cpp_html_abd738f0052b7243a148afd74274996b7"><div class="ttname"><a href="DXILTranslateMetadata_8cpp.html#abd738f0052b7243a148afd74274996b7">Emit</a></div><div class="ttdeci">dxil metadata DXIL Metadata Emit</div><div class="ttdef"><b>Definition:</b> <a href="DXILTranslateMetadata_8cpp_source.html#l00074">DXILTranslateMetadata.cpp:74</a></div></div>
<div class="ttc" id="aSIInstrInfo_8cpp_html_a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791"><div class="ttname"><a href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a></div><div class="ttdeci">@ SI</div><div class="ttdef"><b>Definition:</b> <a href="SIInstrInfo_8cpp_source.html#l07993">SIInstrInfo.cpp:7993</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ms__demangle_html_afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e"><div class="ttname"><a href="namespacellvm_1_1ms__demangle.html#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">llvm::ms_demangle::QualifierMangleMode::Result</a></div><div class="ttdeci">@ Result</div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_1_1PALMD_html_af892c75285b0f64d58ca76cb73059adf"><div class="ttname"><a href="namespacellvm_1_1AMDGPU_1_1PALMD.html#af892c75285b0f64d58ca76cb73059adf">llvm::AMDGPU::PALMD::Key</a></div><div class="ttdeci">Key</div><div class="ttdoc">PAL metadata keys.</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUMetadata_8h_source.html#l00486">AMDGPUMetadata.h:486</a></div></div>
<div class="ttc" id="aclassllvm_1_1DbgVariableIntrinsic_html_af7f3b3d318132753954ca4da891245d8"><div class="ttname"><a href="classllvm_1_1DbgVariableIntrinsic.html#af7f3b3d318132753954ca4da891245d8">llvm::DbgVariableIntrinsic::isKillLocation</a></div><div class="ttdeci">bool isKillLocation() const</div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l00282">IntrinsicInst.h:282</a></div></div>
<div class="ttc" id="aBuiltinGCs_8cpp_html_a7abf5fb4071cb25dbce06dfb5ee3c937"><div class="ttname"><a href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a></div><div class="ttdeci">static GCRegistry::Add&lt; OcamlGC &gt; B(&quot;ocaml&quot;, &quot;ocaml 3.10-compatible GC&quot;)</div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html"><div class="ttname"><a href="classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00041">Instruction.h:41</a></div></div>
<div class="ttc" id="aUniqueVector_8h_html"><div class="ttname"><a href="UniqueVector_8h.html">UniqueVector.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a217e0207d9cc8e046c2dccbf0e4bb198"><div class="ttname"><a href="classllvm_1_1APInt.html#a217e0207d9cc8e046c2dccbf0e4bb198">llvm::APInt::getZExtValue</a></div><div class="ttdeci">uint64_t getZExtValue() const</div><div class="ttdoc">Get zero extended value.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01494">APInt.h:1494</a></div></div>
<div class="ttc" id="anamespacellvm_html_a0bf75467957937ad23ad7be19f489934"><div class="ttname"><a href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">llvm::STATISTIC</a></div><div class="ttdeci">STATISTIC(NumFunctions, &quot;Total number of functions&quot;)</div></div>
<div class="ttc" id="aclassllvm_1_1raw__ostream_html"><div class="ttname"><a href="classllvm_1_1raw__ostream.html">llvm::raw_ostream</a></div><div class="ttdoc">This class implements an extremely fast bulk output stream that can only output to a stream.</div><div class="ttdef"><b>Definition:</b> <a href="raw__ostream_8h_source.html#l00052">raw_ostream.h:52</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AArch64PACKey_html_abf4394f452bde3f544999858d71e4b46aaf2ff1a10f3f3b211d7781a33e4c1e05"><div class="ttname"><a href="namespacellvm_1_1AArch64PACKey.html#abf4394f452bde3f544999858d71e4b46aaf2ff1a10f3f3b211d7781a33e4c1e05">llvm::AArch64PACKey::IA</a></div><div class="ttdeci">@ IA</div><div class="ttdef"><b>Definition:</b> <a href="AArch64BaseInfo_8h_source.html#l00791">AArch64BaseInfo.h:791</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ilist__detail_html_ac7551955242d0b1649a6962fc449df5c"><div class="ttname"><a href="namespacellvm_1_1ilist__detail.html#ac7551955242d0b1649a6962fc449df5c">llvm::ilist_detail::make</a></div><div class="ttdeci">T &amp; make()</div></div>
<div class="ttc" id="aclassFunctionVarLocsBuilder_html_a61f032e857254b5eb3b50dbc64f66624"><div class="ttname"><a href="classFunctionVarLocsBuilder.html#a61f032e857254b5eb3b50dbc64f66624">FunctionVarLocsBuilder::addVarLoc</a></div><div class="ttdeci">void addVarLoc(Instruction *Before, DebugVariable Var, DIExpression *Expr, DebugLoc DL, Value *V)</div><div class="ttdoc">Add a def to the wedge of defs just before /p Before.</div><div class="ttdef"><b>Definition:</b> <a href="AssignmentTrackingAnalysis_8cpp_source.html#l00118">AssignmentTrackingAnalysis.cpp:118</a></div></div>
<div class="ttc" id="astructllvm_1_1VarLocInfo_html_af70494f348808c889f07f71f43cd28ec"><div class="ttname"><a href="structllvm_1_1VarLocInfo.html#af70494f348808c889f07f71f43cd28ec">llvm::VarLocInfo::VariableID</a></div><div class="ttdeci">llvm::VariableID VariableID</div><div class="ttdef"><b>Definition:</b> <a href="AssignmentTrackingAnalysis_8h_source.html#l00021">AssignmentTrackingAnalysis.h:21</a></div></div>
<div class="ttc" id="aclassllvm_1_1DbgVariableIntrinsic_html_acfa0ffc95fedffcb2ac3cca51872af7a"><div class="ttname"><a href="classllvm_1_1DbgVariableIntrinsic.html#acfa0ffc95fedffcb2ac3cca51872af7a">llvm::DbgVariableIntrinsic::hasArgList</a></div><div class="ttdeci">bool hasArgList() const</div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l00260">IntrinsicInst.h:260</a></div></div>
<div class="ttc" id="aCSEInfo_8cpp_html_a75f8a8519c2c9b30e7c06dc5e256fffa"><div class="ttname"><a href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a></div><div class="ttdeci">Analysis containing CSE Info</div><div class="ttdef"><b>Definition:</b> <a href="CSEInfo_8cpp_source.html#l00027">CSEInfo.cpp:27</a></div></div>
<div class="ttc" id="aclassllvm_1_1UniqueVector_html"><div class="ttname"><a href="classllvm_1_1UniqueVector.html">llvm::UniqueVector&lt; DebugVariable &gt;</a></div></div>
<div class="ttc" id="aPrintPasses_8h_html"><div class="ttname"><a href="PrintPasses_8h.html">PrintPasses.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1DebugVariable_html_ae5969d48a72e8641cb15bc81a3bb1af8"><div class="ttname"><a href="classllvm_1_1DebugVariable.html#ae5969d48a72e8641cb15bc81a3bb1af8">llvm::DebugVariable::getVariable</a></div><div class="ttdeci">const DILocalVariable * getVariable() const</div><div class="ttdef"><b>Definition:</b> <a href="DebugInfoMetadata_8h_source.html#l03758">DebugInfoMetadata.h:3758</a></div></div>
<div class="ttc" id="aAssignmentTrackingAnalysis_8cpp_html_a5dacd5924df31c782e0fd0fdada03e8b"><div class="ttname"><a href="AssignmentTrackingAnalysis_8cpp.html#a5dacd5924df31c782e0fd0fdada03e8b">MaxNumBlocks</a></div><div class="ttdeci">static cl::opt&lt; unsigned &gt; MaxNumBlocks(&quot;debug-ata-max-blocks&quot;, cl::init(10000), cl::desc(&quot;Maximum num basic blocks before debug info dropped&quot;), cl::Hidden)</div></div>
<div class="ttc" id="anamespacellvm_1_1lltok_html_af353621f14cb4b4b3af5ffaff84076b1"><div class="ttname"><a href="namespacellvm_1_1lltok.html#af353621f14cb4b4b3af5ffaff84076b1">llvm::lltok::Kind</a></div><div class="ttdeci">Kind</div><div class="ttdef"><b>Definition:</b> <a href="LLToken_8h_source.html#l00018">LLToken.h:18</a></div></div>
<div class="ttc" id="anamespacellvm_1_1CallingConv_html_a188c0836f8c3528401f1c236fd93b977"><div class="ttname"><a href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">llvm::CallingConv::ID</a></div><div class="ttdeci">unsigned ID</div><div class="ttdoc">LLVM IR allows to use arbitrary numbers as calling convention identifiers.</div><div class="ttdef"><b>Definition:</b> <a href="CallingConv_8h_source.html#l00024">CallingConv.h:24</a></div></div>
<div class="ttc" id="anamespacellvm_1_1at_html_acba9ed42400327fd80c5ec86803ca1f0"><div class="ttname"><a href="namespacellvm_1_1at.html#acba9ed42400327fd80c5ec86803ca1f0">llvm::at::getAssignmentInfo</a></div><div class="ttdeci">std::optional&lt; AssignmentInfo &gt; getAssignmentInfo(const DataLayout &amp;DL, const MemIntrinsic *I)</div><div class="ttdef"><b>Definition:</b> <a href="DebugInfo_8cpp_source.html#l01826">DebugInfo.cpp:1826</a></div></div>
<div class="ttc" id="anamespacellvm_1_1dxil_1_1PointerTypeAnalysis_html_ae574a4c1d84b9e67bc94489f356805b4"><div class="ttname"><a href="namespacellvm_1_1dxil_1_1PointerTypeAnalysis.html#ae574a4c1d84b9e67bc94489f356805b4">llvm::dxil::PointerTypeAnalysis::run</a></div><div class="ttdeci">PointerTypeMap run(const Module &amp;M)</div><div class="ttdoc">Compute the PointerTypeMap for the module M.</div><div class="ttdef"><b>Definition:</b> <a href="PointerTypeAnalysis_8cpp_source.html#l00189">PointerTypeAnalysis.cpp:189</a></div></div>
<div class="ttc" id="astructllvm_1_1DenseMapInfo_3_01VariableID_01_4_html_a25d6b69cf7b38628393d6294d936f3a1"><div class="ttname"><a href="structllvm_1_1DenseMapInfo_3_01VariableID_01_4.html#a25d6b69cf7b38628393d6294d936f3a1">llvm::DenseMapInfo&lt; VariableID &gt;::getTombstoneKey</a></div><div class="ttdeci">static VariableID getTombstoneKey()</div><div class="ttdef"><b>Definition:</b> <a href="AssignmentTrackingAnalysis_8cpp_source.html#l00057">AssignmentTrackingAnalysis.cpp:57</a></div></div>
<div class="ttc" id="aclassFunctionVarLocsBuilder_html_a87ba28b444ca39ce2a33fab11afe1351"><div class="ttname"><a href="classFunctionVarLocsBuilder.html#a87ba28b444ca39ce2a33fab11afe1351">FunctionVarLocsBuilder::addSingleLocVar</a></div><div class="ttdeci">void addSingleLocVar(DebugVariable Var, DIExpression *Expr, DebugLoc DL, Value *V)</div><div class="ttdoc">Add a def for a variable that is valid for its lifetime.</div><div class="ttdef"><b>Definition:</b> <a href="AssignmentTrackingAnalysis_8cpp_source.html#l00107">AssignmentTrackingAnalysis.cpp:107</a></div></div>
<div class="ttc" id="aclassllvm_1_1DILocalVariable_html_accfecccb150b316edf9b05e2d1fe117f"><div class="ttname"><a href="classllvm_1_1DILocalVariable.html#accfecccb150b316edf9b05e2d1fe117f">llvm::DILocalVariable::getScope</a></div><div class="ttdeci">DILocalScope * getScope() const</div><div class="ttdoc">Get the local scope for this variable.</div><div class="ttdef"><b>Definition:</b> <a href="DebugInfoMetadata_8h_source.html#l03228">DebugInfoMetadata.h:3228</a></div></div>
<div class="ttc" id="aclassllvm_1_1DIExpression_html_a15f4de7989cc83855e8f65792ae94bc4"><div class="ttname"><a href="classllvm_1_1DIExpression.html#a15f4de7989cc83855e8f65792ae94bc4">llvm::DIExpression::append</a></div><div class="ttdeci">static DIExpression * append(const DIExpression *Expr, ArrayRef&lt; uint64_t &gt; Ops)</div><div class="ttdoc">Append the opcodes Ops to DIExpr.</div><div class="ttdef"><b>Definition:</b> <a href="DebugInfoMetadata_8cpp_source.html#l01741">DebugInfoMetadata.cpp:1741</a></div></div>
<div class="ttc" id="anamespacellvm_html_a74cdbd1e4f731e7d7cd83461b8b1de0b"><div class="ttname"><a href="namespacellvm.html#a74cdbd1e4f731e7d7cd83461b8b1de0b">llvm::sort</a></div><div class="ttdeci">void sort(IteratorTy Start, IteratorTy End)</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01683">STLExtras.h:1683</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseSet_html"><div class="ttname"><a href="classllvm_1_1DenseSet.html">llvm::DenseSet</a></div><div class="ttdoc">Implements a dense probed hash-table based set.</div><div class="ttdef"><b>Definition:</b> <a href="DenseSet_8h_source.html#l00268">DenseSet.h:268</a></div></div>
<div class="ttc" id="aBasicBlock_8h_html"><div class="ttname"><a href="BasicBlock_8h.html">BasicBlock.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1FunctionVarLocs_html_a9ea673c5d261b84069c9623995438c5a"><div class="ttname"><a href="classllvm_1_1FunctionVarLocs.html#a9ea673c5d261b84069c9623995438c5a">llvm::FunctionVarLocs::single_locs_end</a></div><div class="ttdeci">const VarLocInfo * single_locs_end() const</div><div class="ttdoc">One past the last single-location variable location definition.</div><div class="ttdef"><b>Definition:</b> <a href="AssignmentTrackingAnalysis_8h_source.html#l00065">AssignmentTrackingAnalysis.h:65</a></div></div>
<div class="ttc" id="aclassllvm_1_1cl_1_1opt_html"><div class="ttname"><a href="classllvm_1_1cl_1_1opt.html">llvm::cl::opt</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l01410">CommandLine.h:1410</a></div></div>
<div class="ttc" id="aclassllvm_1_1DbgVariableIntrinsic_html"><div class="ttname"><a href="classllvm_1_1DbgVariableIntrinsic.html">llvm::DbgVariableIntrinsic</a></div><div class="ttdoc">This is the common base class for debug info intrinsics for variables.</div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l00181">IntrinsicInst.h:181</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AArch64PACKey_html_abf4394f452bde3f544999858d71e4b46a4babe0d4b2a36f887f48dfeb4b4a7cc6"><div class="ttname"><a href="namespacellvm_1_1AArch64PACKey.html#abf4394f452bde3f544999858d71e4b46a4babe0d4b2a36f887f48dfeb4b4a7cc6">llvm::AArch64PACKey::DA</a></div><div class="ttdeci">@ DA</div><div class="ttdef"><b>Definition:</b> <a href="AArch64BaseInfo_8h_source.html#l00793">AArch64BaseInfo.h:793</a></div></div>
<div class="ttc" id="aADT_2tmp_8txt_html_aa10ee7493bddf2c751ca6e05451ef410"><div class="ttname"><a href="ADT_2tmp_8txt.html#aa10ee7493bddf2c751ca6e05451ef410">unsigned</a></div><div class="ttdeci">Class for arbitrary precision integers APInt is a functional replacement for common case unsigned integer type like unsigned</div><div class="ttdef"><b>Definition:</b> <a href="ADT_2tmp_8txt_source.html#l00001">tmp.txt:1</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapBase_html_adf4e7878fc0b3b8dcde545178564190d"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#adf4e7878fc0b3b8dcde545178564190d">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;, KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00110">DenseMap.h:110</a></div></div>
<div class="ttc" id="aclassllvm_1_1DIExpression_html_a7cc5f1632a4c520497898439c17dc026"><div class="ttname"><a href="classllvm_1_1DIExpression.html#a7cc5f1632a4c520497898439c17dc026">llvm::DIExpression::getFragmentInfo</a></div><div class="ttdeci">static std::optional&lt; FragmentInfo &gt; getFragmentInfo(expr_op_iterator Start, expr_op_iterator End)</div><div class="ttdoc">Retrieve the details of this fragment expression.</div><div class="ttdef"><b>Definition:</b> <a href="DebugInfoMetadata_8cpp_source.html#l01555">DebugInfoMetadata.cpp:1555</a></div></div>
<div class="ttc" id="aAssignmentTrackingAnalysis_8cpp_html_a64692dbeb9f965f271eac86b9c11d3f6"><div class="ttname"><a href="AssignmentTrackingAnalysis_8cpp.html#a64692dbeb9f965f271eac86b9c11d3f6">getIDFromInst</a></div><div class="ttdeci">static DIAssignID * getIDFromInst(const Instruction &amp;I)</div><div class="ttdef"><b>Definition:</b> <a href="AssignmentTrackingAnalysis_8cpp_source.html#l01196">AssignmentTrackingAnalysis.cpp:1196</a></div></div>
<div class="ttc" id="alib_2Target_2ARM_2README_8txt_html_ad3a99906764c35b2694ae90fa57744a5"><div class="ttname"><a href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">move</a></div><div class="ttdeci">compiles ldr LCPI1_0 ldr ldr mov lsr tst moveq r1 ldr LCPI1_1 and r0 bx lr It would be better to do something like to fold the shift into the conditional move</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2ARM_2README_8txt_source.html#l00546">README.txt:546</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMap_html"><div class="ttname"><a href="classllvm_1_1DenseMap.html">llvm::DenseMap</a></div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00714">DenseMap.h:714</a></div></div>
<div class="ttc" id="aIR_2DebugInfo_8h_html"><div class="ttname"><a href="IR_2DebugInfo_8h.html">DebugInfo.h</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00058">MD5.cpp:58</a></div></div>
<div class="ttc" id="anamespacellvm_html_a3720211f6e6389ab53734b989bfb6fce"><div class="ttname"><a href="namespacellvm.html#a3720211f6e6389ab53734b989bfb6fce">llvm::succ_begin</a></div><div class="ttdeci">Interval::succ_iterator succ_begin(Interval *I)</div><div class="ttdoc">succ_begin/succ_end - define methods so that Intervals may be used just like BasicBlocks can with the...</div><div class="ttdef"><b>Definition:</b> <a href="Interval_8h_source.html#l00099">Interval.h:99</a></div></div>
<div class="ttc" id="aAssignmentTrackingAnalysis_8cpp_html_a4e75fd1680471e758ffbca9f8d893884"><div class="ttname"><a href="AssignmentTrackingAnalysis_8cpp.html#a4e75fd1680471e758ffbca9f8d893884">removeUndefDbgLocsFromEntryBlock</a></div><div class="ttdeci">static bool removeUndefDbgLocsFromEntryBlock(const BasicBlock *BB, FunctionVarLocsBuilder &amp;FnVarLocs)</div><div class="ttdef"><b>Definition:</b> <a href="AssignmentTrackingAnalysis_8cpp_source.html#l02258">AssignmentTrackingAnalysis.cpp:2258</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a10a041239ae1870cfcc064bfaa79fb65"><div class="ttname"><a href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">llvm::cl::init</a></div><div class="ttdeci">initializer&lt; Ty &gt; init(const Ty &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00445">CommandLine.h:445</a></div></div>
<div class="ttc" id="astructllvm_1_1VarLocInfo_html_ad7e310409e444bad60535cf956972194"><div class="ttname"><a href="structllvm_1_1VarLocInfo.html#ad7e310409e444bad60535cf956972194">llvm::VarLocInfo::DL</a></div><div class="ttdeci">DebugLoc DL</div><div class="ttdef"><b>Definition:</b> <a href="AssignmentTrackingAnalysis_8h_source.html#l00023">AssignmentTrackingAnalysis.h:23</a></div></div>
<div class="ttc" id="aclassllvm_1_1DebugVariable_html"><div class="ttname"><a href="classllvm_1_1DebugVariable.html">llvm::DebugVariable</a></div><div class="ttdoc">Identifies a unique instance of a variable.</div><div class="ttdef"><b>Definition:</b> <a href="DebugInfoMetadata_8h_source.html#l03733">DebugInfoMetadata.h:3733</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7d104c3a6510178d34b2d3f0ae67b4d5"><div class="ttname"><a href="namespacellvm.html#a7d104c3a6510178d34b2d3f0ae67b4d5">llvm::isFunctionInPrintList</a></div><div class="ttdeci">bool isFunctionInPrintList(StringRef FunctionName)</div><div class="ttdef"><b>Definition:</b> <a href="PrintPasses_8cpp_source.html#l00152">PrintPasses.cpp:152</a></div></div>
<div class="ttc" id="anamespacellvm_1_1at_html_a11e115c0bc63e73df009e5117821d230"><div class="ttname"><a href="namespacellvm_1_1at.html#a11e115c0bc63e73df009e5117821d230">llvm::at::deleteAll</a></div><div class="ttdeci">void deleteAll(Function *F)</div><div class="ttdoc">Remove all Assignment Tracking related intrinsics and metadata from F.</div><div class="ttdef"><b>Definition:</b> <a href="DebugInfo_8cpp_source.html#l01795">DebugInfo.cpp:1795</a></div></div>
<div class="ttc" id="aAssignmentTrackingAnalysis_8cpp_html_a732f2f3b2dd163037799643ce7460547"><div class="ttname"><a href="AssignmentTrackingAnalysis_8cpp.html#a732f2f3b2dd163037799643ce7460547">removeRedundantDbgLocs</a></div><div class="ttdeci">static bool removeRedundantDbgLocs(const BasicBlock *BB, FunctionVarLocsBuilder &amp;FnVarLocs)</div><div class="ttdef"><b>Definition:</b> <a href="AssignmentTrackingAnalysis_8cpp_source.html#l02338">AssignmentTrackingAnalysis.cpp:2338</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_ac0e942dde4b113c4c0b1fd76333db93a"><div class="ttname"><a href="classllvm_1_1APInt.html#ac0e942dde4b113c4c0b1fd76333db93a">llvm::APInt::getBoolValue</a></div><div class="ttdeci">bool getBoolValue() const</div><div class="ttdoc">Convert APInt to a boolean value.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00459">APInt.h:459</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapBase_html_a0c047f127ed4380a6f383d70bec4eb94"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a0c047f127ed4380a6f383d70bec4eb94">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;, KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;::find</a></div><div class="ttdeci">iterator find(const_arg_type_t&lt; KeyT &gt; Val)</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00150">DenseMap.h:150</a></div></div>
<div class="ttc" id="aclassFunctionVarLocsBuilder_html_a3a86f8df2c4e6293186cc140205dc52f"><div class="ttname"><a href="classFunctionVarLocsBuilder.html#a3a86f8df2c4e6293186cc140205dc52f">FunctionVarLocsBuilder::setWedge</a></div><div class="ttdeci">void setWedge(const Instruction *Before, SmallVector&lt; VarLocInfo &gt; &amp;&amp;Wedge)</div><div class="ttdoc">Replace the defs that come just before /p Before with /p Wedge.</div><div class="ttdef"><b>Definition:</b> <a href="AssignmentTrackingAnalysis_8cpp_source.html#l00102">AssignmentTrackingAnalysis.cpp:102</a></div></div>
<div class="ttc" id="aSILowerControlFlow_8cpp_html_a4868c5d81c5ccc98c47aeab6244346a0"><div class="ttname"><a href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a></div><div class="ttdeci">assert(ImpDefSCC.getReg()==AMDGPU::SCC &amp;&amp;ImpDefSCC.isDef())</div></div>
<div class="ttc" id="aAssignmentTrackingAnalysis_8cpp_html_a96c1848842c13bf34be7370f388890f8"><div class="ttname"><a href="AssignmentTrackingAnalysis_8cpp.html#a96c1848842c13bf34be7370f388890f8">findVarsWithStackSlot</a></div><div class="ttdeci">static DenseSet&lt; DebugAggregate &gt; findVarsWithStackSlot(Function &amp;Fn)</div><div class="ttdef"><b>Definition:</b> <a href="AssignmentTrackingAnalysis_8cpp_source.html#l02352">AssignmentTrackingAnalysis.cpp:2352</a></div></div>
<div class="ttc" id="aclassllvm_1_1FunctionVarLocs_html_af8922bc00acf83e71c7f2d47bbcfc0f6"><div class="ttname"><a href="classllvm_1_1FunctionVarLocs.html#af8922bc00acf83e71c7f2d47bbcfc0f6">llvm::FunctionVarLocs::init</a></div><div class="ttdeci">void init(FunctionVarLocsBuilder &amp;Builder)</div><div class="ttdef"><b>Definition:</b> <a href="AssignmentTrackingAnalysis_8cpp_source.html#l00174">AssignmentTrackingAnalysis.cpp:174</a></div></div>
<div class="ttc" id="aclassllvm_1_1DIVariable_html_af44724cae4bcd562972facee1cf035a5"><div class="ttname"><a href="classllvm_1_1DIVariable.html#af44724cae4bcd562972facee1cf035a5">llvm::DIVariable::getName</a></div><div class="ttdeci">StringRef getName() const</div><div class="ttdef"><b>Definition:</b> <a href="DebugInfoMetadata_8h_source.html#l02557">DebugInfoMetadata.h:2557</a></div></div>
<div class="ttc" id="aclassFunctionVarLocsBuilder_html_a79fb13e417678df16ca53e1bbfd5bc42"><div class="ttname"><a href="classFunctionVarLocsBuilder.html#a79fb13e417678df16ca53e1bbfd5bc42">FunctionVarLocsBuilder::getWedge</a></div><div class="ttdeci">const SmallVectorImpl&lt; VarLocInfo &gt; * getWedge(const Instruction *Before) const</div><div class="ttdoc">Return ptr to wedge of defs or nullptr if no defs come just before /p Before.</div><div class="ttdef"><b>Definition:</b> <a href="AssignmentTrackingAnalysis_8cpp_source.html#l00094">AssignmentTrackingAnalysis.cpp:94</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html_a1f475b0df44ebd7169e720fa1bf9169e"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#a1f475b0df44ebd7169e720fa1bf9169e">llvm::SmallPtrSetImpl::count</a></div><div class="ttdeci">size_type count(ConstPtrType Ptr) const</div><div class="ttdoc">count - Return 1 if the specified pointer is in the set, 0 otherwise.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00383">SmallPtrSet.h:383</a></div></div>
<div class="ttc" id="astructStatus_html"><div class="ttname"><a href="structStatus.html">Status</a></div><div class="ttdef"><b>Definition:</b> <a href="SIModeRegister_8cpp_source.html#l00029">SIModeRegister.cpp:29</a></div></div>
<div class="ttc" id="aAssumeBundleBuilder_8cpp_html_afb136e0532bcaed86521b462e6538d62"><div class="ttname"><a href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a></div><div class="ttdeci">assume Assume Builder</div><div class="ttdef"><b>Definition:</b> <a href="AssumeBundleBuilder_8cpp_source.html#l00651">AssumeBundleBuilder.cpp:651</a></div></div>
<div class="ttc" id="anamespacellvm_html_a4d812a2dd18aa186c164447e20e348e7"><div class="ttname"><a href="namespacellvm.html#a4d812a2dd18aa186c164447e20e348e7">llvm::operator==</a></div><div class="ttdeci">bool operator==(const AddressRangeValuePair &amp;LHS, const AddressRangeValuePair &amp;RHS)</div><div class="ttdef"><b>Definition:</b> <a href="AddressRanges_8h_source.html#l00153">AddressRanges.h:153</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html"><div class="ttname"><a href="classllvm_1_1APInt.html">llvm::APInt</a></div><div class="ttdoc">Class for arbitrary precision integers.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00075">APInt.h:75</a></div></div>
<div class="ttc" id="astructllvm_1_1IntervalMapHalfOpenInfo_html"><div class="ttname"><a href="structllvm_1_1IntervalMapHalfOpenInfo.html">llvm::IntervalMapHalfOpenInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="IntervalMap_8h_source.html#l00167">IntervalMap.h:167</a></div></div>
<div class="ttc" id="aclassllvm_1_1detail_1_1DenseSetImpl_html_a1fbf4d66a9eeaa9ade03e8febee097ee"><div class="ttname"><a href="classllvm_1_1detail_1_1DenseSetImpl.html#a1fbf4d66a9eeaa9ade03e8febee097ee">llvm::detail::DenseSetImpl&lt; ValueT, SmallDenseMap&lt; ValueT, detail::DenseSetEmpty, 4, DenseMapInfo&lt; ValueT &gt;, detail::DenseSetPair&lt; ValueT &gt; &gt;, DenseMapInfo&lt; ValueT &gt; &gt;::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="DenseSet_8h_source.html#l00092">DenseSet.h:92</a></div></div>
<div class="ttc" id="aclassllvm_1_1FunctionVarLocs_html_a8d02562350fc89b81730a63bdedaf610"><div class="ttname"><a href="classllvm_1_1FunctionVarLocs.html#a8d02562350fc89b81730a63bdedaf610">llvm::FunctionVarLocs::locs_begin</a></div><div class="ttdeci">const VarLocInfo * locs_begin(const Instruction *Before) const</div><div class="ttdoc">First variable location definition that comes before Before.</div><div class="ttdef"><b>Definition:</b> <a href="AssignmentTrackingAnalysis_8h_source.html#l00071">AssignmentTrackingAnalysis.h:71</a></div></div>
<div class="ttc" id="aclassllvm_1_1Expression_html"><div class="ttname"><a href="classllvm_1_1Expression.html">llvm::Expression</a></div><div class="ttdoc">Class representing an expression and its matching format.</div><div class="ttdef"><b>Definition:</b> <a href="FileCheckImpl_8h_source.html#l00237">FileCheckImpl.h:237</a></div></div>
<div class="ttc" id="anamespacellvm_1_1Sched_html_ac1547cccaf660851fcd6863d1e60309eac13545a6345c7d5b3c9cc8932ad3b0e9"><div class="ttname"><a href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309eac13545a6345c7d5b3c9cc8932ad3b0e9">llvm::Sched::Source</a></div><div class="ttdeci">@ Source</div><div class="ttdef"><b>Definition:</b> <a href="TargetLowering_8h_source.html#l00100">TargetLowering.h:100</a></div></div>
<div class="ttc" id="anamespacellvm_1_1dwarf_html_a78e9cb1527edb3cc1d1ee577257b5f0cac09e4cb866e5aa9bc0480359be9e7953"><div class="ttname"><a href="namespacellvm_1_1dwarf.html#a78e9cb1527edb3cc1d1ee577257b5f0cac09e4cb866e5aa9bc0480359be9e7953">llvm::dwarf::DW_OP_LLVM_fragment</a></div><div class="ttdeci">@ DW_OP_LLVM_fragment</div><div class="ttdoc">Only used in LLVM metadata.</div><div class="ttdef"><b>Definition:</b> <a href="Dwarf_8h_source.html#l00141">Dwarf.h:141</a></div></div>
<div class="ttc" id="anamespacellvm_html_a61d13d6824ec46c31260a4fd0997eda0"><div class="ttname"><a href="namespacellvm.html#a61d13d6824ec46c31260a4fd0997eda0">llvm::any_of</a></div><div class="ttdeci">bool any_of(R &amp;&amp;range, UnaryPredicate P)</div><div class="ttdoc">Provide wrappers to std::any_of which take ranges instead of having to pass begin/end explicitly.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01742">STLExtras.h:1742</a></div></div>
<div class="ttc" id="aclassFunctionVarLocsBuilder_html_a7015ad4444cf34e6d69326f60268671a"><div class="ttname"><a href="classFunctionVarLocsBuilder.html#a7015ad4444cf34e6d69326f60268671a">FunctionVarLocsBuilder::getVariable</a></div><div class="ttdeci">const DebugVariable &amp; getVariable(VariableID ID) const</div><div class="ttdoc">Get a variable from its ID.</div><div class="ttdef"><b>Definition:</b> <a href="AssignmentTrackingAnalysis_8cpp_source.html#l00088">AssignmentTrackingAnalysis.cpp:88</a></div></div>
<div class="ttc" id="aDataLayout_8h_html"><div class="ttname"><a href="DataLayout_8h.html">DataLayout.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMap_html_a9aa45d9e5a7ff6a3f3c01934d1e1ada6"><div class="ttname"><a href="classllvm_1_1DenseMap.html#a9aa45d9e5a7ff6a3f3c01934d1e1ada6">llvm::DenseMap::init</a></div><div class="ttdeci">void init(unsigned InitNumEntries)</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00792">DenseMap.h:792</a></div></div>
<div class="ttc" id="aDwarf_8h_html"><div class="ttname"><a href="Dwarf_8h.html">Dwarf.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4"><div class="ttname"><a href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">llvm::Offset</a></div><div class="ttdeci">@ Offset</div><div class="ttdef"><b>Definition:</b> <a href="DWP_8cpp_source.html#l00406">DWP.cpp:406</a></div></div>
<div class="ttc" id="aSupport_2ErrorHandling_8h_html_ace243f5c25697a1107cce46626b3dc94"><div class="ttname"><a href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a></div><div class="ttdeci">#define llvm_unreachable(msg)</div><div class="ttdoc">Marks that the current location is not supposed to be reachable.</div><div class="ttdef"><b>Definition:</b> <a href="Support_2ErrorHandling_8h_source.html#l00143">ErrorHandling.h:143</a></div></div>
<div class="ttc" id="ainclude_2llvm_2Support_2CMakeLists_8txt_html_aef9367eb0b7430eaf70b1f2725488f2a"><div class="ttname"><a href="include_2llvm_2Support_2CMakeLists_8txt.html#aef9367eb0b7430eaf70b1f2725488f2a">if</a></div><div class="ttdeci">if(llvm_vc STREQUAL &quot;&quot;) set(fake_version_inc &quot;$</div><div class="ttdef"><b>Definition:</b> <a href="include_2llvm_2Support_2CMakeLists_8txt_source.html#l00014">CMakeLists.txt:14</a></div></div>
<div class="ttc" id="aclassllvm_1_1detail_1_1DenseSetImpl_html_ad409c2de8502b94c8a0b1193307c63b6"><div class="ttname"><a href="classllvm_1_1detail_1_1DenseSetImpl.html#ad409c2de8502b94c8a0b1193307c63b6">llvm::detail::DenseSetImpl&lt; ValueT, DenseMap&lt; ValueT, detail::DenseSetEmpty, DenseMapInfo&lt; ValueT &gt;, detail::DenseSetPair&lt; ValueT &gt; &gt;, DenseMapInfo&lt; ValueT &gt; &gt;::contains</a></div><div class="ttdeci">bool contains(const_arg_type_t&lt; ValueT &gt; V) const</div><div class="ttdoc">Check if the set contains the given element.</div><div class="ttdef"><b>Definition:</b> <a href="DenseSet_8h_source.html#l00185">DenseSet.h:185</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_ab3fc0225d8aaf8434026c3573f961f2c"><div class="ttname"><a href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">llvm::Value::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const</div><div class="ttdoc">All values hold a context through their type.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00994">Value.cpp:994</a></div></div>
<div class="ttc" id="aAArch64SLSHardening_8cpp_html_ad467c4ab9119043f9b7750ab986be61a"><div class="ttname"><a href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a></div><div class="ttdeci">MachineBasicBlock MachineBasicBlock::iterator DebugLoc DL</div><div class="ttdef"><b>Definition:</b> <a href="AArch64SLSHardening_8cpp_source.html#l00076">AArch64SLSHardening.cpp:76</a></div></div>
<div class="ttc" id="aclassllvm_1_1DbgAssignIntrinsic_html"><div class="ttname"><a href="classllvm_1_1DbgAssignIntrinsic.html">llvm::DbgAssignIntrinsic</a></div><div class="ttdoc">This represents the llvm.dbg.assign instruction.</div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l00412">IntrinsicInst.h:412</a></div></div>
<div class="ttc" id="alib_2Target_2ARM_2README_8txt_html_a1b45f45820a60c09244a87eb59824aec"><div class="ttname"><a href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a></div><div class="ttdeci">add sub stmia L5 ldr r0 bl L_printf $stub Instead of a and a wouldn t it be better to do three moves *Return an aggregate type is even return S</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2ARM_2README_8txt_source.html#l00210">README.txt:210</a></div></div>
<div class="ttc" id="aclassllvm_1_1AssignmentTrackingAnalysis_html_aeefac5089f97137ab91a792df56e2fc1"><div class="ttname"><a href="classllvm_1_1AssignmentTrackingAnalysis.html#aeefac5089f97137ab91a792df56e2fc1">llvm::AssignmentTrackingAnalysis::ID</a></div><div class="ttdeci">static char ID</div><div class="ttdef"><b>Definition:</b> <a href="AssignmentTrackingAnalysis_8h_source.html#l00101">AssignmentTrackingAnalysis.h:101</a></div></div>
<div class="ttc" id="aAssignmentTrackingAnalysis_8cpp_html_ac976ef0dd1096fa3a40fb56ef305e6ae"><div class="ttname"><a href="AssignmentTrackingAnalysis_8cpp.html#ac976ef0dd1096fa3a40fb56ef305e6ae">walkToAllocaAndPrependOffsetDeref</a></div><div class="ttdeci">static std::pair&lt; Value *, DIExpression * &gt; walkToAllocaAndPrependOffsetDeref(const DataLayout &amp;DL, Value *Start, DIExpression *Expression)</div><div class="ttdoc">Walk backwards along constant GEPs and bitcasts to the base storage from Start as far as possible.</div><div class="ttdef"><b>Definition:</b> <a href="AssignmentTrackingAnalysis_8cpp_source.html#l00214">AssignmentTrackingAnalysis.cpp:214</a></div></div>
<div class="ttc" id="astructllvm_1_1VarLocInfo_html"><div class="ttname"><a href="structllvm_1_1VarLocInfo.html">llvm::VarLocInfo</a></div><div class="ttdoc">Variable location definition used by FunctionVarLocs.</div><div class="ttdef"><b>Definition:</b> <a href="AssignmentTrackingAnalysis_8h_source.html#l00020">AssignmentTrackingAnalysis.h:20</a></div></div>
<div class="ttc" id="aSROA_8cpp_html_a5b3f8e5f6c512fe6a5059dd0c51aec95"><div class="ttname"><a href="SROA_8cpp.html#a5b3f8e5f6c512fe6a5059dd0c51aec95">Aggregates</a></div><div class="ttdeci">Scalar Replacement Of Aggregates</div><div class="ttdef"><b>Definition:</b> <a href="SROA_8cpp_source.html#l05126">SROA.cpp:5126</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_adb5c319f5905c1d3ca9eb5df546388c5"><div class="ttname"><a href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">llvm::Value::getName</a></div><div class="ttdeci">StringRef getName() const</div><div class="ttdoc">Return a constant reference to the value's name.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00308">Value.cpp:308</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapBase_html_a99f811d53704275b4158c62a2dd138d9"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a99f811d53704275b4158c62a2dd138d9">llvm::DenseMapBase&lt; SmallDenseMap&lt; KeyT, ValueT, 4, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;, KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;::insert</a></div><div class="ttdeci">std::pair&lt; iterator, bool &gt; insert(const std::pair&lt; KeyT, ValueT &gt; &amp;KV)</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00207">DenseMap.h:207</a></div></div>
<div class="ttc" id="aSampleProfWriter_8cpp_html_ac5f3689931c7238da06ba00cf1002c62"><div class="ttname"><a href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a></div><div class="ttdeci">raw_pwrite_stream &amp; OS</div><div class="ttdef"><b>Definition:</b> <a href="SampleProfWriter_8cpp_source.html#l00053">SampleProfWriter.cpp:53</a></div></div>
<div class="ttc" id="astructllvm_1_1VarLocInfo_html_a49f19e43b844d06ff617163dd7405c50"><div class="ttname"><a href="structllvm_1_1VarLocInfo.html#a49f19e43b844d06ff617163dd7405c50">llvm::VarLocInfo::V</a></div><div class="ttdeci">Value * V</div><div class="ttdef"><b>Definition:</b> <a href="AssignmentTrackingAnalysis_8h_source.html#l00024">AssignmentTrackingAnalysis.h:24</a></div></div>
<div class="ttc" id="aAssignmentTrackingAnalysis_8cpp_html_a42ed349a287ad53473602bc805a2fe78"><div class="ttname"><a href="AssignmentTrackingAnalysis_8cpp.html#a42ed349a287ad53473602bc805a2fe78">fullyContains</a></div><div class="ttdeci">static bool fullyContains(DIExpression::FragmentInfo A, DIExpression::FragmentInfo B)</div><div class="ttdoc">Return true if A fully contains B.</div><div class="ttdef"><b>Definition:</b> <a href="AssignmentTrackingAnalysis_8cpp_source.html#l01796">AssignmentTrackingAnalysis.cpp:1796</a></div></div>
<div class="ttc" id="aAssignmentTrackingAnalysis_8cpp_html_ad959466c7f8b886a2caa4967c46d48db"><div class="ttname"><a href="AssignmentTrackingAnalysis_8cpp.html#ad959466c7f8b886a2caa4967c46d48db">removeRedundantDbgLocsUsingBackwardScan</a></div><div class="ttdeci">static bool removeRedundantDbgLocsUsingBackwardScan(const BasicBlock *BB, FunctionVarLocsBuilder &amp;FnVarLocs)</div><div class="ttdoc">Remove redundant definitions within sequences of consecutive location defs.</div><div class="ttdef"><b>Definition:</b> <a href="AssignmentTrackingAnalysis_8cpp_source.html#l02142">AssignmentTrackingAnalysis.cpp:2142</a></div></div>
<div class="ttc" id="aclassllvm_1_1DIExpression_html_af3a48df3735933cf1621760019e5fd8c"><div class="ttname"><a href="classllvm_1_1DIExpression.html#af3a48df3735933cf1621760019e5fd8c">llvm::DIExpression::prependOpcodes</a></div><div class="ttdeci">static DIExpression * prependOpcodes(const DIExpression *Expr, SmallVectorImpl&lt; uint64_t &gt; &amp;Ops, bool StackValue=false, bool EntryValue=false)</div><div class="ttdoc">Prepend DIExpr with the given opcodes and optionally turn it into a stack value.</div><div class="ttdef"><b>Definition:</b> <a href="DebugInfoMetadata_8cpp_source.html#l01708">DebugInfoMetadata.cpp:1708</a></div></div>
<div class="ttc" id="anamespacestd_html"><div class="ttname"><a href="namespacestd.html">std</a></div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00851">BitVector.h:851</a></div></div>
<div class="ttc" id="aclassFunctionVarLocsBuilder_html_aec2bf0c2cd1ac41ee26614348afeeb8c"><div class="ttname"><a href="classFunctionVarLocsBuilder.html#aec2bf0c2cd1ac41ee26614348afeeb8c">FunctionVarLocsBuilder::insertVariable</a></div><div class="ttdeci">VariableID insertVariable(DebugVariable V)</div><div class="ttdoc">Find or insert V and return the ID.</div><div class="ttdef"><b>Definition:</b> <a href="AssignmentTrackingAnalysis_8cpp_source.html#l00083">AssignmentTrackingAnalysis.cpp:83</a></div></div>
<div class="ttc" id="aclassllvm_1_1DIExpression_html_a6472489551b8960cc115a93d95eef9f6a9778207fdbedcd56192301c38b5ffe4c"><div class="ttname"><a href="classllvm_1_1DIExpression.html#a6472489551b8960cc115a93d95eef9f6a9778207fdbedcd56192301c38b5ffe4c">llvm::DIExpression::DerefAfter</a></div><div class="ttdeci">@ DerefAfter</div><div class="ttdef"><b>Definition:</b> <a href="DebugInfoMetadata_8h_source.html#l02877">DebugInfoMetadata.h:2877</a></div></div>
<div class="ttc" id="anamespacellvm_html_aebf1ed936ad0e792e159d7a4ae1b7f07"><div class="ttname"><a href="namespacellvm.html#aebf1ed936ad0e792e159d7a4ae1b7f07">llvm::None</a></div><div class="ttdeci">constexpr std::nullopt_t None</div><div class="ttdef"><b>Definition:</b> <a href="None_8h_source.html#l00028">None.h:28</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapBase_html_a65520b9c67759099e313d0f4e7b5ff9e"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a65520b9c67759099e313d0f4e7b5ff9e">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;, KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00084">DenseMap.h:84</a></div></div>
<div class="ttc" id="anamespacellvm_html_a63540526d092e2f4bbc70590b6034f4e"><div class="ttname"><a href="namespacellvm.html#a63540526d092e2f4bbc70590b6034f4e">llvm::toString</a></div><div class="ttdeci">const char * toString(DWARFSectionKind Kind)</div><div class="ttdef"><b>Definition:</b> <a href="DWARFUnitIndex_8h_source.html#l00067">DWARFUnitIndex.h:67</a></div></div>
<div class="ttc" id="aAssignmentTrackingAnalysis_8cpp_html_a077a52fa690effeca0a2e83caeaf5de9"><div class="ttname"><a href="AssignmentTrackingAnalysis_8cpp.html#a077a52fa690effeca0a2e83caeaf5de9">analyzeFunction</a></div><div class="ttdeci">static void analyzeFunction(Function &amp;Fn, const DataLayout &amp;Layout, FunctionVarLocsBuilder *FnVarLocs)</div><div class="ttdef"><b>Definition:</b> <a href="AssignmentTrackingAnalysis_8cpp_source.html#l02369">AssignmentTrackingAnalysis.cpp:2369</a></div></div>
<div class="ttc" id="aAssignmentTrackingAnalysis_8cpp_html_a8e62395f81dafe62a18dfd8e9be1ad81"><div class="ttname"><a href="AssignmentTrackingAnalysis_8cpp.html#a8e62395f81dafe62a18dfd8e9be1ad81">EnableMemLocFragFill</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; EnableMemLocFragFill(&quot;mem-loc-frag-fill&quot;, cl::init(true), cl::Hidden)</div><div class="ttdoc">Option for debugging the pass, determines if the memory location fragment filling happens after gener...</div></div>
<div class="ttc" id="anamespacellvm_html_a5eeaf08e96168c2cac8960f87f0ef360"><div class="ttname"><a href="namespacellvm.html#a5eeaf08e96168c2cac8960f87f0ef360">llvm::pred_end</a></div><div class="ttdeci">Interval::pred_iterator pred_end(Interval *I)</div><div class="ttdef"><b>Definition:</b> <a href="Interval_8h_source.html#l00112">Interval.h:112</a></div></div>
<div class="ttc" id="aclassllvm_1_1DIExpression_html_a3c6397a9b21812183d69e90c3dac17f9"><div class="ttname"><a href="classllvm_1_1DIExpression.html#a3c6397a9b21812183d69e90c3dac17f9">llvm::DIExpression::startsWithDeref</a></div><div class="ttdeci">bool startsWithDeref() const</div><div class="ttdoc">Return whether the first element a DW_OP_deref.</div><div class="ttdef"><b>Definition:</b> <a href="DebugInfoMetadata_8cpp_source.html#l01285">DebugInfoMetadata.cpp:1285</a></div></div>
<div class="ttc" id="aFunction_8h_html"><div class="ttname"><a href="Function_8h.html">Function.h</a></div></div>
<div class="ttc" id="astructllvm_1_1VarLocInfo_html_a2db7bf8bbe7f16fcee0e9f21aa87fe03"><div class="ttname"><a href="structllvm_1_1VarLocInfo.html#a2db7bf8bbe7f16fcee0e9f21aa87fe03">llvm::VarLocInfo::Expr</a></div><div class="ttdeci">DIExpression * Expr</div><div class="ttdef"><b>Definition:</b> <a href="AssignmentTrackingAnalysis_8h_source.html#l00022">AssignmentTrackingAnalysis.h:22</a></div></div>
<div class="ttc" id="aPassManager_8h_html"><div class="ttname"><a href="PassManager_8h.html">PassManager.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1DIExpression_html_adabcdad8a235ac04d9fd2f5ca76115ad"><div class="ttname"><a href="classllvm_1_1DIExpression.html#adabcdad8a235ac04d9fd2f5ca76115ad">llvm::DIExpression::getElements</a></div><div class="ttdeci">ArrayRef&lt; uint64_t &gt; getElements() const</div><div class="ttdef"><b>Definition:</b> <a href="DebugInfoMetadata_8h_source.html#l02635">DebugInfoMetadata.h:2635</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_aac0ea55010b7b1a301e65a0baea057aa"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">llvm::SmallVectorImpl::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00614">SmallVector.h:614</a></div></div>
<div class="ttc" id="aAssignmentTrackingAnalysis_8cpp_html_a31145777330b0b81a66f4c701d4e3505"><div class="ttname"><a href="AssignmentTrackingAnalysis_8cpp.html#a31145777330b0b81a66f4c701d4e3505">getIDFromMarker</a></div><div class="ttdeci">static DIAssignID * getIDFromMarker(const DbgAssignIntrinsic &amp;DAI)</div><div class="ttdef"><b>Definition:</b> <a href="AssignmentTrackingAnalysis_8cpp_source.html#l01200">AssignmentTrackingAnalysis.cpp:1200</a></div></div>
<div class="ttc" id="aclassllvm_1_1ReversePostOrderTraversal_html"><div class="ttname"><a href="classllvm_1_1ReversePostOrderTraversal.html">llvm::ReversePostOrderTraversal</a></div><div class="ttdef"><b>Definition:</b> <a href="PostOrderIterator_8h_source.html#l00293">PostOrderIterator.h:293</a></div></div>
<div class="ttc" id="astructllvm_1_1DIExpression_1_1FragmentInfo_html"><div class="ttname"><a href="structllvm_1_1DIExpression_1_1FragmentInfo.html">llvm::DIExpression::FragmentInfo</a></div><div class="ttdoc">Holds the characteristics of one fragment of a larger variable.</div><div class="ttdef"><b>Definition:</b> <a href="DebugInfoMetadata_8h_source.html#l02776">DebugInfoMetadata.h:2776</a></div></div>
<div class="ttc" id="aclassllvm_1_1DIVariable_html_a6b5977deeb9f99e156685e190de78403"><div class="ttname"><a href="classllvm_1_1DIVariable.html#a6b5977deeb9f99e156685e190de78403">llvm::DIVariable::getSizeInBits</a></div><div class="ttdeci">std::optional&lt; uint64_t &gt; getSizeInBits() const</div><div class="ttdoc">Determines the size of the variable's type.</div><div class="ttdef"><b>Definition:</b> <a href="DebugInfoMetadata_8cpp_source.html#l01240">DebugInfoMetadata.cpp:1240</a></div></div>
<div class="ttc" id="aAssignmentTrackingAnalysis_8cpp_html_ad392b116c01f323392d32484008bb62f"><div class="ttname"><a href="AssignmentTrackingAnalysis_8cpp.html#ad392b116c01f323392d32484008bb62f">buildOverlapMapAndRecordDeclares</a></div><div class="ttdeci">static AssignmentTrackingLowering::OverlapMap buildOverlapMapAndRecordDeclares(Function &amp;Fn, FunctionVarLocsBuilder *FnVarLocs, AssignmentTrackingLowering::UntaggedStoreAssignmentMap &amp;UntaggedStoreVars)</div><div class="ttdoc">Build a map of {Variable x: Variables y} where all variable fragments contained within the variable f...</div><div class="ttdef"><b>Definition:</b> <a href="AssignmentTrackingAnalysis_8cpp_source.html#l01835">AssignmentTrackingAnalysis.cpp:1835</a></div></div>
<div class="ttc" id="aAssignmentTrackingAnalysis_8cpp_html_a4514f516df040b468e552a28163b3747"><div class="ttname"><a href="AssignmentTrackingAnalysis_8cpp.html#a4514f516df040b468e552a28163b3747">getAggregate</a></div><div class="ttdeci">static DebugAggregate getAggregate(const DbgVariableIntrinsic *DII)</div><div class="ttdef"><b>Definition:</b> <a href="AssignmentTrackingAnalysis_8cpp_source.html#l00276">AssignmentTrackingAnalysis.cpp:276</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7e108932dc3da5294aed99a353aac9c4"><div class="ttname"><a href="namespacellvm.html#a7e108932dc3da5294aed99a353aac9c4">llvm::pred_begin</a></div><div class="ttdeci">Interval::pred_iterator pred_begin(Interval *I)</div><div class="ttdoc">pred_begin/pred_end - define methods so that Intervals may be used just like BasicBlocks can with the...</div><div class="ttdef"><b>Definition:</b> <a href="Interval_8h_source.html#l00109">Interval.h:109</a></div></div>
<div class="ttc" id="aclassllvm_1_1Pass_html"><div class="ttname"><a href="classllvm_1_1Pass.html">llvm::Pass</a></div><div class="ttdoc">Pass interface - Implemented by all 'passes'.</div><div class="ttdef"><b>Definition:</b> <a href="Pass_8h_source.html#l00091">Pass.h:91</a></div></div>
<div class="ttc" id="aRustDemangle_8cpp_html_a103d8cfe62c1651cd70e181746f8a840"><div class="ttname"><a href="RustDemangle_8cpp.html#a103d8cfe62c1651cd70e181746f8a840">isValid</a></div><div class="ttdeci">static bool isValid(const char C)</div><div class="ttdoc">Returns true if C is a valid mangled character: &lt;0-9a-zA-Z_&gt;.</div><div class="ttdef"><b>Definition:</b> <a href="RustDemangle_8cpp_source.html#l00184">RustDemangle.cpp:184</a></div></div>
<div class="ttc" id="aPostOrderIterator_8h_html"><div class="ttname"><a href="PostOrderIterator_8h.html">PostOrderIterator.h</a></div></div>
<div class="ttc" id="aELFYAML_8cpp_html_a941c34da9850676ce3380813c636cff2"><div class="ttname"><a href="ELFYAML_8cpp.html#a941c34da9850676ce3380813c636cff2">Other</a></div><div class="ttdeci">std::optional&lt; std::vector&lt; StOtherPiece &gt; &gt; Other</div><div class="ttdef"><b>Definition:</b> <a href="ELFYAML_8cpp_source.html#l01260">ELFYAML.cpp:1260</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_ab4f3bf98b5054831b608852e33427814"><div class="ttname"><a href="classllvm_1_1Instruction.html#ab4f3bf98b5054831b608852e33427814">llvm::Instruction::getDebugLoc</a></div><div class="ttdeci">const DebugLoc &amp; getDebugLoc() const</div><div class="ttdoc">Return the debug location for this node as a DebugLoc.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00358">Instruction.h:358</a></div></div>
<div class="ttc" id="aIntervalMap_8h_html"><div class="ttname"><a href="IntervalMap_8h.html">IntervalMap.h</a></div></div>
<div class="ttc" id="aRegAllocBasic_8cpp_html_ad5d00e1d77644d95847b9bf8da12b759"><div class="ttname"><a href="RegAllocBasic_8cpp.html#ad5d00e1d77644d95847b9bf8da12b759">Allocator</a></div><div class="ttdeci">Basic Register Allocator</div><div class="ttdef"><b>Definition:</b> <a href="RegAllocBasic_8cpp_source.html#l00143">RegAllocBasic.cpp:143</a></div></div>
<div class="ttc" id="aclassllvm_1_1DIAssignID_html"><div class="ttname"><a href="classllvm_1_1DIAssignID.html">llvm::DIAssignID</a></div><div class="ttdoc">Assignment ID.</div><div class="ttdef"><b>Definition:</b> <a href="DebugInfoMetadata_8h_source.html#l00302">DebugInfoMetadata.h:302</a></div></div>
<div class="ttc" id="aclassllvm_1_1DbgValueInst_html_a94f4ebdcfe83c30c65c4a2def0f552d0"><div class="ttname"><a href="classllvm_1_1DbgValueInst.html#a94f4ebdcfe83c30c65c4a2def0f552d0">llvm::DbgValueInst::getValue</a></div><div class="ttdeci">Value * getValue(unsigned OpIdx=0) const</div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l00392">IntrinsicInst.h:392</a></div></div>
<div class="ttc" id="aclassllvm_1_1IntervalMap_html"><div class="ttname"><a href="classllvm_1_1IntervalMap.html">llvm::IntervalMap</a></div><div class="ttdef"><b>Definition:</b> <a href="IntervalMap_8h_source.html#l00936">IntervalMap.h:936</a></div></div>
<div class="ttc" id="aclassllvm_1_1DIExpression_html_a1b59c8fe81267b338774bf6c542f90ee"><div class="ttname"><a href="classllvm_1_1DIExpression.html#a1b59c8fe81267b338774bf6c542f90ee">llvm::DIExpression::getNumElements</a></div><div class="ttdeci">unsigned getNumElements() const</div><div class="ttdef"><b>Definition:</b> <a href="DebugInfoMetadata_8h_source.html#l02637">DebugInfoMetadata.h:2637</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html">llvm::SmallVectorImpl&lt; VarLocInfo &gt;</a></div></div>
<div class="ttc" id="anamespacellvm_html_a6b0ac1fa4f05de76413c5e0ca6334035"><div class="ttname"><a href="namespacellvm.html#a6b0ac1fa4f05de76413c5e0ca6334035">llvm::reverse</a></div><div class="ttdeci">auto reverse(ContainerTy &amp;&amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l00484">STLExtras.h:484</a></div></div>
<div class="ttc" id="aDenseMapInfo_8h_html"><div class="ttname"><a href="DenseMapInfo_8h.html">DenseMapInfo.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1FunctionVarLocs_html_abe10e34cd384a2508d34c3b01c5f9866"><div class="ttname"><a href="classllvm_1_1FunctionVarLocs.html#abe10e34cd384a2508d34c3b01c5f9866">llvm::FunctionVarLocs::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="AssignmentTrackingAnalysis_8cpp_source.html#l00202">AssignmentTrackingAnalysis.cpp:202</a></div></div>
<div class="ttc" id="aclassllvm_1_1FunctionPass_html"><div class="ttname"><a href="classllvm_1_1FunctionPass.html">llvm::FunctionPass</a></div><div class="ttdoc">FunctionPass class - This class is used to implement most global optimizations.</div><div class="ttdef"><b>Definition:</b> <a href="Pass_8h_source.html#l00308">Pass.h:308</a></div></div>
<div class="ttc" id="aAssignmentTrackingAnalysis_8cpp_html_aa853932fefab2a5b2645c1090b393e00"><div class="ttname"><a href="AssignmentTrackingAnalysis_8cpp.html#aa853932fefab2a5b2645c1090b393e00">getDerefOffsetInBytes</a></div><div class="ttdeci">static std::optional&lt; int64_t &gt; getDerefOffsetInBytes(const DIExpression *DIExpr)</div><div class="ttdoc">Extract the offset used in DIExpr.</div><div class="ttdef"><b>Definition:</b> <a href="AssignmentTrackingAnalysis_8cpp_source.html#l00233">AssignmentTrackingAnalysis.cpp:233</a></div></div>
<div class="ttc" id="alib_2CodeGen_2README_8txt_html_a09776db24cf586ec9f1e18f3bae14099"><div class="ttname"><a href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a></div><div class="ttdeci">Common register allocation spilling lr str ldr sxth r3 ldr mla r4 can lr mov lr str ldr sxth r3 mla r4 and then merge mul and lr str ldr sxth r3 mla r4 It also increase the likelihood the store may become dead bb27 Successors according to LLVM BB</div><div class="ttdef"><b>Definition:</b> <a href="lib_2CodeGen_2README_8txt_source.html#l00039">README.txt:39</a></div></div>
<div class="ttc" id="aclassllvm_1_1DebugLoc_html"><div class="ttname"><a href="classllvm_1_1DebugLoc.html">llvm::DebugLoc</a></div><div class="ttdoc">A debug info location.</div><div class="ttdef"><b>Definition:</b> <a href="DebugLoc_8h_source.html#l00033">DebugLoc.h:33</a></div></div>
<div class="ttc" id="aclassllvm_1_1AllocaInst_html"><div class="ttname"><a href="classllvm_1_1AllocaInst.html">llvm::AllocaInst</a></div><div class="ttdoc">an instruction to allocate memory on the stack</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00058">Instructions.h:58</a></div></div>
<div class="ttc" id="astructllvm_1_1cl_1_1desc_html"><div class="ttname"><a href="structllvm_1_1cl_1_1desc.html">llvm::cl::desc</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00411">CommandLine.h:411</a></div></div>
<div class="ttc" id="anamespacellvm_1_1pdb_html_a434cfa04e4ed34b7a901378557d4ca9ea4501cbae351ca0ef6f162f946ba58d0e"><div class="ttname"><a href="namespacellvm_1_1pdb.html#a434cfa04e4ed34b7a901378557d4ca9ea4501cbae351ca0ef6f162f946ba58d0e">llvm::pdb::String</a></div><div class="ttdeci">@ String</div><div class="ttdef"><b>Definition:</b> <a href="PDBTypes_8h_source.html#l00408">PDBTypes.h:408</a></div></div>
<div class="ttc" id="araw__ostream_8h_html"><div class="ttname"><a href="raw__ostream_8h.html">raw_ostream.h</a></div></div>
<div class="ttc" id="aclassFunctionVarLocsBuilder_html"><div class="ttname"><a href="classFunctionVarLocsBuilder.html">FunctionVarLocsBuilder</a></div><div class="ttdoc">Helper class to build FunctionVarLocs, since that class isn't easy to modify.</div><div class="ttdef"><b>Definition:</b> <a href="AssignmentTrackingAnalysis_8cpp_source.html#l00071">AssignmentTrackingAnalysis.cpp:71</a></div></div>
<div class="ttc" id="aBasicBlockUtils_8h_html"><div class="ttname"><a href="BasicBlockUtils_8h.html">BasicBlockUtils.h</a></div></div>
<div class="ttc" id="aAssignmentTrackingAnalysis_8cpp_html_a05c5b2328f38cb1affebb8ad4ab6fe40"><div class="ttname"><a href="AssignmentTrackingAnalysis_8cpp.html#a05c5b2328f38cb1affebb8ad4ab6fe40">DebugAggregate</a></div><div class="ttdeci">std::pair&lt; const DILocalVariable *, const DILocation * &gt; DebugAggregate</div><div class="ttdoc">A whole (unfragmented) source variable.</div><div class="ttdef"><b>Definition:</b> <a href="AssignmentTrackingAnalysis_8cpp_source.html#l00275">AssignmentTrackingAnalysis.cpp:275</a></div></div>
<div class="ttc" id="aInitializePasses_8h_html"><div class="ttname"><a href="InitializePasses_8h.html">InitializePasses.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html"><div class="ttname"><a href="classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00074">Value.h:74</a></div></div>
<div class="ttc" id="aclassllvm_1_1UniqueVector_html_a03442009de901bb89b2cdb6b22cd9690"><div class="ttname"><a href="classllvm_1_1UniqueVector.html#a03442009de901bb89b2cdb6b22cd9690">llvm::UniqueVector::insert</a></div><div class="ttdeci">unsigned insert(const T &amp;Entry)</div><div class="ttdoc">insert - Append entry to the vector if it doesn't already exist.</div><div class="ttdef"><b>Definition:</b> <a href="UniqueVector_8h_source.html#l00040">UniqueVector.h:40</a></div></div>
<div class="ttc" id="aclassllvm_1_1FunctionVarLocs_html_a30380ad7d229bc9d071528df22aa0f5b"><div class="ttname"><a href="classllvm_1_1FunctionVarLocs.html#a30380ad7d229bc9d071528df22aa0f5b">llvm::FunctionVarLocs::single_locs_begin</a></div><div class="ttdeci">const VarLocInfo * single_locs_begin() const</div><div class="ttdef"><b>Definition:</b> <a href="AssignmentTrackingAnalysis_8h_source.html#l00063">AssignmentTrackingAnalysis.h:63</a></div></div>
<div class="ttc" id="aAssignmentTrackingAnalysis_8cpp_html_ab92546698566638c36636ef95059aec8"><div class="ttname"><a href="AssignmentTrackingAnalysis_8cpp.html#ab92546698566638c36636ef95059aec8">getUntaggedStoreAssignmentInfo</a></div><div class="ttdeci">static std::optional&lt; at::AssignmentInfo &gt; getUntaggedStoreAssignmentInfo(const Instruction &amp;I, const DataLayout &amp;Layout)</div><div class="ttdef"><b>Definition:</b> <a href="AssignmentTrackingAnalysis_8cpp_source.html#l01811">AssignmentTrackingAnalysis.cpp:1811</a></div></div>
<div class="ttc" id="aclassllvm_1_1DebugVariable_html_a6bd8dc4b5ad70efa8152ae80ab392b2a"><div class="ttname"><a href="classllvm_1_1DebugVariable.html#a6bd8dc4b5ad70efa8152ae80ab392b2a">llvm::DebugVariable::getFragment</a></div><div class="ttdeci">std::optional&lt; FragmentInfo &gt; getFragment() const</div><div class="ttdef"><b>Definition:</b> <a href="DebugInfoMetadata_8h_source.html#l03759">DebugInfoMetadata.h:3759</a></div></div>
<div class="ttc" id="aInterval_8h_html"><div class="ttname"><a href="Interval_8h.html">Interval.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1sampleprof_html_a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41"><div class="ttname"><a href="namespacellvm_1_1sampleprof.html#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">llvm::sampleprof::Base</a></div><div class="ttdeci">@ Base</div><div class="ttdef"><b>Definition:</b> <a href="Discriminator_8h_source.html#l00058">Discriminator.h:58</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_a396fcfee6914c76974b73c3d203da6a5"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a396fcfee6914c76974b73c3d203da6a5">llvm::SmallVectorImpl::emplace_back</a></div><div class="ttdeci">reference emplace_back(ArgTypes &amp;&amp;... Args)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00941">SmallVector.h:941</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_a969eb757b1e43b455d4a8d0f603e695b"><div class="ttname"><a href="classllvm_1_1Function.html#a969eb757b1e43b455d4a8d0f603e695b">llvm::Function::size</a></div><div class="ttdeci">size_t size() const</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00756">Function.h:756</a></div></div>
<div class="ttc" id="aSmallSet_8h_html"><div class="ttname"><a href="SmallSet_8h.html">SmallSet.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html_a6bc6fb89fe2e91c25559a8631f56e27e"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">llvm::SmallPtrSetImpl::insert</a></div><div class="ttdeci">std::pair&lt; iterator, bool &gt; insert(PtrType Ptr)</div><div class="ttdoc">Inserts Ptr if and only if there is no element in the container equal to Ptr.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00365">SmallPtrSet.h:365</a></div></div>
<div class="ttc" id="aclassllvm_1_1DebugVariable_html_a90b7ea85a03be15ace66f601bf299322"><div class="ttname"><a href="classllvm_1_1DebugVariable.html#a90b7ea85a03be15ace66f601bf299322">llvm::DebugVariable::getInlinedAt</a></div><div class="ttdeci">const DILocation * getInlinedAt() const</div><div class="ttdef"><b>Definition:</b> <a href="DebugInfoMetadata_8h_source.html#l03760">DebugInfoMetadata.h:3760</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_a94d23373106467003722f7d6c17b1528"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a94d23373106467003722f7d6c17b1528">llvm::SmallVectorImpl::insert</a></div><div class="ttdeci">iterator insert(iterator I, T &amp;&amp;Elt)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00809">SmallVector.h:809</a></div></div>
<div class="ttc" id="aclassllvm_1_1PoisonValue_html_a1bf08613fb664a2e377a9a72c59a6b66"><div class="ttname"><a href="classllvm_1_1PoisonValue.html#a1bf08613fb664a2e377a9a72c59a6b66">llvm::PoisonValue::get</a></div><div class="ttdeci">static PoisonValue * get(Type *T)</div><div class="ttdoc">Static factory methods - Return an 'poison' object of the specified type.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01759">Constants.cpp:1759</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Aug 7 2023 09:51:32 for LLVM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
